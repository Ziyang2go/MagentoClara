!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.claraplayer=e():t.claraplayer=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r=window.webpackJsonp_name_;window.webpackJsonp_name_=function(e,n,a){for(var o,s,u=0,l=[];u<e.length;u++)s=e[u],i[s]&&l.push(i[s][0]),i[s]=0;for(o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);for(r&&r(e,n,a);l.length;)l.shift()()};var n={},i={1:0};return e.e=function(t){function r(){s.onerror=s.onload=null,clearTimeout(u);var e=i[t];0!==e&&(e&&e[1](new Error("Loading chunk "+t+" failed.")),i[t]=void 0)}var n=i[t];if(0===n)return new Promise(function(t){t()});if(n)return n[2];var a=new Promise(function(e,r){n=i[t]=[e,r]});n[2]=a;var o=document.getElementsByTagName("head")[0],s=document.createElement("script");s.type="text/javascript",s.charset="utf-8",s.async=!0,s.timeout=12e4,e.nc&&s.setAttribute("nonce",e.nc),s.src=e.p+""+({0:"configuratorui"}[t]||t)+"."+{0:"e6608b4bf0efd78b7841"}[t]+".min.js";var u=setTimeout(r,12e4);return s.onerror=s.onload=r,o.appendChild(s),a},e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e.oe=function(t){throw console.error(t),t},e(e.s=607)}([function(t,e,r){var n=r(11),i=r(97),a=r(35),o=r(57),s=r(45),u=function(t,e,r){var l,c,h,f,d=t&u.F,p=t&u.G,m=t&u.S,g=t&u.P,v=t&u.B,y=p?n:m?n[e]||(n[e]={}):(n[e]||{}).prototype,M=p?i:i[e]||(i[e]={}),w=M.prototype||(M.prototype={});p&&(r=e);for(l in r)c=!d&&y&&void 0!==y[l],h=(c?y:r)[l],f=v&&c?s(h,n):g&&"function"==typeof h?s(Function.call,h):h,y&&o(y,l,h,t&u.U),M[l]!=h&&a(M,l,f),g&&w[l]!=h&&(w[l]=h)};n.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,r){"use strict";function n(t,e){this.x=t||0,this.y=e||0}function i(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function a(t,e,r,n){this._x=t||0,this._y=e||0,this._z=r||0,this._w=void 0!==n?n:1}function o(t,e,r){this.x=t||0,this.y=e||0,this.z=r||0}function s(t,e,r,n){this.x=t||0,this.y=e||0,this.z=r||0,this.w=void 0!==n?n:1}function u(t,e,r){return void 0===e&&void 0===r?this.set(t):this.setRGB(t,e,r)}function l(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function c(t,e){this.center=void 0!==t?t:new o,this.radius=void 0!==e?e:0}function h(t,e){this.min=void 0!==t?t:new o(1/0,1/0,1/0),this.max=void 0!==e?e:new o(-1/0,-1/0,-1/0)}function f(t,e,r,n){this._x=t||0,this._y=e||0,this._z=r||0,this._order=n||f.DefaultOrder}function d(t,e){this.origin=void 0!==t?t:new o,this.direction=void 0!==e?e:new o}function p(t,e,r){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==r?r:0,this}function m(t,e){this.normal=void 0!==t?t:new o(1,0,0),this.constant=void 0!==e?e:0}Object.defineProperty(e,"__esModule",{value:!0}),n.prototype={constructor:n,isVector2:!0,get width(){return this.x},set width(t){this.x=t},get height(){return this.y},set height(t){this.y=t},set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(){var t,e;return function(r,i){return void 0===t&&(t=new n,e=new n),t.set(r,r),e.set(i,i),this.clamp(t,e)}}(),clampLength:function(t,e){var r=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,r))/r)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,r=this.y-t.y;return e*e+r*r},distanceToManhattan:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,r){return this.subVectors(e,t).multiplyScalar(r).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,r){return void 0!==r&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var r=Math.cos(e),n=Math.sin(e),i=this.x-t.x,a=this.y-t.y;return this.x=i*r-a*n+t.x,this.y=i*n+a*r+t.y,this}};var g={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=new Array(36),n=0;return function(){for(var i=0;i<36;i++)8===i||13===i||18===i||23===i?r[i]="-":14===i?r[i]="4":(n<=2&&(n=33554432+16777216*Math.random()|0),t=15&n,n>>=4,r[i]=e[19===i?3&t|8:t]);return r.join("")}}(),clamp:function(t,e,r){return Math.max(e,Math.min(r,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,r,n,i){return n+(t-e)*(i-n)/(r-e)},lerp:function(t,e,r){return(1-r)*t+r*e},smoothstep:function(t,e,r){return t<=e?0:t>=r?1:(t=(t-e)/(r-e))*t*(3-2*t)},smootherstep:function(t,e,r){return t<=e?0:t>=r?1:(t=(t-e)/(r-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*g.DEG2RAD},radToDeg:function(t){return t*g.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},nearestPowerOfTwo:function(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))},nextPowerOfTwo:function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}};i.prototype={constructor:i,isMatrix4:!0,set:function(t,e,r,n,i,a,o,s,u,l,c,h,f,d,p,m){var g=this.elements;return g[0]=t,g[4]=e,g[8]=r,g[12]=n,g[1]=i,g[5]=a,g[9]=o,g[13]=s,g[2]=u,g[6]=l,g[10]=c,g[14]=h,g[3]=f,g[7]=d,g[11]=p,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new i).fromArray(this.elements)},copy:function(t){return this.elements.set(t.elements),this},copyPosition:function(t){var e=this.elements,r=t.elements;return e[12]=r[12],e[13]=r[13],e[14]=r[14],this},extractBasis:function(t,e,r){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,r){return this.set(t.x,e.x,r.x,0,t.y,e.y,r.y,0,t.z,e.z,r.z,0,0,0,0,1),this},extractRotation:function(){var t;return function(e){void 0===t&&(t=new o);var r=this.elements,n=e.elements,i=1/t.setFromMatrixColumn(e,0).length(),a=1/t.setFromMatrixColumn(e,1).length(),s=1/t.setFromMatrixColumn(e,2).length();return r[0]=n[0]*i,r[1]=n[1]*i,r[2]=n[2]*i,r[4]=n[4]*a,r[5]=n[5]*a,r[6]=n[6]*a,r[8]=n[8]*s,r[9]=n[9]*s,r[10]=n[10]*s,this}}(),makeRotationFromEuler:function(t){!1===(t&&t.isEuler)&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,r=t.x,n=t.y,i=t.z,a=Math.cos(r),o=Math.sin(r),s=Math.cos(n),u=Math.sin(n),l=Math.cos(i),c=Math.sin(i);if("XYZ"===t.order){var h=a*l,f=a*c,d=o*l,p=o*c;e[0]=s*l,e[4]=-s*c,e[8]=u,e[1]=f+d*u,e[5]=h-p*u,e[9]=-o*s,e[2]=p-h*u,e[6]=d+f*u,e[10]=a*s}else if("YXZ"===t.order){var m=s*l,g=s*c,v=u*l,y=u*c;e[0]=m+y*o,e[4]=v*o-g,e[8]=a*u,e[1]=a*c,e[5]=a*l,e[9]=-o,e[2]=g*o-v,e[6]=y+m*o,e[10]=a*s}else if("ZXY"===t.order){var m=s*l,g=s*c,v=u*l,y=u*c;e[0]=m-y*o,e[4]=-a*c,e[8]=v+g*o,e[1]=g+v*o,e[5]=a*l,e[9]=y-m*o,e[2]=-a*u,e[6]=o,e[10]=a*s}else if("ZYX"===t.order){var h=a*l,f=a*c,d=o*l,p=o*c;e[0]=s*l,e[4]=d*u-f,e[8]=h*u+p,e[1]=s*c,e[5]=p*u+h,e[9]=f*u-d,e[2]=-u,e[6]=o*s,e[10]=a*s}else if("YZX"===t.order){var M=a*s,w=a*u,x=o*s,b=o*u;e[0]=s*l,e[4]=b-M*c,e[8]=x*c+w,e[1]=c,e[5]=a*l,e[9]=-o*l,e[2]=-u*l,e[6]=w*c+x,e[10]=M-b*c}else if("XZY"===t.order){var M=a*s,w=a*u,x=o*s,b=o*u;e[0]=s*l,e[4]=-c,e[8]=u*l,e[1]=M*c+b,e[5]=a*l,e[9]=w*c-x,e[2]=x*c-w,e[6]=o*l,e[10]=b*c+M}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){var e=this.elements,r=t.x,n=t.y,i=t.z,a=t.w,o=r+r,s=n+n,u=i+i,l=r*o,c=r*s,h=r*u,f=n*s,d=n*u,p=i*u,m=a*o,g=a*s,v=a*u;return e[0]=1-(f+p),e[4]=c-v,e[8]=h+g,e[1]=c+v,e[5]=1-(l+p),e[9]=d-m,e[2]=h-g,e[6]=d+m,e[10]=1-(l+f),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},lookAt:function(){var t,e,r;return function(n,i,a){void 0===t&&(t=new o,e=new o,r=new o);var s=this.elements;return r.subVectors(n,i).normalize(),0===r.lengthSq()&&(r.z=1),t.crossVectors(a,r).normalize(),0===t.lengthSq()&&(r.z+=1e-4,t.crossVectors(a,r).normalize()),e.crossVectors(r,t),s[0]=t.x,s[4]=e.x,s[8]=r.x,s[1]=t.y,s[5]=e.y,s[9]=r.y,s[2]=t.z,s[6]=e.z,s[10]=r.z,this}}(),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var r=t.elements,n=e.elements,i=this.elements,a=r[0],o=r[4],s=r[8],u=r[12],l=r[1],c=r[5],h=r[9],f=r[13],d=r[2],p=r[6],m=r[10],g=r[14],v=r[3],y=r[7],M=r[11],w=r[15],x=n[0],b=n[4],T=n[8],E=n[12],S=n[1],_=n[5],A=n[9],D=n[13],N=n[2],I=n[6],L=n[10],C=n[14],O=n[3],R=n[7],z=n[11],j=n[15];return i[0]=a*x+o*S+s*N+u*O,i[4]=a*b+o*_+s*I+u*R,i[8]=a*T+o*A+s*L+u*z,i[12]=a*E+o*D+s*C+u*j,i[1]=l*x+c*S+h*N+f*O,i[5]=l*b+c*_+h*I+f*R,i[9]=l*T+c*A+h*L+f*z,i[13]=l*E+c*D+h*C+f*j,i[2]=d*x+p*S+m*N+g*O,i[6]=d*b+p*_+m*I+g*R,i[10]=d*T+p*A+m*L+g*z,i[14]=d*E+p*D+m*C+g*j,i[3]=v*x+y*S+M*N+w*O,i[7]=v*b+y*_+M*I+w*R,i[11]=v*T+y*A+M*L+w*z,i[15]=v*E+y*D+M*C+w*j,this},multiplyToArray:function(t,e,r){var n=this.elements;return this.multiplyMatrices(t,e),r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(){var t;return function(e){void 0===t&&(t=new o);for(var r=0,n=e.count;r<n;r++)t.x=e.getX(r),t.y=e.getY(r),t.z=e.getZ(r),t.applyMatrix4(this),e.setXYZ(r,t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],r=t[4],n=t[8],i=t[12],a=t[1],o=t[5],s=t[9],u=t[13],l=t[2],c=t[6],h=t[10],f=t[14];return t[3]*(+i*s*c-n*u*c-i*o*h+r*u*h+n*o*f-r*s*f)+t[7]*(+e*s*f-e*u*h+i*a*h-n*a*f+n*u*l-i*s*l)+t[11]*(+e*u*c-e*o*f-i*a*c+r*a*f+i*o*l-r*u*l)+t[15]*(-n*o*l-e*s*c+e*o*h+n*a*c-r*a*h+r*s*l)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var r=this.elements,n=t.elements,i=n[0],a=n[1],o=n[2],s=n[3],u=n[4],l=n[5],c=n[6],h=n[7],f=n[8],d=n[9],p=n[10],m=n[11],g=n[12],v=n[13],y=n[14],M=n[15],w=d*y*h-v*p*h+v*c*m-l*y*m-d*c*M+l*p*M,x=g*p*h-f*y*h-g*c*m+u*y*m+f*c*M-u*p*M,b=f*v*h-g*d*h+g*l*m-u*v*m-f*l*M+u*d*M,T=g*d*c-f*v*c-g*l*p+u*v*p+f*l*y-u*d*y,E=i*w+a*x+o*b+s*T;if(0===E){var S="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(!0===e)throw new Error(S);return console.warn(S),this.identity()}var _=1/E;return r[0]=w*_,r[1]=(v*p*s-d*y*s-v*o*m+a*y*m+d*o*M-a*p*M)*_,r[2]=(l*y*s-v*c*s+v*o*h-a*y*h-l*o*M+a*c*M)*_,r[3]=(d*c*s-l*p*s-d*o*h+a*p*h+l*o*m-a*c*m)*_,r[4]=x*_,r[5]=(f*y*s-g*p*s+g*o*m-i*y*m-f*o*M+i*p*M)*_,r[6]=(g*c*s-u*y*s-g*o*h+i*y*h+u*o*M-i*c*M)*_,r[7]=(u*p*s-f*c*s+f*o*h-i*p*h-u*o*m+i*c*m)*_,r[8]=b*_,r[9]=(g*d*s-f*v*s-g*a*m+i*v*m+f*a*M-i*d*M)*_,r[10]=(u*v*s-g*l*s+g*a*h-i*v*h-u*a*M+i*l*M)*_,r[11]=(f*l*s-u*d*s-f*a*h+i*d*h+u*a*m-i*l*m)*_,r[12]=T*_,r[13]=(f*v*o-g*d*o+g*a*p-i*v*p-f*a*y+i*d*y)*_,r[14]=(g*l*o-u*v*o-g*a*c+i*v*c+u*a*y-i*l*y)*_,r[15]=(u*d*o-f*l*o+f*a*c-i*d*c-u*a*p+i*l*p)*_,this},scale:function(t){var e=this.elements,r=t.x,n=t.y,i=t.z;return e[0]*=r,e[4]*=n,e[8]*=i,e[1]*=r,e[5]*=n,e[9]*=i,e[2]*=r,e[6]*=n,e[10]*=i,e[3]*=r,e[7]*=n,e[11]*=i,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],r=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],n=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,r,n))},makeTranslation:function(t,e,r){return this.set(1,0,0,t,0,1,0,e,0,0,1,r,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),r=Math.sin(t);return this.set(1,0,0,0,0,e,-r,0,0,r,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),r=Math.sin(t);return this.set(e,0,r,0,0,1,0,0,-r,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),r=Math.sin(t);return this.set(e,-r,0,0,r,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var r=Math.cos(e),n=Math.sin(e),i=1-r,a=t.x,o=t.y,s=t.z,u=i*a,l=i*o;return this.set(u*a+r,u*o-n*s,u*s+n*o,0,u*o+n*s,l*o+r,l*s-n*a,0,u*s-n*o,l*s+n*a,i*s*s+r,0,0,0,0,1),this},makeScale:function(t,e,r){return this.set(t,0,0,0,0,e,0,0,0,0,r,0,0,0,0,1),this},makeShear:function(t,e,r){return this.set(1,e,r,0,t,1,r,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,r){return this.makeRotationFromQuaternion(e),this.scale(r),this.setPosition(t),this},decompose:function(){var t,e;return function(r,n,a){void 0===t&&(t=new o,e=new i);var s=this.elements,u=t.set(s[0],s[1],s[2]).length(),l=t.set(s[4],s[5],s[6]).length(),c=t.set(s[8],s[9],s[10]).length();this.determinant()<0&&(u=-u),r.x=s[12],r.y=s[13],r.z=s[14],e.elements.set(this.elements);var h=1/u,f=1/l,d=1/c;return e.elements[0]*=h,e.elements[1]*=h,e.elements[2]*=h,e.elements[4]*=f,e.elements[5]*=f,e.elements[6]*=f,e.elements[8]*=d,e.elements[9]*=d,e.elements[10]*=d,n.setFromRotationMatrix(e),a.x=u,a.y=l,a.z=c,this}}(),makePerspective:function(t,e,r,n,i,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*i/(e-t),u=2*i/(r-n),l=(e+t)/(e-t),c=(r+n)/(r-n),h=-(a+i)/(a-i),f=-2*a*i/(a-i);return o[0]=s,o[4]=0,o[8]=l,o[12]=0,o[1]=0,o[5]=u,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=f,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(t,e,r,n,i,a){var o=this.elements,s=1/(e-t),u=1/(r-n),l=1/(a-i),c=(e+t)*s,h=(r+n)*u,f=(a+i)*l;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*u,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*l,o[14]=-f,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(t){for(var e=this.elements,r=t.elements,n=0;n<16;n++)if(e[n]!==r[n])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var r=0;r<16;r++)this.elements[r]=t[r+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var r=this.elements;return t[e]=r[0],t[e+1]=r[1],t[e+2]=r[2],t[e+3]=r[3],t[e+4]=r[4],t[e+5]=r[5],t[e+6]=r[6],t[e+7]=r[7],t[e+8]=r[8],t[e+9]=r[9],t[e+10]=r[10],t[e+11]=r[11],t[e+12]=r[12],t[e+13]=r[13],t[e+14]=r[14],t[e+15]=r[15],t}},a.prototype={constructor:a,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get w(){return this._w},set w(t){this._w=t,this.onChangeCallback()},set:function(t,e,r,n){return this._x=t,this._y=e,this._z=r,this._w=n,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(!1===(t&&t.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var r=Math.cos(t._x/2),n=Math.cos(t._y/2),i=Math.cos(t._z/2),a=Math.sin(t._x/2),o=Math.sin(t._y/2),s=Math.sin(t._z/2),u=t.order;return"XYZ"===u?(this._x=a*n*i+r*o*s,this._y=r*o*i-a*n*s,this._z=r*n*s+a*o*i,this._w=r*n*i-a*o*s):"YXZ"===u?(this._x=a*n*i+r*o*s,this._y=r*o*i-a*n*s,this._z=r*n*s-a*o*i,this._w=r*n*i+a*o*s):"ZXY"===u?(this._x=a*n*i-r*o*s,this._y=r*o*i+a*n*s,this._z=r*n*s+a*o*i,this._w=r*n*i-a*o*s):"ZYX"===u?(this._x=a*n*i-r*o*s,this._y=r*o*i+a*n*s,this._z=r*n*s-a*o*i,this._w=r*n*i+a*o*s):"YZX"===u?(this._x=a*n*i+r*o*s,this._y=r*o*i+a*n*s,this._z=r*n*s-a*o*i,this._w=r*n*i-a*o*s):"XZY"===u&&(this._x=a*n*i-r*o*s,this._y=r*o*i-a*n*s,this._z=r*n*s+a*o*i,this._w=r*n*i+a*o*s),!1!==e&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var r=e/2,n=Math.sin(r);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(r),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e,r=t.elements,n=r[0],i=r[4],a=r[8],o=r[1],s=r[5],u=r[9],l=r[2],c=r[6],h=r[10],f=n+s+h;return f>0?(e=.5/Math.sqrt(f+1),this._w=.25/e,this._x=(c-u)*e,this._y=(a-l)*e,this._z=(o-i)*e):n>s&&n>h?(e=2*Math.sqrt(1+n-s-h),this._w=(c-u)/e,this._x=.25*e,this._y=(i+o)/e,this._z=(a+l)/e):s>h?(e=2*Math.sqrt(1+s-n-h),this._w=(a-l)/e,this._x=(i+o)/e,this._y=.25*e,this._z=(u+c)/e):(e=2*Math.sqrt(1+h-n-s),this._w=(o-i)/e,this._x=(a+l)/e,this._y=(u+c)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,e;return function(r,n){return void 0===t&&(t=new o),e=r.dot(n)+1,e<1e-6?(e=0,Math.abs(r.x)>Math.abs(r.z)?t.set(-r.y,r.x,0):t.set(0,-r.z,r.y)):t.crossVectors(r,n),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var r=t._x,n=t._y,i=t._z,a=t._w,o=e._x,s=e._y,u=e._z,l=e._w;return this._x=r*l+a*o+n*u-i*s,this._y=n*l+a*s+i*o-r*u,this._z=i*l+a*u+r*s-n*o,this._w=a*l-r*o-n*s-i*u,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var r=this._x,n=this._y,i=this._z,a=this._w,o=a*t._w+r*t._x+n*t._y+i*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=a,this._x=r,this._y=n,this._z=i,this;var s=Math.sqrt(1-o*o);if(Math.abs(s)<.001)return this._w=.5*(a+this._w),this._x=.5*(r+this._x),this._y=.5*(n+this._y),this._z=.5*(i+this._z),this;var u=Math.atan2(s,o),l=Math.sin((1-e)*u)/s,c=Math.sin(e*u)/s;return this._w=a*l+this._w*c,this._x=r*l+this._x*c,this._y=n*l+this._y*c,this._z=i*l+this._z*c,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}},Object.assign(a,{slerp:function(t,e,r,n){return r.copy(t).slerp(e,n)},slerpFlat:function(t,e,r,n,i,a,o){var s=r[n+0],u=r[n+1],l=r[n+2],c=r[n+3],h=i[a+0],f=i[a+1],d=i[a+2],p=i[a+3];if(c!==p||s!==h||u!==f||l!==d){var m=1-o,g=s*h+u*f+l*d+c*p,v=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){var M=Math.sqrt(y),w=Math.atan2(M,g*v);m=Math.sin(m*w)/M,o=Math.sin(o*w)/M}var x=o*v;if(s=s*m+h*x,u=u*m+f*x,l=l*m+d*x,c=c*m+p*x,m===1-o){var b=1/Math.sqrt(s*s+u*u+l*l+c*c);s*=b,u*=b,l*=b,c*=b}}t[e]=s,t[e+1]=u,t[e+2]=l,t[e+3]=c}}),o.prototype={constructor:o,isVector3:!0,set:function(t,e,r){return this.x=t,this.y=e,this.z=r,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(){var t;return function(e){return!1===(e&&e.isEuler)&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),void 0===t&&(t=new a),this.applyQuaternion(t.setFromEuler(e))}}(),applyAxisAngle:function(){var t;return function(e,r){return void 0===t&&(t=new a),this.applyQuaternion(t.setFromAxisAngle(e,r))}}(),applyMatrix3:function(t){var e=this.x,r=this.y,n=this.z,i=t.elements;return this.x=i[0]*e+i[3]*r+i[6]*n,this.y=i[1]*e+i[4]*r+i[7]*n,this.z=i[2]*e+i[5]*r+i[8]*n,this},applyMatrix4:function(t){var e=this.x,r=this.y,n=this.z,i=t.elements;this.x=i[0]*e+i[4]*r+i[8]*n+i[12],this.y=i[1]*e+i[5]*r+i[9]*n+i[13],this.z=i[2]*e+i[6]*r+i[10]*n+i[14];var a=i[3]*e+i[7]*r+i[11]*n+i[15];return this.divideScalar(a)},applyQuaternion:function(t){var e=this.x,r=this.y,n=this.z,i=t.x,a=t.y,o=t.z,s=t.w,u=s*e+a*n-o*r,l=s*r+o*e-i*n,c=s*n+i*r-a*e,h=-i*e-a*r-o*n;return this.x=u*s+h*-i+l*-o-c*-a,this.y=l*s+h*-a+c*-i-u*-o,this.z=c*s+h*-o+u*-a-l*-i,this},project:function(){var t;return function(e){return void 0===t&&(t=new i),t.multiplyMatrices(e.projectionMatrix,t.getInverse(e.matrixWorld)),this.applyMatrix4(t)}}(),unproject:function(){var t;return function(e){return void 0===t&&(t=new i),t.multiplyMatrices(e.matrixWorld,t.getInverse(e.projectionMatrix)),this.applyMatrix4(t)}}(),transformDirection:function(t){var e=this.x,r=this.y,n=this.z,i=t.elements;return this.x=i[0]*e+i[4]*r+i[8]*n,this.y=i[1]*e+i[5]*r+i[9]*n,this.z=i[2]*e+i[6]*r+i[10]*n,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(){var t,e;return function(r,n){return void 0===t&&(t=new o,e=new o),t.set(r,r,r),e.set(n,n,n),this.clamp(t,e)}}(),clampLength:function(t,e){var r=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,r))/r)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,r){return this.subVectors(e,t).multiplyScalar(r).add(t)},cross:function(t,e){if(void 0!==e)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e);var r=this.x,n=this.y,i=this.z;return this.x=n*t.z-i*t.y,this.y=i*t.x-r*t.z,this.z=r*t.y-n*t.x,this},crossVectors:function(t,e){var r=t.x,n=t.y,i=t.z,a=e.x,o=e.y,s=e.z;return this.x=n*s-i*o,this.y=i*a-r*s,this.z=r*o-n*a,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(){var t;return function(e){return void 0===t&&(t=new o),t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t;return function(e){return void 0===t&&(t=new o),this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(g.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,r=this.y-t.y,n=this.z-t.z;return e*e+r*r+n*n},distanceToManhattan:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){var e=Math.sin(t.phi)*t.radius;return this.x=e*Math.sin(t.theta),this.y=Math.cos(t.phi)*t.radius,this.z=e*Math.cos(t.theta),this},setFromCylindrical:function(t){return this.x=t.radius*Math.sin(t.theta),this.y=t.y,this.z=t.radius*Math.cos(t.theta),this},setFromMatrixPosition:function(t){return this.setFromMatrixColumn(t,3)},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),r=this.setFromMatrixColumn(t,1).length(),n=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=r,this.z=n,this},setFromMatrixColumn:function(t,e){if("number"==typeof t){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var r=t;t=e,e=r}return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,r){return void 0!==r&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}},s.prototype={constructor:s,isVector4:!0,set:function(t,e,r,n){return this.x=t,this.y=e,this.z=r,this.w=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t,this.w*=t):(this.x=0,this.y=0,this.z=0,this.w=0),this},applyMatrix4:function(t){var e=this.x,r=this.y,n=this.z,i=this.w,a=t.elements;return this.x=a[0]*e+a[4]*r+a[8]*n+a[12]*i,this.y=a[1]*e+a[5]*r+a[9]*n+a[13]*i,this.z=a[2]*e+a[6]*r+a[10]*n+a[14]*i,this.w=a[3]*e+a[7]*r+a[11]*n+a[15]*i,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,r,n,i,a=t.elements,o=a[0],s=a[4],u=a[8],l=a[1],c=a[5],h=a[9],f=a[2],d=a[6],p=a[10];if(Math.abs(s-l)<.01&&Math.abs(u-f)<.01&&Math.abs(h-d)<.01){if(Math.abs(s+l)<.1&&Math.abs(u+f)<.1&&Math.abs(h+d)<.1&&Math.abs(o+c+p-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var m=(o+1)/2,g=(c+1)/2,v=(p+1)/2,y=(s+l)/4,M=(u+f)/4,w=(h+d)/4;return m>g&&m>v?m<.01?(r=0,n=.707106781,i=.707106781):(r=Math.sqrt(m),n=y/r,i=M/r):g>v?g<.01?(r=.707106781,n=0,i=.707106781):(n=Math.sqrt(g),r=y/n,i=w/n):v<.01?(r=.707106781,n=.707106781,i=0):(i=Math.sqrt(v),r=M/i,n=w/i),this.set(r,n,i,e),this}var x=Math.sqrt((d-h)*(d-h)+(u-f)*(u-f)+(l-s)*(l-s));return Math.abs(x)<.001&&(x=1),this.x=(d-h)/x,this.y=(u-f)/x,this.z=(l-s)/x,this.w=Math.acos((o+c+p-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(){var t,e;return function(r,n){return void 0===t&&(t=new s,e=new s),t.set(r,r,r,r),e.set(n,n,n,n),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,r){return this.subVectors(e,t).multiplyScalar(r).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,r){return void 0!==r&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}},u.prototype={constructor:u,isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,r){return this.r=t,this.g=e,this.b=r,this},setHSL:function(){function t(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+6*(e-t)*(2/3-r):t}return function(e,r,n){if(e=g.euclideanModulo(e,1),r=g.clamp(r,0,1),n=g.clamp(n,0,1),0===r)this.r=this.g=this.b=n;else{var i=n<=.5?n*(1+r):n+r-n*r,a=2*n-i;this.r=t(a,i,e+1/3),this.g=t(a,i,e),this.b=t(a,i,e-1/3)}return this}}(),setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var r;if(r=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var n,i=r[1],a=r[2];switch(i){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,e(n[5]),this;if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,e(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var o=parseFloat(n[1])/360,s=parseInt(n[2],10)/100,u=parseInt(n[3],10)/100;return e(n[5]),this.setHSL(o,s,u)}}}else if(r=/^\#([A-Fa-f0-9]+)$/.exec(t)){var l=r[1],c=l.length;if(3===c)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}if(t&&t.length>0){var l=v[t];void 0!==l?this.setHex(l):console.warn("THREE.Color: Unknown color "+t)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var r=e>0?1/e:1;return this.r=Math.pow(t.r,r),this.g=Math.pow(t.g,r),this.b=Math.pow(t.b,r),this},convertGammaToLinear:function(){var t=this.r,e=this.g,r=this.b;return this.r=t*t,this.g=e*e,this.b=r*r,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){var e,r,n=t||{h:0,s:0,l:0},i=this.r,a=this.g,o=this.b,s=Math.max(i,a,o),u=Math.min(i,a,o),l=(u+s)/2;if(u===s)e=0,r=0;else{var c=s-u;switch(r=l<=.5?c/(s+u):c/(2-s-u),s){case i:e=(a-o)/c+(a<o?6:0);break;case a:e=(o-i)/c+2;break;case o:e=(i-a)/c+4}e/=6}return n.h=e,n.s=r,n.l=l,n},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,r){var n=this.getHSL();return n.h+=t,n.s+=e,n.l+=r,this.setHSL(n.h,n.s,n.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}};var v={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};l.prototype={constructor:l,isMatrix3:!0,set:function(t,e,r,n,i,a,o,s,u){var l=this.elements;return l[0]=t,l[1]=n,l[2]=o,l[3]=e,l[4]=i,l[5]=s,l[6]=r,l[7]=a,l[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=t.elements;return this.set(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]),this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(){var t;return function(e){void 0===t&&(t=new o);for(var r=0,n=e.count;r<n;r++)t.x=e.getX(r),t.y=e.getY(r),t.z=e.getZ(r),t.applyMatrix3(this),e.setXYZ(r,t.x,t.y,t.z);return e}}(),multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],o=t[5],s=t[6],u=t[7],l=t[8];return e*a*l-e*o*u-r*i*l+r*o*s+n*i*u-n*a*s},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var r=t.elements,n=this.elements,i=r[0],a=r[1],o=r[2],s=r[3],u=r[4],l=r[5],c=r[6],h=r[7],f=r[8],d=f*u-l*h,p=l*c-f*s,m=h*s-u*c,g=i*d+a*p+o*m;if(0===g){var v="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(!0===e)throw new Error(v);return console.warn(v),this.identity()}var y=1/g;return n[0]=d*y,n[1]=(o*h-f*a)*y,n[2]=(l*a-o*u)*y,n[3]=p*y,n[4]=(f*i-o*c)*y,n[5]=(o*s-l*i)*y,n[6]=m*y,n[7]=(a*c-h*i)*y,n[8]=(u*i-a*s)*y,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},fromArray:function(t,e){void 0===e&&(e=0);for(var r=0;r<9;r++)this.elements[r]=t[r+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var r=this.elements;return t[e]=r[0],t[e+1]=r[1],t[e+2]=r[2],t[e+3]=r[3],t[e+4]=r[4],t[e+5]=r[5],t[e+6]=r[6],t[e+7]=r[7],t[e+8]=r[8],t}},c.prototype={constructor:c,set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(){var t=new h;return function(e,r){var n=this.center;void 0!==r?n.copy(r):t.setFromPoints(e).getCenter(n);for(var i=0,a=0,o=e.length;a<o;a++)i=Math.max(i,n.distanceToSquared(e[a]));return this.radius=Math.sqrt(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(this.center.dot(t.normal)-t.constant)<=this.radius},clampPoint:function(t,e){var r=this.center.distanceToSquared(t),n=e||new o;return n.copy(t),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n},getBoundingBox:function(t){var e=t||new h;return e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}},h.prototype={constructor:h,isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,r=1/0,n=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,u=t.length;s<u;s+=3){var l=t[s],c=t[s+1],h=t[s+2];l<e&&(e=l),c<r&&(r=c),h<n&&(n=h),l>i&&(i=l),c>a&&(a=c),h>o&&(o=h)}this.min.set(e,r,n),this.max.set(i,a,o)},setFromBufferAttribute:function(t){for(var e=1/0,r=1/0,n=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,u=t.count;s<u;s++){var l=t.getX(s),c=t.getY(s),h=t.getZ(s);l<e&&(e=l),c<r&&(r=c),h<n&&(n=h),l>i&&(i=l),c>a&&(a=c),h>o&&(o=h)}this.min.set(e,r,n),this.max.set(i,a,o)},setFromPoints:function(t){this.makeEmpty();for(var e=0,r=t.length;e<r;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new o;return function(e,r){var n=t.copy(r).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}}(),setFromObject:function(){var t=new o;return function(e){var r=this;return e.updateMatrixWorld(!0),this.makeEmpty(),e.traverse(function(e){var n,i,a=e.geometry;if(void 0!==a)if(a.isGeometry){var o=a.vertices;for(n=0,i=o.length;n<i;n++)t.copy(o[n]),t.applyMatrix4(e.matrixWorld),r.expandByPoint(t)}else if(a.isBufferGeometry){var s=a.attributes.position;if(void 0!==s)for(n=0,i=s.count;n<i;n++)t.fromBufferAttribute(s,n).applyMatrix4(e.matrixWorld),r.expandByPoint(t)}}),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){var e=t||new o;return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){var e=t||new o;return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return(e||new o).set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(){var t;return function(e){return void 0===t&&(t=new o),this.clampPoint(e.center,t),t.distanceToSquared(e.center)<=e.radius*e.radius}}(),intersectsPlane:function(t){var e,r;return t.normal.x>0?(e=t.normal.x*this.min.x,r=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,r=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,r+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,r+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,r+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,r+=t.normal.z*this.min.z),e<=t.constant&&r>=t.constant},clampPoint:function(t,e){return(e||new o).copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new o;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),getBoundingSphere:function(){var t=new o;return function(e){var r=e||new c;return this.getCenter(r.center),r.radius=.5*this.getSize(t).length(),r}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var t=[new o,new o,new o,new o,new o,new o,new o,new o];return function(e){return this.isEmpty()?this:(t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(t),this)}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},f.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],f.DefaultOrder="XYZ",f.prototype={constructor:f,isEuler:!0,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get order(){return this._order},set order(t){this._order=t,this.onChangeCallback()},set:function(t,e,r,n){return this._x=t,this._y=e,this._z=r,this._order=n||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,r){var n=g.clamp,i=t.elements,a=i[0],o=i[4],s=i[8],u=i[1],l=i[5],c=i[9],h=i[2],f=i[6],d=i[10];return e=e||this._order,"XYZ"===e?(this._y=Math.asin(n(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(f,l),this._z=0)):"YXZ"===e?(this._x=Math.asin(-n(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(s,d),this._z=Math.atan2(u,l)):(this._y=Math.atan2(-h,a),this._z=0)):"ZXY"===e?(this._x=Math.asin(n(f,-1,1)),Math.abs(f)<.99999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(u,a))):"ZYX"===e?(this._y=Math.asin(-n(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(f,d),this._z=Math.atan2(u,a)):(this._x=0,this._z=Math.atan2(-o,l))):"YZX"===e?(this._z=Math.asin(n(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-h,a)):(this._x=0,this._y=Math.atan2(s,d))):"XZY"===e?(this._z=Math.asin(-n(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(f,l),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-c,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==r&&this.onChangeCallback(),this},setFromQuaternion:function(){var t;return function(e,r,n){return void 0===t&&(t=new i),t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,r,n)}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(){var t=new a;return function(e){return t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new o(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}},d.prototype={constructor:d,set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return(e||new o).copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(){var t=new o;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(t,e){var r=e||new o;r.subVectors(t,this.origin);var n=r.dot(this.direction);return n<0?r.copy(this.origin):r.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(){var t=new o;return function(e){var r=t.subVectors(e,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(e):(t.copy(this.direction).multiplyScalar(r).add(this.origin),t.distanceToSquared(e))}}(),distanceSqToSegment:function(){var t=new o,e=new o,r=new o;return function(n,i,a,o){t.copy(n).add(i).multiplyScalar(.5),e.copy(i).sub(n).normalize(),r.copy(this.origin).sub(t);var s,u,l,c,h=.5*n.distanceTo(i),f=-this.direction.dot(e),d=r.dot(this.direction),p=-r.dot(e),m=r.lengthSq(),g=Math.abs(1-f*f);if(g>0)if(s=f*p-d,u=f*d-p,c=h*g,s>=0)if(u>=-c)if(u<=c){var v=1/g;s*=v,u*=v,l=s*(s+f*u+2*d)+u*(f*s+u+2*p)+m}else u=h,s=Math.max(0,-(f*u+d)),l=-s*s+u*(u+2*p)+m;else u=-h,s=Math.max(0,-(f*u+d)),l=-s*s+u*(u+2*p)+m;else u<=-c?(s=Math.max(0,-(-f*h+d)),u=s>0?-h:Math.min(Math.max(-h,-p),h),l=-s*s+u*(u+2*p)+m):u<=c?(s=0,u=Math.min(Math.max(-h,-p),h),l=u*(u+2*p)+m):(s=Math.max(0,-(f*h+d)),u=s>0?h:Math.min(Math.max(-h,-p),h),l=-s*s+u*(u+2*p)+m);else u=f>0?-h:h,s=Math.max(0,-(f*u+d)),l=-s*s+u*(u+2*p)+m;return a&&a.copy(this.direction).multiplyScalar(s).add(this.origin),o&&o.copy(e).multiplyScalar(u).add(t),l}}(),intersectSphere:function(){var t=new o;return function(e,r){t.subVectors(e.center,this.origin);var n=t.dot(this.direction),i=t.dot(t)-n*n,a=e.radius*e.radius;if(i>a)return null;var o=Math.sqrt(a-i),s=n-o,u=n+o;return s<0&&u<0?null:s<0?this.at(u,r):this.at(s,r)}}(),intersectsSphere:function(t){return this.distanceToPoint(t.center)<=t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var r=-(this.origin.dot(t.normal)+t.constant)/e;return r>=0?r:null},intersectPlane:function(t,e){var r=this.distanceToPlane(t);return null===r?null:this.at(r,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0},intersectBox:function(t,e){var r,n,i,a,o,s,u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,h=this.origin;return u>=0?(r=(t.min.x-h.x)*u,n=(t.max.x-h.x)*u):(r=(t.max.x-h.x)*u,n=(t.min.x-h.x)*u),l>=0?(i=(t.min.y-h.y)*l,a=(t.max.y-h.y)*l):(i=(t.max.y-h.y)*l,a=(t.min.y-h.y)*l),r>a||i>n?null:((i>r||r!==r)&&(r=i),(a<n||n!==n)&&(n=a),c>=0?(o=(t.min.z-h.z)*c,s=(t.max.z-h.z)*c):(o=(t.max.z-h.z)*c,s=(t.min.z-h.z)*c),r>s||o>n?null:((o>r||r!==r)&&(r=o),(s<n||n!==n)&&(n=s),n<0?null:this.at(r>=0?r:n,e)))},intersectsBox:function(){var t=new o;return function(e){return null!==this.intersectBox(e,t)}}(),intersectTriangle:function(){var t=new o,e=new o,r=new o,n=new o;return function(i,a,o,s,u){e.subVectors(a,i),r.subVectors(o,i),n.crossVectors(e,r);var l,c=this.direction.dot(n);if(c>0){if(s)return null;l=1}else{if(!(c<0))return null;l=-1,c=-c}t.subVectors(this.origin,i);var h=l*this.direction.dot(r.crossVectors(t,r));if(h<0)return null;var f=l*this.direction.dot(e.cross(t));if(f<0)return null;if(h+f>c)return null;var d=-l*t.dot(n);return d<0?null:this.at(d/c,u)}}(),applyMatrix4:function(t){return this.direction.add(this.origin).applyMatrix4(t),this.origin.applyMatrix4(t),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}},p.prototype={constructor:p,set:function(t,e,r){return this.radius=t,this.phi=e,this.theta=r,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(t){return this.radius=t.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t.x,t.z),this.phi=Math.acos(g.clamp(t.y/this.radius,-1,1))),this}},m.prototype={constructor:m,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,r,n){return this.normal.set(t,e,r),this.constant=n,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new o,e=new o;return function(r,n,i){var a=t.subVectors(i,n).cross(e.subVectors(r,n)).normalize();return this.setFromNormalAndCoplanarPoint(a,r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return this.orthoPoint(t,e).sub(t).negate()},orthoPoint:function(t,e){var r=this.distanceToPoint(t);return(e||new o).copy(this.normal).multiplyScalar(r)},intersectLine:function(){var t=new o;return function(e,r){var n=r||new o,i=e.delta(t),a=this.normal.dot(i);if(0!==a){var s=-(e.start.dot(this.normal)+this.constant)/a;if(!(s<0||s>1))return n.copy(i).multiplyScalar(s).add(e.start)}else if(0===this.distanceToPoint(e.start))return n.copy(e.start)}}(),intersectsLine:function(t){var e=this.distanceToPoint(t.start),r=this.distanceToPoint(t.end);return e<0&&r>0||r<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return(t||new o).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new o,e=new l;return function(r,n){var i=this.coplanarPoint(t).applyMatrix4(r),a=n||e.getNormalMatrix(r),o=this.normal.applyMatrix3(a).normalize();return this.constant=-i.dot(o),this}}(),translate:function(t){return this.constant=this.constant-t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}};var y={LEFT:0,MIDDLE:1,RIGHT:2};n.InstanceScalarSize=2,o.InstanceScalarSize=3,s.InstanceScalarSize=4,u.InstanceScalarSize=3,a.InstanceScalarSize=4,l.InstanceScalarSize=9,i.InstanceScalarSize=16,u.prototype.toJSON=function(){return{r:this.r,g:this.g,b:this.b}},e.Matrix4=i,e.Matrix3=l,e.Vector2=n,e.Vector3=o,e.Vector4=s,e.Quaternion=a,e.Color=u,e.Box3=h,e.Euler=f,e.Math=g,e.Ray=d,e.Spherical=p,e.Sphere=c,e.Plane=m,e.REVISION="84dev",e.MOUSE=y,e.CullFaceNone=0,e.CullFaceBack=1,e.CullFaceFront=2,e.CullFaceFrontBack=3,e.FrontFaceDirectionCW=0,e.FrontFaceDirectionCCW=1,e.BasicShadowMap=0,e.PCFShadowMap=1,e.PCFSoftShadowMap=2,e.PCSSSoftShadowMap=3,e.FrontSide=0,e.BackSide=1,e.DoubleSide=2,e.FlatShading=1,e.SmoothShading=2,e.NoColors=0,e.FaceColors=1,e.VertexColors=2,e.NoBlending=0,e.NormalBlending=1,e.AdditiveBlending=2,e.SubtractiveBlending=3,e.MultiplyBlending=4,e.CustomBlending=5,e.AddEquation=100,e.SubtractEquation=101,e.ReverseSubtractEquation=102,e.MinEquation=103,e.MaxEquation=104,e.ZeroFactor=200,e.OneFactor=201,e.SrcColorFactor=202,e.OneMinusSrcColorFactor=203,e.SrcAlphaFactor=204,e.OneMinusSrcAlphaFactor=205,e.DstAlphaFactor=206,e.OneMinusDstAlphaFactor=207,e.DstColorFactor=208,e.OneMinusDstColorFactor=209,e.SrcAlphaSaturateFactor=210,e.NeverDepth=0,e.AlwaysDepth=1,e.LessDepth=2,e.LessEqualDepth=3,e.EqualDepth=4,e.GreaterEqualDepth=5,e.GreaterDepth=6,e.NotEqualDepth=7,e.MultiplyOperation=0,e.MixOperation=1,e.AddOperation=2,e.NoToneMapping=0,e.LinearToneMapping=1,e.ReinhardToneMapping=2,e.Uncharted2ToneMapping=3,e.CineonToneMapping=4,e.UVMapping=300,e.CubeReflectionMapping=301,e.CubeRefractionMapping=302,e.EquirectangularReflectionMapping=303,e.EquirectangularRefractionMapping=304,e.SphericalReflectionMapping=305,e.CubeUVReflectionMapping=306,e.CubeUVRefractionMapping=307,e.RepeatWrapping=1e3,e.ClampToEdgeWrapping=1001,e.MirroredRepeatWrapping=1002,e.NearestFilter=1003,e.NearestMipMapNearestFilter=1004,e.NearestMipMapLinearFilter=1005,e.LinearFilter=1006,e.LinearMipMapNearestFilter=1007,e.LinearMipMapLinearFilter=1008,e.UnsignedByteType=1009,e.ByteType=1010,e.ShortType=1011,e.UnsignedShortType=1012,e.IntType=1013,e.UnsignedIntType=1014,e.FloatType=1015,e.HalfFloatType=1016,e.UnsignedShort4444Type=1017,e.UnsignedShort5551Type=1018,e.UnsignedShort565Type=1019,e.UnsignedInt248Type=1020,e.AlphaFormat=1021,e.RGBFormat=1022,e.RGBAFormat=1023,e.LuminanceFormat=1024,e.LuminanceAlphaFormat=1025,e.RGBEFormat=1023,e.DepthFormat=1026,e.DepthStencilFormat=1027,e.RGB_S3TC_DXT1_Format=2001,e.RGBA_S3TC_DXT1_Format=2002,e.RGBA_S3TC_DXT3_Format=2003,e.RGBA_S3TC_DXT5_Format=2004,e.RGB_PVRTC_4BPPV1_Format=2100,e.RGB_PVRTC_2BPPV1_Format=2101,e.RGBA_PVRTC_4BPPV1_Format=2102,e.RGBA_PVRTC_2BPPV1_Format=2103,e.RGB_ETC1_Format=2151,e.LoopOnce=2200,e.LoopRepeat=2201,e.LoopPingPong=2202,e.InterpolateDiscrete=2300,e.InterpolateLinear=2301,e.InterpolateSmooth=2302,e.ZeroCurvatureEnding=2400,e.ZeroSlopeEnding=2401,e.WrapAroundEnding=2402,e.TrianglesDrawMode=0,e.TriangleStripDrawMode=1,e.TriangleFanDrawMode=2,e.LinearEncoding=3e3,e.sRGBEncoding=3001,e.GammaEncoding=3007,e.RGBEEncoding=3002,e.LogLuvEncoding=3003,e.RGBM7Encoding=3004,e.RGBM16Encoding=3005,e.RGBDEncoding=3006,e.BasicDepthPacking=3200,e.RGBADepthPacking=3201},function(t,e,r){t.exports={default:r(417),__esModule:!0}},function(t,e,r){"use strict";function n(t){return{type:Ot,payload:t}}function i(t,e){return r.i(Nt.g)({tool:t,enabled:!0},e)}function a(t){return r.i(Nt.h)(t)}function o(t){return r.i(Nt.a)(t,{display:{playerTools:!0}})}function s(t){return r.i(Nt.a)(t,{display:{playerTools:!1}})}function u(t,e){return{type:UPDATE_COMMAND_OPTIONS,payload:{name:t,options:e}}}function l(t){return t.getIn(["player","rect"])}function c(t){return{type:Pt,payload:t}}function h(t){return function(e){e.dispatch({type:zt,payload:t});var n=b(e);if(n){var i=r.i(wt.a)(e,{id:n,evalPlug:"Camera"});i&&(i.newAngleAttrs=t),e.dispatch(r.i(bt.b)(n))}}}function f(t){return t.getIn(["player","camera"])}function d(t){return r.i(wt.b)(t,b(t))}function p(t){return function(e){return e.dispatch(r.i(wt.c)({scene:!0,plug:"Player",property:"camera"},t))}}function m(t){return function(e){if(t){var n=e.getIn(["player","activeCamera"]),i=r.i(wt.a)(e,{plug:"Player",property:"vrCamera"})||bt.c;e.dispatch(g(bt.d,n));var a=e.get("sceneGraph"),o=a.nodes[i],s=a.nodes[bt.d],u=r.i(bt.e)(o),l=pt()({},u.plugs);return e.dispatch(r.i(bt.f)(bt.d,pt()(s,{plugs:l})))}var c=e.getIn(["player","prevCamera"])||bt.c;return e.dispatch(g(c,null))}}function g(t,e){return function(n){var i=r.i(Dt.a)(n,e),a=r.i(wt.a)(n,{id:e,evalPlug:"Camera"}),o=r.i(wt.a)(n,{id:e,evalPlug:"Transform"});o&&!o.target&&(a.targetWorldMatrix=i);var s=r.i(wt.a)(n,{id:t,evalPlug:"Camera"});s.targetWorldMatrix&&(n.dispatch(r.i(bt.g)([bt.h,"Transform",0],r.i(At.a)(s.targetWorldMatrix))),s.targetWorldMatrix=null),n.dispatch({type:Rt,payload:{id:t,prevCameraId:e}})}}function v(t){return{type:Jt,payload:t}}function y(t){return t.getIn(["player","threeObjects"]).toJS()}function M(t){return t.getIn(["player","threeObjects","scene"])}function w(t){return t.getIn(["player","threeObjects","camera"])}function x(t){var e=M(t);return r.i(Et.a)(e)}function b(t){return t.getIn(["player","activeCamera"])||bt.c}function T(t){return{type:jt,payload:t}}function E(t){return{initialCameraWorldMatrix:t.getIn(["player","initialCameraWorldMatrix"]),initialTargetWorldMatrix:t.getIn(["player","initialTargetWorldMatrix"])}}function S(){return function(t){var e=t.getIn(["player","playerElement"]);["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"].forEach(function(t){if(e[t])return e[t]()}),t.dispatch({type:Gt})}}function _(){return function(t){return["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"].forEach(function(t){if(document[t])return document[t]()}),t.dispatch({type:Yt})}}function A(){return function(t){return t.dispatch(D(t)?_():S())}}function D(t){return t.getIn(["player","fullScreen"])}function N(t){return function(e){D(e)!==t&&e.dispatch({type:Ht,payload:t}),!t&&L(e)&&e.dispatch(r.i(Nt.f)("vrSettings"))}}function I(t){return t.getIn(["player","renderingMode"])}function L(t){return t.getIn(["player","renderingMode"])===It.vr}function C(t){return t.getIn(["player","renderingMode"])===It.lenticular}function O(t){var e=t.fullscreen,r=t.trackDevice;return function(t){e&&t.dispatch(S());var n=b(t);t.dispatch({type:qt,payload:{trackDevice:r,cameraId:n}})}}function R(){return{type:Xt}}function z(t){if(!It[t])throw new Error("Invalid Render Mode: "+t);return{type:Qt,payload:t}}function j(){return{type:Zt,payload:!0}}function P(){return{type:Zt,payload:!1}}function U(){return function(t){console.log("toggle device tracking",!B(t)),t.dispatch(B(t)?P():j())}}function B(t){return t.getIn(["player","deviceTracking"])}function V(t,e){return{type:kt,payload:{playerEl:t,canvasEl:e}}}function F(t){return{type:Vt,payload:t}}function k(t){return{type:Ft,payload:t}}function G(t){return{type:Kt,payload:t}}function Y(t){return t.getIn(["player","activeColor"])}function H(t){return t.getIn(["player","hoverColor"])}function Q(t){return t.getIn(["player","fullscreenBackgroundColor"])}function W(t,e,r,n,i,a){var o=new vt.Vector3,s=new vt.Quaternion,u=new vt.Vector3(1,1,1);t.decompose(o,s,u);var l=new vt.Vector3,c=new vt.Quaternion;e.decompose(l,c,u);var h=(new vt.Vector3).setFromMatrixPosition(r),f=h.distanceTo(o),d=(new vt.Vector3).subVectors(o,h).normalize(),p=(new vt.Vector3).setFromMatrixPosition(n),m=p.distanceTo(l),g=(new vt.Vector3).subVectors(l,p).normalize(),v=new vt.Quaternion(0,0,0,1),y=(new vt.Quaternion).setFromUnitVectors(d,g),M=(new vt.Quaternion).setFromUnitVectors(i,a),w=new vt.Vector3,x=new vt.Vector3,b=new vt.Vector3,T=new vt.Vector3,E=new vt.Quaternion,S=new vt.Quaternion,_=new vt.Matrix4;return function(t,e,r,n){var a=t/n;w.lerpVectors(h,p,a),vt.Quaternion.slerp(v,y,E,a),x.copy(d).applyQuaternion(E);var o=f*(1-a)+m*a;return T.copy(w).addScaledVector(x,o),vt.Quaternion.slerp(v,M,S,a),b.copy(i).applyQuaternion(S),_.lookAt(T,w,b).setPosition(T),_}}function X(t,e){return function(n){var i=b(n);if(i&&t){var a=ft.a.resolve(),o=r.i(wt.d)(n,{id:i,plug:"Transform",property:"target"}),s=!1;if(o&&r.i(wt.a)(n,{id:i,plug:"Camera",property:"targeted"})){r.i(wt.a)(n,o)&&(a=n.dispatch(r.i(wt.c)({id:i,plug:"Camera",property:"targeted"},!1)),s=!0)}var u=r.i(wt.a)(n,{id:i,plug:"Camera",property:"fieldOfView"}),l=r.i(wt.a)(n,{id:t,plug:"Camera",property:"fieldOfView"});return a.then(function(){var a=r.i(wt.b)(n,i),o=r.i(Dt.a)(n,i),c=r.i(wt.a)(n,{id:i,evalPlug:"Camera"}).upPosition,h=r.i(St.a)(n,!1,t),f=h.camera,d=h.target,m=h.upPosition,g=e||300;return new ft.a(function(e,h){n.dispatch(r.i(xt.a)({autoplay:!0,name:"Move Camera",iterations:1,tracks:[{path:{id:i,evalPlug:"Transform"},duration:g,value:f,startValue:a,tween:W(a,f,o,d,c,m),set:function(t,e){r.i(_t.a)(n,i,e)}},{path:{id:i,plug:"Camera",property:"fieldOfView"},duration:g,value:l,startValue:u}],onEnd:function(){e(n.dispatch(p(t)).then(function(){return s?n.dispatch(r.i(wt.c)({id:i,plug:"Camera",property:"targeted"},!0)):null}))}}))})})}}}function q(){return function(t){var e=t.getTranslator();e&&e.resize()}}function Z(t,e,r){var n=t.getTranslator();if(!n||!n.raycastSelect)return null;var i=e.clientX/(e.rect.width/2)-1,a=-(e.clientY/(e.rect.height/2)-1);return n.raycastSelect({x:i,y:a},r).map(function(t){return t.id})}function K(t,e){var r=t.getTranslator();return r&&r.raycastSelect?r.raycastSelect({x:0,y:0},e).map(function(t){return t.id}):null}function J(t,e){var n=r.i(wt.e)(t,{plug:"Properties",properties:{interactive:!0}}),i=n.map(function(n){var i=n[0],a=r.i(wt.f)(t,i),o=e.intersectBox(a);return{hit:!!o,id:i,distance:o?o.distanceTo(e.origin):1/0}}).filter(function(t){return t.hit});return i.sort(function(t,e){return t.distance-e.distance}),i.map(function(t){return t.id})}function $(t,e){var n=(r.i(wt.e)(t,{plug:"Properties",properties:{interactive:!0}}),t.getTranslator());if(!n||!n.getCameraMouseRay)return null;var i=e.clientX/(e.rect.width/2)-1,a=-(e.clientY/(e.rect.height/2)-1);return J(t,n.getCameraMouseRay({x:i,y:a}).ray)}function tt(t){var e=t.getTranslator();return e&&e.getCameraMouseRay?J(t,e.getCameraMouseRay({x:0,y:0}).ray):null}function et(t){return function(e){var n=b(e);n&&e.dispatch(r.i(bt.g)([n,"Properties",0],{constrainCameraSphere:!0,maxZoom:t}))}}function rt(t){return t.getIn(["player","canvasElement"])}function nt(t){return{type:Ut,payload:t}}function it(t){return t.getIn(["player","displayThumbnail"])}function at(t){return{type:Bt,payload:t}}function ot(t){return t.getIn(["player","displayVrSettings"])}function st(t){return{type:Wt,payload:t}}function ut(t){return t.getIn(["player","progressBarOption"])}function lt(t){return function(e){var n=e.getTranslator(),i=t||[r.i(Tt.a)(e)],a=n.getNodeListBoundingBox(i);r.i(St.b)(e,a.getBoundingSphere())}}r.d(e,"m",function(){return It}),e.e=l,e.c=c,e.f=f,e.h=d,e.k=m,e.s=v,e.n=y,e.q=w,e.d=x,e.g=b,e.o=D,e.p=N,e.t=I,e.j=L,e.l=z,e.u=V,e.A=Y,e.z=H,e.i=X,e.r=Z,e.w=$,e.v=tt,e.B=rt,e.x=it,e.b=at,e.a=ot,e.y=ut;var ct,ht=r(37),ft=r.n(ht),dt=r(2),pt=r.n(dt),mt=r(19),gt=r.n(mt),vt=r(1),yt=(r.n(vt),r(24)),Mt=(r.n(yt),r(36)),wt=r(5),xt=r(61),bt=r(8),Tt=r(17),Et=(r(62),r(211)),St=r(109),_t=r(111),At=r(44),Dt=r(51),Nt=r(43),It={normal:"normal",vr:"vr",lenticular:"lenticular"},Lt={orbit:"orbit",pan:"pan",zoom:"zoom",nodeRotate:"nodeRotate",nodeMove:"nodeMove",nodeScale:"nodeScale"},Ct={default:"default",circle:"circle",line:"line",none:"none"},Ot="USE_MANIPULATOR",Rt="SET_CAMERA",zt="SET_CAMERA_ATTRS",jt="SET_CAMERA_POSITION",Pt="SET_RECT",Ut="DISPLAY_THUMBNAIL",Bt="DISPLAY_VR_SETTINGS",Vt="SET_ACTIVE_COLOR",Ft="SET_HOVER_COLOR",kt="SET_PLAYER_ELEMENT",Gt="REQUEST_FULL_SCREEN",Yt="EXIT_FULL_SCREEN",Ht="SET_FULL_SCREEN",Qt="SET_RENDER_MODE",Wt="SET_PROGRESS_BAR",Xt="REQUEST_NORMAL_MODE",qt="REQUEST_LENTICULAR_MODE",Zt="SET_DEVICE_TRACKING",Kt="SET_BACKGROUND_COLOR",Jt="SET_THREE_OBJECTS",$t=r.i(yt.Map)({activeColor:"#ffc85f",hoverColor:"#C08618",fullscreenBackgroundColor:"#FFF",activeManipulator:Lt.orbit,fullScreen:!1,renderingMode:It.normal,deviceTracking:!1,camera:r.i(yt.Map)({polarAngle:null,azimuthAngle:null,boundingRadius:null,maxZoom:null}),rect:r.i(yt.Map)({width:400,height:300}),initialCameraWorldMatrix:null,initialTargetWorldMatrix:null,cameraWorldMatrix:null,displayThumbnail:!0,playerElement:null,canvasElement:null,activeCamera:bt.c,threeObjects:r.i(yt.Map)(),displayVrSettings:!1,prevCamera:null,orientationHandler:null,constrainCameraRadius:null,progressBarOption:Ct.default}),te=r.i(Mt.a)($t,(ct={},gt()(ct,Ot,function(t,e){return t.set("activeManipulator",e)}),gt()(ct,Rt,function(t,e){var r=e.id,n=e.prevCameraId;return t.set("activeCamera",r).set("prevCamera",n)}),gt()(ct,zt,function(t,e){return t.mergeIn(["camera"],e)}),gt()(ct,Pt,function(t,e){return t.set("rect",e)}),gt()(ct,jt,function(t,e){return t.merge(e)}),gt()(ct,kt,function(t,e){var r=e.playerEl,n=e.canvasEl;return t.set("playerElement",r).set("canvasElement",n)}),gt()(ct,Ut,function(t,e){return t.set("displayThumbnail",!!e)}),gt()(ct,Bt,function(t,e){return t.set("displayVrSettings",!!e)}),gt()(ct,Vt,function(t,e){return t.set("activeColor",e)}),gt()(ct,Ft,function(t,e){return t.set("hoverColor",e)}),gt()(ct,Kt,function(t,e){return t.set("fullscreenBackgroundColor",e)}),gt()(ct,Wt,function(t,e){return Ct[e]||(e=Ct.default),t.set("progressBarOption",e)}),gt()(ct,Gt,function(t){return t.set("fullScreen",!0)}),gt()(ct,Yt,function(t){return t.set("fullScreen",!1)}),gt()(ct,Ht,function(t,e){return t.set("fullScreen",e)}),gt()(ct,Qt,function(t,e,r){var n=r.createEvent;return t.get("renderingMode")!==e&&n("renderingMode",e),t.set("renderingMode",e)}),gt()(ct,qt,function(t,e){var r=e.trackDevice,n=e.cameraId;return t.merge({renderingMode:"lenticular",deviceTracking:r,prevCamera:n})}),gt()(ct,Xt,function(t){return t.merge({renderingMode:"normal",deviceTracking:!1})}),gt()(ct,Zt,function(t,e){return t.set("deviceTracking",e)}),gt()(ct,"SET_CONSTRAIN_CAMERA_RADIUS",function(t,e){return t.set("constrainCameraRadius",e)}),gt()(ct,Jt,function(t,e,n){return(0,n.createEvent)("threeinitialized"),t.set("threeObjects",r.i(yt.Map)(e))}),ct)),ee={reducer:te,actions:{addTool:i,removeTool:a,showTool:o,hideTool:s,useManipulator:n,setCameraAttrs:h,useCamera:p,setCameraPosition:T,animateCameraTo:X,resize:q,displayThumbnail:nt,setActiveColor:F,requestFullscreen:S,exitFullscreen:_,setFullscreen:N,toggleFullscreen:A,setHoverColor:k,requestLenticularMode:O,enableDeviceTracking:j,disableDeviceTracking:P,toggleDeviceTracking:U,requestNormalMode:R,setFullscreenBGColor:G,setCameraRadiusConstraint:et,updateToolOptions:u,setCamera:g,frameScene:lt,setProgressBar:st},selectors:{getCamera:b,getCameraAttrs:f,getInitialCameraPosition:E,getCameraWorldTransform:d,getActiveColor:Y,getCanvasElement:rt,isFullscreen:D,isVRMode:L,isLenticularMode:C,getFullscreenBGColor:Q,isDeviceTracking:B,shouldDisplayThumbnail:it,filterNodesFromPosition:Z,filterNodesFromCenter:K,getThreeScene:M,getThreeCamera:w,getProgressBar:ut,getThree:y}};e.C=ee},function(t,e,r){"use strict";function n(t,e,r,n){var i=t.InstanceScalarSize||n,a=n||i,o=null!==e?e*a:null;if(void 0===i||void 0===a)throw Error("Can't determine element size / stride!");var s=r||Float32Array,c=u.a.maybeCreate(s,o);l.a.call(this,c,e||(c.length+a-i)/a|0),this.type=t,this.stride=a,this.elementSize=i,this.tempBuffer=new Float32Array(i)}e.a=n;var i=r(69),a=r.n(i),o=r(2),s=r.n(o),u=r(29),l=r(189),c=r(88);n.prototype=s()(a()(l.a.prototype),{constructor:n,getAt:function(t,e){return(e||new this.type).fromArray(this.data,t*this.stride)},setAt:function(t,e){e.toArray(this.data,t*this.stride)},addAt:function(t,e){e.toArray(this.tempBuffer,0);for(var r=0,n=t*this.stride;r<this.elementSize;r++)this.data[n+r]+=this.tempBuffer[r]},multiplyScalarAt:function(t,e){for(var r=0,n=t*this.stride;r<this.elementSize;r++)this.data[n+r]*=e},newCompatibleView:function(t,e){return new n(this.type,e||null,t,this.stride)},newCompatibleBuffer:function(){return new c.a(this.type,this.data.constructor,this.stride)}}),n.fromObjects=function(t,e,r){var i=new n(t,e.length,r);return u.a.copyObjects(e,i.data),i}},function(t,e,r){"use strict";function n(t,e,i){var a=r.i(U.b)(e),o=t.get("sceneGraph");if(a.id){var s=o.nodes[a.id];return s&&a.parent?s.parent||null:s&&a.child?r.i(U.c)(t,s,{type:a.child,shallow:!0},!1,!0)||null:s?r.i(U.d)(s,a,i):null}if(a.from&&a.from.all){var u=void 0,l=!0,c=!1,h=void 0;try{for(var f,d=R()(C()(o.nodes));!(l=(f=d.next()).done);l=!0){var p=f.value;if(u=r.i(U.d)(o.nodes[p],a))return u}}catch(t){c=!0,h=t}finally{try{!l&&d.return&&d.return()}finally{if(c)throw h}}return null}var m=a.from?n(t,a.from,!0):o.activeSceneId,g=m&&o.nodes[m];return g?r.i(U.c)(t,g,a,a.includeParent&&g,i):null}function i(t,e){var i=r.i(U.b)(e),a=t.get("sceneGraph"),o=i.from?n(t,i.from):a.activeSceneId;if(!o)return[];var s=a.nodes[o];if(!s)throw new Error("Unknown node to filter from");return r.i(U.e)(t,s,i,i.includeParent&&s)}function a(t,e){var i=Array.isArray(e)?e:n(t,e);if(i&&Array.isArray(i)){if(i.length>=2&&"eval"===i[1]){var a=r.i(j.a)(t).evaluatedNodes[i[0]],o=a&&a[i[2]];return o&&i[3]?o[i[3]]:o}return r.i(j.i)(t,i)}}function o(t,e){var n=Array.isArray(e)?e:i(t,e);return n?n.reduce(function(e,n){return e[n[0]]=r.i(j.i)(t,n),e},{}):void 0}function s(t,e){var r=a(t,{id:e,evalPlug:"Transform"});if(!r)return null;var n=r.transform,i=t.get("sceneGraph").nodes[e],o=i&&i.parent,u=o&&s(t,o);return u?(new z.Matrix4).copy(u).multiply(n):(new z.Matrix4).copy(n)}function u(t,e,r){var n=a(t,{id:e,evalPlug:"Transform"});if(!n||e===r)return null;var i=n.transform,o=t.get("sceneGraph").nodes[e],s=o&&o.parent,l=s&&u(t,s,r);return l?(new z.Matrix4).copy(l).multiply(i):(new z.Matrix4).copy(i)}function l(t){var e=t.translation,r=t.rotation,n=t.scale,i=t.rotateOrder,a=t.preRotation,o=t.rotatePivotOffset,s=t.localRotatePivot,u=t.scalePivotOffset,l=t.localScalePivot,c=t.shear;0===n.x&&(n.x=1e-7),0===n.y&&(n.y=1e-7),0===n.z&&(n.z=1e-7);var h=new z.Vector3(0,0,0),f=[],d=(new z.Matrix4).makeTranslation(e.x,e.y,e.z);f.push(d);var p=new z.Matrix4;o.equals(h)||(p.makeTranslation(o.x,o.y,o.z),f.push(p));var m=new z.Matrix4,g=new z.Matrix4,v=!1;s.equals(h)||(m.makeTranslation(s.x,s.y,s.z),f.push(m),g.getInverse(m,!0),v=!0);var y=new z.Matrix4;if(!a.equals(h)){var M=(new z.Vector3).copy(a).multiplyScalar(Math.PI/180);y.makeRotationFromEuler(new z.Euler(M.x,M.y,M.z,i)),f.push(y)}var w=(new z.Vector3).copy(r).multiplyScalar(Math.PI/180),x=(new z.Matrix4).makeRotationFromEuler(new z.Euler(w.x,w.y,w.z,i));f.push(x),v&&f.push(g);var b=new z.Matrix4;u.equals(h)||(b.makeTranslation(u.x,u.y,u.z),f.push(b));var T=new z.Matrix4,E=new z.Matrix4,S=!1;l.equals(h)||(T.makeTranslation(l.x,l.y,l.z),f.push(T),E.getInverse(T,!0),S=!0);var _=c.x,A=c.y,D=c.z,N=(new z.Matrix4).set(1,_,A,0,0,1,D,0,0,0,1,0,0,0,0,1);f.push(N);var I=(new z.Matrix4).makeScale(n.x,n.y,n.z);f.push(I),S&&f.push(E);for(var L=new z.Matrix4,C=0;C<f.length;C++)L.multiply(f[C]);return L}function c(t,e){return function(i){var a=Array.isArray(t)?t:n(i,t);if(!a)return console.warn("No matching query",t),I.a.resolve();if(3===a.length){if("object"!==(void 0===e?"undefined":D()(e)))throw new Error("If no property is set, expect an object to merge into the operator");return i.dispatch(r.i(j.g)(a,e))}if(4===a.length)return i.dispatch(r.i(j.q)(a,e));if(2===a.length){if("name"!==a[1])throw new Error("Can only set node name");return i.dispatch(r.i(j.q)(a,e))}}}function h(t,e){return function(r){var n=Array.isArray(t)?t:i(r,t);return I.a.all(n.map(function(t){return r.dispatch(c(t,e))}))}}function f(t){for(var e=t.get("sceneGraph"),r=C()(e.nodes),n=void 0,i=[],a=0;a<r.length;a++)(n=e.nodes[r[a]])&&n.warnings&&n.warnings.length&&i.push(n);return i}function d(t){return function(e){t.type="Camera";var r=n(e,t);Array.isArray(r)&&(r=r[0]),e.dispatch(c({plug:"Player",property:"vrCamera"},r))}}function p(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return void 0===e.cloneDependencies&&(e.cloneDependencies=!0),function(a){var o,s=Array.isArray(t)?t:i(a,t),u=a.get("sceneGraph");if(!s.length)return console.warn("No match for clone: ",t),I.a.resolve(!0);var l=r.i(j.r)(a,s[0]),c=e.to||u.activeSceneId,h=n(a,{id:l,child:"Objects"}),f=n(a,{id:c,child:"Objects"}),d=(o={},_()(o,h,f),_()(o,n(a,{id:l,child:"MaterialLibrary"}),n(a,{id:c,child:"MaterialLibrary"})),o);return(e.withNull?a.dispatch(r.i(j.l)({name:e.withNull,parent:f,type:"Null",plugs:{Null:[["Null",{}]],Transform:[["Transform",{}]],Properties:[["Default",{}]]}})):I.a.resolve(null)).then(function(t){return t&&(d[h]=t),a.dispatch(r.i(j.s)(s,d,{cloneDependencies:e.cloneDependencies})).then(function(r){return t&&(r[e.withNull]=t),r})})}}function m(t){var e=t.sceneId,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t){var s={from:{id:e},child:"Objects",type:["PolyMesh","BinMesh","Null"]},u=i(t,s),l=t.get("sceneGraph");if(!u.length)return console.warn("No match for clone: ",s),I.a.resolve(!0);var c=r.i(j.r)(t,u[0]),h=o.to||l.activeSceneId,f=n(t,{id:c,child:"Objects"}),d=n(t,{id:h,child:"Objects"}),p=n(t,{id:c,child:"MaterialLibrary"}),m=a(t,{id:c,plug:"Player",property:"configurator"}),g=_()({},f,d),v=a(t,{id:c,property:"name"}),y=v+" Model";return t.dispatch(r.i(j.l)({name:y,parent:d,type:"Model",plugs:{Null:[["Null",{}]],Transform:[["Transform",{}]],Mixer:[["Mixer",{}]],Properties:[["ModelProperties",{}]]}})).then(function(e){return t.dispatch(r.i(V.a)(e,m)),g[f]=e,g[p]=e,t.dispatch(r.i(j.s)(u,g,{cloneDependencies:!0})).then(function(t){return e})})}}function g(){return function(t){function e(t){var e=n.nodes[t]&&n.nodes[t].plugs,i=!0,o=!1,s=void 0;try{for(var u,l=R()(C()(e||{}));!(i=(u=l.next()).done);i=!0){var c=u.value;!function(t){e[t].forEach(function(e,n){var i=r.i(B.a)(t,e.type,[]),o=!0,s=!1,u=void 0;try{for(var l,c=R()(i.fileReferenceKeys);!(o=(l=c.next()).done);o=!0){var h=l.value;e[h]&&(a[e[h]]=!0)}}catch(t){s=!0,u=t}finally{try{!o&&c.return&&c.return()}finally{if(s)throw u}}})}(c)}}catch(t){o=!0,s=t}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}}var n=t.get("sceneGraph"),a={};return i(t,{includeParent:!0}).forEach(e),I.a.all(r.i(P.e)(t).map(function(e){return!a[e.get("id")]&&t.dispatch(r.i(P.f)(e.get("id")))}))}}function v(t,e){var r=a(t,{id:e,evalPlug:"PolyMesh",property:"mesh"}),n=new z.Box3;return r&&n.copy(r.boundingBox),n}function y(t,e){var r=i(t,{from:{id:e}}),n=r.reduce(function(r,n){var i=v(t,n),a=u(t,n,e);return i.applyMatrix4(a),r.union(i),r},new z.Box3),a=s(t,e),o=v(t,e);return n.union(o),n.applyMatrix4(a),n}function M(){return B.b}function w(t,e){var r=t.getTranslator();return r?r.toScreenPosition(e):{x:0,y:0}}function x(t,e){return e?a(t,{name:e,evalPlug:"Pass"}):a(t,{id:a(t,{name:"Passes",plug:"GeneralRenderer",property:"curPass"}),evalPlug:"Pass"})||a(t,{type:"Pass",evalPlug:"Pass"})}function b(t,e){var n=e||t.get("sceneGraph").activeSceneId,a=i(t,{from:{id:n},includeParent:!0});return{sceneGraph:r.i(j.t)(t,a),assets:r.i(P.g)(t)}}function T(t){var e=t.name,n=t.type,i=t.parent,a=t.plugs;if(!i)throw new Error("addNode requires parent to be set");if(!n)throw new Error("addNode requires type to be set");if(!e)throw new Error("addNode requires name to be set");if(!F[n])throw new Error("invalid type: "+n+" for addNode");var o=a||{},s=!0,u=!1,l=void 0;try{for(var c,h=R()(C()(F[n]));!(s=(c=h.next()).done);s=!0){var f=c.value;if(o[f]||(o[f]=[[F[n][f],{}]]),!o[f][0][0])throw new Error("Required operator for "+f)}}catch(t){u=!0,l=t}finally{try{!s&&h.return&&h.return()}finally{if(u)throw l}}return r.i(j.l)({name:e,type:n,plugs:o,parent:i})}function E(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments[4];if(!t)throw new Error("addOperator requires the id for the element receiving the operator");if(!e)throw new Error("addOperator requires the plug to be set");if(!n)throw new Error("addOperator requires the operator type to be set");var o=B.b[e];if(!o)throw new Error("Unknown plug: "+e);if(!o[n])throw new Error("Unknown operator: "+n);return r.i(j.u)(t,e,[n,i,a])}e.d=n,e.e=i,e.a=a,e.g=o,e.b=s,e.i=l,e.c=c,e.h=h,e.f=y,e.j=T;var S=r(19),_=r.n(S),A=r(40),D=r.n(A),N=r(37),I=r.n(N),L=r(6),C=r.n(L),O=r(25),R=r.n(O),z=r(1),j=(r.n(z),r(8)),P=r(32),U=r(86),B=r(105),V=r(85),F={PolyMesh:{PolyMesh:"Box",Transform:"Transform",Material:"Reference",Properties:"PolyMeshProperties"},Light:{Light:"PointLight",Transform:"Transform",Properties:"Default"},Camera:{Camera:"Camera",Transform:"Transform",Properties:"Default"},Null:{Null:"Null",Transform:"Transform",Properties:"Default"},Model:{Null:"Null",Transform:"Transform",Mixer:"Mixer",Properties:"ModelProperties"},Material:{Material:"Physical",Properties:"MaterialProperties"},Image:{Image:"Image",Properties:"ImageProperties"},Pass:{Pass:"Pass"},Renderer:{Renderer:"WebGLRenderer"},Bone:{Bone:"Bone",Transform:"BoneTransform",Properties:"Default"},Annotation:{Annotation:"Annotation",Transform:"Transform",Properties:"Default"}},k={actions:{set:c,setAll:h,clone:p,cloneModel:m,pruneAssets:g,setVRCamera:d,addOperator:E,addNode:T},selectors:{get:a,getAll:o,getWorldTransform:s,find:n,filter:i,getWarnings:f,exportJSON:b,getNodeBoundingBox:y,getCurrentPass:x,getAvailableOperators:M,getScreenPosition:w}};e.k=k},function(t,e,r){t.exports={default:r(422),__esModule:!0}},function(t,e,r){"use strict";function n(t){if(t){this.faceRangeOffsets=t.faceRangeOffsets,this.faceValueIndices=t.faceValueIndices,this.values=t.values;var e=t.valueFaceIndices||null;this.valueFaceIndices=e,this.valueFaceIndexOffsets=e&&t.valueFaceIndexOffsets||null,this._edgeVertexAdjacency=null,this._faceEdgeAdjacency=null,this._valueAdjacency=null,this._valueValueAdjacency=null,this._faceFaceAdjacency=null}else this.faceRangeOffsets=new Uint32Array(1),this.faceValueIndices=new Uint32Array(0),this.values=new o.a(i.Vector3,0)}e.a=n;var i=r(1),a=(r.n(i),r(106)),o=r(4),s=r(29),u=r(333),l=r(334),c=r(336),h=r(335);n.fromData=function(t,e,r){var i=new n({faceRangeOffsets:t,faceValueIndices:e||a.a.identity(r.length,Uint32Array),values:r.repack(Float32Array)}),o=t[t.length-1];if(i.faceValueIndices.length!==o)throw Error("Number of postition indices or unindexed data values does not match the number of face vertices!");return i},n.prototype={constructor:n,isPolyMap:!0,findValueIndexOffset:function(t,e){for(var r=this.faceRangeOffsets,n=this.faceValueIndices,i=r[t],a=r[t+1],o=i;o!==a;++o)if(n[o]===e)return o;return-1},get edgeVertexAdjacency(){return this._edgeVertexAdjacency||(this._edgeVertexAdjacency=new u.a(this)),this._edgeVertexAdjacency},get faceEdgeAdjacency(){return this._faceEdgeAdjacency||(this._faceEdgeAdjacency=new l.a(this)),this._faceEdgeAdjacency},get valueAdjacency(){return this._valueAdjacency||(this._valueAdjacency=new c.a(this)),this._valueAdjacency},get valueValueAdjacency(){return this._valueValueAdjacency||(this._valueValueAdjacency=new ValueValueAdjacency(this)),this._valueValueAdjacency},get faceFaceAdjacency(){return this._faceFaceAdjacency||(this._faceFaceAdjacency=new h.a(this)),this._faceFaceAdjacency},updateInverseIndex:function(){if(null===this.valueFaceIndices){for(var t=this.faceRangeOffsets,e=-1,r=t[0],n=this.faceValueIndices,i=this._updateValueFaceIndexOffsets(),a=i.length,o=n.length,s=new Uint32Array(o),u=0;u!==o;++u)u===r&&(r=t[++e+1]),s[i[n[u]]++]=e;if(this.valueFaceIndices=s,0===i.byteOffset)throw Error("Invalid .valueFaceIndexOffsets != null!");this.valueFaceIndexOffsets=new Uint32Array(i.buffer,0,a)}return this},_updateValueFaceIndexOffsets:function(){var t=this.valueFaceIndexOffsets;if(null===t){var e=this.values.length,r=e+2,n=new Uint32Array(r),i=n.subarray(2);t=n.subarray(1),a.a.histogram(this.faceValueIndices,e,i),s.a.accumulate(i),this.valueFaceIndices=null,this.valueFaceIndexOffsets=t}return t},compactValues:function(){var t=this.values,e=t.length;if(0!==e){var r=new Uint32Array(e),n=this._compactFaceIndexOffsets(r);n!==e&&(this._compactData(r,n),this._compactIndices(r))}return this},_compactFaceIndexOffsets:function(t){for(var e=this._updateValueFaceIndexOffsets(),r=t.length,n=0,i=0,a=0;a!==r;++a){var o=e[a+1];t[a]=n,i!==o&&(n!==a&&(e[n]=i),i=o,++n)}if(e[n]=i,n!==r)if(0!==e.byteOffset){var u=new Uint32Array(e.buffer),l=s.a.slice(u,0,n+2);e=l.subarray(1)}else e=s.a.slice(e,0,n+1);return this.valueFaceIndexOffsets=e,n},_compactData:function(t,e){for(var r=this.values,n=r.length,i=new o.a(r.type,e),a=t[0],s=i.newRangeArray(),u=1;u!==n;++u){var l=t[u];a!==l&&(r.rangeToArray(u-1,1,s),i.arrayToRange(s,a,1),a=l)}r.rangeToArray(n-1,1,s),i.arrayToRange(s,a,1),this.values=i},_compactIndices:function(t){var e=this.faceValueIndices,r=e.length,n=new Uint32Array(r);a.a.apply(e,t,n),this.faceValueIndices=n}}},function(t,e,r){"use strict";function n(t){var e={},n=t.warnings||[],i=t.id,a=t.children,o=t.name,s=t.type,u=t.parent;return K()(t.plugs).forEach(function(i){e[i]=t.plugs[i].map(function(t){var e=t.type;return r.i(ut.a)(i,e,n).init(e,t,t.name)})}),{id:i,children:a,name:o,type:s,parent:u,plugs:e,warnings:n,_v:0}}function i(t){return t.hasOwnProperty("_v")||(t._v=0),t}function a(t,e,n){var i=void 0,a=void 0,o=void 0;if(Array.isArray(e)){var s=q()(e,3);i=s[0],a=s[1],o=s[2]}else i=e.type,o=e.name,a=e;return r.i(ut.a)(t,i,n).init(i,a,o)}function o(t){var e=t.id,n=t.name,i=t.type,o=t.children,s=t.parent,u=t.plugs,l=[];return{id:e,name:n,type:i,parent:s,warnings:l,_v:0,children:o||[],plugs:r.i(it.a)(function(t,e){return t.map(function(t){return a(e,t,l)})},u)}}function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.nodes[St]&&!e.force||(t.nodes[St]=o({id:St,name:"CAMERA",type:"Camera",plugs:{Camera:[["Camera",{}]],Transform:[["Transform",{}]],Properties:[["CameraProperties",{}]]}})),t.nodes[_t]&&!e.force||(t.nodes[_t]=o({id:_t,name:"VR CAMERA",type:"Camera",plugs:{Camera:[["Camera",{fieldOfView:45}]],Transform:[["Transform",{translation:{x:0,y:1.6,z:1}}]],Properties:[["CameraProperties",{}]]}})),t.nodes[At]&&!e.force||(t.nodes[At]=o({id:At,name:"VIRTUAL TARGET NULL",type:"Null",plugs:{Transform:[["Transform",{}]]}})),t.nodes[Dt]&&!e.force||(t.nodes[Dt]=o({id:Dt,name:"CONTROLER ROOT NULL",type:"Null",plugs:{Transform:[["Transform",{}]]}})),t.nodes[Nt]&&!e.force||(t.nodes[Nt]=o({id:Nt,name:"VIRTUAL PIVOT NULL",type:"Null",plugs:{Transform:[["Transform",{}]]}}))}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return W()(t,{_v:0,nodes:{},fileReferences:{to:{},from:{}},nodeReferences:{to:{},from:{}},cameraReferences:{},worldTransformReferences:{},evaluatedNodes:{},loaded:!1,activeSceneId:null,objects:{},refs:{},origin:{},commits:{},_ev:0,_sv:0})}function l(t,e){var r=e.path,n=e.value;if(!r.length||r.length<2)throw new Error("SET requires a path with length 2 or 4");var i=q()(r,4),a=i[0],o=i[1],s=i[2],u=i[3],l=t.nodes[a];if(2===r.length&&"name"===r[1])l.name=n,l._v+=1,t._v+=1;else{var c=l&&l.plugs[o],h=c&&c[s];if(!h)throw new Error("Setting data on unknown operator: "+r.join(","));ut.b[o][h.type].set(h,u,n)&&(l._v+=1,t._v+=1)}return t}function c(t){var e={},r=!0,n=!1,i=void 0;try{for(var a,o=G()(K()(t.plugs));!(r=(a=o.next()).done);r=!0){var s=a.value;e[s]=t.plugs[s].map(function(t){return W()({},t)})}}catch(t){n=!0,i=t}finally{try{!r&&o.return&&o.return()}finally{if(n)throw i}}return{id:rt()(),name:t.name,type:t.type,parent:t.parent,children:[].concat(t.children),plugs:e,_v:1}}function h(t){var e=t.id,r=t.name,n=t.type,i=t.plugs,a=t.parent;return e||(e=rt()()),r=r||e,{type:st.a,payload:{id:e,name:r,type:n,plugs:i,parent:a},resolve:e}}function f(t){return{type:st.b,payload:t}}function d(t,e,r){return{type:xt,payload:{id:t,plug:e,op:r}}}function p(t,e){if(!Array.isArray(e))throw new Error("Expect path to be an array");var n=t.get("sceneGraph"),i=n.nodes[e[0]];if(e.length>=2){if("name"===e[1]||"type"===e[1])return i&&i[e[1]];i=i&&i.plugs[e[1]]}if(e.length>=3&&(i=i&&i[e[2]]),e.length>=4&&i){i=r.i(ut.a)(e[1],i.type,[]).get(i,e[3])}return i}function m(t){return p(t,[r.i(mt.a)(t),"Player",0,"vrCamera"])}function g(t){return function(e){var n=[r.i(mt.a)(e),"Player",0,"vrCamera"];e.dispatch(v(n,t))}}function v(t,e){return{type:gt,payload:{path:t,value:e},meta:{remote:!0}}}function y(t,e){return{type:vt,payload:{path:t,attrs:e}}}function M(t,e){return{type:yt,payload:{id:t,node:e}}}function w(t){return{type:Mt,payload:t}}function x(t){return{type:bt,payload:t}}function b(t,e){return{type:wt,payload:{parentId:t,childIds:e}}}function T(t,e){var r=t.get("sceneGraph").nodes[e],n=r&&r.parent;return n?T(t,n):e}function E(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.cloneDependencies,a=t.reduce(function(t,e){return t[e]=!0,t},{}),o={};return function(n){function s(t){var r=l.nodes[t];r&&r.name;if(r&&r.plugs){var i=!0,u=!1,c=void 0;try{for(var h,f=G()(K()(r.plugs));!(i=(h=f.next()).done);i=!0){var d=h.value,p=r.plugs[d],m=!0,g=!1,v=void 0;try{for(var y,M=G()(p);!(m=(y=M.next()).done);m=!0){var w=y.value,x=ut.b[d][w.type];if(x){var b=!0,T=!1,E=void 0;try{for(var S,_=G()(x.referenceKeys);!(b=(S=_.next()).done);b=!0){var A=S.value,D=w[A];!D||a[D]||e[D]||(a[D]=!0,s(D))}}catch(t){T=!0,E=t}finally{try{!b&&_.return&&_.return()}finally{if(T)throw E}}var N=!0,I=!1,L=void 0;try{for(var C,O=G()(x.fileReferenceKeys);!(N=(C=O.next()).done);N=!0){var R=C.value,D=w[R];D&&n.getIn(["assets",D])&&(o[D]=!0)}}catch(t){I=!0,L=t}finally{try{!N&&O.return&&O.return()}finally{if(I)throw L}}}}}catch(t){g=!0,v=t}finally{try{!m&&M.return&&M.return()}finally{if(g)throw v}}}}catch(t){u=!0,c=t}finally{try{!i&&f.return&&f.return()}finally{if(u)throw c}}}}function u(t){var r=t,n=!0,i=!1,s=void 0;try{for(var u,l=G()(K()(t.plugs));!(n=(u=l.next()).done);n=!0){var c=u.value;!function(n){t.plugs[n].forEach(function(t,i){var s=ut.b[n][t.type];if(s){var u=!0,l=!1,c=void 0;try{for(var h,f=G()(s.referenceKeys);!(u=(h=f.next()).done);u=!0){var d=h.value,p=t[d],m=p&&(a[p]||e[p]);m&&(r.plugs[n][i][d]=m)}}catch(t){l=!0,c=t}finally{try{!u&&f.return&&f.return()}finally{if(l)throw c}}var g=!0,v=!1,y=void 0;try{for(var M,w=G()(s.fileReferenceKeys);!(g=(M=w.next()).done);g=!0){var x=M.value,p=t[x];p&&o[p]&&(r.plugs[n][i][x]=o[p])}}catch(t){v=!0,y=t}finally{try{!g&&w.return&&w.return()}finally{if(v)throw y}}}})}(c)}}catch(t){i=!0,s=t}finally{try{!n&&l.return&&l.return()}finally{if(i)throw s}}return r}var l=n.get("sceneGraph");i&&t.forEach(s),K()(a).forEach(function(t){return a[t]=rt()()}),K()(o).forEach(function(t){return o[t]=rt()()}),K()(a).forEach(function(t){var r=l.nodes[t],i=c(r);i.id=a[t];var o=r.parent,s=o&&(a[o]||e[o]||o);i.parent=s,i.children=[];var h=!0,f=!1,d=void 0;try{for(var p,m=G()(r.children);!(h=(p=m.next()).done);h=!0){var g=p.value;a[g]?i.children.push(a[g]):e[g]&&i.children.push(e[g])}}catch(t){f=!0,d=t}finally{try{!h&&m.return&&m.return()}finally{if(f)throw d}}n.dispatch({type:st.a,payload:{id:a[t],parent:s,node:u(i)}})});var h=T(n,a[K()(a)[0]]);return K()(o).forEach(function(t){var e=n.getIn(["assets",t]);e&&n.dispatch(r.i(ot.a)(e.set("id",o[t]).set("sceneId",h).toJS()))}),F.a.resolve(a)}}function S(t){var e=K()(t.plugs).map(function(e){return{type:e,operators:t.plugs[e].map(function(t){return r.i(ut.a)(e,t.type,[]).export(t)})}});return{_id:t.id,name:t.name,type:t.type,plugs:e,nodes:[]}}function _(t,e){var r=void 0,n={},i=t.get("sceneGraph");return e.forEach(function(t){var e=i.nodes[t];if(e){var a=S(e);n[a._id]=a,r||(r=a),e.parent&&n[e.parent]&&n[e.parent].nodes.push(a)}}),r}function A(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.get("sceneGraph");return n._v===n._ev?n:(r.i(lt.a)(t,n,e),n)}function D(t){return{type:Tt,payload:t}}function N(t,e){var r=t.get("sceneGraph"),n=j(r,e);return r.objects[n.root]?F.a.resolve(!0):t.callApi({url:"/api/scene/"+r.activeSceneId+"/objects/"+r.refs.HEAD+"/"+e}).then(function(e){return t.dispatch(D(e))})}function I(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t){var e=t.get("sceneGraph");if(!e.refs.HEAD&&!K()(e.nodes).length)return F.a.resolve();var n=r.i(ct.a)(t),i=n.objects,a=n.commit,o=n.commitHash,s=j(e,e.refs.HEAD);if(s&&a.root===s.root)return t.dispatch(D({refs:{INDEX:e.refs.HEAD}}));W()({},e.objects,i);return t.dispatch(D({objects:i,refs:{INDEX:o},commit:a}))}}function L(t){var e=t.toHEAD,i=t.secondHEAD,a=t.fromHEAD,o=t.options;return function(t){var s=t.get("sceneGraph");a||(a=s.refs.INDEX);var u=a&&j(s,a),l=j(s,e),c=i&&j(s,i);r.i(ht.a)(s,l,u,c,{changeNode:function(e){var r=e.id,i=e.plugs,a=s.nodes[r];a.plugs=W()({},a.plugs,i),t.dispatch(M(r,n(a)))},addNode:function(e){return t.dispatch(h(e))},deleteNode:function(e){return t.dispatch(f(e))},addFile:function(e){return t.dispatch(r.i(ot.a)(e))}}),r.i(ft.a)(s,l,u,c,function(e,r){t.dispatch(v(e,r))}),t.dispatch({type:Et}),o.detached?t.dispatch({type:Tt,payload:{refs:{DETACHED_HEAD:e}}}):t.dispatch({type:Tt,payload:{refs:{HEAD:e,DETACHED_HEAD:null}}}),t.dispatch({type:bt})}}function C(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){return r.dispatch(I()).then(function(){return N(r,t).then(function(){return r.dispatch(L({toHEAD:t,options:e}))})})}}function O(t){return function(e){var r=e.get("sceneGraph"),n=r.refs.HEAD;return e.dispatch(I()).then(function(){var i=r.refs.INDEX;return N(e,t).then(function(){return n===i?e.dispatch(L({toHEAD:t,options:{}})):(e.dispatch(L({toHEAD:n,options:{}})),e.dispatch(L({toHEAD:t,fromHEAD:n,secondHEAD:i,options:{}})))})})}}function R(t){return function(e){var r=e.get("sceneGraph"),n=r.history,i=t||n[1];if(!i)return console.log("Nothing to undo");e.dispatch(loadFromContent(i))}}function z(){return function(t){console.log("redo")}}function j(t,e){if(!t.commits[e]){if(!t.objects[e])return null;t.commits[e]=JSON.parse(t.objects[e]),t.commits[e].createdAt=new Date(t.commits[e].createdAt)}return t.commits[e]}function P(){return function(t){var e=t.get("sceneGraph"),r=e.activeSceneId;return t.callApi({url:"/api/scene/"+r+"/sync/"+e.refs.HEAD}).then(function(r){var n=r.objects,i=r.HEAD;if(i!==e.refs.HEAD)return t.dispatch(D({objects:n,origin:{HEAD:i}})),t.dispatch(O(i))})}}r.d(e,"l",function(){return h}),r.d(e,"w",function(){return f}),r.d(e,"k",function(){return It}),e.e=n,e.u=d,e.i=p,e.q=v,e.g=y,e.f=M,e.p=w,e.b=x,e.r=T,e.s=E,e.t=_,e.a=A,e.m=D,e.n=C,e.o=P,r.d(e,"c",function(){return St}),r.d(e,"d",function(){return _t}),r.d(e,"h",function(){return At}),r.d(e,"v",function(){return Dt}),r.d(e,"j",function(){return Nt});var U,B,V=r(37),F=r.n(V),k=r(25),G=r.n(k),Y=r(40),H=r.n(Y),Q=r(2),W=r.n(Q),X=r(41),q=r.n(X),Z=r(6),K=r.n(Z),J=r(19),$=r.n(J),tt=r(1),et=(r.n(tt),r(254)),rt=r.n(et),nt=r(24),it=(r.n(nt),r(90)),at=r(36),ot=r(32),st=r(60),ut=r(105),lt=r(281),ct=r(284),ht=r(280),ft=r(279),dt=r(278),pt=r(108),mt=(r(5),r(17)),gt="SET",vt="MERGE",yt="REPLACE",Mt="MULTI",wt="REPARENT",xt="ADD_OPERATOR",bt="TOUCH",Tt="SET_CONTENT_STORE",Et="VERIFY",St="cccccccc-cccc-1ccc-accc-cccccccccccc",_t="bbbbbbbb-bbbb-0bbb-zbbb-bbbbbbbbbbbb",At="dddddddd-dddd-0ddd-addd-dddddddddddd",Dt="eeeeeeee-eeee-4eee-feee-eeeeeeeeeeee",Nt="ffffffff-ffff-3fff-gfff-ffffffffffff",It=(U={},$()(U,St,!0),$()(U,_t,!0),$()(U,At,!0),$()(U,Nt,!0),U),Lt=r.i(at.a)({},(B={},$()(B,pt.a.INIT,function(t){return u()}),$()(B,bt,function(t,e){var r=t.nodes[e];return r&&(r._v+=1),t._v+=1,t}),$()(B,gt,l),$()(B,vt,function(t,e){var r=e.path,n=e.attrs;if(!r.length||3!==r.length)throw new Error("MERGE requires a path with length 3");if("object"!==(void 0===n?"undefined":H()(n)))throw new Error("MERGE requires an object to merge in");var i=q()(r,3),a=i[0],o=i[1],s=i[2],u=t.nodes[a],l=u&&u.plugs[o],c=l&&l[s],h=c&&ut.b[o][c.type];if(!h)throw new Error("Setting data on unknown operator: "+r.join(","));var f=!0,d=!1,p=void 0;try{for(var m,g=G()(K()(n));!(f=(m=g.next()).done);f=!0){var v=m.value;h.set(c,v,n[v])}}catch(t){d=!0,p=t}finally{try{!f&&g.return&&g.return()}finally{if(d)throw p}}return u._v+=1,t._v+=1,t}),$()(B,yt,function(t,e){var r=e.id,n=e.node,i=t.nodes[r];if(i){var a=i._v;return t.nodes[r]=n,n._v=a+1,t._v+=1,t}}),$()(B,st.a,function(t,e){var r=e.id,n=e.parent,a=n&&t.nodes[n];if(n&&!a)throw new Error("Unknown parent: '"+n+"'");if(t.nodes[r])throw new Error("Adding a node that already exists: "+r);return t.nodes[r]=e.node?i(e.node):o(e),n&&!a.children&&(a.children=[]),n&&-1===a.children.indexOf(r)&&a.children.push(r),t._v+=1,t}),$()(B,st.b,function(t,e){function r(e){var n=t.nodes[e];if(n){var i=!0,a=!1,o=void 0;try{for(var s,u=G()(n.children||[]);!(i=(s=u.next()).done);i=!0){r(s.value)}}catch(t){a=!0,o=t}finally{try{!i&&u.return&&u.return()}finally{if(a)throw o}}var c=t.nodeReferences.from[e];K()(c||{}).forEach(function(e){var r=JSON.parse(e);l(t,{path:r,value:null})}),t.cameraReferences[e]&&delete t.cameraReferences[e],t.worldTransformReferences[e]&&delete t.worldTransformReferences[e],delete t.nodes[e]}return n}var n=r(e);if(!n)return t;var i=n.parent&&t.nodes[n.parent];if(i){var a=i.children.indexOf(e);-1!==a&&i.children.splice(a,1),i._v+=1}return t._v+=1,t}),$()(B,xt,function(t,e){var n=e.id,i=e.plug,a=e.op,o=t.nodes[n];if(!o)throw new Error("Unknown node: "+n);var s=o.plugs[i];if(!s)throw new Error("Unknown plug: "+i);if(!Array.isArray(a))throw new Error("Expect op to be an array of 2 or 3");var u=q()(a,3),l=u[0],c=u[1],h=u[2],f=r.i(ut.a)(i,l,o.warnings);return s.push(f.init(l,c,h)),o._v+=1,t._v+=1,t}),$()(B,Mt,function(t,e){var r=t._v;for(var n in e){var i=e[n];i.type===gt&&l(t,i.payload)}return t._v=r+1,t}),$()(B,wt,function(t,e){var r=e.parentId,n=e.childIds,i=t.nodes[r];return i?(n.slice().forEach(function(e){var n=t.nodes[e];if(n){var a=n&&n.parent,o=a&&t.nodes[a],s=o&&o.children?o.children.indexOf(e):-1;-1!==s&&(o.children.splice(s,1),o._v+=1),i.children.push(e),n.parent=r,n._v+=1}}),i._v+=1,t._v+=1,t):(console.warn("Unknown parent for reparent: "+r),t)}),$()(B,Tt,function(t,e){var r=e.objects,n=e.refs,i=e.origin;return r&&W()(t.objects,r),i&&W()(t.origin,i),n&&W()(t.refs,n),t}),$()(B,st.c,function(t,e){return t.activeSceneId=e,t}),$()(B,Et,function(t){return initVirtualNodes(t),t}),$()(B,st.d,function(t,e){var i=e.scene,a=e.nodes;if(i)throw new Error("Loading incompatible scene format");var o=r.i(it.a)(n,JSON.parse(a));return W()(t.nodes,o),s(t),t._v+=1,t}),$()(B,st.e,function(t,e){return u(t),s(t,{force:!0}),t}),$()(B,st.f,function(t,e){if(t.fileReferences.from[e]){var r=!0,n=!1,i=void 0;try{for(var a,o=G()(K()(t.fileReferences.from[e]));!(r=(a=o.next()).done);r=!0){var s=a.value,u=JSON.parse(s),l=q()(u,3),c=l[0];l[1],l[2];t.nodes[c]._v+=1}}catch(t){n=!0,i=t}finally{try{!r&&o.return&&o.return()}finally{if(n)throw i}}t._v+=1}return t}),$()(B,"MARK_DIRTY",function(t){return K()(t.nodes).forEach(function(e){t.nodes[e]._v+=1}),t}),B)),Ct={reducer:Lt,actions:{set:v,merge:y,multi:w,addNode:h,deleteNode:f,reparent:b,clone:E,addOperator:d,undo:R,redo:z,saveIndex:I,touch:x,setVRCamera:g},selectors:{get:p,exportJSON:_,getVRCamera:m}};e.x=Ct},function(t,e,r){"use strict";function n(t){t?(t.colorMaps||console.error("Polymesh must have initialized colorMaps container."),t.uvMaps||console.error("Polymesh must have initialized uvMaps container."),this.faceRangeOffsets=t.faceRangeOffsets,this.positions=t.positions,this.normalMap=t.normalMap,this.uvMaps=i.a.shallowClone(t.uvMaps),t.tangentMap&&(this.tangentMap=t.tangentMap),t.skinning&&(this.skinning=t.skinning),t.edgeCreaseWeights&&(this.edgeCreaseWeights=t.edgeCreaseWeights),t.materialIds&&(this.materialIds=t.materialIds),t.blendShapes&&(this.blendShapes=t.blendShapes),this.colorMaps=i.a.shallowClone(t.colorMaps)):(this.faceRangeOffsets=new Uint32Array(1),this.positions=new u.a,this.colorMaps=new i.a,this.uvMaps=new i.a),this._cachedVolume=null,this.boundingBox=r.i(a.a)(this.positions)}e.a=n;var i=r(18),a=r(341),o=r(339),s=r(33),u=r(7);n.prototype={constructor:n,getNumFaces:function(){return this.faceRangeOffsets.length-1},getNumFaceVertices:function(){return this.positions.faceValueIndices.length},getNumVertices:function(){return this.positions.values.length},getMapById:function(t){return s.a.resolveMap(this,t)||null},topologyChanged:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.skinning&&(this.skinning=null),this.edgeCreaseWeights&&(this.edgeCreaseWeights=null),this.materialIds&&!t&&(this.materialIds=null),this},getVolume:function(){return null===this._cachedVolume&&(this._cachedVolume=r.i(o.a)(this)),this._cachedVolume}},n.fromData=function(t,e,r,a){var o=new n({faceRangeOffsets:t,positions:e.isPolyMap?e:u.a.fromData(t,r||null,e),uvMaps:new i.a,colorMaps:new i.a});return a&&(o.materialIds=a),o}},function(t,e){var r=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},function(t,e){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,e,r){var n=r(14);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e,r){var n=r(264);n.PMREMGenerator=function(t,e,r){this.sourceTexture=t,this.resolution=void 0!==r?r:256,this.samplesPerLevel=void 0!==e?e:16;var i=t.encoding===n.LinearEncoding||t.encoding===n.GammaEncoding||t.encoding===n.sRGBEncoding;this.sourceTexture.minFilter=i?n.LinearFilter:n.NearestFilter,this.sourceTexture.magFilter=i?n.LinearFilter:n.NearestFilter,this.sourceTexture.generateMipmaps=this.sourceTexture.generateMipmaps&&i,this.cubeLods=[];var a=this.resolution,o={format:this.sourceTexture.format,magFilter:this.sourceTexture.magFilter,minFilter:this.sourceTexture.minFilter,type:this.sourceTexture.type,generateMipmaps:this.sourceTexture.generateMipmaps,anisotropy:this.sourceTexture.anisotropy,encoding:this.sourceTexture.encoding};this.numLods=Math.log(a)/Math.log(2)-2;for(var s=0;s<this.numLods;s++){var u=new n.WebGLRenderTargetCube(a,a,o);u.texture.name="PMREMGenerator.cube"+s,this.cubeLods.push(u),a=Math.max(16,a/2)}this.camera=new n.OrthographicCamera(-1,1,1,-1,0,1e3),this.shader=this.getShader(),this.shader.defines.SAMPLES_PER_LEVEL=this.samplesPerLevel,this.planeMesh=new n.Mesh(new n.PlaneGeometry(2,2,0),this.shader),this.planeMesh.material.side=n.DoubleSide,this.scene=new n.Scene,this.scene.add(this.planeMesh),this.scene.add(this.camera),this.shader.uniforms.envMap.value=this.sourceTexture,this.shader.envMap=this.sourceTexture},n.PMREMGenerator.prototype={constructor:n.PMREMGenerator,update:function(t){this.shader.uniforms.envMap.value=this.sourceTexture,this.shader.envMap=this.sourceTexture;var e=t.gammaInput,r=t.gammaOutput,i=t.toneMapping,a=t.toneMappingExposure;t.toneMapping=n.LinearToneMapping,t.toneMappingExposure=1,t.gammaInput=!1,t.gammaOutput=!1;for(var o=0;o<this.numLods;o++){var s=o/(this.numLods-1);this.shader.uniforms.roughness.value=.9*s,this.shader.uniforms.queryScale.value.x=0==o?-1:1;var u=this.cubeLods[o].width;this.shader.uniforms.mapSize.value=u,this.renderToCubeMapTarget(t,this.cubeLods[o]),o<5&&(this.shader.uniforms.envMap.value=this.cubeLods[o].texture)}t.toneMapping=i,t.toneMappingExposure=a,t.gammaInput=e,t.gammaOutput=r},renderToCubeMapTarget:function(t,e){for(var r=0;r<6;r++)this.renderToCubeMapTargetFace(t,e,r)},renderToCubeMapTargetFace:function(t,e,r){e.activeCubeFace=r,this.shader.uniforms.faceIndex.value=r,t.render(this.scene,this.camera,e,!0)},getShader:function(){return new n.ShaderMaterial({defines:{SAMPLES_PER_LEVEL:20},uniforms:{faceIndex:{value:0},roughness:{value:.5},mapSize:{value:.5},envMap:{value:null},queryScale:{value:new n.Vector3(1,1,1)},testColor:{value:new n.Vector3(1,1,1)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform int faceIndex;\n\t\t\t\tuniform float roughness;\n\t\t\t\tuniform samplerCube envMap;\n\t\t\t\tuniform float mapSize;\n\t\t\t\tuniform vec3 testColor;\n\t\t\t\tuniform vec3 queryScale;\n\t\t\t\t\n\t\t\t\tfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\t\t\t\t\tfloat a = ggxRoughness + 0.0001;\n\t\t\t\t\ta *= a;\n\t\t\t\t\treturn ( 2.0 / a - 2.0 );\n\t\t\t\t}\n\t\t\t\tvec3 ImportanceSamplePhong(vec2 uv, mat3 vecSpace, float specPow) {\n\t\t\t\t\tfloat phi = uv.y * 2.0 * PI;\n\t\t\t\t\tfloat cosTheta = pow(1.0 - uv.x, 1.0 / (specPow + 1.0));\n\t\t\t\t\tfloat sinTheta = sqrt(1.0 - cosTheta * cosTheta);\n\t\t\t\t\tvec3 sampleDir = vec3(cos(phi) * sinTheta, sin(phi) * sinTheta, cosTheta);\n\t\t\t\t\treturn vecSpace * sampleDir;\n\t\t\t\t}\n\t\t\t\tvec3 ImportanceSampleGGX( vec2 uv, mat3 vecSpace, float Roughness )\n\t\t\t\t{\n\t\t\t\t\tfloat a = Roughness * Roughness;\n\t\t\t\t\tfloat Phi = 2.0 * PI * uv.x;\n\t\t\t\t\tfloat CosTheta = sqrt( (1.0 - uv.y) / ( 1.0 + (a*a - 1.0) * uv.y ) );\n\t\t\t\t\tfloat SinTheta = sqrt( 1.0 - CosTheta * CosTheta );\n\t\t\t\t\treturn vecSpace * vec3(SinTheta * cos( Phi ), SinTheta * sin( Phi ), CosTheta);\n\t\t\t\t}\n\t\t\t\tmat3 matrixFromVector(vec3 n) {\n\t\t\t\t\tfloat a = 1.0 / (1.0 + n.z);\n\t\t\t\t\tfloat b = -n.x * n.y * a;\n\t\t\t\t\tvec3 b1 = vec3(1.0 - n.x * n.x * a, b, -n.x);\n\t\t\t\t\tvec3 b2 = vec3(b, 1.0 - n.y * n.y * a, -n.y);\n\t\t\t\t\treturn mat3(b1, b2, n);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvec4 testColorMap(float Roughness) {\n\t\t\t\t\tvec4 color;\n\t\t\t\t\tif(faceIndex == 0)\n\t\t\t\t\t\tcolor = vec4(1.0,0.0,0.0,1.0);\n\t\t\t\t\telse if(faceIndex == 1)\n\t\t\t\t\t\tcolor = vec4(0.0,1.0,0.0,1.0);\n\t\t\t\t\telse if(faceIndex == 2)\n\t\t\t\t\t\tcolor = vec4(0.0,0.0,1.0,1.0);\n\t\t\t\t\telse if(faceIndex == 3)\n\t\t\t\t\t\tcolor = vec4(1.0,1.0,0.0,1.0);\n\t\t\t\t\telse if(faceIndex == 4)\n\t\t\t\t\t\tcolor = vec4(0.0,1.0,1.0,1.0);\n\t\t\t\t\telse\n\t\t\t\t\t\tcolor = vec4(1.0,0.0,1.0,1.0);\n\t\t\t\t\tcolor *= ( 1.0 - Roughness );\n\t\t\t\t\treturn color;\n\t\t\t\t}\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec3 sampleDirection;\n\t\t\t\t\tvec2 uv = vUv*2.0 - 1.0;\n\t\t\t\t\tfloat offset = -1.0/mapSize;\n\t\t\t\t\tconst float a = -1.0;\n\t\t\t\t\tconst float b = 1.0;\n\t\t\t\t\tfloat c = -1.0 + offset;\n\t\t\t\t\tfloat d = 1.0 - offset;\n\t\t\t\t\tfloat bminusa = b - a;\n\t\t\t\t\tuv.x = (uv.x - a)/bminusa * d - (uv.x - b)/bminusa * c;\n\t\t\t\t\tuv.y = (uv.y - a)/bminusa * d - (uv.y - b)/bminusa * c;\n\t\t\t\t\tif (faceIndex==0) {\n\t\t\t\t\t\tsampleDirection = vec3(1.0, -uv.y, -uv.x);\n\t\t\t\t\t} else if (faceIndex==1) {\n\t\t\t\t\t\tsampleDirection = vec3(-1.0, -uv.y, uv.x);\n\t\t\t\t\t} else if (faceIndex==2) {\n\t\t\t\t\t\tsampleDirection = vec3(uv.x, 1.0, uv.y);\n\t\t\t\t\t} else if (faceIndex==3) {\n\t\t\t\t\t\tsampleDirection = vec3(uv.x, -1.0, -uv.y);\n\t\t\t\t\t} else if (faceIndex==4) {\n\t\t\t\t\t\tsampleDirection = vec3(uv.x, -uv.y, 1.0);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsampleDirection = vec3(-uv.x, -uv.y, -1.0);\n\t\t\t\t\t}\n\t\t\t\t\tmat3 vecSpace = matrixFromVector(normalize(sampleDirection * queryScale));\n\t\t\t\t\tvec3 rgbColor = vec3(0.0);\n\t\t\t\t\tconst int NumSamples = SAMPLES_PER_LEVEL;\n\t\t\t\t\tvec3 vect;\n\t\t\t\t\tfloat weight = 0.0;\n\t\t\t\t\tfor( int i = 0; i < NumSamples; i ++ ) {\n\t\t\t\t\t\tfloat alpha = ( float(i) ) / float(NumSamples);\n\t\t\t\t\t\tfloat sini = sin(alpha * PI * 2.0);\n\t\t\t\t\t\tfloat cosi = cos(alpha * PI * 2.0);\n\t\t\t\t\t\tfloat r = rand(vec2(sini, cosi));\n\t\t\t\t\t\tvect = ImportanceSampleGGX(vec2(alpha, r), vecSpace, roughness);\n\t\t\t\t\t\tfloat dotProd = dot(vect, normalize(sampleDirection));\n\t\t\t\t\t\tweight += dotProd;\n\t\t\t\t\t\tvec3 color = envMapTexelToLinear(textureCube(envMap,vect)).rgb;\n\t\t\t\t\t\trgbColor.rgb += color;\n\t\t\t\t\t}\n\t\t\t\t\trgbColor /= float(NumSamples);\n\t\t\t\t\t//rgbColor = testColorMap( roughness ).rgb;\n\t\t\t\t\tgl_FragColor = linearToOutputTexel( vec4( rgbColor, 1.0 ) );\n\t\t\t\t}",blending:n.CustomBlending,blendSrc:n.OneFactor,blendDst:n.ZeroFactor,blendSrcAlpha:n.OneFactor,blendDstAlpha:n.ZeroFactor,blendEquation:n.AddEquation})}},n.PMREMCubeUVPacker=function(t,e){this.cubeLods=t,this.numLods=e;var r=4*t[0].width,i=t[0].texture,a={format:i.format,magFilter:i.magFilter,minFilter:i.minFilter,type:i.type,generateMipmaps:i.generateMipmaps,anisotropy:i.anisotropy,encoding:i.encoding===n.RGBEEncoding?n.RGBM16Encoding:i.encoding};a.encoding===n.RGBM16Encoding&&(a.magFilter=n.LinearFilter,a.minFilter=n.LinearFilter),this.CubeUVRenderTarget=new n.WebGLRenderTarget(r,r,a),this.CubeUVRenderTarget.texture.name="PMREMCubeUVPacker.cubeUv",this.CubeUVRenderTarget.texture.mapping=n.CubeUVReflectionMapping,this.camera=new n.OrthographicCamera(.5*-r,.5*r,.5*-r,.5*r,0,1e3),this.scene=new n.Scene,this.scene.add(this.camera),this.objects=[];var o=[];o.push(new n.Vector2(0,0)),o.push(new n.Vector2(1,0)),o.push(new n.Vector2(2,0)),o.push(new n.Vector2(0,1)),o.push(new n.Vector2(1,1)),o.push(new n.Vector2(2,1));var s=r;r=t[0].width;var u=0,l=4;this.numLods=Math.log(t[0].width)/Math.log(2)-2;for(var c=0;c<this.numLods;c++){var h=.5*(s-s/l);r>16&&(l*=2);for(var f=r>16?6:1,d=0,p=0,m=r,g=0;g<f;g++){for(var v=0;v<6;v++){var y=this.getShader();y.uniforms.envMap.value=this.cubeLods[c].texture,y.envMap=this.cubeLods[c].texture,y.uniforms.faceIndex.value=v,y.uniforms.mapSize.value=m;var M=(y.uniforms.testColor.value,new n.Mesh(new n.PlaneGeometry(m,m,0),y));M.position.x=o[v].x*m-h+d,M.position.y=o[v].y*m-h+u+p,M.material.side=n.DoubleSide,this.scene.add(M),this.objects.push(M)}p+=1.75*m,d+=1.25*m,m/=2}u+=2*r,r>16&&(r/=2)}},n.PMREMCubeUVPacker.prototype={constructor:n.PMREMCubeUVPacker,update:function(t){var e=t.gammaInput,r=t.gammaOutput,i=t.toneMapping,a=t.toneMappingExposure;t.gammaInput=!1,t.gammaOutput=!1,t.toneMapping=n.LinearToneMapping,t.toneMappingExposure=1,t.render(this.scene,this.camera,this.CubeUVRenderTarget,!1),t.toneMapping=i,t.toneMappingExposure=a,t.gammaInput=e,t.gammaOutput=r},getShader:function(){return new n.ShaderMaterial({uniforms:{faceIndex:{value:0},mapSize:{value:0},envMap:{value:null},testColor:{value:new n.Vector3(1,1,1)}},vertexShader:"precision highp float;\t\t\t\tvarying vec2 vUv;\t\t\t\tvoid main() {\t\t\t\t\tvUv = uv;\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\t\t\t\t}",fragmentShader:"precision highp float;\t\t\t\tvarying vec2 vUv;\t\t\t\tuniform samplerCube envMap;\t\t\t\tuniform float mapSize;\t\t\t\tuniform vec3 testColor;\t\t\t\tuniform int faceIndex;\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tvec3 sampleDirection;\t\t\t\t\tvec2 uv = vUv;\t\t\t\t\tuv = uv * 2.0 - 1.0;\t\t\t\t\tuv.y *= -1.0;\t\t\t\t\tif(faceIndex == 0) {\t\t\t\t\t\tsampleDirection = normalize(vec3(1.0, uv.y, -uv.x));\t\t\t\t\t} else if(faceIndex == 1) {\t\t\t\t\t\tsampleDirection = normalize(vec3(uv.x, 1.0, uv.y));\t\t\t\t\t} else if(faceIndex == 2) {\t\t\t\t\t\tsampleDirection = normalize(vec3(uv.x, uv.y, 1.0));\t\t\t\t\t} else if(faceIndex == 3) {\t\t\t\t\t\tsampleDirection = normalize(vec3(-1.0, uv.y, uv.x));\t\t\t\t\t} else if(faceIndex == 4) {\t\t\t\t\t\tsampleDirection = normalize(vec3(uv.x, -1.0, -uv.y));\t\t\t\t\t} else {\t\t\t\t\t\tsampleDirection = normalize(vec3(-uv.x, uv.y, -1.0));\t\t\t\t\t}\t\t\t\t\tvec4 color = envMapTexelToLinear( textureCube( envMap, sampleDirection ) );\t\t\t\t\tgl_FragColor = linearToOutputTexel( color );\t\t\t\t}",blending:n.CustomBlending,premultipliedAlpha:!1,blendSrc:n.OneFactor,blendDst:n.ZeroFactor,blendSrcAlpha:n.OneFactor,blendDstAlpha:n.ZeroFactor,blendEquation:n.AddEquation})}},n.CopyShader={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = opacity * texel;","}"].join("\n")},n.CompositeShader={defines:{BLENDING:n.NoBlending},uniforms:{tSource:{type:"t",value:null},opacitySource:{type:"f",value:1},tDestination:{type:"t",value:null},opacityDestination:{type:"f",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tSource;","uniform float opacitySource;","uniform sampler2D tDestination;","uniform float opacityDestination;","varying vec2 vUv;","void main() {","vec4 d = opacityDestination * texture2D( tDestination, vUv );","vec4 s = opacitySource * texture2D( tSource, vUv );","#if (BLENDING == "+n.NormalBlending+")","gl_FragColor = d * ( 1.0 - s.a ) + s;","#elif (BLENDING == "+n.AdditiveBlending+")","gl_FragColor = d + s;","#elif (BLENDING == "+n.SubtractiveBlending+")","gl_FragColor = d - s;","#elif (BLENDING == "+n.MultiplyBlending+")","gl_FragColor = d * s;","#else","gl_FragColor = s;","#endif","}"].join("\n")},n.GlossyMirrorShader={defines:{SPECULAR_MAP:0,ROUGHNESS_MAP:0,GLOSSY_REFLECTIONS:1,REFLECTION_LOD_LEVELS:4,PERSPECTIVE_CAMERA:1},uniforms:{metalness:{type:"f",value:0},specularColor:{type:"c",value:new n.Color(16777215)},tSpecular:{type:"t",value:null},tReflection:{type:"t",value:null},tReflection1:{type:"t",value:null},tReflection2:{type:"t",value:null},tReflection3:{type:"t",value:null},tReflection4:{type:"t",value:null},tReflectionDepth:{type:"t",value:null},roughness:{type:"f",value:0},distanceFade:{type:"f",value:.01},fresnelStrength:{type:"f",value:1},reflectionTextureMatrix:{type:"m4",value:new n.Matrix4},mirrorCameraWorldMatrix:{type:"m4",value:new n.Matrix4},mirrorCameraProjectionMatrix:{type:"m4",value:new n.Matrix4},mirrorCameraInverseProjectionMatrix:{type:"m4",value:new n.Matrix4},mirrorCameraNear:{type:"f",value:0},mirrorCameraFar:{type:"f",value:0},screenSize:{type:"v2",value:new n.Vector2},mirrorNormal:{type:"v3",value:new n.Vector3},mirrorWorldPosition:{type:"v3",value:new n.Vector3}},vertexShader:["uniform mat4 reflectionTextureMatrix;","varying vec4 mirrorCoord;","varying vec3 vecPosition;","varying vec3 worldNormal;","varying vec2 vUv;","void main() {","vUv = uv;","vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","vecPosition = cameraPosition - worldPosition.xyz;","worldNormal = (modelMatrix * vec4(normal,0.0)).xyz;","mirrorCoord = reflectionTextureMatrix * worldPosition;","gl_Position = projectionMatrix * mvPosition;","}"].join("\n"),blending:n.NormalBlending,transparent:!0,fragmentShader:["#include <common>","#include <packing>","#include <bsdfs>","uniform float roughness;","#if ROUGHNESS_MAP == 1","uniform sampler2D tRoughness;","#endif","uniform float metalness;","uniform float distanceFade;","uniform float fresnelStrength;","uniform vec3 specularColor;","#if SPECULAR_MAP == 1","uniform sampler2D tSpecular;","#endif","uniform sampler2D tReflection;","#if GLOSSY_REFLECTIONS == 1","uniform sampler2D tReflection1;","uniform sampler2D tReflection2;","uniform sampler2D tReflection3;","uniform sampler2D tReflection4;","uniform sampler2D tReflectionDepth;","#endif","varying vec3 vecPosition;","varying vec3 worldNormal;","varying vec2 vUv;","varying vec4 mirrorCoord;","uniform mat4 mirrorCameraProjectionMatrix;","uniform mat4 mirrorCameraInverseProjectionMatrix;","uniform mat4 mirrorCameraWorldMatrix;","uniform float mirrorCameraNear;","uniform float mirrorCameraFar;","uniform vec2 screenSize;","uniform vec3 mirrorNormal;","uniform vec3 mirrorWorldPosition;","#if GLOSSY_REFLECTIONS == 1","float getReflectionDepth() {","return unpackRGBAToDepth( texture2DProj( tReflectionDepth, mirrorCoord ) );","}","float getReflectionViewZ( const in float reflectionDepth ) {","#if PERSPECTIVE_CAMERA == 1","return perspectiveDepthToViewZ( reflectionDepth, mirrorCameraNear, mirrorCameraFar );","#else","return orthographicDepthToViewZ( reflectionDepth, mirrorCameraNear, mirrorCameraFar );","#endif","}","vec3 getReflectionViewPosition( const in vec2 screenPosition, const in float reflectionDepth, const in float reflectionViewZ ) {","float clipW = mirrorCameraProjectionMatrix[2][3] * reflectionViewZ + mirrorCameraProjectionMatrix[3][3];","vec4 clipPosition = vec4( ( vec3( screenPosition, reflectionDepth ) - 0.5 ) * 2.0, 1.0 );","clipPosition *= clipW;","return ( mirrorCameraInverseProjectionMatrix * clipPosition ).xyz;","}","#endif","vec4 getReflection( const in vec4 mirrorCoord, const in float lodLevel ) {","#if GLOSSY_REFLECTIONS == 0","return texture2DProj( tReflection, mirrorCoord );","#else","vec4 color0, color1;","float alpha;","if( lodLevel < 1.0 ) {","color0 = texture2DProj( tReflection, mirrorCoord );","color1 = texture2DProj( tReflection1, mirrorCoord );","alpha = lodLevel;","}","else if( lodLevel < 2.0) {","color0 = texture2DProj( tReflection1, mirrorCoord );","color1 = texture2DProj( tReflection2, mirrorCoord );","alpha = lodLevel - 1.0;","}","else if( lodLevel < 3.0 ) {","color0 = texture2DProj( tReflection2, mirrorCoord );","color1 = texture2DProj( tReflection3, mirrorCoord );","alpha = lodLevel - 2.0;","}","else {","color0 = texture2DProj( tReflection3, mirrorCoord );","color1 = color0;","alpha = 0.0;","}","return mix( color0, color1, alpha );","#endif","}","void main() {","vec3 specular = specularColor;","#if SPECULAR_MAP == 1","specular *= texture2D( tSpecular, vUv );","#endif","float fade = 1.0;","#if GLOSSY_REFLECTIONS == 1","float localRoughness = roughness;","#if ROUGHNESS_MAP == 1","localRoughness *= texture2D( tRoughness, vUv ).r;","#endif","vec2 screenPosition = gl_FragCoord.xy / screenSize;","float reflectionDepth = getReflectionDepth();","float reflectionViewZ = getReflectionViewZ( reflectionDepth );","vec3 reflectionViewPosition = getReflectionViewPosition( screenPosition, reflectionDepth, reflectionViewZ );","vec3 reflectionWorldPosition = ( mirrorCameraWorldMatrix * vec4( reflectionViewPosition, 1.0 ) ).xyz;","vec3 closestPointOnMirror = projectOnPlane( reflectionWorldPosition, mirrorWorldPosition, mirrorNormal );","vec3 pointOnMirror = linePlaneIntersect( cameraPosition, normalize( reflectionWorldPosition - cameraPosition ), mirrorWorldPosition, mirrorNormal );","float distance = length( closestPointOnMirror - reflectionWorldPosition );","localRoughness = localRoughness * distance * 0.2;","float lodLevel = localRoughness;","fade = 1.0 - smoothstep( 0.0, 1.0, distanceFade * distance * 0.2 );","#else","float lodLevel = 0.0;","#endif","vec4 reflection = getReflection( mirrorCoord, lodLevel );","float dotNV = clamp( dot( normalize( worldNormal ), normalize( vecPosition ) ), EPSILON, 1.0 );","specular = mix( vec3( 0.05 ), specular, metalness );","vec3 fresnel;","if( fresnelStrength < 0.0 ) {","fresnel = mix( specular, specular * pow( dotNV, 2.0 ), -fresnelStrength ) * pow( 1.0 - roughness, 2.0 );","} else {","fresnel = mix( specular, F_Schlick( specular, dotNV ), fresnelStrength ) * pow( 1.0 - roughness, 2.0 );","}","gl_FragColor = vec4( reflection.rgb, fresnel * fade * reflection.a );","}"].join("\n")},n.ShaderChunk.sao=["#include <packing>","float getDepth( const in vec2 screenPosition ) {","#if DEPTH_PACKING == 1","return unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );","#else","return texture2D( tDepth, screenPosition ).x;","#endif","}","vec4 setDepth( const in float depth ) {","#if DEPTH_PACKING == 1","return packDepthToRGBA( depth );","#else","return vec4( depth, 0, 0, 0 );","#endif","}","float getViewZ( const in float depth ) {","#if PERSPECTIVE_CAMERA == 1","return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );","#else","return orthographicDepthToViewZ( depth, cameraNear, cameraFar );","#endif","}"].join("\n"),n.SAOShader={blending:n.NoBlending,defines:{NUM_SAMPLES:13,NUM_RINGS:7,NORMAL_TEXTURE:0,DIFFUSE_TEXTURE:1,DEPTH_PACKING:1,DEPTH_MIPS:0,PERSPECTIVE_CAMERA:1},extensions:{derivatives:!0},uniforms:{tDepth:{type:"t",value:null},tDepth1:{type:"t",value:null},tDepth2:{type:"t",value:null},tDepth3:{type:"t",value:null},tDiffuse:{type:"t",value:null},tNormal:{type:"t",value:null},size:{type:"v2",value:new n.Vector2(512,512)},cameraNear:{type:"f",value:1},cameraFar:{type:"f",value:100},cameraProjectionMatrix:{type:"m4",value:new n.Matrix4},cameraInverseProjectionMatrix:{type:"m4",value:new n.Matrix4},intensity:{type:"f",value:.1},occlusionSphereWorldRadius:{type:"f",value:100},worldToScreenRatio:{type:"v2",value:new n.Vector2(1,1)},randomSeed:{type:"f",value:0}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <common>","varying vec2 vUv;","#if DIFFUSE_TEXTURE == 1","uniform sampler2D tDiffuse;","#endif","#define MAX_MIP_LEVEL 3","uniform sampler2D tDepth;","#if DEPTH_MIPS == 1","uniform sampler2D tDepth1;","uniform sampler2D tDepth2;","uniform sampler2D tDepth3;","#endif","#if NORMAL_TEXTURE == 1","uniform sampler2D tNormal;","#endif","uniform float cameraNear;","uniform float cameraFar;","uniform mat4 cameraProjectionMatrix;","uniform mat4 cameraInverseProjectionMatrix;","uniform float intensity;","uniform float occlusionSphereWorldRadius;","uniform vec2 size;","uniform vec2 worldToScreenRatio;","uniform float randomSeed;","#include <sao>","vec4 getDefaultColor( const in vec2 screenPosition ) {","#if DIFFUSE_TEXTURE == 1","return texture2D( tDiffuse, vUv );","#else","return vec4( 1.0 );","#endif","}","vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {","float clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];","vec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );","clipPosition *= clipW;","return ( cameraInverseProjectionMatrix * clipPosition ).xyz;","}","vec3 getViewNormal( const in vec3 viewPosition, const in vec2 screenPosition ) {","#if NORMAL_TEXTURE == 1","return -unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );","#else","return normalize( cross( dFdx( viewPosition ), dFdy( viewPosition ) ) );","#endif","}","float getDepthMIP( const in vec2 screenPosition, const int mipLevel ) {","vec4 rawDepth;","#if DEPTH_MIPS == 0","rawDepth = texture2D( tDepth, screenPosition );","#else","if( mipLevel == 0 ) {","rawDepth = texture2D( tDepth, screenPosition );","}","else if( mipLevel == 1 ) {","rawDepth = texture2D( tDepth1, screenPosition );","}","else if( mipLevel == 2 ) {","rawDepth = texture2D( tDepth2, screenPosition );","}","else {","rawDepth = texture2D( tDepth3, screenPosition );","}","#endif","#if DEPTH_PACKING == 1","return unpackRGBAToDepth( rawDepth );","#else","return rawDepth.x;","#endif","}","float scaleDividedByCameraFar;","float minResolutionMultipliedByCameraFar;","float errorCorrectionFactor;","float getOcclusion( const in vec3 centerViewPosition, const in vec3 centerViewNormal, const in vec3 sampleViewPosition ) {","vec3 viewDelta = sampleViewPosition - centerViewPosition;","float viewDistance2 = dot( viewDelta, viewDelta );","return max( ( dot( centerViewNormal, viewDelta ) + centerViewPosition.z * 0.001 ) / ( viewDistance2 + 0.0001 ), 0.0 );// * smoothstep( pow2( occlusionSphereWorldRadius ), 0.0, viewDistance2 );","}","int getMipLevel( const in vec2 occlusionSphereScreenRadius ) {","return int( clamp( floor( log2( length( occlusionSphereScreenRadius * size ) ) - 4.0 ), 0.0, 3.0 ) );","}","const float ANGLE_STEP = PI2 * float( NUM_RINGS ) / float( NUM_SAMPLES );","const float INV_NUM_SAMPLES = 1.0 / float( NUM_SAMPLES );","float getAmbientOcclusion( const in vec3 centerViewPosition ) {","vec3 centerViewNormal = getViewNormal( centerViewPosition, vUv );","vec2 invSize = 1.0 / size;","vec2 occlusionSphereScreenRadius = occlusionSphereWorldRadius * worldToScreenRatio / centerViewPosition.z;","float random = rand( vUv + randomSeed );","float angle = random * PI2;","float radiusStep = INV_NUM_SAMPLES;","float radius = radiusStep * ( 0.5 + random );","float occlusionSum = 0.0;","for( int i = 0; i < NUM_SAMPLES; i ++ ) {","radius = (float(i) + 0.5) * radiusStep;","vec2 sampleUvOffset = vec2( cos( angle ), sin( angle ) ) * radius * occlusionSphereScreenRadius * 1.0;","sampleUvOffset = floor( sampleUvOffset * size + vec2( 0.5 ) ) * invSize;","if( sampleUvOffset.x == 0.0 && sampleUvOffset.y == 0.0 ) continue;","angle += ANGLE_STEP;","vec2 sampleUv = vUv + sampleUvOffset;","if( sampleUv.x <= 0.0 || sampleUv.y <= 0.0 || sampleUv.x >= 1.0 || sampleUv.y >= 1.0 ) continue;","float sampleDepth = getDepthMIP( sampleUv, int( 4.0 * radius ) );","if( sampleDepth >= ( 1.0 - EPSILON ) ) {","continue;","}","float sampleViewZ = getViewZ( sampleDepth );","vec3 sampleViewPosition = getViewPosition( sampleUv, sampleDepth, sampleViewZ );","occlusionSum += getOcclusion( centerViewPosition, centerViewNormal, sampleViewPosition );","}","return occlusionSum * intensity * 2.0 * occlusionSphereWorldRadius / ( float( NUM_SAMPLES ) );","}","void main() {","float centerDepth = getDepth( vUv );","if( centerDepth >= ( 1.0 - EPSILON ) ) {","discard;","}","float centerViewZ = getViewZ( centerDepth );","vec3 viewPosition = getViewPosition( vUv, centerDepth, centerViewZ );","float ambientOcclusion = getAmbientOcclusion( viewPosition );","gl_FragColor = packDepthToRGBA( centerDepth );","gl_FragColor.x = max( 1.0 - ambientOcclusion, 0.0 );","}"].join("\n")},n.SAODepthMinifyShader={blending:n.NoBlending,defines:{DEPTH_PACKING:1},uniforms:{tDepth:{type:"t",value:null},cameraNear:{type:"f",value:1},cameraFar:{type:"f",value:100},size:{type:"v2",value:new n.Vector2(256,256)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <common>","#include <packing>","varying vec2 vUv;","uniform sampler2D tDepth;","uniform vec2 size;","uniform float cameraNear;","uniform float cameraFar;","void main() {","vec2 uv = vUv;","vec2 invSize = 0.5 / size;","float depth = unpackRGBAToDepth( texture2D( tDepth, vUv + invSize * vec2( -1.0, -1.0 ) ) );","depth += unpackRGBAToDepth( texture2D( tDepth, vUv + invSize * vec2( 1.0, 1.0 ) ) );","depth += unpackRGBAToDepth( texture2D( tDepth, vUv + invSize * vec2( -1.0, 1.0 ) ) );","depth += unpackRGBAToDepth( texture2D( tDepth, vUv + invSize * vec2( 1.0, -1.0 ) ) );","depth *= 0.25;","gl_FragColor = packDepthToRGBA( depth );","}"].join("\n")},n.SAOBilaterialFilterShader={blending:n.NoBlending,defines:{PERSPECTIVE_CAMERA:1,KERNEL_SAMPLE_RADIUS:4},uniforms:{tAODepth:{type:"t",value:null},tAONormal:{type:"t",value:null},size:{type:"v2",value:new n.Vector2(256,256)},kernelDirection:{type:"v2",value:new n.Vector2(1,0)},cameraNear:{type:"f",value:1},cameraFar:{type:"f",value:100},edgeSharpness:{type:"f",value:3},packOutput:{type:"f",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <common>","varying vec2 vUv;","uniform sampler2D tAODepth;","uniform sampler2D tAONormal;","uniform vec2 size;","uniform float cameraNear;","uniform float cameraFar;","uniform float edgeSharpness;","uniform int packOutput;","uniform vec2 kernelDirection;","#include <packing>","float getViewZ( const in float depth ) {","#if PERSPECTIVE_CAMERA == 1","return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );","#else","return orthographicDepthToViewZ( depth, cameraNear, cameraFar );","#endif","}","void addTapInfluence( const in vec2 tapUv, const in vec3 centerNormal, const in float centerViewZ, const in float kernelWeight, inout float aoSum, inout float weightSum ) {","vec4 depthTexel = texture2D( tAODepth, tapUv );","float ao = depthTexel.r;","depthTexel.r = 1.0;","float depth = unpackRGBAToDepth( depthTexel );","if( depth >= ( 1.0 - EPSILON ) ) {","return;","}","float tapViewZ = -getViewZ( depth );","float depthWeight = max(0.0, 1.0 - (edgeSharpness * 20.0) * abs(tapViewZ - centerViewZ));","vec3 normal = unpackRGBToNormal(texture2D(tAONormal, tapUv).rgb);","float normalCloseness = dot(normal, centerNormal);","float k_normal = 4.0;","float normalError = (1.0 - pow4( normalCloseness )) * k_normal;","float normalWeight = max((1.0 - edgeSharpness * normalError), 0.00);","float tapWeight = kernelWeight * ( depthWeight + normalWeight );","aoSum += ao * tapWeight;","weightSum += tapWeight;","}","float normpdf(in float x, in float sigma) {","return 0.39894*exp(-0.5*x*x/(sigma*sigma))/sigma;","}","void main() {","vec4 depthTexel = texture2D( tAODepth, vUv );","float ao = depthTexel.r;","depthTexel.r = 1.0;","float depth = unpackRGBAToDepth( depthTexel );","if( depth >= ( 1.0 - EPSILON ) ) {","discard;","}","float centerViewZ = -getViewZ( depth );","float weightSum = normpdf(0.0, 5.0) + 0.1;","float aoSum = ao * weightSum;","vec2 uvIncrement = ( kernelDirection / size );","vec2 rTapUv = vUv, lTapUv = vUv;","vec3 normalCenter = unpackRGBToNormal(texture2D(tAONormal, vUv).rgb);","for( int i = 1; i <= KERNEL_SAMPLE_RADIUS; i ++ ) {","float kernelWeight = normpdf(float(i), 5.0) + 0.1;","rTapUv += uvIncrement;","addTapInfluence( rTapUv, normalCenter, centerViewZ, kernelWeight, aoSum, weightSum );","lTapUv -= uvIncrement;","addTapInfluence( lTapUv, normalCenter, centerViewZ, kernelWeight, aoSum, weightSum );","}","ao = aoSum / weightSum;","if( packOutput == 1 ) {","gl_FragColor = depthTexel;","gl_FragColor.r = ao;","}","else {","gl_FragColor = vec4( vec3( ao ), 1.0 );","}","}"].join("\n")},n.BlurShader={defines:{KERNEL_RADIUS:4},uniforms:{tDiffuse:{type:"t",value:null},size:{type:"v2",value:new n.Vector2(512,512)},sampleUvOffsets:{type:"v2v",value:[new n.Vector2(0,0)]},sampleWeights:{type:"1fv",value:[1]}},vertexShader:["#include <common>","varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec2 size;","uniform vec2 sampleUvOffsets[ KERNEL_RADIUS + 1 ];","uniform float sampleWeights[ KERNEL_RADIUS + 1 ];","varying vec2 vUv;","void main() {","vec2 invSize = 1.0 / size;","float weightSum = sampleWeights[0];","vec4 diffuseSum = texture2D( tDiffuse, vUv ) * weightSum;","for( int i = 1; i <= KERNEL_RADIUS; i ++ ) {","float weight = sampleWeights[i];","vec2 sampleUvOffset = sampleUvOffsets[i] * invSize;","diffuseSum += ( texture2D( tDiffuse, vUv + sampleUvOffset ) + texture2D( tDiffuse, vUv - sampleUvOffset ) ) * weight;","weightSum += 2.0 * weight;","}","gl_FragColor =diffuseSum / weightSum;","}"].join("\n")},n.BlurShaderUtils={createSampleWeights:function(t,e){for(var r=[],n=0;n<=t;n++)r.push(function(t,e){return Math.exp(-t*t/(e*e*2))/(Math.sqrt(2*Math.PI)*e)}(n,e));return r},createSampleOffsets:function(t,e){for(var r=[],n=0;n<=t;n++)r.push(e.clone().multiplyScalar(n));return r},configure:function(t,e,r,i){e|=0,t.defines.KERNEL_RADIUS===e&&t.stdDev==r||(t.defines.KERNEL_RADIUS=e,t.uniforms.sampleUvOffsets.value=n.BlurShaderUtils.createSampleOffsets(e,i),t.uniforms.sampleWeights.value=n.BlurShaderUtils.createSampleWeights(e,r),t.uvIncrement=i,t.stdDev=r,t.needsUpdate=!0)}},n.LuminosityHighPassShader={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{type:"t",value:null},luminosityThreshold:{type:"f",value:1},smoothWidth:{type:"f",value:1},defaultColor:{type:"c",value:new n.Color(0)},defaultOpacity:{type:"f",value:0}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec3 defaultColor;","uniform float defaultOpacity;","uniform float luminosityThreshold;","uniform float smoothWidth;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","vec3 luma = vec3( 0.299, 0.587, 0.114 );","float v = dot( texel.xyz, luma );","vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );","float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );","gl_FragColor = mix( outputColor, texel, alpha );","}"].join("\n")},n.EffectComposer=function(t,e,r){if(this.renderer=t,this.cameraAware=e||!1,void 0===r){var i={minFilter:n.LinearFilter,magFilter:n.LinearFilter,format:n.RGBAFormat,stencilBuffer:!0},a=t.getSize();r=new n.WebGLRenderTarget(a.width,a.height,i),r.texture.name="EffectComposer.rt1",r.texture.generateMipmaps=!1}this.renderTarget1=r,this.renderTarget2=r.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.renderTarget2.texture.generateMipmaps=!1,this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.cameraAware&&(this.writeBuffer2=this.renderTarget1.clone(),this.readBuffer2=this.renderTarget2.clone()),this.tempBufferMap={},this.passes=[],void 0===n.CopyShader&&console.error("THREE.EffectComposer relies on THREE.CopyShader"),this.copyPass=new n.ShaderPass(n.CopyShader)},Object.assign(n.EffectComposer.prototype,{swapBuffers:function(){var t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t},swapDualBuffers:function(){var t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t,t=this.readBuffer2,this.readBuffer2=this.writeBuffer2,this.writeBuffer2=t},requestBuffer:function(t){if(!this.tempBufferMap[t]){var e=this.renderTarget1.clone();e.texture.name="EffectComposer.buffer["+t+"]",e.texture.generateMipmaps=!1,this.tempBufferMap[t]=e}return this.tempBufferMap[t]},addPass:function(t){this.passes.push(t);var e=this.renderer.getSize();t.setSize(e.width,e.height)},insertPass:function(t,e){this.passes.splice(e,0,t)},render:function(t){var e,r,i=!1,a=this.passes.length;for(r=0;r<a;r++)if(e=this.passes[r],!1!==e.enabled){if(e.render(this.renderer,this.writeBuffer,this.readBuffer,t,i),e.needsSwap){if(i){var o=this.renderer.context;o.stencilFunc(o.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),o.stencilFunc(o.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==n.MaskPass&&(e instanceof n.MaskPass?i=!0:e instanceof n.ClearMaskPass&&(i=!1))}},vrRender:function(t,e,r,i,a){var o=t.getVRDisplay();if(o&&o.isPresenting){var s=e.autoUpdate;s&&(e.updateMatrixWorld(),e.autoUpdate=!1);var u=this.renderer.getSize(),l=o.getEyeParameters("left"),c=o.getEyeParameters("right"),h=(new n.Vector3).fromArray(l.offset),f=(new n.Vector3).fromArray(c.offset),d=[0,0,.5,1],p=[.5,0,.5,1],m=null;"VRFrameData"in window&&(m=new window.VRFrameData);var g=!1;Array.isArray(e)&&(console.warn("THREE.VREffect.render() no longer supports arrays. Use object.layers instead."),e=e[0]);var v,y,M=o.getLayers();if(M.length){var w=M[0];v=null!==w.leftBounds&&4===w.leftBounds.length?w.leftBounds:d,y=null!==w.rightBounds&&4===w.rightBounds.length?w.rightBounds:p}else v=d,y=p;var x={x:Math.round(u.width*v[0]),y:Math.round(u.height*v[1]),width:Math.round(u.width*v[2]),height:Math.round(u.height*v[3])},b={x:Math.round(u.width*y[0]),y:Math.round(u.height*y[1]),width:Math.round(u.width*y[2]),height:Math.round(u.height*y[3])};(this.renderer.autoClear||i)&&this.renderer.clear(),null===r.parent&&r.updateMatrixWorld();var T=t.getCameraL(),E=t.getCameraR();r.matrixWorld.decompose(T.position,T.quaternion,T.scale),r.matrixWorld.decompose(E.position,E.quaternion,E.scale);var S=t.scale;T.translateOnAxis(h,S),E.translateOnAxis(f,S),o.getFrameData?(o.depthNear=r.near,o.depthFar=r.far,o.getFrameData(m),T.projectionMatrix.elements=m.leftProjectionMatrix,E.projectionMatrix.elements=m.rightProjectionMatrix,T.updateMatrixWorld(),E.updateMatrixWorld()):(T.projectionMatrix=t.fovToProjection(l.fieldOfView,!0,r.near,r.far),E.projectionMatrix=t.fovToProjection(c.fieldOfView,!0,r.near,r.far));var _,A,D=this.passes.length;for(A=0;A<D;A++)if(_=this.passes[A],!1!==_.enabled&&!1!==_.cameraAware){if(this.renderer.setScissorTest(!0),this.renderer.setScissor(x.x,x.y,x.width,x.height),this.renderer.setViewport(x.x,x.y,x.width,x.height),_.camera&&_.camera.isPerspectiveCamera&&(_.camera=T),_.render(this.renderer,this.writeBuffer,this.readBuffer,a,g),this.renderer.setScissor(b.x,b.y,b.width,b.height),this.renderer.setViewport(b.x,b.y,b.width,b.height),_.camera&&_.camera.isPerspectiveCamera&&(_.camera=E),_.render(this.renderer,this.writeBuffer2,this.readBuffer2,a,g),_.needsSwap){if(g){var N=this.renderer.context;N.stencilFunc(N.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,a),N.stencilFunc(N.EQUAL,1,4294967295)}this.swapDualBuffers()}void 0!==n.MaskPass&&(_ instanceof n.MaskPass?g=!0:_ instanceof n.ClearMaskPass&&(g=!1)),_.camera&&_.camera.isPerspectiveCamera&&(_.camera=r)}this.renderer.setScissorTest(!1),this.renderer.setViewport(0,0,u.width,u.height),s&&(e.autoUpdate=!0),t.autoSubmitFrame&&t.submitFrame()}this.renderer.getContextAttributes().preserveDrawingBuffer||this.render()},stereoRender:function(t,e,r,i){r.updateMatrixWorld(),t.updateStereo(r);var a,o,s=!1,u=this.passes.length,l=this.renderer.getSize();for(o=0;o<u;o++)if(a=this.passes[o],!1!==a.enabled&&!1!==a.cameraAware){if(this.renderer.setScissorTest(!0),this.renderer.setScissor(0,0,l.width/2,l.height),this.renderer.setViewport(0,0,l.width/2,l.height),a.camera instanceof n.PerspectiveCamera&&(a.camera=t.getCameraL()),a.render(this.renderer,this.writeBuffer,this.readBuffer,i,s),this.renderer.setScissor(l.width/2,0,l.width/2,l.height),this.renderer.setViewport(l.width/2,0,l.width/2,l.height),a.camera instanceof n.PerspectiveCamera&&(a.camera=t.getCameraR()),a.render(this.renderer,this.writeBuffer2,this.readBuffer2,i,s),a.needsSwap){if(s){var c=this.renderer.context;c.stencilFunc(c.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,i),c.stencilFunc(c.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==n.MaskPass&&(a instanceof n.MaskPass?s=!0:a instanceof n.ClearMaskPass&&(s=!1))}},reset:function(t){if(void 0===t){var e=this.renderer.getSize();t=this.renderTarget1.clone(),t.setSize(e.width,e.height)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.cameraAware&&(this.writeBuffer2=this.writeBuffer.clone(),this.readBuffer2=this.readBuffer.clone())},dispose:function(){for(var t in this.tempBufferMap)this.tempBufferMap.hasOwnProperty(t)&&this.tempBufferMap[t].dispose();for(var e=0;e<this.passes.length;e++)this.passes[e].dispose()},setSize:function(t,e){this.renderTarget1.setSize(t,e),this.renderTarget2.setSize(t,e),this.cameraAware&&(this.writeBuffer2.setSize(t,e),this.readBuffer2.setSize(t,e));for(var r in this.tempBufferMap)this.tempBufferMap.hasOwnProperty(r)&&this.tempBufferMap[r].setSize(t,e);for(var n=0;n<this.passes.length;n++)this.passes[n].setSize(t,e)}}),n.Pass=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1,this.cameraAware=!1},Object.assign(n.Pass.prototype,{setSize:function(t,e){},dispose:function(){},render:function(t,e,r,n,i){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),n.RenderPass=function(t,e,r,i,a){n.Pass.call(this),this.scene=t,this.camera=e,this.renderOver=!1,this.overrideMaterial=r,this.clearColor=i,this.clearAlpha=void 0!==a?a:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,void 0===n.CopyShader&&console.error("THREE.SSAARenderPass relies on THREE.CopyShader"),this.overMaterial=new n.ShaderMaterial(n.CopyShader),this.overMaterial.uniforms=n.UniformsUtils.clone(this.overMaterial.uniforms),this.overMaterial.blending=n.NormalBlending,this.overMaterial.premultipliedAlpha=!0,this.overMaterial.transparent=!0,this.overMaterial.depthTest=!1,this.overMaterial.depthWrite=!1,this.camera2=new n.OrthographicCamera(-1,1,1,-1,0,1),this.scene2=new n.Scene,this.quad2=new n.Mesh(new n.PlaneGeometry(2,2),this.copyMaterial),this.quad2.frustumCulled=!1,this.scene2.add(this.quad2)},n.RenderPass.prototype=Object.assign(Object.create(n.Pass.prototype),{constructor:n.RenderPass,render:function(t,e,r,n,i){var a=t.autoClear;t.autoClear=!1,this.scene.overrideMaterial=this.overrideMaterial;var o,s;o=t.getClearColor(),s=t.getClearAlpha(),this.clearDepth&&t.clearDepth(),this.renderOver?(t.setClearColor(0,0),t.renderOverride(this.overrideMaterial,this.scene,this.camera,e,!0),this.overMaterial.uniforms.tDiffuse.value=e.texture,void 0!==this.clearColor&&t.setClearColor(this.clearColor,this.clearAlpha),t.renderOverride(this.overMaterial,this.scene2,this.camera2,this.renderToScreen?null:r,this.clear)):(void 0!==this.clearColor&&t.setClearColor(this.clearColor,this.clearAlpha),t.renderOverride(this.overrideMaterial,this.scene,this.camera,this.renderToScreen?null:r,this.clear)),this.clearColor&&t.setClearColor(o,s),this.scene.overrideMaterial=null,t.autoClear=a}}),n.MaskPass=function(t,e){n.Pass.call(this),this.scene=t,this.camera=e,this.clear=!0,this.needsSwap=!1,this.inverse=!1},n.MaskPass.prototype=Object.assign(Object.create(n.Pass.prototype),{constructor:n.MaskPass,render:function(t,e,r,n,i){var a=t.context,o=t.state;o.buffers.color.setMask(!1),o.buffers.depth.setMask(!1),o.buffers.color.setLocked(!0),o.buffers.depth.setLocked(!0);var s,u;this.inverse?(s=0,u=1):(s=1,u=0),o.buffers.stencil.setTest(!0),o.buffers.stencil.setOp(a.REPLACE,a.REPLACE,a.REPLACE),o.buffers.stencil.setFunc(a.ALWAYS,s,4294967295),o.buffers.stencil.setClear(u),t.render(this.scene,this.camera,r,this.clear),t.render(this.scene,this.camera,e,this.clear),o.buffers.color.setLocked(!1),o.buffers.depth.setLocked(!1),o.buffers.stencil.setFunc(a.EQUAL,1,4294967295),o.buffers.stencil.setOp(a.KEEP,a.KEEP,a.KEEP)}}),n.ClearMaskPass=function(){n.Pass.call(this),this.needsSwap=!1},n.ClearMaskPass.prototype=Object.create(n.Pass.prototype),Object.assign(n.ClearMaskPass.prototype,{render:function(t,e,r,n,i){t.state.buffers.stencil.setTest(!1)}}),n.ShaderPass=function(t,e){n.Pass.call(this),this.textureID=void 0!==e?e:"tDiffuse",t instanceof n.ShaderMaterial?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=n.UniformsUtils.clone(t.uniforms),this.material=new n.ShaderMaterial({defines:t.defines||{},uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.camera=new n.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new n.Scene,this.quad=new n.Mesh(new n.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)},n.ShaderPass.prototype=Object.assign(Object.create(n.Pass.prototype),{constructor:n.ShaderPass,render:function(t,e,r,n,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=r.texture),this.renderToScreen?t.renderPass(this.material):t.renderPass(this.material,e,this.clear)}}),n.SAOPass=function(t,e){n.Pass.call(this),this.scene=t,this.camera=e,this.intensity=.5,this.implicitNormals=!1,this.occlusionSphereWorldRadius=20,this.blurEnabled=!0,this.outputOverride=null,this.depthMIPs=!1,this.downSamplingRatio=2,this.blurKernelSize=1===this.downSamplingRatio?8:6,this.edgeSharpness=1,this.depthMaterial=new n.MeshDepthMaterial,this.depthMaterial.depthPacking=n.RGBADepthPacking,this.depthMaterial.blending=n.NoBlending,this.depthMaterial.side=n.DoubleSide,this.normalMaterial=new n.MeshNormalMaterial,this.normalMaterial.side=this.depthMaterial.side,void 0===n.SAOShader&&console.error("THREE.SAOPass relies on THREE.SAOShader"),void 0===n.CopyShader&&console.error("THREE.SAOPass relies on THREE.CopyShader"),this.depthMinifyMaterial=new n.ShaderMaterial(n.SAODepthMinifyShader),this.depthMinifyMaterial.uniforms=n.UniformsUtils.clone(this.depthMinifyMaterial.uniforms),this.depthMinifyMaterial.defines=Object.assign({},this.depthMinifyMaterial.defines),this.depthMinifyMaterial.blending=n.NoBlending,this.saoMaterial=new n.ShaderMaterial(n.SAOShader),this.saoMaterial.uniforms=n.UniformsUtils.clone(this.saoMaterial.uniforms),this.saoMaterial.defines=Object.assign({},this.saoMaterial.defines),this.saoMaterial.defines.DIFFUSE_TEXTURE=0,this.saoMaterial.defines.NORMAL_TEXTURE=this.implicitNormals?0:1,this.saoMaterial.defines.MODE=2,this.bilateralFilterMaterial=new n.ShaderMaterial(n.SAOBilaterialFilterShader),this.bilateralFilterMaterial.uniforms=n.UniformsUtils.clone(this.bilateralFilterMaterial.uniforms),this.bilateralFilterMaterial.defines=Object.assign({},this.bilateralFilterMaterial.defines),this.bilateralFilterMaterial.blending=n.NoBlending,this.bilateralFilterMaterial.premultipliedAlpha=!0,this.bilateralUpsamplerMaterial=this.getBilateralUpsamplerMaterial(),this.copyMaterial=new n.ShaderMaterial(n.CopyShader),this.copyMaterial.uniforms=n.UniformsUtils.clone(this.copyMaterial.uniforms),this.copyMaterial.uniforms.opacity.value=1,this.copyMaterial.blending=n.NoBlending,this.copyMaterial.premultipliedAlpha=!0,this.copyMaterial.transparent=!0,this.copyMaterial.depthTest=!1,this.copyMaterial.depthWrite=!1},n.SAOPass.prototype={dispose:function(){this.saoRenderTarget&&(this.saoRenderTarget.dispose(),this.saoRenderTarget=null),this.blurIntermediateRenderTarget&&(this.blurIntermediateRenderTarget.dispose(),this.blurIntermediateRenderTarget=null),this.depthRenderTarget&&(this.depthRenderTarget.dispose(),this.depthRenderTarget=null),this.depth1RenderTarget&&(this.depth1RenderTarget.dispose(),this.depth1RenderTarget=null),this.depth2RenderTarget&&(this.depth2RenderTarget.dispose(),this.depth2RenderTarget=null),this.depth3RenderTarget&&(this.depth3RenderTarget.dispose(),this.depth3RenderTarget=null),this.normalRenderTarget&&(this.normalRenderTarget.dispose(),this.normalRenderTarget=null),this.normalRenderTargetFullRes&&(this.normalRenderTargetFullRes.dispose(),this.normalRenderTargetFullRes=null),this.depthRenderTargetFullRes&&(this.depthRenderTargetFullRes.dispose(),this.depthRenderTargetFullRes=null),this.saoRenderTargetFullRes&&(this.saoRenderTargetFullRes.dispose(),this.saoRenderTargetFullRes=null)},setSize:function(t,e){this.saoRenderTargetFullRes&&this.saoRenderTargetFullRes.setSize(t,e),this.depthRenderTargetFullRes&&this.depthRenderTargetFullRes.setSize(t,e),this.normalRenderTargetFullRes&&this.normalRenderTargetFullRes.setSize(t,e),t=Math.ceil(t/this.downSamplingRatio),e=Math.ceil(e/this.downSamplingRatio),this.saoRenderTarget&&this.saoRenderTarget.setSize(t,e),this.blurIntermediateRenderTarget&&this.blurIntermediateRenderTarget.setSize(t,e),this.depthRenderTarget&&this.depthRenderTarget.setSize(t,e),this.depth1RenderTarget&&this.depth1RenderTarget.setSize(Math.ceil(t/2),Math.ceil(e/2)),this.depth2RenderTarget&&this.depth2RenderTarget.setSize(Math.ceil(t/4),Math.ceil(e/4)),this.depth3RenderTarget&&this.depth3RenderTarget.setSize(Math.ceil(t/8),Math.ceil(e/8)),this.normalRenderTarget&&this.normalRenderTarget.setSize(t,e),this.saoMaterial.uniforms.size.value.set(t,e),this.bilateralFilterMaterial.uniforms.size.value.set(t,e)},updateParameters:function(t){var e=1/(2*Math.tan(n.Math.DEG2RAD*t.fov*.5)),r=new n.Vector2(e/t.aspect,e);this.saoMaterial.uniforms.worldToScreenRatio.value=r,this.saoMaterial.uniforms.intensity.value=this.intensity,this.saoMaterial.uniforms.occlusionSphereWorldRadius.value=this.occlusionSphereWorldRadius,this.depthMinifyMaterial.uniforms.cameraNear.value=t.near,this.depthMinifyMaterial.uniforms.cameraFar.value=t.far,this.saoMaterial.uniforms.cameraNear.value=t.near,this.saoMaterial.uniforms.cameraFar.value=t.far,this.saoMaterial.uniforms.cameraProjectionMatrix.value=t.projectionMatrix,this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.getInverse(t.projectionMatrix),this.bilateralFilterMaterial.uniforms.cameraNear.value=t.near,this.bilateralFilterMaterial.uniforms.cameraFar.value=t.far},render:function(t,e,r,i,a){var o=r.width,s=r.height;o=Math.ceil(o/this.downSamplingRatio),s=Math.ceil(s/this.downSamplingRatio);var u=r.depthBuffer&&r.depthTexture?r.depthTexture:null;this.saoRenderTarget||(this.saoRenderTarget=new n.WebGLRenderTarget(o,s,{minFilter:n.LinearFilter,magFilter:n.LinearFilter,format:n.RGBAFormat}),this.saoRenderTargetFullRes=new n.WebGLRenderTarget(r.width,r.height,{minFilter:n.LinearFilter,magFilter:n.LinearFilter,format:n.RGBAFormat}),this.blurIntermediateRenderTarget=new n.WebGLRenderTarget(o,s,{minFilter:n.LinearFilter,magFilter:n.LinearFilter,format:n.RGBAFormat}),this.depth1RenderTarget=new n.WebGLRenderTarget(Math.ceil(o/2),Math.ceil(s/2),{minFilter:n.LinearFilter,magFilter:n.LinearFilter,format:n.RGBAFormat}),this.depth2RenderTarget=new n.WebGLRenderTarget(Math.ceil(o/4),Math.ceil(s/4),{minFilter:n.LinearFilter,magFilter:n.LinearFilter,format:n.RGBAFormat}),this.depth3RenderTarget=new n.WebGLRenderTarget(Math.ceil(o/8),Math.ceil(s/8),{minFilter:n.LinearFilter,magFilter:n.LinearFilter,format:n.RGBAFormat}),this.normalRenderTarget=new n.WebGLRenderTarget(o,s,{minFilter:n.LinearFilter,magFilter:n.LinearFilter,format:n.RGBAFormat}),this.normalRenderTargetFullRes=new n.WebGLRenderTarget(r.width,r.height,{minFilter:n.LinearFilter,magFilter:n.LinearFilter,format:n.RGBAFormat})),u||this.depthRenderTarget||(this.depthRenderTarget=new n.WebGLRenderTarget(o,s,{minFilter:n.NearestFilter,magFilter:n.NearestFilter,format:n.RGBAFormat}),this.depthRenderTargetFullRes=new n.WebGLRenderTarget(r.width,r.height,{minFilter:n.NearestFilter,magFilter:n.NearestFilter,format:n.RGBAFormat})),this.updateParameters(this.camera);var l=t.getClearColor(),c=t.getClearAlpha(),h=t.autoClear;t.autoClear=!1,this.renderToScreen||(this.copyMaterial.uniforms.tDiffuse.value=r.texture,this.copyMaterial.blending=n.NoBlending,t.renderPass(this.copyMaterial,e,!0));var f=0;if(!u){var d=t.getClearColor(),p=t.getClearAlpha();t.setClearColor(16777215,1),t.renderOverride(this.depthMaterial,this.scene,this.camera,this.depthRenderTarget,!0),t.setClearColor(16777215,1),1!==this.downSamplingRatio&&(t.renderOverride(this.depthMaterial,this.scene,this.camera,this.depthRenderTargetFullRes,!0),t.setClearColor(d,p)),u=this.depthRenderTarget.texture,f=1}if(this.depthMIPs&&(this.depthMinifyMaterial.uniforms.tDepth.value=u,this.depthMinifyMaterial.uniforms.size.value.set(o,s),t.renderPass(this.depthMinifyMaterial,this.depth1RenderTarget,!0),this.depthMinifyMaterial.uniforms.tDepth.value=this.depth1RenderTarget.texture,this.depthMinifyMaterial.uniforms.size.value.set(Math.ceil(o/2),Math.ceil(s/2)),t.renderPass(this.depthMinifyMaterial,this.depth2RenderTarget,!0),this.depthMinifyMaterial.uniforms.tDepth.value=this.depth2RenderTarget.texture,this.depthMinifyMaterial.uniforms.size.value.set(Math.ceil(o/4),Math.ceil(s/4)),t.renderPass(this.depthMinifyMaterial,this.depth3RenderTarget,!0)),"depth"===this.outputOverride)return this.copyMaterial.uniforms.tDiffuse.value=u,this.copyMaterial.blending=n.NoBlending,void t.renderPass(this.copyMaterial,this.renderToScreen?null:e,!0);if("depth1"===this.outputOverride)return this.copyMaterial.uniforms.tDiffuse.value=this.depth1RenderTarget.texture,this.copyMaterial.blending=n.NoBlending,void t.renderPass(this.copyMaterial,this.renderToScreen?null:e,!0);if("depth2"===this.outputOverride)return this.copyMaterial.uniforms.tDiffuse.value=this.depth2RenderTarget.texture,this.copyMaterial.blending=n.NoBlending,void t.renderPass(this.copyMaterial,this.renderToScreen?null:e,!0);if("depth3"===this.outputOverride)return this.copyMaterial.uniforms.tDiffuse.value=this.depth3RenderTarget.texture,this.copyMaterial.blending=n.NoBlending,void t.renderPass(this.copyMaterial,this.renderToScreen?null:e,!0);if(!this.implicitNormals){var d=t.getClearColor(),p=t.getClearAlpha();t.setClearColor(new n.Color(.5,.5,1),1),t.renderOverride(this.normalMaterial,this.scene,this.camera,this.normalRenderTarget,!0),1!==this.downSamplingRatio&&(t.setClearColor(new n.Color(.5,.5,1),1),t.renderOverride(this.normalMaterial,this.scene,this.camera,this.normalRenderTargetFullRes,!0)),t.setClearColor(d,p)}if("normal"===this.outputOverride)return this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=n.NoBlending,void t.renderPass(this.copyMaterial,this.renderToScreen?null:this.renderToScreen?null:e,!0);this.saoMaterial.defines.DEPTH_PACKING=f,this.saoMaterial.defines.DEPTH_MIPS=this.depthMIPs?1:0,this.saoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.saoMaterial.uniforms.tDepth.value=u,this.depthMIPs&&(this.saoMaterial.uniforms.tDepth1.value=this.depth1RenderTarget.texture,this.saoMaterial.uniforms.tDepth2.value=this.depth2RenderTarget.texture,this.saoMaterial.uniforms.tDepth3.value=this.depth3RenderTarget.texture);var d=t.getClearColor(),p=t.getClearAlpha();if(t.setClearColor(16777215,1),t.renderPass(this.saoMaterial,this.saoRenderTarget,!0),this.blurEnabled&&(this.bilateralFilterMaterial.defines.KERNEL_SAMPLE_RADIUS=this.blurKernelSize,this.bilateralFilterMaterial.uniforms.tAODepth.value=this.saoRenderTarget.texture,this.bilateralFilterMaterial.uniforms.tAONormal.value=this.normalRenderTarget.texture,this.bilateralFilterMaterial.uniforms.kernelDirection.value=new n.Vector2(1,0),this.bilateralFilterMaterial.uniforms.packOutput.value=1,this.bilateralFilterMaterial.uniforms.edgeSharpness.value=this.edgeSharpness,t.renderPass(this.bilateralFilterMaterial,this.blurIntermediateRenderTarget,!0),this.bilateralFilterMaterial.uniforms.tAODepth.value=this.blurIntermediateRenderTarget.texture,this.bilateralFilterMaterial.uniforms.kernelDirection.value=new n.Vector2(0,1),this.bilateralFilterMaterial.uniforms.packOutput.value=0,t.renderPass(this.bilateralFilterMaterial,this.saoRenderTarget,!0)),this.downSamplingRatio>1&&(this.bilateralUpsamplerMaterial.uniforms.inputTexture.value=this.saoRenderTarget.texture,this.bilateralUpsamplerMaterial.uniforms.NormalTextureFullRes.value=this.normalRenderTargetFullRes.texture,this.bilateralUpsamplerMaterial.uniforms.DepthTextureFullRes.value=this.depthRenderTargetFullRes.texture,this.bilateralUpsamplerMaterial.uniforms.NormalTextureHalfRes.value=this.normalRenderTarget.texture,this.bilateralUpsamplerMaterial.uniforms.DepthTextureHalfRes.value=this.depthRenderTarget.texture,this.bilateralUpsamplerMaterial.uniforms.texSize.value=new n.Vector2(this.saoRenderTarget.width,this.saoRenderTarget.height),this.bilateralUpsamplerMaterial.uniforms.cameraNearFar.value=new n.Vector2(this.camera.near,this.camera.far),t.renderPass(this.bilateralUpsamplerMaterial,this.saoRenderTargetFullRes,!0)),t.setClearColor(d,p),"sao"===this.outputOverride)return this.copyMaterial.uniforms.tDiffuse.value=this.downSamplingRatio>1?this.saoRenderTargetFullRes.texture:this.saoRenderTarget.texture,this.copyMaterial.blending=n.NoBlending,void t.renderPass(this.copyMaterial,this.renderToScreen?null:e,!0);t.autoClear=!1,this.copyMaterial.uniforms.tDiffuse.value=this.downSamplingRatio>1?this.saoRenderTargetFullRes.texture:this.saoRenderTarget.texture,this.copyMaterial.blending=n.MultiplyBlending,this.copyMaterial.premultipliedAlpha=!0,t.renderPass(this.copyMaterial,this.renderToScreen?null:e,!1),t.autoClear=h,t.setClearColor(l),t.setClearAlpha(c)},getBilateralUpsamplerMaterial:function(t){return new n.ShaderMaterial({uniforms:{inputTexture:{value:null},NormalTextureFullRes:{value:null},DepthTextureFullRes:{value:null},NormalTextureHalfRes:{value:null},DepthTextureHalfRes:{value:null},texSize:{value:new n.Vector2(.5,.5)},cameraNearFar:{value:new n.Vector2(.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\t#include <packing>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D inputTexture;\n\t\t\t\tuniform sampler2D NormalTextureFullRes;\n\t\t\t\tuniform sampler2D DepthTextureFullRes;\n\t\t\t\tuniform sampler2D NormalTextureHalfRes;\n\t\t\t\tuniform sampler2D DepthTextureHalfRes;\n\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 cameraNearFar;\t\t\t\t\t\t\t\tvoid main()\t\t\t\t{\t\t\t\t\tvec2 uvOffsets[4];\t\t\t\t\tuvOffsets[0] = vUv + vec2(0.0, 1.0)/texSize;\t\t\t\t\tuvOffsets[1] = vUv + vec2(1.0, 0.0)/texSize;\t\t\t\t\tuvOffsets[2] = vUv + vec2(-1.0, 0.0)/texSize;\t\t\t\t\tuvOffsets[3] = vUv + vec2(0.0, -1.0)/texSize;\t\t\t\t\t\t\t\t\t\tfloat depth_weights[4];\t\t\t\t\tfloat depth_hires = unpackRGBAToDepth(texture2D(DepthTextureFullRes, vUv));\t\t\t\t\tdepth_hires = -perspectiveDepthToViewZ(depth_hires, cameraNearFar.x, cameraNearFar.y);\t\t\t\t\tif(depth_hires == 1.0)\t\t\t\t\t\tdiscard;\t\t\t\t\tfloat depth_coarse1 = unpackRGBAToDepth(texture2D(DepthTextureHalfRes, uvOffsets[0]));\t\t\t\t\tdepth_coarse1 = -perspectiveDepthToViewZ(depth_coarse1, cameraNearFar.x, cameraNearFar.y);\t\t\t\t\tdepth_weights[0] = 1.0 / (0.001 + abs(depth_hires-depth_coarse1));\t\t\t\t\tfloat depth_coarse2 = unpackRGBAToDepth(texture2D(DepthTextureHalfRes, uvOffsets[1]));\t\t\t\t\tdepth_coarse2 = -perspectiveDepthToViewZ(depth_coarse2, cameraNearFar.x, cameraNearFar.y);\t\t\t\t\tdepth_weights[1] = 1.0 / (0.001 + abs(depth_hires-depth_coarse2));\t\t\t\t\tfloat depth_coarse3 = unpackRGBAToDepth(texture2D(DepthTextureHalfRes, uvOffsets[2]));\t\t\t\t\tdepth_coarse3 = -perspectiveDepthToViewZ(depth_coarse3, cameraNearFar.x, cameraNearFar.y);\t\t\t\t\tdepth_weights[2] = 1.0 / (0.001 + abs(depth_hires-depth_coarse3));\t\t\t\t\tfloat depth_coarse4 = unpackRGBAToDepth(texture2D(DepthTextureHalfRes, uvOffsets[3]));\t\t\t\t\tdepth_coarse4 = -perspectiveDepthToViewZ(depth_coarse4, cameraNearFar.x, cameraNearFar.y);\t\t\t\t\tdepth_weights[3] = 1.0 / (0.001 + abs(depth_hires-depth_coarse4));\t\t\t\t\t\t\t\t\t\tfloat norm_weights[4];\t\t\t\t\tvec3 norm_fullRes = unpackRGBToNormal(texture2D(NormalTextureFullRes, vUv).rgb);\t\t\t\t\tvec3 norm_coarse1 = unpackRGBToNormal(texture2D(NormalTextureHalfRes, uvOffsets[0]).rgb);\t\t\t\t\tnorm_weights[0] = pow(abs(dot(norm_coarse1, norm_fullRes)), 32.0);\t\t\t\t\tvec3 norm_coarse2 = unpackRGBToNormal(texture2D(NormalTextureHalfRes, uvOffsets[1]).rgb);\t\t\t\t\tnorm_weights[1] = pow(abs(dot(norm_coarse2, norm_fullRes)), 32.0);\t\t\t\t\tvec3 norm_coarse3 = unpackRGBToNormal(texture2D(NormalTextureHalfRes, uvOffsets[2]).rgb);\t\t\t\t\tnorm_weights[2] = pow(abs(dot(norm_coarse3, norm_fullRes)), 32.0);\t\t\t\t\tvec3 norm_coarse4 = unpackRGBToNormal(texture2D(NormalTextureHalfRes, uvOffsets[3]).rgb);\t\t\t\t\tnorm_weights[3] = pow(abs(dot(norm_coarse4, norm_fullRes)), 32.0);\t\t\t\t\t\t\t\t\t\tvec3 colorOut = vec3(0.0);\t\t\t\t\tfloat weight_sum = 0.0;\t\t\t\t\tfloat weight = norm_weights[0] * depth_weights[0];\t\t\t\t\tcolorOut += texture2D(inputTexture, uvOffsets[0]).rgb*weight;\t\t\t\t\tweight_sum += weight;\t\t\t\t  weight = norm_weights[1] * depth_weights[1];\t\t\t\t\tcolorOut += texture2D(inputTexture, uvOffsets[1]).rgb*weight;\t\t\t\t\tweight_sum += weight;\t\t\t\t  weight = norm_weights[2] * depth_weights[2];\t\t\t\t\tcolorOut += texture2D(inputTexture, uvOffsets[2]).rgb*weight;\t\t\t\t\tweight_sum += weight;\t\t\t\t  weight = norm_weights[3] * depth_weights[3];\t\t\t\t\tcolorOut += texture2D(inputTexture, uvOffsets[3]).rgb*weight;\t\t\t\t\tweight_sum += weight;\t\t\t\t\tcolorOut /= weight_sum;\t\t\t\t\tgl_FragColor = vec4(colorOut, 1.0);\t\t\t\t}"})}},n.SSAARenderPass=function(t,e,r,i){n.Pass.call(this),this.scene=t,this.camera=e,this.sampleLevel=4,this.unbiased=!0,this.needsSwap=!1,this.clearColor=void 0!==r?r:0,this.clearAlpha=void 0!==i?i:0,void 0===n.CopyShader&&console.error("THREE.SSAARenderPass relies on THREE.CopyShader"),this.overMaterial=new n.ShaderMaterial(n.CopyShader),this.overMaterial.uniforms=n.UniformsUtils.clone(this.overMaterial.uniforms),this.overMaterial.blending=n.NormalBlending,this.overMaterial.premultipliedAlpha=!0,this.overMaterial.transparent=!0,this.overMaterial.depthTest=!1,this.overMaterial.depthWrite=!1,this.addMaterial=new n.ShaderMaterial(n.CopyShader),this.addMaterial.uniforms=n.UniformsUtils.clone(this.addMaterial.uniforms),this.addMaterial.blending=n.AdditiveBlending,this.addMaterial.premultipliedAlpha=!0,this.addMaterial.transparent=!0,this.addMaterial.depthTest=!1,this.addMaterial.depthWrite=!1,this.camera2=new n.OrthographicCamera(-1,1,1,-1,0,1),this.scene2=new n.Scene,this.quad2=new n.Mesh(new n.PlaneGeometry(2,2),this.copyMaterial),this.quad2.frustumCulled=!1,this.scene2.add(this.quad2)},n.SSAARenderPass.prototype=Object.assign(Object.create(n.Pass.prototype),{constructor:n.SSAARenderPass,dispose:function(){this.sampleRenderTarget&&(this.sampleRenderTarget.dispose(),this.sampleRenderTarget=null)},setSize:function(t,e){this.sampleRenderTarget&&this.sampleRenderTarget.setSize(t,e)},render:function(t,e,r,i,a){this.sampleRenderTarget||(this.sampleRenderTarget=new n.WebGLRenderTarget(r.width,r.height,{minFilter:n.NearestFilter,magFilter:n.NearestFilter,format:n.RGBAFormat,type:n.UnsignedByteType,name:"SSAARenderPass.sample"}));var o=n.SSAARenderPass.JitterVectors[Math.max(0,Math.min(this.sampleLevel,5))],s=t.autoClear;t.autoClear=!1;var u=t.getClearColor().getHex(),l=t.getClearAlpha(),c=1/o.length;this.addMaterial.uniforms.tDiffuse.value=this.sampleRenderTarget.texture;var h=r.width,f=r.height;t.setClearColor(0,0);for(var d=0;d<o.length;d++){var p=o[d];this.camera.setViewOffset&&this.camera.setViewOffset(h,f,.0625*p[0],.0625*p[1],h,f);var m=c;if(this.unbiased){m+=1/32*((d+.5)/o.length-.5)}this.addMaterial.uniforms.opacity.value=m,t.render(this.scene,this.camera,this.sampleRenderTarget,!0),t.renderPass(this.addMaterial,e,0===d)}this.camera.clearViewOffset&&this.camera.clearViewOffset(),this.overMaterial.uniforms.tDiffuse.value=e.texture,t.setClearColor(this.clearColor,this.clearAlpha),t.renderPass(this.overMaterial,this.renderToScreen?null:r,this.clear),t.autoClear=s,t.setClearColor(u,l)}}),n.SSAARenderPass.JitterVectors=[[[0,0]],[[4,4],[-4,-4]],[[-2,-6],[6,-2],[-6,2],[2,6]],[[1,-3],[-1,3],[5,1],[-3,-5],[-5,5],[-7,-1],[3,7],[7,-7]],[[1,1],[-1,-3],[-3,2],[4,-1],[-5,-2],[2,5],[5,3],[3,-5],[-2,6],[0,-7],[-4,-6],[-6,4],[-8,0],[7,-4],[6,7],[-7,-8]],[[-4,-7],[-7,-5],[-3,-5],[-5,-4],[-1,-4],[-2,-2],[-6,-1],[-4,0],[-7,1],[-1,2],[-6,3],[-3,3],[-7,6],[-3,6],[-5,7],[-1,7],[5,-7],[1,-6],[6,-5],[4,-4],[2,-3],[7,-2],[1,-1],[4,-1],[2,1],[6,2],[0,4],[4,4],[2,5],[7,5],[5,6],[3,7]]],n.ClearPass=function(t,e){n.Pass.call(this),this.needsSwap=!1,this.clearColor=void 0!==t?t:0,this.clearAlpha=void 0!==e?e:0},n.ClearPass.prototype=Object.assign(Object.create(n.Pass.prototype),{constructor:n.ClearPass,render:function(t,e,r,n,i){var a,o;void 0!==this.clearColor&&(a=t.getClearColor().getHex(),o=t.getClearAlpha(),t.setClearColor(this.clearColor,this.clearAlpha)),t.setRenderTarget(this.renderToScreen?null:r),t.clear(),this.clearColor&&t.setClearColor(a,o)}}),n.TexturePass=function(t,e){n.Pass.call(this),void 0===n.CopyShader&&console.error("THREE.TexturePass relies on THREE.CopyShader");var r=n.CopyShader;this.map=t,this.opacity=void 0!==e?e:1,this.uniforms=n.UniformsUtils.clone(r.uniforms),this.material=new n.ShaderMaterial({uniforms:this.uniforms,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,depthTest:!1,depthWrite:!1}),this.needsSwap=!1,this.camera=new n.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new n.Scene,this.quad=new n.Mesh(new n.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)},n.TexturePass.prototype=Object.assign(Object.create(n.Pass.prototype),{constructor:n.TexturePass,render:function(t,e,r,n,i){var a=t.autoClear;if(t.autoClear=!1,this.quad.material=this.material,this.uniforms.opacity.value=this.opacity,this.uniforms.tDiffuse.value=this.map,this.material.transparent=this.opacity<1,this.map){var o=t.getSize(),s=this.map.image.width/o.width||1,u=this.map.image.height/o.height||1,l=Math.min(s,u);s*=1/l,u*=1/l,this.quad.scale.set(s,u,1)}t.render(this.scene,this.camera,this.renderToScreen?null:r,this.clear),t.autoClear=a}}),n.CubeTexturePass=function(t,e,r){n.Pass.call(this),this.camera=t,this.needsSwap=!1,this.cubeMaterial=new n.MeshCubeMaterial,this.cubeMesh=new n.Mesh(new n.BoxBufferGeometry(10,10,10),this.cubeMaterial),this.envMap=e,this.envMapIntensity=1,this.opacity=void 0!==r?r:1,this.roughness=0,this.cubeScene=new n.Scene,this.cubeCamera=new n.PerspectiveCamera,this.cubeScene.add(this.cubeMesh)},n.CubeTexturePass.prototype=Object.assign(Object.create(n.Pass.prototype),{constructor:n.CubeTexturePass,render:function(t,e,r,n,i){var a=t.autoClear;t.autoClear=!1,this.cubeCamera.projectionMatrix.copy(this.camera.projectionMatrix),this.cubeCamera.quaternion.setFromRotationMatrix(this.camera.matrixWorld),this.cubeMaterial.envMap!=this.envMap&&(this.cubeMaterial.envMap=this.envMap,this.cubeMaterial.needsUpdate=!0),this.cubeMaterial.envMapIntensity=this.envMapIntensity,this.cubeMaterial.roughness=this.roughness,this.cubeMaterial.opacity=this.opacity,this.cubeMaterial.transparent=this.opacity<1,t.render(this.cubeScene,this.cubeCamera,this.renderToScreen?null:r,this.clear),t.autoClear=a}}),n.DofPass=function(t,e,r){n.Pass.call(this);var t=void 0!==t?t:new n.Vector2(256,256);this.downSampleRes=new n.Vector2(Math.round(t.x/2),Math.round(t.y/2));var i={minFilter:n.NearestFilter,magFilter:n.NearestFilter,type:n.HalfFloatType,format:n.RGBAFormat};this.renderTargetColorDownSample=new n.WebGLRenderTarget(this.downSampleRes.x,this.downSampleRes.y,i),this.renderTargetColorDownSample.texture.generateMipmaps=!1,this.renderTargetCoCDownSample=new n.WebGLRenderTarget(this.downSampleRes.x,this.downSampleRes.y,i),this.renderTargetCoCDownSample.texture.generateMipmaps=!1,this.renderTargetBlurTemp=new n.WebGLRenderTarget(this.downSampleRes.x,this.downSampleRes.y,i),this.renderTargetBlurTemp.texture.generateMipmaps=!1;var i={minFilter:n.LinearFilter,magFilter:n.LinearFilter,format:n.RGBAFormat};this.renderTargetDofBlur=new n.WebGLRenderTarget(this.downSampleRes.x,this.downSampleRes.y,i),this.renderTargetDofBlur.texture.generateMipmaps=!1,this.renderTargetDofBlurTemp=new n.WebGLRenderTarget(this.downSampleRes.x,this.downSampleRes.y,i),this.renderTargetDofBlurTemp.texture.generateMipmaps=!1,this.renderTargetDofCombine=new n.WebGLRenderTarget(t.x,t.y,i),this.renderTargetDofCombine.texture.generateMipmaps=!1,this.needsSwap=!1,this.oldClearColor=new n.Color,this.oldClearAlpha=1,this.renderCamera=new n.OrthographicCamera(-1,1,1,-1,0,1),this.renderScene=new n.Scene,this.quad=new n.Mesh(new n.PlaneBufferGeometry(2,2),null),this.renderScene.add(this.quad),this.focalDistance=10,this.cameraNear=.1,this.cameraFar=100,this.NearFarBlurScale=new n.Vector2(.1,.5),this.downSamplingMaterial=this.getColorDownSamplingMaterial(),this.cocMaterial=this.getCoCMaterial(),this.cocMaterial.uniforms.NearFarBlurScale.value=this.NearFarBlurScale,this.cocMaterial.uniforms.cameraNearFar.value=new n.Vector2(r.near,r.far),this.cocMaterial.uniforms.focalDistance.value=this.focalDistance,this.dilateNearCocMaterial=this.getDilateNearCocMaterial(),this.dilateNearCocMaterial.uniforms.NearFarBlurScale.value=this.NearFarBlurScale,this.dofBlurType=1,this.dofBlurMaterial=0===this.dofBlurType?this.getDofBlurCircularMaterial():this.getDofBlurSeperableMaterial(),this.dofCombineMaterial=this.getDofCombineMaterial(),this.dofCombineMaterial.uniforms.NearFarBlurScale.value=this.NearFarBlurScale,this.dofCombineMaterial.uniforms.cameraNearFar.value=new n.Vector2(r.near,r.far),this.dofCombineMaterial.uniforms.focalDistance.value=this.focalDistance,void 0===n.CopyShader&&console.error("THREE.DofPass relies on THREE.CopyShader");var a=n.CopyShader;this.copyUniforms=n.UniformsUtils.clone(a.uniforms),this.materialCopy=new n.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader}),this.depthMaterial=new n.MeshDepthMaterial,this.depthMaterial.side=n.DoubleSide,this.depthMaterial.depthPacking=n.RGBADepthPacking,this.depthMaterial.blending=n.NoBlending,this.depthRenderTarget=new n.WebGLRenderTarget(t.x,t.y,{minFilter:n.NearesFilter,magFilter:n.NearesFilter,format:n.RGBAFormat}),this.scene=e,this.camera=r},n.DofPass.prototype=Object.assign(Object.create(n.Pass.prototype),{constructor:n.DofPass,setSize:function(t,e){this.downSampleRes=new n.Vector2(Math.round(t/2),Math.round(e/2));var r=this.downSampleRes.x,i=this.downSampleRes.y;this.renderTargetColorDownSample.setSize(r,i),this.renderTargetCoCDownSample.setSize(r,i),this.renderTargetBlurTemp.setSize(r,i),this.renderTargetDofBlur.setSize(r,i),this.renderTargetDofBlurTemp.setSize(r,i),this.renderTargetDofCombine.setSize(t,e),this.depthRenderTarget.setSize(t,e)},changeBlurType:function(t){this.dofBlurType=t,this.dofBlurMaterial=0===this.dofBlurType?this.getDofBlurCircularMaterial():this.getDofBlurSeperableMaterial()},render:function(t,e,r,i,a){this.dilateNearCocMaterial.uniforms.texSize.value=this.downSampleRes,this.dofBlurMaterial.uniforms.texSize.value=this.downSampleRes,this.dofCombineMaterial.uniforms.texSize.value=this.downSampleRes,this.cocMaterial.uniforms.focalDistance.value=this.focalDistance,this.cocMaterial.uniforms.cameraNearFar.value.x=this.cameraNear,this.cocMaterial.uniforms.cameraNearFar.value.y=this.cameraFar,this.dofCombineMaterial.uniforms.focalDistance.value=this.focalDistance,this.dofCombineMaterial.uniforms.cameraNearFar.value.x=this.cameraNear,this.dofCombineMaterial.uniforms.cameraNearFar.value.y=this.cameraFar,this.oldClearColor.copy(t.getClearColor()),this.oldClearAlpha=t.getClearAlpha();var o=t.autoClear;t.autoClear=!0,a&&t.context.disable(t.context.STENCIL_TEST),this.scene.overrideMaterial=this.depthMaterial,t.setClearColor(16777215,1),t.render(this.scene,this.camera,this.depthRenderTarget),this.scene.overrideMaterial=null,this.quad.material=this.downSamplingMaterial,this.downSamplingMaterial.uniforms.colorTexture.value=r.texture,t.render(this.renderScene,this.renderCamera,this.renderTargetColorDownSample),this.quad.material=this.cocMaterial,this.cocMaterial.uniforms.depthTexture.value=this.depthRenderTarget.texture,t.render(this.renderScene,this.renderCamera,this.renderTargetCoCDownSample),this.quad.material=this.dilateNearCocMaterial,this.dilateNearCocMaterial.uniforms.cocTexture.value=this.renderTargetCoCDownSample.texture,this.dilateNearCocMaterial.uniforms.depthTexture.value=this.depthRenderTarget.texture,this.dilateNearCocMaterial.uniforms.direction.value=new n.Vector2(1,0),t.render(this.renderScene,this.renderCamera,this.renderTargetBlurTemp),this.dilateNearCocMaterial.uniforms.cocTexture.value=this.renderTargetBlurTemp.texture,this.dilateNearCocMaterial.uniforms.direction.value=new n.Vector2(0,1),t.render(this.renderScene,this.renderCamera,this.renderTargetCoCDownSample),0===this.dofBlurType?(this.quad.material=this.dofBlurMaterial,this.dofBlurMaterial.uniforms.cocTexture.value=this.renderTargetCoCDownSample.texture,this.dofBlurMaterial.uniforms.colorTexture.value=this.renderTargetDownSample.texture,this.dofBlurMaterial.uniforms.depthTexture.value=this.depthRenderTarget.texture,t.render(this.renderScene,this.renderCamera,this.renderTargetDofBlurTemp)):(this.quad.material=this.dofBlurMaterial,this.dofBlurMaterial.uniforms.cocTexture.value=this.renderTargetCoCDownSample.texture,this.dofBlurMaterial.uniforms.colorTexture.value=this.renderTargetColorDownSample.texture,this.dofBlurMaterial.uniforms.direction.value=new n.Vector2(1,0),t.render(this.renderScene,this.renderCamera,this.renderTargetDofBlur),this.dofBlurMaterial.uniforms.colorTexture.value=this.renderTargetDofBlur.texture,this.dofBlurMaterial.uniforms.direction.value=new n.Vector2(0,1),t.render(this.renderScene,this.renderCamera,this.renderTargetDofBlurTemp)),this.quad.material=this.dofCombineMaterial,this.dofCombineMaterial.uniforms.cocTexture.value=this.renderTargetCoCDownSample.texture,this.dofCombineMaterial.uniforms.colorTexture.value=r.texture,this.dofCombineMaterial.uniforms.depthTexture.value=this.depthRenderTarget.texture,this.dofCombineMaterial.uniforms.blurTexture.value=this.renderTargetDofBlurTemp.texture,t.render(this.renderScene,this.renderCamera,this.renderTargetDofCombine),this.quad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetDofCombine.texture,a&&t.context.enable(t.context.STENCIL_TEST),t.render(this.renderScene,this.renderCamera,r),t.setClearColor(this.oldClearColor,this.oldClearAlpha),t.autoClear=o},getColorDownSamplingMaterial:function(){return new n.ShaderMaterial({uniforms:{colorTexture:{value:null}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\t#include <packing>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\tgl_FragColor = texture2D(colorTexture, vUv);\n\t\t\t\t}"})},getCoCMaterial:function(){return new n.ShaderMaterial({uniforms:{depthTexture:{value:null},NearFarBlurScale:{value:new n.Vector2(.5,.5)},cameraNearFar:{value:new n.Vector2(.1,100)},focalDistance:{value:1}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\t#include <packing>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D depthTexture;\n\t\t\t\tuniform vec2 NearFarBlurScale;\t\t\t\tuniform vec2 cameraNearFar;\t\t\t\tuniform float focalDistance;\t\t\t\tconst float MAXIMUM_BLUR_SIZE = 8.0;\t\t\t\t\t\t\t\tfloat computeCoc() {\t\t\t\t\tvec4 packDepth = texture2D(depthTexture, vUv).rgba;\t\t\t\t\tif(packDepth.x == 1.0) return max(NearFarBlurScale.x, NearFarBlurScale.y);\t\t\t\t\t\tfloat depth = unpackRGBAToDepth(packDepth);\t\t\t\t\t\tdepth = -perspectiveDepthToViewZ(depth, cameraNearFar.x, cameraNearFar.y);\t\t\t\t\t\tfloat coc = (depth - focalDistance)/depth;\t\t\t\t\treturn (coc > 0.0 ? coc * NearFarBlurScale.y : coc * NearFarBlurScale.x);\t\t\t\t}\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\tgl_FragColor = vec4(0.0, 0.0, 0.0, computeCoc());\n\t\t\t\t}"})},getDilateNearCocMaterial:function(){return new n.ShaderMaterial({uniforms:{cocTexture:{value:null},depthTexture:{value:null},NearFarBlurScale:{value:new n.Vector2(.5,.5)},texSize:{value:new n.Vector2(.5,.5)},direction:{value:new n.Vector2(1,0)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D cocTexture;\n\t\t\t\tuniform sampler2D depthTexture;\n\t\t\t\tuniform vec2 direction;\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 NearFarBlurScale;\t\t\t\tconst float MAXIMUM_BLUR_SIZE = 8.0;\t\t\t\t\t\t\t\tfloat expandNear(const in vec2 offset, const in bool isBackground) {\t\t\t\t\tfloat coc = 0.0;\t\t\t\t\tvec2 sampleOffsets = MAXIMUM_BLUR_SIZE * offset / 5.0;\t\t\t\t\tfloat coc0 = texture2D(cocTexture, vUv).a;\t\t\t\t\tfloat coc1 = texture2D(cocTexture, vUv - 5.0 * sampleOffsets).a;\t\t\t\t\tfloat coc2 = texture2D(cocTexture, vUv - 4.0 * sampleOffsets).a;\t\t\t\t\tfloat coc3 = texture2D(cocTexture, vUv - 3.0 * sampleOffsets).a;\t\t\t\t\tfloat coc4 = texture2D(cocTexture, vUv - 2.0 * sampleOffsets).a;\t\t\t\t\tfloat coc5 = texture2D(cocTexture, vUv - 1.0 * sampleOffsets).a;\t\t\t\t\tfloat coc6 = texture2D(cocTexture, vUv + 1.0 * sampleOffsets).a;\t\t\t\t\tfloat coc7 = texture2D(cocTexture, vUv + 2.0 * sampleOffsets).a;\t\t\t\t\tfloat coc8 = texture2D(cocTexture, vUv + 3.0 * sampleOffsets).a;\t\t\t\t\tfloat coc9 = texture2D(cocTexture, vUv + 4.0 * sampleOffsets).a;\t\t\t\t\tfloat coc10 = texture2D(cocTexture, vUv + 5.0 * sampleOffsets).a;\t\t\t\t\t\t\t\t\t\t\tif(isBackground){\t\t\t\t\t\tcoc = abs(coc0) * 0.095474 + \t\t\t\t\t\t(abs(coc1) + abs(coc10)) * 0.084264 + \t\t\t\t\t\t(abs(coc2) + abs(coc9)) * 0.088139 + \t\t\t\t\t\t(abs(coc3) + abs(coc8)) * 0.091276 + \t\t\t\t\t\t(abs(coc4) + abs(coc7)) * 0.093585 + \t\t\t\t\t\t(abs(coc5) + abs(coc6)) * 0.094998;\t\t\t\t\t} else {\t\t\t\t\t\tcoc = min(coc0, 0.0);\t\t\t\t\t\tcoc = min(coc1 * 0.3, coc);\t\t\t\t\t\tcoc = min(coc2 * 0.5, coc);\t\t\t\t\t\tcoc = min(coc3 * 0.75, coc);\t\t\t\t\t\tcoc = min(coc4 * 0.8, coc);\t\t\t\t\t\tcoc = min(coc5 * 0.95, coc);\t\t\t\t\t\tcoc = min(coc6 * 0.95, coc);\t\t\t\t\t\tcoc = min(coc7 * 0.8, coc);\t\t\t\t\t\tcoc = min(coc8 * 0.75, coc);\t\t\t\t\t\tcoc = min(coc9 * 0.5, coc);\t\t\t\t\t\tcoc = min(coc10 * 0.3, coc);\t\t\t\t\t\tif(abs(coc0) > abs(coc))\t\t\t\t\t\t\tcoc = coc0;\t\t\t\t\t}\t\t\t\t\treturn coc;\t\t\t\t}\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 offset = direction/texSize;\t\t\t\t\tfloat coc = expandNear(offset, texture2D(depthTexture, vUv).x == 1.0);\t\t\t\t\tgl_FragColor = vec4(0.0, 0.0, 0.0, coc);\n\t\t\t\t}"})},getDofBlurCircularMaterial:function(){return new n.ShaderMaterial({uniforms:{colorTexture:{value:null},cocTexture:{value:null},depthTexture:{value:null},texSize:{value:new n.Vector2(.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform sampler2D cocTexture;\n\t\t\t\tuniform sampler2D depthTexture;\n\t\t\t\tuniform vec2 texSize;\t\t\t\tconst float MAXIMUM_BLUR_SIZE = 8.0;\t\t\t\t\t\t\t\tvec4 CircularBlur() {\t\t\t\t\t\t\t\t\t\tconst int NUM_SAMPLES = 16;\t\t\t\t\tvec2 poisson_disk_samples[NUM_SAMPLES];\t\t\t\t\tpoisson_disk_samples[0] = vec2(-0.399691779231, 0.728591545584);\t\t\t\t\tpoisson_disk_samples[1] = vec2(-0.48622557676, -0.84016533712);\t\t\t\t\tpoisson_disk_samples[2] = vec2(0.770309468987, -0.24906070432);\t\t\t\t\tpoisson_disk_samples[3] = vec2(0.556596796154, 0.820359876432);\t\t\t\t\tpoisson_disk_samples[4] = vec2(-0.933902004071, 0.0600539051593);\t\t\t\t\tpoisson_disk_samples[5] = vec2(0.330144964342, 0.207477293384);\t\t\t\t\tpoisson_disk_samples[6] = vec2(0.289013230975, -0.686749271417);\t\t\t\t\tpoisson_disk_samples[7] = vec2(-0.0832470893559, -0.187351643125);\t\t\t\t\tpoisson_disk_samples[8] = vec2(-0.296314525615, 0.254474834305);\t\t\t\t\tpoisson_disk_samples[9] = vec2(-0.850977666059, 0.484642744689);\t\t\t\t\tpoisson_disk_samples[10] = vec2(0.829287915319, 0.2345063545);\t\t\t\t\tpoisson_disk_samples[11] = vec2(-0.773042143899, -0.543741521254);\t\t\t\t\tpoisson_disk_samples[12] = vec2(0.0561133030864, 0.928419742597);\t\t\t\t\tpoisson_disk_samples[13] = vec2(-0.205799249508, -0.562072714492);\t\t\t\t\tpoisson_disk_samples[14] = vec2(-0.526991665882, -0.193690188118);\t\t\t\t\tpoisson_disk_samples[15] = vec2(-0.051789270667, -0.935374050821);\t\t\t\t\t\t\t\t\t\t\tvec4 cocr = texture2D(cocTexture, vUv);\t\t\t\t\t\t\t\t\t\t\tfloat blurDist = MAXIMUM_BLUR_SIZE * coc.a;\t\t\t\t\t\t\t\t\t\t\tfloat rnd = PI2 * rand( vUv );\t\t\t\t\tfloat costheta = cos(rnd);\t\t\t\t\tfloat sintheta = sin(rnd);\t\t\t\t\tvec4 rotationMatrix = vec4(costheta, -sintheta, sintheta, costheta);\t\t\t\t\t\t\t\t\t\t\tvec3 colorSum = vec3(0.0);\t\t\t\t\tfloat weightSum = 0.0;\t\t\t\t\t\t\t\t\t\t\tfor (int i = 0; i < NUM_SAMPLES; i++) {\t\t\t\t\t\tvec2 ofs = poisson_disk_samples[i];\t\t\t\t\t\tofs = vec2(dot(ofs, rotationMatrix.xy), dot(ofs, rotationMatrix.zw) );\t\t\t\t\t\tvec2 texcoord = vUv + blurDist * ofs / texSize.xy;\t\t\t\t\t\tvec4 sample = texture2D(colorTexture, texcoord);\t\t\t\t\t\tfloat cocWeight = abs(sample.a);\t\t\t\t\t\tcocWeight *= cocWeight * cocWeight;\t\t\t\t\t\tcolorSum += sample.rgb * cocWeight;\t\t\t\t\t\tweightSum += cocWeight;\t\t\t\t\t}\t\t\t\t\t\t\t\t\t\t\tcolorSum /= weightSum;\t\t\t\t\t\t\t\t\t\t\treturn vec4(colorSum, 1.0);\t\t\t\t}\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\tgl_FragColor = CircularBlur();\n\t\t\t\t}"})},getDofBlurSeperableMaterial:function(){return new n.ShaderMaterial({uniforms:{cocTexture:{value:null},colorTexture:{value:null},texSize:{value:new n.Vector2(.5,.5)},direction:{value:new n.Vector2(.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D cocTexture;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 direction;\t\t\t\tconst float MAXIMUM_BLUR_SIZE = 8.0;\t\t\t\t\t\t\t\tconst float SIGMA = 5.0;\t\t\t\tconst int NUM_SAMPLES = 4;\t\t\t\tfloat normpdf(in float x, in float sigma)\t\t\t\t{\t\t\t\t\treturn 0.39894*exp(-0.5*x*x/(sigma*sigma))/sigma;\t\t\t\t}\t\t\t\t\t\t\t\tvec4 weightedBlur() { \t\t\t\t\tfloat cocIn = texture2D(cocTexture, vUv).a;\t\t\t\t\tfloat kernelRadius = MAXIMUM_BLUR_SIZE * cocIn;\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tcocIn *= cocIn * cocIn;\t\t\t\t\tfloat centreSpaceWeight = normpdf(0.0, SIGMA) * abs(cocIn);\t\t\t\t\tfloat weightSum = centreSpaceWeight;\t\t\t\t\tvec4 centreSample = texture2D(colorTexture, vUv);\t\t\t\t\tvec4 diffuseSum = centreSample * weightSum;\t\t\t\t\tvec2 delta = invSize * kernelRadius/float(NUM_SAMPLES);\t\t\t\t\tfor( int i = 1; i <= NUM_SAMPLES; i ++ ) {\t\t\t\t\t\t\tfloat spaceWeight = normpdf(float(i), SIGMA);\t\t\t\t\t\t\tvec2 texcoord = direction * delta * float(i);\t\t\t\t\t\t\tvec4 rightSample = texture2D( colorTexture, vUv + texcoord);\t\t\t\t\t\t\tvec4 leftSample = texture2D( colorTexture, vUv - texcoord);\t\t\t\t\t\t\tfloat leftCocWeight = abs(texture2D( cocTexture, vUv - texcoord).a);\t\t\t\t\t\t\tfloat rightCocWeight = abs(texture2D( cocTexture, vUv + texcoord).a);\t\t\t\t\t\t\tleftCocWeight *= leftCocWeight * leftCocWeight;\t\t\t\t\t\t\trightCocWeight *= rightCocWeight * rightCocWeight;\t\t\t\t\t\t\tdiffuseSum += ( (leftSample * leftCocWeight) + (rightSample * rightCocWeight) ) * spaceWeight;\t\t\t\t\t\t\tweightSum += (spaceWeight * (leftCocWeight + rightCocWeight));\t\t\t\t\t}\t\t\t\t  return diffuseSum/weightSum;\t\t\t\t}\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\tgl_FragColor = weightedBlur();\n\t\t\t\t}"})},getDofCombineMaterial:function(){return new n.ShaderMaterial({uniforms:{colorTexture:{value:null},blurTexture:{value:null},cocTexture:{value:null},depthTexture:{value:null},NearFarBlurScale:{value:new n.Vector2(.5,.5)},texSize:{value:new n.Vector2(.5,.5)},cameraNearFar:{value:new n.Vector2(.1,100)},focalDistance:{value:20}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\t#include <packing>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform sampler2D blurTexture;\n\t\t\t\tuniform sampler2D cocTexture;\n\t\t\t\tuniform sampler2D depthTexture;\n\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 NearFarBlurScale;\t\t\t\tuniform vec2 cameraNearFar;\t\t\t\tuniform float focalDistance;\t\t\t\t\t\t\t\tfloat computeCoc() {\t\t\t\t\tvec4 packedDepth = texture2D(depthTexture, vUv);\t\t\t\t\tif(packedDepth.x == 1.0) return max(NearFarBlurScale.x, NearFarBlurScale.y);\t\t\t\t\t\tfloat depth = unpackRGBAToDepth(packedDepth);\t\t\t\t\t\tdepth = -perspectiveDepthToViewZ(depth, cameraNearFar.x, cameraNearFar.y);\t\t\t\t\t\tfloat coc = (depth - focalDistance)/depth;\t\t\t\t\treturn (coc > 0.0 ? coc * NearFarBlurScale.y : coc * NearFarBlurScale.x);\t\t\t\t}\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\tvec4 blur = texture2D(blurTexture, vUv);\t\t\t\t\tblur += texture2D(blurTexture, vUv + vec2(1.5, 0.5) / texSize);\t\t\t\t\tblur += texture2D(blurTexture, vUv + vec2(-0.5, 1.5) / texSize);\t\t\t\t\tblur += texture2D(blurTexture, vUv + vec2(-1.5, -0.5) / texSize);\t\t\t\t\tblur += texture2D(blurTexture, vUv + vec2(0.5, -1.5) / texSize);\t\t\t\t\tblur /= 5.0;\t\t\t\t\tfloat coc = abs(min(texture2D(cocTexture, vUv).a, computeCoc()));\t\t\t\t\tcoc = clamp(coc * coc * 8.0, 0.0, 1.0);\t\t\t\t\tvec4 color = mix(texture2D(colorTexture, vUv), blur, vec4(coc));\t\t\t\t\tgl_FragColor = color;\n\t\t\t\t}"})}}),n.UnrealBloomPass=function(t,e,r,i){n.Pass.call(this),this.strength=void 0!==e?e:1,this.radius=r,this.threshold=i,this.resolution=void 0!==t?new n.Vector2(t.x,t.y):new n.Vector2(256,256);var a={minFilter:n.LinearFilter,magFilter:n.LinearFilter,format:n.RGBAFormat};this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;var o=Math.round(this.resolution.x/2),s=Math.round(this.resolution.y/2);this.renderTargetBright=new n.WebGLRenderTarget(o,s,a),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(var u=0;u<this.nMips;u++){var l=new n.WebGLRenderTarget(o,s,a);l.texture.name="UnrealBloomPass.h"+u,l.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(l);var l=new n.WebGLRenderTarget(o,s,a);l.texture.name="UnrealBloomPass.v"+u,l.texture.generateMipmaps=!1,this.renderTargetsVertical.push(l),o=Math.round(o/2),s=Math.round(s/2)}void 0===n.LuminosityHighPassShader&&console.error("THREE.UnrealBloomPass relies on THREE.LuminosityHighPassShader");var c=n.LuminosityHighPassShader;this.highPassUniforms=n.UniformsUtils.clone(c.uniforms),this.highPassUniforms.luminosityThreshold.value=i,this.highPassUniforms.smoothWidth.value=.05,this.materialHighPassFilter=new n.ShaderMaterial({uniforms:this.highPassUniforms,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader,defines:{}}),this.separableBlurMaterials=[];for(var h=[3,5,7,9,11],o=Math.round(this.resolution.x/2),s=Math.round(this.resolution.y/2),u=0;u<this.nMips;u++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(h[u])),this.separableBlurMaterials[u].uniforms.texSize.value=new n.Vector2(o,s),o=Math.round(o/2),s=Math.round(s/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=e,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0;var f=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=f,this.bloomTintColors=[new n.Vector3(1,1,1),new n.Vector3(1,1,1),new n.Vector3(1,1,1),new n.Vector3(1,1,1),new n.Vector3(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,void 0===n.CopyShader&&console.error("THREE.BloomPass relies on THREE.CopyShader");var d=n.CopyShader;this.copyUniforms=n.UniformsUtils.clone(d.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new n.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,blending:n.AdditiveBlending,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this.oldClearColor=new n.Color,this.oldClearAlpha=1,this.camera=new n.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new n.Scene,this.quad=new n.Mesh(new n.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)},n.UnrealBloomPass.prototype=Object.assign(Object.create(n.Pass.prototype),{constructor:n.UnrealBloomPass,dispose:function(){for(var t=0;t<this.renderTargetsHorizontal.length();t++)this.renderTargetsHorizontal[t].dispose();for(var t=0;t<this.renderTargetsVertical.length();t++)this.renderTargetsVertical[t].dispose();this.renderTargetBright.dispose()},setSize:function(t,e){var r=Math.round(t/2),i=Math.round(e/2);this.renderTargetBright.setSize(r,i);for(var a=0;a<this.nMips;a++)this.renderTargetsHorizontal[a].setSize(r,i),this.renderTargetsVertical[a].setSize(r,i),this.separableBlurMaterials[a].uniforms.texSize.value=new n.Vector2(r,i),r=Math.round(r/2),i=Math.round(i/2)},render:function(t,e,r,i,a){this.oldClearColor.copy(t.getClearColor()),this.oldClearAlpha=t.getClearAlpha();var o=t.autoClear;t.autoClear=!1,t.setClearColor(new n.Color(0,0,0),0),a&&t.context.disable(t.context.STENCIL_TEST),this.highPassUniforms.tDiffuse.value=r.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.quad.material=this.materialHighPassFilter,t.render(this.scene,this.camera,this.renderTargetBright,!0);for(var s=this.renderTargetBright,u=0;u<this.nMips;u++)this.quad.material=this.separableBlurMaterials[u],this.separableBlurMaterials[u].uniforms.colorTexture.value=s.texture,this.separableBlurMaterials[u].uniforms.direction.value=n.UnrealBloomPass.BlurDirectionX,t.render(this.scene,this.camera,this.renderTargetsHorizontal[u],!0),this.separableBlurMaterials[u].uniforms.colorTexture.value=this.renderTargetsHorizontal[u].texture,this.separableBlurMaterials[u].uniforms.direction.value=n.UnrealBloomPass.BlurDirectionY,t.render(this.scene,this.camera,this.renderTargetsVertical[u],!0),s=this.renderTargetsVertical[u];this.quad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,t.render(this.scene,this.camera,this.renderTargetsHorizontal[0],!0),this.quad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,a&&t.context.enable(t.context.STENCIL_TEST),t.render(this.scene,this.camera,r),t.setClearColor(this.oldClearColor,this.oldClearAlpha),t.autoClear=o},getSeperableBlurMaterial:function(t){return new n.ShaderMaterial({defines:{KERNEL_RADIUS:t,SIGMA:t},uniforms:{colorTexture:{value:null},texSize:{value:new n.Vector2(.5,.5)},direction:{value:new n.Vector2(.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 direction;\t\t\t\t\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\t\t\t\t}\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tfloat fSigma = float(SIGMA);\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\t\t\t\t\tvec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\t\t\t\t\t\tfloat x = float(i);\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\t\t\t\t\t\tvec4 sample1 = texture2D( colorTexture, vUv + uvOffset);\t\t\t\t\t\tvec4 sample2 = texture2D( colorTexture, vUv - uvOffset);\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\t\t\t\t\t\tweightSum += 2.0 * w;\t\t\t\t\t}\t\t\t\t\tgl_FragColor = diffuseSum/weightSum;\n\t\t\t\t}"})},getCompositeMaterial:function(t){return new n.ShaderMaterial({defines:{NUM_MIPS:t},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\t\t\t\tuniform sampler2D blurTexture1;\t\t\t\tuniform sampler2D blurTexture2;\t\t\t\tuniform sampler2D blurTexture3;\t\t\t\tuniform sampler2D blurTexture4;\t\t\t\tuniform sampler2D blurTexture5;\t\t\t\tuniform sampler2D dirtTexture;\t\t\t\tuniform float bloomStrength;\t\t\t\tuniform float bloomRadius;\t\t\t\tuniform float bloomFactors[NUM_MIPS];\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\t\t\t\t\t\t\t\tfloat lerpBloomFactor(const in float factor) { \t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\t\t\t\t}\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) + \t\t\t\t\t \t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\t\t\t\t}"})}}),n.UnrealBloomPass.BlurDirectionX=new n.Vector2(1,0),n.UnrealBloomPass.BlurDirectionY=new n.Vector2(0,1),n.MirrorHelper=function(t){this.scene=new n.Scene,this.cameraOrtho=new n.OrthographicCamera(-1,1,1,-1,0,1),this.quad=new n.Mesh(new n.PlaneGeometry(2,2),null),this.scene.add(this.quad),this.mirror=t,this.numMipMaps=4,this.mirrorTextureMipMaps=[],this.tempRenderTargets=[];for(var e={minFilter:n.LinearFilter,magFilter:n.LinearFilter,format:n.RGBAFormat,stencilBuffer:!1},r=t.mirrorRenderTarget,i=r.width/2,a=r.height/2,o=0;o<this.numMipMaps;o++){var s=new n.WebGLRenderTarget(i,a,e);s.texture.generateMipmaps=!1,this.mirrorTextureMipMaps.push(s);var u=new n.WebGLRenderTarget(i,a,e);u.texture.generateMipmaps=!1,this.tempRenderTargets.push(u),i/=2,a/=2}this.vBlurMaterial=new n.ShaderMaterial(n.BlurShader),this.vBlurMaterial.side=n.DoubleSide,this.vBlurMaterial.uniforms.size.value.set(r.width/2,r.height/2),this.vBlurMaterial.blending=n.NoBlending,n.BlurShaderUtils.configure(this.vBlurMaterial,5,3,new n.Vector2(0,1)),this.hBlurMaterial=this.vBlurMaterial.clone(),this.hBlurMaterial.side=n.DoubleSide,this.hBlurMaterial.uniforms.size.value.set(r.width/2,r.height/2),this.hBlurMaterial.blending=n.NoBlending,n.BlurShaderUtils.configure(this.hBlurMaterial,5,3,new n.Vector2(1,0))},n.MirrorHelper.prototype={constructor:n.MirrorHelper,setSize:function(t,e){for(var r=0;r<this.numMipMaps;r++)t/=2,e/=2,this.mirrorTextureMipMaps[r].setSize(t,e),this.tempRenderTargets[r].setSize(t,e)},update:function(t){for(var e=this.mirror.mirrorRenderTarget,r=0;r<this.numMipMaps;r++){var n=this.mirrorTextureMipMaps[r],i=this.tempRenderTargets[r];this.hBlurMaterial.uniforms.size.value.set(e.width,e.height),this.hBlurMaterial.uniforms.tDiffuse.value=e.texture,this.quad.material=this.hBlurMaterial,t.render(this.scene,this.cameraOrtho,i,!0),this.vBlurMaterial.uniforms.size.value.set(i.width,i.height),this.vBlurMaterial.uniforms.tDiffuse.value=i.texture,this.quad.material=this.vBlurMaterial,t.render(this.scene,this.cameraOrtho,n,!0),e=n}}},n.GlossyMirror=function(t){n.Object3D.call(this),this.name="mirror_"+this.id,t=t||{},this.matrixNeedsUpdate=!0;var e=void 0!==t.textureWidth?t.textureWidth:512,r=void 0!==t.textureHeight?t.textureHeight:512;if(this.size=new n.Vector3(e,r),this.localMirrorNormal=void 0!==t.localMirrorNormal?t.localMirrorNormal:new n.Vector3(0,0,1),this.distanceFade=.1,this.metalness=0,this.specularColor=new n.Color(16777215),this.roughness=0,this.fresnelStrength=1,this.mirrorPlane=new n.Plane,this.mirrorWorldPosition=new n.Vector3,this.cameraWorldPosition=new n.Vector3,this.rotationMatrix=new n.Matrix4,this.lookAtPosition=new n.Vector3(0,0,-1),this.matrixNeedsUpdate=!0,void 0!==t.debugMode&&t.debugMode){var i=new n.ArrowHelper(new n.Vector3(0,0,1),new n.Vector3(0,0,0),10,16777088),a=new n.Geometry;a.vertices.push(new n.Vector3(-10,-10,0)),a.vertices.push(new n.Vector3(10,-10,0)),a.vertices.push(new n.Vector3(10,10,0)),a.vertices.push(new n.Vector3(-10,10,0)),a.vertices.push(a.vertices[0]);var o=new n.Line(a,new n.LineBasicMaterial({color:16777088}));this.add(i),this.add(o)}this.reflectionTextureMatrix=new n.Matrix4,this.mirrorNormal=new n.Vector3;var s={minFilter:n.LinearFilter,magFilter:n.LinearFilter,format:n.RGBAFormat,stencilBuffer:!1};this.mirrorRenderTarget=new n.WebGLRenderTarget(e,r,s),this.mirrorRenderTarget.texture.name="GlossyMirror.mirror",this.material=new n.ShaderMaterial(n.GlossyMirrorShader),this.material.defines=Object.assign({},this.material.defines),this.material.uniforms=n.UniformsUtils.clone(this.material.uniforms),this.material.uniforms.tReflection.value=this.mirrorRenderTarget.texture,this.material.uniforms.reflectionTextureMatrix.value=this.reflectionTextureMatrix,this.mirrorRenderTarget.texture.generateMipmaps=!1,this.clipPlane=new n.Plane(this.localMirrorNormal,0),this.originalClipPlane=this.clipPlane.clone(),this.falseClipPlane=this.clipPlane.clone(),this.falseClipPlane.constant=1e4,this.depthMaterial=new n.MeshDepthMaterial,this.depthMaterial.depthPacking=n.RGBADepthPacking,this.depthMaterial.blending=n.NoBlending,this.depthMaterial.side=n.FrontSide,this.depthRenderTarget=new n.WebGLRenderTarget(e,r,{minFilter:n.NearestFilter,magFilter:n.NearestFilter,format:n.RGBAFormat}),this.depthRenderTarget.texture.generateMipmaps=!1,this.depthRenderTarget.texture.name="GlossyMirror.depth",this.material.uniforms.tReflectionDepth.value=this.depthRenderTarget.texture,this.material.uniforms.screenSize.value=new n.Vector2(e,r),this.mirrorHelper=new n.MirrorHelper(this),this.material.uniforms.tReflection.value=this.mirrorRenderTarget.texture,this.material.uniforms.tReflection1.value=this.mirrorHelper.mirrorTextureMipMaps[0].texture,this.material.uniforms.tReflection2.value=this.mirrorHelper.mirrorTextureMipMaps[1].texture,this.material.uniforms.tReflection3.value=this.mirrorHelper.mirrorTextureMipMaps[2].texture,this.material.uniforms.tReflection4.value=this.mirrorHelper.mirrorTextureMipMaps[3].texture,this.setSize(e,r)},n.GlossyMirror.prototype=Object.assign(Object.create(n.Object3D.prototype),{constructor:n.GlossyMirror,setSize:function(t,e){this.size.x===t&&this.size.y===e||(this.mirrorRenderTarget.setSize(t,e),this.depthRenderTarget.setSize(t,e),this.mirrorHelper.setSize(t,e),this.material.uniforms.screenSize.value=new n.Vector2(t,e),this.size.set(t,e),this.matrixNeedsUpdate=!0),this.matrixNeedsUpdate=!0},updateReflectionTextureMatrix:function(t){this.updateMatrixWorld(),t.updateMatrixWorld(),this.mirrorWorldPosition.setFromMatrixPosition(this.matrixWorld),this.cameraWorldPosition.setFromMatrixPosition(t.matrixWorld),this.rotationMatrix.extractRotation(this.matrixWorld),this.mirrorNormal.copy(this.localMirrorNormal),this.mirrorNormal.applyMatrix4(this.rotationMatrix);var e=this.mirrorWorldPosition.clone().sub(this.cameraWorldPosition);e.reflect(this.mirrorNormal).negate(),e.add(this.mirrorWorldPosition),this.rotationMatrix.extractRotation(t.matrixWorld),this.lookAtPosition.set(0,0,-1),this.lookAtPosition.applyMatrix4(this.rotationMatrix),this.lookAtPosition.add(this.cameraWorldPosition);var r=this.mirrorWorldPosition.clone().sub(this.lookAtPosition);r.reflect(this.mirrorNormal).negate(),r.add(this.mirrorWorldPosition),this.up.set(0,-1,0),this.up.applyMatrix4(this.rotationMatrix),this.up.reflect(this.mirrorNormal).negate(),this.mirrorCamera.position.copy(e),this.mirrorCamera.up=this.up,this.mirrorCamera.lookAt(r),this.mirrorCamera.fov=t.fov,this.mirrorCamera.near=t.near,this.mirrorCamera.far=t.far,this.mirrorCamera.aspect=t.aspect,this.mirrorCamera.updateProjectionMatrix(),this.mirrorCamera.updateMatrixWorld(),this.mirrorCamera.matrixWorldInverse.getInverse(this.mirrorCamera.matrixWorld),this.reflectionTextureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.reflectionTextureMatrix.multiply(this.mirrorCamera.projectionMatrix),this.reflectionTextureMatrix.multiply(this.mirrorCamera.matrixWorldInverse),this.mirrorPlane.setFromNormalAndCoplanarPoint(this.mirrorNormal,this.mirrorWorldPosition),this.mirrorPlane.applyMatrix4(this.mirrorCamera.matrixWorldInverse),this.material.uniforms.mirrorCameraProjectionMatrix.value.copy(this.mirrorCamera.projectionMatrix),this.material.uniforms.mirrorCameraInverseProjectionMatrix.value.getInverse(this.mirrorCamera.projectionMatrix),this.material.uniforms.mirrorCameraWorldMatrix.value.copy(t.matrixWorld),this.material.uniforms.mirrorCameraNear.value=this.mirrorCamera.near,this.material.uniforms.mirrorCameraFar.value=this.mirrorCamera.far,this.material.uniforms.mirrorNormal.value=this.mirrorNormal,this.material.uniforms.mirrorWorldPosition.value=this.mirrorWorldPosition,this.material.transparent=!0},render:function(t,e,r,i,a){if(!r instanceof n.PerspectiveCamera&&console.error("THREE.GlossyMirror: camera is not a Perspective Camera!"),this.setSize(i,a),this.mirrorCamera||(this.mirrorCamera=r.clone(),this.mirrorCamera.matrixAutoUpdate=!0),this.matrixNeedsUpdate&&this.updateReflectionTextureMatrix(r),this.matrixNeedsUpdate=!0,void 0!==this.clipPlane&&(this.clipPlane.copy(this.originalClipPlane),this.clipPlane.applyMatrix4(this.matrixWorld),this.clippingPlanes=[this.clipPlane]),t.clippingPlanes=this.clippingPlanes,void 0!==e&&e instanceof n.Scene){var o=this.material.visible;this.material.visible=!1,t.render(e,this.mirrorCamera,this.mirrorRenderTarget,!0),this.material.visible=o}e.overrideMaterial=this.depthMaterial;var o=this.material.visible,s=t.getClearColor(),u=t.getClearAlpha();t.setClearColor(16777215,1),this.material.visible=!1,t.render(e,this.mirrorCamera,this.depthRenderTarget,!0),e.overrideMaterial=null,t.setClearColor(s,u),this.material.visible=o,this.material.uniforms.distanceFade.value=this.distanceFade,this.material.uniforms.metalness.value=this.metalness,this.material.uniforms.fresnelStrength.value=this.fresnelStrength,this.material.uniforms.specularColor.value.copy(this.specularColor),this.material.uniforms.roughness.value=this.roughness,void 0!==this.clipPlane&&this.clipPlane.copy(this.falseClipPlane),void 0!==this.mirrorHelper&&this.mirrorHelper.update(t)}}),n.OrbitControls=function(t,e){function r(){return 2*Math.PI/60/60*R.autoRotateSpeed}function i(){return Math.pow(.95,R.zoomSpeed)}function a(t){k.theta-=t}function o(t){k.phi-=t}function s(t){R.object instanceof n.PerspectiveCamera?G/=t:R.object instanceof n.OrthographicCamera?(R.object.zoom=Math.max(R.minZoom,Math.min(R.maxZoom,R.object.zoom*t)),R.object.updateProjectionMatrix(),H=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),R.enableZoom=!1)}function u(t){R.object instanceof n.PerspectiveCamera?G*=t:R.object instanceof n.OrthographicCamera?(R.object.zoom=Math.max(R.minZoom,Math.min(R.maxZoom,R.object.zoom/t)),R.object.updateProjectionMatrix(),H=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),R.enableZoom=!1)}function l(t){Q.set(t.clientX,t.clientY)}function c(t){J.set(t.clientX,t.clientY)}function h(t){q.set(t.clientX,t.clientY)}function f(t){W.set(t.clientX,t.clientY),X.subVectors(W,Q);var e=R.domElement===document?R.domElement.body:R.domElement;a(2*Math.PI*X.x/e.clientWidth*R.rotateSpeed),o(2*Math.PI*X.y/e.clientHeight*R.rotateSpeed),Q.copy(W),R.update()}function d(t){$.set(t.clientX,t.clientY),tt.subVectors($,J),tt.y>0?s(i()):tt.y<0&&u(i()),J.copy($),R.update()}function p(t){Z.set(t.clientX,t.clientY),K.subVectors(Z,q),nt(K.x,K.y),q.copy(Z),R.update()}function m(t){}function g(t){t.deltaY<0?u(i()):t.deltaY>0&&s(i()),R.update()}function v(t){switch(t.keyCode){case R.keys.UP:nt(0,R.keyPanSpeed),R.update();break;case R.keys.BOTTOM:nt(0,-R.keyPanSpeed),R.update();break;case R.keys.LEFT:nt(R.keyPanSpeed,0),R.update();break;case R.keys.RIGHT:nt(-R.keyPanSpeed,0),R.update()}}function y(t){Q.set(t.touches[0].pageX,t.touches[0].pageY)}function M(t){var e=t.touches[0].pageX-t.touches[1].pageX,r=t.touches[0].pageY-t.touches[1].pageY,n=Math.sqrt(e*e+r*r);J.set(0,n)}function w(t){q.set(t.touches[0].pageX,t.touches[0].pageY)}function x(t){W.set(t.touches[0].pageX,t.touches[0].pageY),X.subVectors(W,Q);var e=R.domElement===document?R.domElement.body:R.domElement;a(2*Math.PI*X.x/e.clientWidth*R.rotateSpeed),o(2*Math.PI*X.y/e.clientHeight*R.rotateSpeed),Q.copy(W),R.update()}function b(t){var e=t.touches[0].pageX-t.touches[1].pageX,r=t.touches[0].pageY-t.touches[1].pageY,n=Math.sqrt(e*e+r*r);$.set(0,n),tt.subVectors($,J),tt.y>0?u(i()):tt.y<0&&s(i()),J.copy($),R.update()}function T(t){Z.set(t.touches[0].pageX,t.touches[0].pageY),K.subVectors(Z,q),nt(K.x,K.y),q.copy(Z),R.update()}function E(t){}function S(t){if(!1!==R.enabled){if(t.preventDefault(),t.button===R.mouseButtons.ORBIT){if(!1===R.enableRotate)return;l(t),B=U.ROTATE}else if(t.button===R.mouseButtons.ZOOM){if(!1===R.enableZoom)return;c(t),B=U.DOLLY}else if(t.button===R.mouseButtons.PAN){if(!1===R.enablePan)return;h(t),B=U.PAN}B!==U.NONE&&(document.addEventListener("mousemove",_,!1),document.addEventListener("mouseup",A,!1),R.dispatchEvent(j))}}function _(t){if(!1!==R.enabled)if(t.preventDefault(),B===U.ROTATE){if(!1===R.enableRotate)return;f(t)}else if(B===U.DOLLY){if(!1===R.enableZoom)return;d(t)}else if(B===U.PAN){if(!1===R.enablePan)return;p(t)}}function A(t){!1!==R.enabled&&(m(t),document.removeEventListener("mousemove",_,!1),document.removeEventListener("mouseup",A,!1),R.dispatchEvent(P),B=U.NONE)}function D(t){!1===R.enabled||!1===R.enableZoom||B!==U.NONE&&B!==U.ROTATE||(t.preventDefault(),t.stopPropagation(),g(t),R.dispatchEvent(j),R.dispatchEvent(P))}function N(t){!1!==R.enabled&&!1!==R.enableKeys&&!1!==R.enablePan&&v(t)}function I(t){if(!1!==R.enabled){switch(t.touches.length){case 1:if(!1===R.enableRotate)return;y(t),B=U.TOUCH_ROTATE;break;case 2:if(!1===R.enableZoom)return;M(t),B=U.TOUCH_DOLLY;break;case 3:if(!1===R.enablePan)return;w(t),B=U.TOUCH_PAN;break;default:B=U.NONE}B!==U.NONE&&R.dispatchEvent(j)}}function L(t){if(!1!==R.enabled)switch(t.preventDefault(),t.stopPropagation(),t.touches.length){case 1:if(!1===R.enableRotate)return;if(B!==U.TOUCH_ROTATE)return;x(t);break;case 2:if(!1===R.enableZoom)return;if(B!==U.TOUCH_DOLLY)return;b(t);break;case 3:if(!1===R.enablePan)return;if(B!==U.TOUCH_PAN)return;T(t);break;default:B=U.NONE}}function C(t){!1!==R.enabled&&(E(t),R.dispatchEvent(P),B=U.NONE)}function O(t){t.preventDefault()}this.object=t,this.domElement=void 0!==e?e:document,this.enabled=!0,this.target=new n.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:n.MOUSE.LEFT,ZOOM:n.MOUSE.MIDDLE,PAN:n.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return F.phi},this.getAzimuthalAngle=function(){return F.theta},this.reset=function(){R.target.copy(R.target0),R.object.position.copy(R.position0),R.object.zoom=R.zoom0,R.object.updateProjectionMatrix(),R.dispatchEvent(z),R.update(),B=U.NONE},this.update=function(){var e=new n.Vector3,i=(new n.Quaternion).setFromUnitVectors(t.up,new n.Vector3(0,1,0)),o=i.clone().inverse(),s=new n.Vector3,u=new n.Quaternion;return function(){var t=R.object.position;return e.copy(t).sub(R.target),e.applyQuaternion(i),F.setFromVector3(e),R.autoRotate&&B===U.NONE&&a(r()),F.theta+=k.theta,F.phi+=k.phi,F.theta=Math.max(R.minAzimuthAngle,Math.min(R.maxAzimuthAngle,F.theta)),F.phi=Math.max(R.minPolarAngle,Math.min(R.maxPolarAngle,F.phi)),F.makeSafe(),F.radius*=G,F.radius=Math.max(R.minDistance,Math.min(R.maxDistance,F.radius)),R.target.add(Y),e.setFromSpherical(F),e.applyQuaternion(o),t.copy(R.target).add(e),R.object.lookAt(R.target),!0===R.enableDamping?(k.theta*=1-R.dampingFactor,k.phi*=1-R.dampingFactor):k.set(0,0,0),G=1,Y.set(0,0,0),!!(H||s.distanceToSquared(R.object.position)>V||8*(1-u.dot(R.object.quaternion))>V)&&(R.dispatchEvent(z),s.copy(R.object.position),u.copy(R.object.quaternion),H=!1,!0)}}(),this.dispose=function(){R.domElement.removeEventListener("contextmenu",O,!1),R.domElement.removeEventListener("mousedown",S,!1),R.domElement.removeEventListener("wheel",D,!1),R.domElement.removeEventListener("touchstart",I,!1),R.domElement.removeEventListener("touchend",C,!1),R.domElement.removeEventListener("touchmove",L,!1),document.removeEventListener("mousemove",_,!1),document.removeEventListener("mouseup",A,!1),window.removeEventListener("keydown",N,!1)};var R=this,z={type:"change"},j={type:"start"},P={type:"end"},U={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},B=U.NONE,V=1e-6,F=new n.Spherical,k=new n.Spherical,G=1,Y=new n.Vector3,H=!1,Q=new n.Vector2,W=new n.Vector2,X=new n.Vector2,q=new n.Vector2,Z=new n.Vector2,K=new n.Vector2,J=new n.Vector2,$=new n.Vector2,tt=new n.Vector2,et=function(){var t=new n.Vector3;return function(e,r){t.setFromMatrixColumn(r,0),t.multiplyScalar(-e),Y.add(t)}}(),rt=function(){var t=new n.Vector3;return function(e,r){t.setFromMatrixColumn(r,1),t.multiplyScalar(e),Y.add(t)}}(),nt=function(){var t=new n.Vector3;return function(e,r){var i=R.domElement===document?R.domElement.body:R.domElement;if(R.object instanceof n.PerspectiveCamera){var a=R.object.position;t.copy(a).sub(R.target);var o=t.length();o*=Math.tan(R.object.fov/2*Math.PI/180),et(2*e*o/i.clientHeight,R.object.matrix),rt(2*r*o/i.clientHeight,R.object.matrix)}else R.object instanceof n.OrthographicCamera?(et(e*(R.object.right-R.object.left)/R.object.zoom/i.clientWidth,R.object.matrix),rt(r*(R.object.top-R.object.bottom)/R.object.zoom/i.clientHeight,R.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),R.enablePan=!1)}}();R.domElement.addEventListener("contextmenu",O,!1),R.domElement.addEventListener("mousedown",S,!1),R.domElement.addEventListener("wheel",D,!1),R.domElement.addEventListener("touchstart",I,!1),R.domElement.addEventListener("touchend",C,!1),R.domElement.addEventListener("touchmove",L,!1),window.addEventListener("keydown",N,!1),this.update()},n.OrbitControls.prototype=Object.create(n.EventDispatcher.prototype),n.OrbitControls.prototype.constructor=n.OrbitControls,Object.defineProperties(n.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(t){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!t}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(t){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!t}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(t){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!t}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(t){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!t}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(t){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!t}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(t){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=t}}}),n.Color.prototype.toJSON=function(){return{r:this.r,g:this.g,b:this.b}},n.HDRLoader=n.RGBELoader=function(t){this.manager=void 0!==t?t:n.DefaultLoadingManager},n.RGBELoader.prototype=Object.create(n.DataTextureLoader.prototype),n.RGBELoader.prototype._parser=function(t){var e=function(t,e){switch(t){case 1:console.error("THREE.RGBELoader Read Error: "+(e||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(e||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(e||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(e||""))}return-1},r=function(t,e,r){e=e||1024;for(var n=t.pos,i=-1,a=0,o="",s=String.fromCharCode.apply(null,new Uint16Array(t.subarray(n,n+128)));0>(i=s.indexOf("\n"))&&a<e&&n<t.byteLength;)o+=s,a+=s.length,n+=128,s+=String.fromCharCode.apply(null,new Uint16Array(t.subarray(n,n+128)));return-1<i&&(!1!==r&&(t.pos+=a+i+1),o+s.slice(0,i))},i=new Uint8Array(t);i.byteLength;i.pos=0;var a=function(t){var n,i,a=/^#\?(\S+)$/,o=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,u=/^\s*FORMAT=(\S+)\s*$/,l=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,c={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};if(t.pos>=t.byteLength||!(n=r(t)))return e(1,"no header found");if(!(i=n.match(a)))return e(3,"bad initial token");for(c.valid|=1,c.programtype=i[1],c.string+=n+"\n";;){if(!1===(n=r(t)))break;if(c.string+=n+"\n","#"!==n.charAt(0)){if((i=n.match(o))&&(c.gamma=parseFloat(i[1],10)),(i=n.match(s))&&(c.exposure=parseFloat(i[1],10)),(i=n.match(u))&&(c.valid|=2,c.format=i[1]),(i=n.match(l))&&(c.valid|=4,c.height=parseInt(i[1],10),c.width=parseInt(i[2],10)),2&c.valid&&4&c.valid)break}else c.comments+=n+"\n"}return 2&c.valid?4&c.valid?c:e(3,"missing image size specifier"):e(3,"missing format specifier")}(i);if(-1!==a){var o=a.width,s=a.height,u=function(t,r,n){var i,a,o,s,u,l,c,h,f,d,p,m,g,v=r,y=n;if(v<8||v>32767||2!==t[0]||2!==t[1]||128&t[2])return new Uint8Array(t);if(v!==(t[2]<<8|t[3]))return e(3,"wrong scanline width");if(!(i=new Uint8Array(4*r*n))||!i.length)return e(4,"unable to allocate buffer space");for(a=0,o=0,h=4*v,g=new Uint8Array(4),l=new Uint8Array(h);y>0&&o<t.byteLength;){if(o+4>t.byteLength)return e(1);if(g[0]=t[o++],g[1]=t[o++],g[2]=t[o++],g[3]=t[o++],2!=g[0]||2!=g[1]||(g[2]<<8|g[3])!=v)return e(3,"bad rgbe scanline format");for(c=0;c<h&&o<t.byteLength;){if(s=t[o++],m=s>128,m&&(s-=128),0===s||c+s>h)return e(3,"bad scanline data");if(m)for(u=t[o++],f=0;f<s;f++)l[c++]=u;else l.set(t.subarray(o,o+s),c),c+=s,o+=s}for(d=v,f=0;f<d;f++)p=0,i[a]=l[f+p],p+=v,i[a+1]=l[f+p],p+=v,i[a+2]=l[f+p],p+=v,i[a+3]=l[f+p],a+=4;y--}return i}(i.subarray(i.pos),o,s);if(-1!==u)return{width:o,height:s,data:u,header:a.string,gamma:a.gamma,exposure:a.exposure,format:n.RGBEFormat,type:n.UnsignedByteType}}return null},n.CombinedCamera=function(t,e,r,i,a){n.Camera.call(this),this.fov=r,this.far=a,this.near=i,this.left=-t/2,this.right=t/2,this.top=e/2,this.bottom=-e/2,this.aspect=t/e,this.zoom=1,this.focus=10,this.view=null,this.hyperfocusOffset=0,this.hyperfocusScale=.5,this.cameraO=new n.OrthographicCamera(this.left,this.right,this.top,this.bottom,this.near,this.far),this.cameraP=new n.PerspectiveCamera(this.fov,this.aspect,this.near,this.far),this.toPerspective()},n.CombinedCamera.prototype=Object.create(n.Camera.prototype),n.CombinedCamera.prototype.constructor=n.CombinedCamera,n.CombinedCamera.prototype.toPerspective=function(){this.cameraP.near=this.near,this.cameraP.far=this.far,this.cameraP.aspect=this.aspect,this.cameraP.fov=this.fov,this.cameraP.zoom=this.zoom,this.cameraP.view=this.view,this.cameraP.focus=this.focus,this.cameraP.updateProjectionMatrix(),this.projectionMatrix=this.cameraP.projectionMatrix,this.inPerspectiveMode=!0,this.inOrthographicMode=!1},n.CombinedCamera.prototype.toOrthographic=function(){var t=this.fov,e=this.aspect,r=Math.tan(t*Math.PI/180/2)*(this.hyperfocusOffset+this.hyperfocusScale*(this.near+this.far)),n=r*e;this.cameraO.near=this.near,this.cameraO.far=this.far,this.cameraO.left=-n,this.cameraO.right=n,this.cameraO.top=r,this.cameraO.bottom=-r,this.cameraO.zoom=this.zoom,this.cameraO.view=this.view,this.cameraO.updateProjectionMatrix(),this.projectionMatrix=this.cameraO.projectionMatrix,this.inPerspectiveMode=!1,this.inOrthographicMode=!0},n.CombinedCamera.prototype.setSize=function(t,e){this.aspect=t/e,this.left=-t/2,this.right=t/2,this.top=e/2,this.bottom=-e/2},n.CombinedCamera.prototype.setFov=function(t){this.fov=t,this.inPerspectiveMode?this.toPerspective():this.toOrthographic()},n.CombinedCamera.prototype.copy=function(t){return n.Camera.prototype.copy.call(this,t),this.fov=t.fov,this.far=t.far,this.near=t.near,this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this.aspect=t.aspect,this.hyperfocusOffset=t.hyperfocusOffset,this.hyperfocusScale=t.hyperfocusScale,this.cameraO.copy(t.cameraO),this.cameraP.copy(t.cameraP),this.inOrthographicMode=t.inOrthographicMode,this.inPerspectiveMode=t.inPerspectiveMode,this},n.CombinedCamera.prototype.setViewOffset=function(t,e,r,n,i,a){this.view={fullWidth:t,fullHeight:e,offsetX:r,offsetY:n,width:i,height:a},this.inPerspectiveMode?(this.aspect=t/e,this.toPerspective()):this.toOrthographic()},n.CombinedCamera.prototype.clearViewOffset=function(){this.view=null,this.updateProjectionMatrix()},n.CombinedCamera.prototype.updateProjectionMatrix=function(){this.inPerspectiveMode?this.toPerspective():(this.toPerspective(),this.toOrthographic())},n.CombinedCamera.prototype.setLens=function(t,e){void 0===e&&(e=35);var r=.5*e/(t*Math.max(this.cameraP.aspect,1)),i=2*n.Math.RAD2DEG*Math.atan(r);return this.setFov(i),i},n.CombinedCamera.prototype.setZoom=function(t){this.zoom=t,this.inPerspectiveMode?this.toPerspective():this.toOrthographic()},n.CombinedCamera.prototype.toFrontView=function(){this.rotation.x=0,this.rotation.y=0,this.rotation.z=0,this.position.x=0,this.position.y=0,this.position.z=-15},n.CombinedCamera.prototype.toBackView=function(){this.rotation.x=0,this.rotation.y=Math.PI,this.rotation.z=0,this.position.x=0,this.position.y=0,this.position.z=15},n.CombinedCamera.prototype.toLeftView=function(){this.rotation.x=0,this.rotation.y=-Math.PI/2,this.rotation.z=0,this.position.x=-15,this.position.y=0,this.position.z=0},n.CombinedCamera.prototype.toRightView=function(){this.rotation.x=0,this.rotation.y=Math.PI/2,this.rotation.z=0,this.position.x=15,this.position.y=0,this.position.z=0},n.CombinedCamera.prototype.toTopView=function(){this.rotation.x=-Math.PI/2,this.rotation.y=0,this.rotation.z=0,this.position.x=0,this.position.y=15,this.position.z=0},n.CombinedCamera.prototype.toBottomView=function(){this.rotation.x=Math.PI/2,this.rotation.y=0,this.rotation.z=0,this.position.x=0,this.position.y=-15,this.position.z=0},n.CombinedCamera.prototype.toPerspectiveView=function(){this.rotation.x=-Math.PI/4,this.rotation.y=-Math.PI/4,this.rotation.z=0,this.position.x=4,this.position.y=4,this.position.z=4},n.ParallaxBarrierEffect=function(t){var e=new n.OrthographicCamera(-1,1,1,-1,0,1),r=new n.Scene,i=new n.StereoCamera,a={minFilter:n.LinearFilter,magFilter:n.NearestFilter,format:n.RGBAFormat},o=new n.WebGLRenderTarget(512,512,a),s=new n.WebGLRenderTarget(512,512,a),u=new n.ShaderMaterial({uniforms:{mapLeft:{value:o.texture},mapRight:{value:s.texture},resolution:{value:new n.Vector2(512,512)}},vertexShader:["varying vec2 vUv;","void main() {"," vUv = vec2( uv.x, uv.y );"," gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D mapLeft;","uniform sampler2D mapRight;","uniform vec2 resolution;","varying vec2 vUv;","void main() {"," vec2 uv = vUv;"," if ( ( mod( gl_FragCoord.x + 1.0, 2.0 ) ) > 1.00 ) {","   gl_FragColor = texture2D( mapLeft, uv );"," } else {","   gl_FragColor = texture2D( mapRight, uv - vec2( resolution.x, 0 ) );"," }","}"].join("\n")}),l=new n.Mesh(new n.PlaneBufferGeometry(2,2),u);r.add(l),this.setSize=function(e,r){t.setSize(e,r);var n=t.getPixelRatio();u.uniforms.resolution.value.set(1/e,1/r),o.setSize(e*n/2+1,r*n),s.setSize(e*n/2+1,r*n)},this.render=function(n,a){n.updateMatrixWorld(),null===a.parent&&a.updateMatrixWorld(),i.update(a),t.render(n,i.cameraL,o,!0),t.render(n,i.cameraR,s,!0),t.render(r,e)}},n.StereoEffect=function(t){var e=new n.StereoCamera;e.aspect=.5,this.setEyeSeparation=function(t){e.eyeSep=t},this.setSize=function(e,r){t.setSize(e,r)},this.updateStereo=function(t){e.update(t)},this.getCameraL=function(){return e.cameraL},this.getCameraR=function(){return e.cameraR},this.render=function(r,n){r.updateMatrixWorld(),null===n.parent&&n.updateMatrixWorld(),e.update(n);var i=t.getSize();t.autoClear&&t.clear(),t.setScissorTest(!0),t.setScissor(0,0,i.width/2,i.height),t.setViewport(0,0,i.width/2,i.height),t.render(r,e.cameraL),t.setScissor(i.width/2,0,i.width/2,i.height),t.setViewport(i.width/2,0,i.width/2,i.height),t.render(r,e.cameraR),t.setScissorTest(!1)}},n.FXAAShader={uniforms:{tDiffuse:{value:null},resolution:{value:new n.Vector2(1/1024,1/512)}},vertexShader:["void main() {","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec2 resolution;","#define FXAA_REDUCE_MIN   (1.0/128.0)","#define FXAA_REDUCE_MUL   (1.0/8.0)","#define FXAA_SPAN_MAX     8.0","void main() {","vec3 rgbNW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * resolution ).xyz;","vec3 rgbNE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * resolution ).xyz;","vec3 rgbSW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * resolution ).xyz;","vec3 rgbSE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * resolution ).xyz;","vec4 rgbaM  = texture2D( tDiffuse,  gl_FragCoord.xy  * resolution );","vec3 rgbM  = rgbaM.xyz;","vec3 luma = vec3( 0.299, 0.587, 0.114 );","float lumaNW = dot( rgbNW, luma );","float lumaNE = dot( rgbNE, luma );","float lumaSW = dot( rgbSW, luma );","float lumaSE = dot( rgbSE, luma );","float lumaM  = dot( rgbM,  luma );","float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );","float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );","vec2 dir;","dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));","dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));","float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );","float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );","dir = min( vec2( FXAA_SPAN_MAX,  FXAA_SPAN_MAX),","max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),","dir * rcpDirMin)) * resolution;","vec4 rgbA = (1.0/2.0) * (","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (1.0/3.0 - 0.5)) +","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (2.0/3.0 - 0.5)));","vec4 rgbB = rgbA * (1.0/2.0) + (1.0/4.0) * (","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (0.0/3.0 - 0.5)) +","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (3.0/3.0 - 0.5)));","float lumaB = dot(rgbB, vec4(luma, 0.0));","if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) ) {","gl_FragColor = rgbA;","} else {","gl_FragColor = rgbB;","}","}"].join("\n")},n.OutlinePass=function(t,e,r,i){this.renderScene=e,this.camera=r,this.selectedObjects=void 0!==i?i:[],this.visibleEdgeColor=new n.Color(1,1,1),this.hiddenEdgeColor=new n.Color(.1,.04,.02),this.edgeGlow=0,this.usePatternTexture=!1,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=2,this.pulsePeriod=0,n.Pass.call(this),this.resolution=void 0!==t?new n.Vector2(t.x,t.y):new n.Vector2(256,256);var a={minFilter:n.LinearFilter,magFilter:n.LinearFilter,format:n.RGBAFormat},o=Math.round(this.resolution.x/this.downSampleRatio),s=Math.round(this.resolution.y/this.downSampleRatio);this.maskBufferMaterial=new n.MeshBasicMaterial({color:16777215}),this.maskBufferMaterial.side=n.DoubleSide,this.renderTargetMaskBuffer=new n.WebGLRenderTarget(this.resolution.x,this.resolution.y,a),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new n.MeshDepthMaterial,this.depthMaterial.side=n.DoubleSide,this.depthMaterial.depthPacking=n.RGBADepthPacking,this.depthMaterial.blending=n.NoBlending,this.prepareMaskMaterial=this.getPrepareMaskMaterial(),this.prepareMaskMaterial.side=n.DoubleSide,this.renderTargetDepthBuffer=new n.WebGLRenderTarget(this.resolution.x,this.resolution.y,a),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new n.WebGLRenderTarget(o,s,a),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new n.WebGLRenderTarget(o,s,a),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new n.WebGLRenderTarget(Math.round(o/2),Math.round(s/2),a),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this.getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new n.WebGLRenderTarget(o,s,a),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new n.WebGLRenderTarget(Math.round(o/2),Math.round(s/2),a),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1;this.separableBlurMaterial1=this.getSeperableBlurMaterial(4),this.separableBlurMaterial1.uniforms.texSize.value=new n.Vector2(o,s),this.separableBlurMaterial1.uniforms.kernelRadius.value=1,this.separableBlurMaterial2=this.getSeperableBlurMaterial(4),this.separableBlurMaterial2.uniforms.texSize.value=new n.Vector2(Math.round(o/2),Math.round(s/2)),this.separableBlurMaterial2.uniforms.kernelRadius.value=4,this.overlayMaterial=this.getOverlayMaterial(),void 0===n.CopyShader&&console.error("THREE.OutlinePass relies on THREE.CopyShader");var u=n.CopyShader;this.copyUniforms=n.UniformsUtils.clone(u.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new n.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:u.vertexShader,fragmentShader:u.fragmentShader,blending:n.NoBlending,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this.oldClearColor=new n.Color,this.oldClearAlpha=1,this.orthoCamera=new n.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new n.Scene,this.quad=new n.Mesh(new n.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad),this.tempPulseColor1=new n.Color,this.tempPulseColor2=new n.Color,this.textureMatrix=new n.Matrix4},n.OutlinePass.prototype=Object.assign(Object.create(n.Pass.prototype),{constructor:n.OutlinePass,dispose:function(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose()},setSize:function(t,e){this.renderTargetMaskBuffer.setSize(t,e);var r=Math.round(t/this.downSampleRatio),i=Math.round(e/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(r,i),this.renderTargetBlurBuffer1.setSize(r,i),this.renderTargetEdgeBuffer1.setSize(r,i),this.separableBlurMaterial1.uniforms.texSize.value=new n.Vector2(r,i),r=Math.round(r/2),i=Math.round(i/2),this.renderTargetBlurBuffer2.setSize(r,i),this.renderTargetEdgeBuffer2.setSize(r,i),this.separableBlurMaterial2.uniforms.texSize.value=new n.Vector2(r,i)},changeVisibilityOfSelectedObjects:function(t){function e(e){e instanceof n.Mesh&&(e.visible=t)}for(var r=0;r<this.selectedObjects.length;r++){this.selectedObjects[r].traverse(e)}},changeVisibilityOfNonSelectedObjects:function(t){function e(t){t instanceof n.Mesh&&i.push(t)}function r(e){if(e instanceof n.Mesh){for(var r=!1,a=0;a<i.length;a++){if(i[a].id===e.id){r=!0;break}}if(!r){var o=e.visible;t&&!e.bVisible||(e.visible=t),e.bVisible=o}}}for(var i=[],a=0;a<this.selectedObjects.length;a++){this.selectedObjects[a].traverse(e)}this.renderScene.traverse(r)},updateTextureMatrix:function(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.camera.projectionMatrix),this.textureMatrix.multiply(this.camera.matrixWorldInverse)},render:function(t,e,r,i,a){if(0!==this.selectedObjects.length){this.oldClearColor.copy(t.getClearColor()),this.oldClearAlpha=t.getClearAlpha();var o=t.autoClear;if(t.autoClear=!1,a&&t.context.disable(t.context.STENCIL_TEST),t.setClearColor(16777215,1),this.changeVisibilityOfSelectedObjects(!1),this.renderScene.overrideMaterial=this.depthMaterial,t.render(this.renderScene,this.camera,this.renderTargetDepthBuffer,!0),this.changeVisibilityOfSelectedObjects(!0),this.updateTextureMatrix(),this.changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value=new n.Vector2(this.camera.near,this.camera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,t.render(this.renderScene,this.camera,this.renderTargetMaskBuffer,!0),this.renderScene.overrideMaterial=null,this.changeVisibilityOfNonSelectedObjects(!0),this.quad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,t.render(this.scene,this.orthoCamera,this.renderTargetMaskDownSampleBuffer,!0),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){var s=.625+.75*Math.cos(.01*performance.now()/this.pulsePeriod)/2;this.tempPulseColor1.multiplyScalar(s),this.tempPulseColor2.multiplyScalar(s)}this.quad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value=new n.Vector2(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,t.render(this.scene,this.orthoCamera,this.renderTargetEdgeBuffer1,!0),this.quad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=n.OutlinePass.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,t.render(this.scene,this.orthoCamera,this.renderTargetBlurBuffer1,!0),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=n.OutlinePass.BlurDirectionY,t.render(this.scene,this.orthoCamera,this.renderTargetEdgeBuffer1,!0),this.quad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=n.OutlinePass.BlurDirectionX,t.render(this.scene,this.orthoCamera,this.renderTargetBlurBuffer2,!0),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=n.OutlinePass.BlurDirectionY,t.render(this.scene,this.orthoCamera,this.renderTargetEdgeBuffer2,!0),this.quad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,a&&t.context.enable(t.context.STENCIL_TEST),t.render(this.scene,this.orthoCamera,r,!1),t.setClearColor(this.oldClearColor,this.oldClearAlpha),t.autoClear=o}},getPrepareMaskMaterial:function(){return new n.ShaderMaterial({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new n.Vector2(.5,.5)},textureMatrix:{value:new n.Matrix4}},vertexShader:"varying vec2 vUv;\t\t\t\tvarying vec4 projTexCoord;\t\t\t\tvarying vec4 vPosition;\t\t\t\tuniform mat4 textureMatrix;\t\t\t\tvoid main() {\t\t\t\t\tvUv = uv;\t\t\t\t\tvPosition = modelViewMatrix * vec4( position, 1.0 );\t\t\t\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\t\t\t\t\tprojTexCoord = textureMatrix * worldPosition;\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <packing>\t\t\t\tvarying vec2 vUv;\t\t\t\tvarying vec4 vPosition;\t\t\t\tvarying vec4 projTexCoord;\t\t\t\tuniform sampler2D depthTexture;\t\t\t\tuniform vec2 cameraNearFar;\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tfloat depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));\t\t\t\t\tfloat viewZ = -perspectiveDepthToViewZ( depth, cameraNearFar.x, cameraNearFar.y );\t\t\t\t\tfloat depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;\t\t\t\t\tgl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);\t\t\t\t}"})},getEdgeDetectionMaterial:function(){return new n.ShaderMaterial({uniforms:{maskTexture:{value:null},texSize:{value:new n.Vector2(.5,.5)},visibleEdgeColor:{value:new n.Vector3(1,1,1)},hiddenEdgeColor:{value:new n.Vector3(1,1,1)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\t\t\t\tuniform sampler2D maskTexture;\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec3 visibleEdgeColor;\t\t\t\tuniform vec3 hiddenEdgeColor;\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tvec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);\t\t\t\t\tvec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);\t\t\t\t\tvec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);\t\t\t\t\tvec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);\t\t\t\t\tvec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);\t\t\t\t\tfloat diff1 = (c1.r - c2.r)*0.5;\t\t\t\t\tfloat diff2 = (c3.r - c4.r)*0.5;\t\t\t\t\tfloat d = length( vec2(diff1, diff2) );\t\t\t\t\tfloat a1 = min(c1.g, c2.g);\t\t\t\t\tfloat a2 = min(c3.g, c4.g);\t\t\t\t\tfloat visibilityFactor = min(a1, a2);\t\t\t\t\tvec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;\t\t\t\t\tgl_FragColor = vec4(edgeColor, 1.0) * vec4(d);\t\t\t\t}"})},getSeperableBlurMaterial:function(t){return new n.ShaderMaterial({defines:{MAX_RADIUS:t},uniforms:{colorTexture:{value:null},texSize:{value:new n.Vector2(.5,.5)},direction:{value:new n.Vector2(.5,.5)},kernelRadius:{value:1}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\t\t\t\tvarying vec2 vUv;\t\t\t\tuniform sampler2D colorTexture;\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 direction;\t\t\t\tuniform float kernelRadius;\t\t\t\t\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\t\t\t\t}\t\t\t\tvoid main() {\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, kernelRadius);\t\t\t\t\tvec4 diffuseSum = texture2D( colorTexture, vUv)* weightSum;\t\t\t\t\tvec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);\t\t\t\t\tvec2 uvOffset = delta;\t\t\t\t\tfor( int i = 1; i <= MAX_RADIUS; i ++ ) {\t\t\t\t\t\tfloat w = gaussianPdf(uvOffset.x, kernelRadius);\t\t\t\t\t\tvec4 sample1 = texture2D( colorTexture, vUv + uvOffset);\t\t\t\t\t\tvec4 sample2 = texture2D( colorTexture, vUv - uvOffset);\t\t\t\t\t\tdiffuseSum += ((sample1 + sample2) * w);\t\t\t\t\t\tweightSum += (2.0 * w);\t\t\t\t\t\tuvOffset += delta;\t\t\t\t\t}\t\t\t\t\tgl_FragColor = diffuseSum/weightSum;\t\t\t\t}"})},getOverlayMaterial:function(){return new n.ShaderMaterial({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\t\t\t\tuniform sampler2D maskTexture;\t\t\t\tuniform sampler2D edgeTexture1;\t\t\t\tuniform sampler2D edgeTexture2;\t\t\t\tuniform sampler2D patternTexture;\t\t\t\tuniform float edgeStrength;\t\t\t\tuniform float edgeGlow;\t\t\t\tuniform bool usePatternTexture;\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tvec4 edgeValue1 = texture2D(edgeTexture1, vUv);\t\t\t\t\tvec4 edgeValue2 = texture2D(edgeTexture2, vUv);\t\t\t\t\tvec4 maskColor = texture2D(maskTexture, vUv);\t\t\t\t\tvec4 patternColor = texture2D(patternTexture, 6.0 * vUv);\t\t\t\t\tfloat visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;\t\t\t\t\tvec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;\t\t\t\t\tvec4 finalColor = edgeStrength * maskColor.r * edgeValue;\t\t\t\t\tif(usePatternTexture)\t\t\t\t\t\tfinalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);\t\t\t\t\tgl_FragColor = finalColor;\t\t\t\t}",depthTest:!1,depthWrite:!1,transparent:!0})}}),n.OutlinePass.BlurDirectionX=new n.Vector2(1,0),n.OutlinePass.BlurDirectionY=new n.Vector2(0,1),n.VREffect=function(t,e){function r(t){l=t,t.length>0?u=t[0]:e&&e("HMD not available")}function i(){var e=m.isPresenting;if(m.isPresenting=void 0!==u&&u.isPresenting,m.isPresenting){var r=u.getEyeParameters("left"),n=r.renderWidth,i=r.renderHeight;e||(y=t.getPixelRatio(),g=t.getSize(),t.setPixelRatio(1),t.setSize(2*n,i,!1))}else e&&(t.setPixelRatio(y),t.setSize(g.width,g.height,v))}function a(t){var e=2/(t.leftTan+t.rightTan),r=(t.leftTan-t.rightTan)*e*.5,n=2/(t.upTan+t.downTan);return{scale:[e,n],offset:[r,(t.upTan-t.downTan)*n*.5]}}function o(t,e,r,i){e=void 0===e||e,r=void 0===r?.01:r,i=void 0===i?1e4:i;var o=e?-1:1,s=new n.Matrix4,u=s.elements,l=a(t);return u[0]=l.scale[0],u[1]=0,u[2]=l.offset[0]*o,u[3]=0,u[4]=0,u[5]=l.scale[1],u[6]=-l.offset[1]*o,u[7]=0,u[8]=0,u[9]=0,u[10]=i/(r-i)*-o,u[11]=i*r/(r-i),u[12]=0,u[13]=0,u[14]=o,u[15]=0,s.transpose(),s}function s(t,e,r,n){var i=Math.PI/180;return o({upTan:Math.tan(t.upDegrees*i),downTan:Math.tan(t.downDegrees*i),leftTan:Math.tan(t.leftDegrees*i),rightTan:Math.tan(t.rightDegrees*i)},e,r,n)}var u,l,c,h,f=new n.Vector3,d=new n.Vector3,p=null;"VRFrameData"in window&&(p=new window.VRFrameData),navigator.getVRDisplays&&navigator.getVRDisplays().then(r).catch(function(){console.warn("THREE.VREffect: Unable to get VR Displays")}),this.isPresenting=!1,this.scale=1;var m=this,g=t.getSize(),v=!1,y=t.getPixelRatio();this.getVRDisplay=function(){return u},this.setVRDisplay=function(t){u=t},this.getVRDisplays=function(){return console.warn("THREE.VREffect: getVRDisplays() is being deprecated."),l},this.setSize=function(e,r,n){if(g={width:e,height:r},v=n,m.isPresenting){var i=u.getEyeParameters("left");t.setPixelRatio(1),t.setSize(2*i.renderWidth,i.renderHeight,!1)}else t.setPixelRatio(y),t.setSize(e,r,n)};var M=t.domElement,w=[0,0,.5,1],x=[.5,0,.5,1];window.addEventListener("vrdisplaypresentchange",i,!1),this.setFullScreen=function(t){return new Promise(function(e,r){return void 0===u?void r(new Error("No VR hardware found.")):m.isPresenting===t?void e():void e(t?u.requestPresent([{source:M}]):u.exitPresent())})},this.requestPresent=function(){return this.setFullScreen(!0)},this.exitPresent=function(){return this.setFullScreen(!1)},this.requestAnimationFrame=function(t){return void 0!==u?u.requestAnimationFrame(t):window.requestAnimationFrame(t)},this.cancelAnimationFrame=function(t){void 0!==u?u.cancelAnimationFrame(t):window.cancelAnimationFrame(t)},this.submitFrame=function(){void 0!==u&&m.isPresenting&&u.submitFrame()},this.autoSubmitFrame=!0;var b=new n.PerspectiveCamera;b.layers.enable(1);var T=new n.PerspectiveCamera;T.layers.enable(2),this.getCameraL=function(){return b},this.getCameraR=function(){return T},this.render=function(e,r,n,i){if(u&&m.isPresenting){var a=e.autoUpdate;a&&(e.updateMatrixWorld(),e.autoUpdate=!1);var o=u.getEyeParameters("left"),l=u.getEyeParameters("right");f.fromArray(o.offset),d.fromArray(l.offset),Array.isArray(e)&&(console.warn("THREE.VREffect.render() no longer supports arrays. Use object.layers instead."),e=e[0]);var g,v,y=t.getSize(),M=u.getLayers();if(M.length){var E=M[0];g=null!==E.leftBounds&&4===E.leftBounds.length?E.leftBounds:w,v=null!==E.rightBounds&&4===E.rightBounds.length?E.rightBounds:x}else g=w,v=x;c={x:Math.round(y.width*g[0]),y:Math.round(y.height*g[1]),width:Math.round(y.width*g[2]),height:Math.round(y.height*g[3])},h={x:Math.round(y.width*v[0]),y:Math.round(y.height*v[1]),width:Math.round(y.width*v[2]),height:Math.round(y.height*v[3])},n?(t.setRenderTarget(n),n.scissorTest=!0):(t.setRenderTarget(null),t.setScissorTest(!0)),(t.autoClear||i)&&t.clear(),null===r.parent&&r.updateMatrixWorld(),r.matrixWorld.decompose(b.position,b.quaternion,b.scale),r.matrixWorld.decompose(T.position,T.quaternion,T.scale);var S=this.scale;return b.translateOnAxis(f,S),T.translateOnAxis(d,S),u.getFrameData?(u.depthNear=r.near,u.depthFar=r.far,u.getFrameData(p),b.projectionMatrix.elements=p.leftProjectionMatrix,T.projectionMatrix.elements=p.rightProjectionMatrix):(b.projectionMatrix=s(o.fieldOfView,!0,r.near,r.far),T.projectionMatrix=s(l.fieldOfView,!0,r.near,r.far)),n?(n.viewport.set(c.x,c.y,c.width,c.height),n.scissor.set(c.x,c.y,c.width,c.height)):(t.setViewport(c.x,c.y,c.width,c.height),t.setScissor(c.x,c.y,c.width,c.height)),t.render(e,b,n,i),n?(n.viewport.set(h.x,h.y,h.width,h.height),n.scissor.set(h.x,h.y,h.width,h.height)):(t.setViewport(h.x,h.y,h.width,h.height),t.setScissor(h.x,h.y,h.width,h.height)),t.render(e,T,n,i),n?(n.viewport.set(0,0,y.width,y.height),n.scissor.set(0,0,y.width,y.height),n.scissorTest=!1,t.setRenderTarget(null)):(t.setViewport(0,0,y.width,y.height),t.setScissorTest(!1)),a&&(e.autoUpdate=!0),void(m.autoSubmitFrame&&m.submitFrame())}t.render(e,r,n,i)},this.dispose=function(){window.removeEventListener("vrdisplaypresentchange",i,!1)}},n.VRControls=function(t,e){function r(t){a=t,t.length>0?i=t[0]:e&&e("VR input not available.")}var i,a,o=this,s=new n.Matrix4,u=null;"VRFrameData"in window&&(u=new VRFrameData),navigator.getVRDisplays&&navigator.getVRDisplays().then(r).catch(function(){console.warn("THREE.VRControls: Unable to get VR Displays")}),this.scale=1,this.standing=!1,this.userHeight=1.6,this.getVRDisplay=function(){return i},this.setVRDisplay=function(t){i=t},this.getVRDisplays=function(){return console.warn("THREE.VRControls: getVRDisplays() is being deprecated."),a},this.getStandingMatrix=function(){return s},this.update=function(){if(i){var e;i.getImmediatePose?e=i.getImmediatePose():i.getFrameData?(i.getFrameData(u),e=u.pose):i.getPose&&(e=i.getPose()),null!==e.orientation?t.quaternion.fromArray(e.orientation):t.quaternion.set(0,0,0,1),null!==e.position?t.position.fromArray(e.position):t.position.set(0,0,0),this.standing&&(i.stageParameters?(t.updateMatrix(),s.fromArray(i.stageParameters.sittingToStandingTransform),t.applyMatrix(s)):t.position.setY(t.position.y+this.userHeight)),t.position.multiplyScalar(o.scale)}},this.resetPose=function(){i&&i.resetPose()},this.resetSensor=function(){console.warn("THREE.VRControls: .resetSensor() is now .resetPose()."),this.resetPose()},this.zeroSensor=function(){console.warn("THREE.VRControls: .zeroSensor() is now .resetPose()."),this.resetPose()},this.dispose=function(){i=null}},n.VRController=function(t,e){function r(t){for(var r=navigator.getGamepads(),n=0,i=0;n<4;n++){var a=r[n];if(a&&a.id===t){if(i===e)return a;i++}}}n.Object3D.call(this);var i,a=this,o=[0,0],s=!1,u=!1,l=!1,c=!1;void 0===e&&(e=0),this.matrixAutoUpdate=!1,this.standingMatrix=new n.Matrix4,this.getGamepad=function(){return i},this.getButtonState=function(t){return"thumbpad"===t?s:"trigger"===t?u:"grips"===t?l:"menu"===t?c:void 0},this.update=function(){if(void 0!==(i=r(t))&&i.pose){var e=i.pose;null!==i.pose.position?a.position.fromArray(e.position):a.position.fromArray([0,1,0]),null!==i.pose.orientation?a.quaternion.fromArray(e.orientation):a.quaternion.set(0,0,0,1),a.matrix.compose(a.position,a.quaternion,a.scale),a.matrix.multiplyMatrices(a.standingMatrix,a.matrix),a.matrix.decompose(a.position,a.quaternion,a.scale),a.matrixWorldNeedsUpdate=!0,a.visible=!0}else a.visible=!1;if(i){if(!i.axes||o[0]===i.axes[0]&&o[1]===i.axes[1]||(o[0]=i.axes[0],o[1]=i.axes[1],a.dispatchEvent({type:"axischanged",axes:o})),i.buttons[0]&&s!==i.buttons[0].pressed){s=i.buttons[0].pressed;var n=new Event(s?"thumbpaddown":"thumbpadup");window.dispatchEvent(n)}if(i.buttons[1]&&u!==i.buttons[1].pressed){u=i.buttons[1].pressed;var n=new Event(u?"triggerdown":"triggerup");window.dispatchEvent(n)}if(i.buttons[2]&&l!==i.buttons[2].pressed){l=i.buttons[2].pressed;var n=new Event(l?"gripsdown":"gripsup");window.dispatchEvent(n)}if(i.buttons[3]&&c!==i.buttons[3].pressed){c=i.buttons[3].pressed;var n=new Event(c?"menudown":"menuup");window.dispatchEvent(n)}}}},n.VRController.prototype=Object.create(n.Object3D.prototype),n.VRController.prototype.constructor=n.VRController,t.exports=n},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,r){var n=r(176)("wks"),i=r(68),a=r(11).Symbol,o="function"==typeof a;(t.exports=function(t){return n[t]||(n[t]=o&&a[t]||(o?a:i)("Symbol."+t))}).store=n},function(t,e,r){var n=r(26),i=r(10),a=r(58),o=r(53),s=function(t,e,r){var u,l,c,h=t&s.F,f=t&s.G,d=t&s.S,p=t&s.P,m=t&s.B,g=t&s.W,v=f?i:i[e]||(i[e]={}),y=v.prototype,M=f?n:d?n[e]:(n[e]||{}).prototype;f&&(r=e);for(u in r)(l=!h&&M&&void 0!==M[u])&&u in v||(c=l?M[u]:r[u],v[u]=f&&"function"!=typeof M[u]?r[u]:m&&l?a(c,n):g&&M[u]==c?function(t){var e=function(e,r,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,r)}return new t(e,r,n)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(c):p&&"function"==typeof c?a(Function.call,c):c,p&&((v.virtual||(v.virtual={}))[u]=c,t&s.R&&y&&!y[u]&&o(y,u,c)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},function(t,e,r){"use strict";function n(t,e){if(t.get("phase")!==J.RENDERING)return t;var r=t.get("loadingFiles").size,n=t.get("loadedFiles").size,i=r+n,a=0===i?1:(1+n/i)/2;return a<1?(e("loading",a),t.set("progress",a)):(e("loading",1),t.set("progress",1))}function i(t){return{type:Z,payload:t}}function a(t){return{type:V.c,payload:t}}function o(t){return t.getIn(["sceneIO","id"])}function s(t,e,r){return function(n){var i=n.read(e);return n.logPageView("/player/v2/"+t,r),n.dispatch({type:V.d,payload:i}).then(n.dispatch({type:V.i,payload:{id:t,store:n}})).then(function(){return t})}}function u(){return{type:H}}function l(){return{type:Q}}function c(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.waitForPublish,a=n.ignoreErrorMessage;return function(o){function s(t){t.readyState>1&&(clearTimeout(l),clearTimeout(c))}if(o.getIn(["sceneGraph",t]))return O.a.resolve(!0);if(n.threehub)return o.dispatch(f(t,n));var u=e?r.i(B.c)(e)(o):o.callApi({contentType:"text",types:[k,G,Y],url:et+"/scenes/"+t+"/published?wait="+(i?"true":"false"),queryKey:"SCENE"+t,payload:t,onReadyStateChange:s,ignoreCache:!0,ignoreErrorMessage:a}),l=setTimeout(function(){o.error(new Error("Slow Load"),null,{sceneId:t})},nt),c=setTimeout(function(){o.error(new Error("Load Failure"),null,{sceneId:t})},it);return u.then(function(t){return clearTimeout(l),clearTimeout(c),t})}}function h(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=new Date;return function(i){return i.getIn(["sceneGraph",t])?O.a.resolve(!0):i.dispatch(c(t,e,r)).then(function(e){return i.dispatch(s(t,e,new Date-n))})}}function f(t,e){return function(e){return e.callApi({types:[k,G,Y],url:rt+"/scene/"+t,payload:t}).then(function(n){e.dispatch(a(t));var i=n.HEAD,o=n.objects;return e.dispatch(r.i(U.m)({objects:o,origin:{HEAD:i}})),e.dispatch(r.i(U.n)(i))})}}function d(){return function(t){var e=T(t),r=o(t);return t.callApi({contentType:"text",url:et+"/scenes/"+r+"/published",method:"PUT",body:L()({content:e})})}}function p(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(n){return n.dispatch(h(t,e,r)).then(function(){return n.dispatch(a(t))})}}function m(t){var e=t.getIn;t.dispatch;return e(["sceneIO","progress"])}function g(t){return t.getIn(["sceneIO","phase"])>=J.PRELOADED&&0===t.getIn(["sceneIO","loadingFiles"]).size}function v(t){return t.getIn(["sceneIO","phase"])>=J.RENDERING&&0===t.getIn(["sceneIO","loadingFiles"]).size}function y(t){return t.getIn(["sceneIO","loaded"])}function M(t){return t.getIn(["sceneIO","phase"])>=J.RENDERED}function w(){return function(t){var e=t.getIn(["sceneIO","preloadCommands"]);if(!e.size)return t.dispatch({type:X});t.dispatch({type:W}),O.a.all(e.map(function(t){return O.a.resolve(t())}).toArray()).then(function(){t.dispatch({type:X})}).catch(function(e){console.log("Caught plugin error: ",e.message),console.log("Caught plugin error, stack: ",e.stack),t.dispatch({type:X})})}}function x(t){return{type:K,payload:t}}function b(){return{type:q}}function T(t){var e=r.i(U.a)(t);return t.write({nodes:L()(e.nodes),assets:r.i(B.d)(t),clips:t.getIn(["animation","clips"])})}function E(t){return t.getIn(["sceneIO","errors"]).size}function S(t){return t.getIn(["sceneIO","errors"])}function _(t){return t.getIn(["sceneIO","phase"])}function A(){return function(t){var e=t.getTranslator();return e&&e.reset(),r.i(F.a)(),t.dispatch({type:V.e})}}r.d(e,"e",function(){return J}),e.a=o,e.f=u,e.g=l,e.c=h,e.n=m,e.h=g,e.j=v,e.b=y,e.l=M,e.k=w,e.i=b,e.m=E,e.o=S,e.d=_;var D,N=r(2),I=(r.n(N),r(52)),L=r.n(I),C=r(37),O=r.n(C),R=r(19),z=r.n(R),j=r(24),P=(r.n(j),r(36)),U=(r(90),r(396),r(8)),B=r(32),V=(r(61),r(60)),F=r(199),k="LOADING_SCENEGRAPH",G="LOADED_SCENEGRAPH",Y="ERROR_LOADING_SCENEGRAPH",H="RENDERING_SCENE",Q="RENDERED_SCENE",W="PRELOADING_SCENE",X="PRELOADED_SCENE",q="LOADED_SCENE",Z="SCENE_ERROR",K="PRELOAD_COMMAND",J={FAILED:-1,UNKNOWN:0,LOADING_SCENEGRAPH:1,LOADED_SCENEGRAPH:2,RENDERING:3,PRELOADING:4,PRELOADED:5,LOADED:6,RENDERED:7},$=r.i(j.Map)({id:null,errors:r.i(j.List)(),phase:J.UNKNOWN,progress:0,loadingFiles:r.i(j.Map)(),loadedFiles:r.i(j.Map)(),loaded:!1,preloadCommands:r.i(j.List)()}),tt=r.i(P.a)($,(D={},z()(D,V.c,function(t,e){return t.set("id",e)}),z()(D,k,function(t,e){return t.get("loaded")||t.get("id")&&t.get("id")!==e?t:t.set("phase",J.LOADING_SCENEGRAPH).set("progress",.25)}),z()(D,G,function(t,e){return t.get("loaded")||t.get("id")&&t.get("id")!==e?t:t.set("phase",J.LOADED_SCENEGRAPH).set("progress",.5)}),z()(D,Y,function(t,e,n){var i=n.action,a=i.error,o=i.ignoreErrorMessage,s="Error Loading Scene: "+a.status+" "+a.statusText;return o?t:t.updateIn(["errors"],r.i(j.List)(),function(t){return t.push(s)})}),z()(D,H,function(t,e,r){var i=r.createEvent;return n(t.set("phase",J.RENDERING),i)}),z()(D,V.g,function(t,e){return t.setIn(["loadingFiles",e],!0)}),z()(D,V.f,function(t,e,r){var i=r.createEvent;return n(t.deleteIn(["loadingFiles",e]).setIn(["loadedFiles",e],!0),i)}),z()(D,V.h,function(t,e,r){var i=r.createEvent;return n(t.deleteIn(["loadingFiles",e]),i)}),z()(D,W,function(t,e,r){return(0,r.createEvent)("preloading"),t.set("phase",J.PRELOADING)}),z()(D,X,function(t,e,r){return(0,r.createEvent)("preloaded"),t.set("phase",J.PRELOADED)}),z()(D,K,function(t,e){return t.updateIn(["preloadCommands"],r.i(j.List)(),function(t){return t.push(e)})}),z()(D,q,function(t,e,r){return(0,r.createEvent)("loaded"),t.set("loaded",!0).set("phase",J.LOADED)}),z()(D,Q,function(t,e,r){return(0,r.createEvent)("rendered"),t.set("phase",J.RENDERED)}),z()(D,Z,function(t,e){return t.updateIn(["errors"],r.i(j.List)(),function(t){return t.push(e)})}),z()(D,V.e,function(t){return $}),D)),et="https://clara.io/api",rt="/api/v2",nt=1e4,it=3e4,at={reducer:tt,actions:{fetch:h,fetchAndUse:p,loadScene:s,useScene:a,reportError:i,prefetch:c,preloadCommand:x,savePublished:d,clearScene:A},selectors:{isSceneLoaded:y,isSceneRendered:M,loadingProgress:m,getErrors:S,numErrors:E,getSceneId:o,writeScene:T}};e.p=at},function(t,e,r){"use strict";function n(){this.byName={},this.namesByIndex=[]}e.a=n,n.prototype={constructor:n,get length(){return this.namesByIndex.length},set:function(t,e){var r=this.byName;t in r==!1&&this.namesByIndex.push(t),r[t]=e}},n.Iterator=function(t){this.reset(t||null)},n.Iterator.prototype={constructor:n.Iterator,reset:function(t){return void 0!==t&&(this.container=t),this.name=null,this.index=-1,this.element=null,this},next:function(){var t=this.container;if(null===t)return!1;var e=t.namesByIndex,r=++this.index;return r>=e.length?(this.name=null,!1):(this.element=t.byName[this.name=e[r]],!0)},add:function(t,e){var r=this.namesByIndex;if(-1!==r.indexOf(t))throw Error("ObjectsByName: Name '"+t+"' not unique!");return r.push(t),this.byName[t]=e,this}},n.shallowClone=function(){var t=new n.Iterator;return function(e){var r=new n;if(!e)return r;var i=r.byName,a=r.namesByIndex;for(a.length=e.namesByIndex.length,t.reset(e);t.next();){var o=t.name;i[o]=t.element,a[t.index]=o}return t.reset(null),r}}()},function(t,e,r){"use strict";e.__esModule=!0;var n=r(263),i=function(t){return t&&t.__esModule?t:{default:t}}(n);e.default=function(t,e,r){return e in t?(0,i.default)(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){var r=window.Util||{};r.MIN_TIMESTEP=.001,r.MAX_TIMESTEP=1,r.base64=function(t,e){return"data:"+t+";base64,"+e},r.clamp=function(t,e,r){return Math.min(Math.max(e,t),r)},r.lerp=function(t,e,r){return t+(e-t)*r},r.race=function(t){return Promise.race?Promise.race(t):new Promise(function(e,r){for(var n=0;n<t.length;n++)t[n].then(e,r)})},r.isIOS=function(){var t=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return t}}(),r.isWebViewAndroid=function(){var t=-1!==navigator.userAgent.indexOf("Version")&&-1!==navigator.userAgent.indexOf("Android")&&-1!==navigator.userAgent.indexOf("Chrome");return function(){return t}}(),r.isSafari=function(){var t=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return t}}(),r.isFirefoxAndroid=function(){var t=-1!==navigator.userAgent.indexOf("Firefox")&&-1!==navigator.userAgent.indexOf("Android");return function(){return t}}(),r.isLandscapeMode=function(){return 90==window.orientation||-90==window.orientation},r.isTimestampDeltaValid=function(t){return!isNaN(t)&&(!(t<=r.MIN_TIMESTEP)&&!(t>r.MAX_TIMESTEP))},r.getScreenWidth=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},r.getScreenHeight=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},r.requestFullscreen=function(t){if(r.isWebViewAndroid())return!1;if(t.requestFullscreen)t.requestFullscreen();else if(t.webkitRequestFullscreen)t.webkitRequestFullscreen();else if(t.mozRequestFullScreen)t.mozRequestFullScreen();else{if(!t.msRequestFullscreen)return!1;t.msRequestFullscreen()}return!0},r.exitFullscreen=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen()}return!0},r.getFullscreenElement=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},r.linkProgram=function(t,e,r,n){var i=t.createShader(t.VERTEX_SHADER);t.shaderSource(i,e),t.compileShader(i);var a=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(a,r),t.compileShader(a);var o=t.createProgram();t.attachShader(o,i),t.attachShader(o,a);for(var s in n)t.bindAttribLocation(o,n[s],s);return t.linkProgram(o),t.deleteShader(i),t.deleteShader(a),o},r.getProgramUniforms=function(t,e){for(var r={},n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),i="",a=0;a<n;a++){i=t.getActiveUniform(e,a).name.replace("[0]",""),r[i]=t.getUniformLocation(e,i)}return r},r.orthoMatrix=function(t,e,r,n,i,a,o){var s=1/(e-r),u=1/(n-i),l=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+r)*s,t[13]=(i+n)*u,t[14]=(o+a)*l,t[15]=1,t},r.copyArray=function(t,e){for(var r=0,n=t.length;r<n;r++)e[r]=t[r]},r.isMobile=function(){var t=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t},r.extend=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t},r.safariCssSizeWorkaround=function(t){if(r.isIOS()){var e=t.style.width,n=t.style.height;t.style.width=parseInt(e)+1+"px",t.style.height=parseInt(n)+"px",setTimeout(function(){t.style.width=e,t.style.height=n},100)}window.Util=r,window.canvas=t},r.isDebug=function(){return r.getQueryParameter("debug")},r.getQueryParameter=function(t){var t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),e=new RegExp("[\\?&]"+t+"=([^&#]*)"),r=e.exec(location.search);return null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))},r.frameDataFromPose=function(){function t(t,e,r,n){var i=Math.tan(e?e.upDegrees*a:o),s=Math.tan(e?e.downDegrees*a:o),u=Math.tan(e?e.leftDegrees*a:o),l=Math.tan(e?e.rightDegrees*a:o),c=2/(u+l),h=2/(i+s);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=h,t[6]=0,t[7]=0,t[8]=-(u-l)*c*.5,t[9]=(i-s)*h*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}function e(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=n+n,u=i+i,l=a+a,c=n*s,h=n*u,f=n*l,d=i*u,p=i*l,m=a*l,g=o*s,v=o*u,y=o*l;return t[0]=1-(d+m),t[1]=h+y,t[2]=f-v,t[3]=0,t[4]=h-y,t[5]=1-(c+m),t[6]=p+g,t[7]=0,t[8]=f+v,t[9]=p-g,t[10]=1-(c+d),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function r(t,e,r){var n,i,a,o,s,u,l,c,h,f,d,p,m=r[0],g=r[1],v=r[2];return e===t?(t[12]=e[0]*m+e[4]*g+e[8]*v+e[12],t[13]=e[1]*m+e[5]*g+e[9]*v+e[13],t[14]=e[2]*m+e[6]*g+e[10]*v+e[14],t[15]=e[3]*m+e[7]*g+e[11]*v+e[15]):(n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],f=e[9],d=e[10],p=e[11],t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=u,t[6]=l,t[7]=c,t[8]=h,t[9]=f,t[10]=d,t[11]=p,t[12]=n*m+s*g+h*v+e[12],t[13]=i*m+u*g+f*v+e[13],t[14]=a*m+l*g+d*v+e[14],t[15]=o*m+c*g+p*v+e[15]),t}function n(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=e[9],f=e[10],d=e[11],p=e[12],m=e[13],g=e[14],v=e[15],y=r*s-n*o,M=r*u-i*o,w=r*l-a*o,x=n*u-i*s,b=n*l-a*s,T=i*l-a*u,E=c*m-h*p,S=c*g-f*p,_=c*v-d*p,A=h*g-f*m,D=h*v-d*m,N=f*v-d*g,I=y*N-M*D+w*A+x*_-b*S+T*E;return I?(I=1/I,t[0]=(s*N-u*D+l*A)*I,t[1]=(i*D-n*N-a*A)*I,t[2]=(m*T-g*b+v*x)*I,t[3]=(f*b-h*T-d*x)*I,t[4]=(u*_-o*N-l*S)*I,t[5]=(r*N-i*_+a*S)*I,t[6]=(g*w-p*T-v*M)*I,t[7]=(c*T-f*w+d*M)*I,t[8]=(o*D-s*_+l*E)*I,t[9]=(n*_-r*D-a*E)*I,t[10]=(p*b-m*w+v*y)*I,t[11]=(h*w-c*b-d*y)*I,t[12]=(s*S-o*A-u*E)*I,t[13]=(r*A-n*S+i*E)*I,t[14]=(m*M-p*x-g*y)*I,t[15]=(c*x-h*M+f*y)*I,t):null}function i(i,a,o,l,c){t(i,l?l.fieldOfView:null,c.depthNear,c.depthFar),e(a,o.orientation||s,o.position||u),l&&r(a,a,l.offset),n(a,a)}var a=Math.PI/180,o=.25*Math.PI,s=new Float32Array([0,0,0,1]),u=new Float32Array([0,0,0]);return function(t,e,r){return!(!t||!e)&&(t.pose=e,t.timestamp=e.timestamp,i(t.leftProjectionMatrix,t.leftViewMatrix,e,r.getEyeParameters("left"),r),i(t.rightProjectionMatrix,t.rightViewMatrix,e,r.getEyeParameters("right"),r),!0)}}(),r.isInsideCrossDomainIFrame=function(){var t=window.self!==window.top,e=r.getDomainFromUrl(document.referrer),n=r.getDomainFromUrl(window.location.href);return t&&e!==n},r.getDomainFromUrl=function(t){var e;return e=t.indexOf("://")>-1?t.split("/")[2]:t.split("/")[0],e=e.split(":")[0]},t.exports=r},function(t,e,r){var n=r(155)("wks"),i=r(120),a=r(26).Symbol,o="function"==typeof a;(t.exports=function(t){return n[t]||(n[t]=o&&a[t]||(o?a:i)("Symbol."+t))}).store=n},function(t,e,r){var n=r(12),i=r(230),a=r(103),o=Object.defineProperty;e.f=r(30)?Object.defineProperty:function(t,e,r){if(n(t),e=a(e,!0),n(r),i)try{return o(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},function(t,e,r){!function(e,r){t.exports=r()}(0,function(){"use strict";function t(t,e){e&&(t.prototype=Object.create(e.prototype)),t.prototype.constructor=t}function e(t){return a(t)?t:N(t)}function r(t){return o(t)?t:I(t)}function n(t){return s(t)?t:L(t)}function i(t){return a(t)&&!u(t)?t:C(t)}function a(t){return!(!t||!t[ur])}function o(t){return!(!t||!t[lr])}function s(t){return!(!t||!t[cr])}function u(t){return o(t)||s(t)}function l(t){return!(!t||!t[hr])}function c(t){return t.value=!1,t}function h(t){t&&(t.value=!0)}function f(){}function d(t,e){e=e||0;for(var r=Math.max(0,t.length-e),n=new Array(r),i=0;i<r;i++)n[i]=t[i+e];return n}function p(t){return void 0===t.size&&(t.size=t.__iterate(g)),t.size}function m(t,e){if("number"!=typeof e){var r=e>>>0;if(""+r!==e||4294967295===r)return NaN;e=r}return e<0?p(t)+e:e}function g(){return!0}function v(t,e,r){return(0===t||void 0!==r&&t<=-r)&&(void 0===e||void 0!==r&&e>=r)}function y(t,e){return w(t,e,0)}function M(t,e){return w(t,e,e)}function w(t,e,r){return void 0===t?r:t<0?Math.max(0,e+t):void 0===e?t:Math.min(e,t)}function x(t){this.next=t}function b(t,e,r,n){var i=0===t?e:1===t?r:[e,r];return n?n.value=i:n={value:i,done:!1},n}function T(){return{value:void 0,done:!0}}function E(t){return!!A(t)}function S(t){return t&&"function"==typeof t.next}function _(t){var e=A(t);return e&&e.call(t)}function A(t){var e=t&&(xr&&t[xr]||t[br]);if("function"==typeof e)return e}function D(t){return t&&"number"==typeof t.length}function N(t){return null===t||void 0===t?U():a(t)?t.toSeq():F(t)}function I(t){return null===t||void 0===t?U().toKeyedSeq():a(t)?o(t)?t.toSeq():t.fromEntrySeq():B(t)}function L(t){return null===t||void 0===t?U():a(t)?o(t)?t.entrySeq():t.toIndexedSeq():V(t)}function C(t){return(null===t||void 0===t?U():a(t)?o(t)?t.entrySeq():t:V(t)).toSetSeq()}function O(t){this._array=t,this.size=t.length}function R(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}function z(t){this._iterable=t,this.size=t.length||t.size}function j(t){this._iterator=t,this._iteratorCache=[]}function P(t){return!(!t||!t[Er])}function U(){return Sr||(Sr=new O([]))}function B(t){var e=Array.isArray(t)?new O(t).fromEntrySeq():S(t)?new j(t).fromEntrySeq():E(t)?new z(t).fromEntrySeq():"object"==typeof t?new R(t):void 0;if(!e)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return e}function V(t){var e=k(t);if(!e)throw new TypeError("Expected Array or iterable object of values: "+t);return e}function F(t){var e=k(t)||"object"==typeof t&&new R(t);if(!e)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return e}function k(t){return D(t)?new O(t):S(t)?new j(t):E(t)?new z(t):void 0}function G(t,e,r,n){var i=t._cache;if(i){for(var a=i.length-1,o=0;o<=a;o++){var s=i[r?a-o:o];if(!1===e(s[1],n?s[0]:o,t))return o+1}return o}return t.__iterateUncached(e,r)}function Y(t,e,r,n){var i=t._cache;if(i){var a=i.length-1,o=0;return new x(function(){var t=i[r?a-o:o];return o++>a?T():b(e,n?t[0]:o-1,t[1])})}return t.__iteratorUncached(e,r)}function H(t,e){return e?Q(e,t,"",{"":t}):W(t)}function Q(t,e,r,n){return Array.isArray(e)?t.call(n,r,L(e).map(function(r,n){return Q(t,r,n,e)})):X(e)?t.call(n,r,I(e).map(function(r,n){return Q(t,r,n,e)})):e}function W(t){return Array.isArray(t)?L(t).map(W).toList():X(t)?I(t).map(W).toMap():t}function X(t){return t&&(t.constructor===Object||void 0===t.constructor)}function q(t,e){if(t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if(t=t.valueOf(),e=e.valueOf(),t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1}return!("function"!=typeof t.equals||"function"!=typeof e.equals||!t.equals(e))}function Z(t,e){if(t===e)return!0;if(!a(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||o(t)!==o(e)||s(t)!==s(e)||l(t)!==l(e))return!1;if(0===t.size&&0===e.size)return!0;var r=!u(t);if(l(t)){var n=t.entries();return e.every(function(t,e){var i=n.next().value;return i&&q(i[1],t)&&(r||q(i[0],e))})&&n.next().done}var i=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{i=!0;var c=t;t=e,e=c}var h=!0,f=e.__iterate(function(e,n){if(r?!t.has(e):i?!q(e,t.get(n,mr)):!q(t.get(n,mr),e))return h=!1,!1});return h&&t.size===f}function K(t,e){if(!(this instanceof K))return new K(t,e);if(this._value=t,this.size=void 0===e?1/0:Math.max(0,e),0===this.size){if(_r)return _r;_r=this}}function J(t,e){if(!t)throw new Error(e)}function $(t,e,r){if(!(this instanceof $))return new $(t,e,r);if(J(0!==r,"Cannot step a Range by 0"),t=t||0,void 0===e&&(e=1/0),r=void 0===r?1:Math.abs(r),e<t&&(r=-r),this._start=t,this._end=e,this._step=r,this.size=Math.max(0,Math.ceil((e-t)/r-1)+1),0===this.size){if(Ar)return Ar;Ar=this}}function tt(){throw TypeError("Abstract")}function et(){}function rt(){}function nt(){}function it(t){return t>>>1&1073741824|3221225471&t}function at(t){if(!1===t||null===t||void 0===t)return 0;if("function"==typeof t.valueOf&&(!1===(t=t.valueOf())||null===t||void 0===t))return 0;if(!0===t)return 1;var e=typeof t;if("number"===e){if(t!==t||t===1/0)return 0;var r=0|t;for(r!==t&&(r^=4294967295*t);t>4294967295;)t/=4294967295,r^=t;return it(r)}if("string"===e)return t.length>zr?ot(t):st(t);if("function"==typeof t.hashCode)return t.hashCode();if("object"===e)return ut(t);if("function"==typeof t.toString)return st(t.toString());throw new Error("Value type "+e+" cannot be hashed.")}function ot(t){var e=Ur[t];return void 0===e&&(e=st(t),Pr===jr&&(Pr=0,Ur={}),Pr++,Ur[t]=e),e}function st(t){for(var e=0,r=0;r<t.length;r++)e=31*e+t.charCodeAt(r)|0;return it(e)}function ut(t){var e;if(Cr&&void 0!==(e=Dr.get(t)))return e;if(void 0!==(e=t[Rr]))return e;if(!Lr){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Rr]))return e;if(void 0!==(e=lt(t)))return e}if(e=++Or,1073741824&Or&&(Or=0),Cr)Dr.set(t,e);else{if(void 0!==Ir&&!1===Ir(t))throw new Error("Non-extensible objects are not allowed as keys.");if(Lr)Object.defineProperty(t,Rr,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Rr]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[Rr]=e}}return e}function lt(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}function ct(t){J(t!==1/0,"Cannot perform this action with an infinite size.")}function ht(t){return null===t||void 0===t?bt():ft(t)&&!l(t)?t:bt().withMutations(function(e){var n=r(t);ct(n.size),n.forEach(function(t,r){return e.set(r,t)})})}function ft(t){return!(!t||!t[Br])}function dt(t,e){this.ownerID=t,this.entries=e}function pt(t,e,r){this.ownerID=t,this.bitmap=e,this.nodes=r}function mt(t,e,r){this.ownerID=t,this.count=e,this.nodes=r}function gt(t,e,r){this.ownerID=t,this.keyHash=e,this.entries=r}function vt(t,e,r){this.ownerID=t,this.keyHash=e,this.entry=r}function yt(t,e,r){this._type=e,this._reverse=r,this._stack=t._root&&wt(t._root)}function Mt(t,e){return b(t,e[0],e[1])}function wt(t,e){return{node:t,index:0,__prev:e}}function xt(t,e,r,n){var i=Object.create(Vr);return i.size=t,i._root=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function bt(){return Fr||(Fr=xt(0))}function Tt(t,e,r){var n,i;if(t._root){var a=c(gr),o=c(vr);if(n=Et(t._root,t.__ownerID,0,void 0,e,r,a,o),!o.value)return t;i=t.size+(a.value?r===mr?-1:1:0)}else{if(r===mr)return t;i=1,n=new dt(t.__ownerID,[[e,r]])}return t.__ownerID?(t.size=i,t._root=n,t.__hash=void 0,t.__altered=!0,t):n?xt(i,n):bt()}function Et(t,e,r,n,i,a,o,s){return t?t.update(e,r,n,i,a,o,s):a===mr?t:(h(s),h(o),new vt(e,n,[i,a]))}function St(t){return t.constructor===vt||t.constructor===gt}function _t(t,e,r,n,i){if(t.keyHash===n)return new gt(e,n,[t.entry,i]);var a,o=(0===r?t.keyHash:t.keyHash>>>r)&pr,s=(0===r?n:n>>>r)&pr;return new pt(e,1<<o|1<<s,o===s?[_t(t,e,r+fr,n,i)]:(a=new vt(e,n,i),o<s?[t,a]:[a,t]))}function At(t,e,r,n){t||(t=new f);for(var i=new vt(t,at(r),[r,n]),a=0;a<e.length;a++){var o=e[a];i=i.update(t,0,void 0,o[0],o[1])}return i}function Dt(t,e,r,n){for(var i=0,a=0,o=new Array(r),s=0,u=1,l=e.length;s<l;s++,u<<=1){var c=e[s];void 0!==c&&s!==n&&(i|=u,o[a++]=c)}return new pt(t,i,o)}function Nt(t,e,r,n,i){for(var a=0,o=new Array(dr),s=0;0!==r;s++,r>>>=1)o[s]=1&r?e[a++]:void 0;return o[n]=i,new mt(t,a+1,o)}function It(t,e,n){for(var i=[],o=0;o<n.length;o++){var s=n[o],u=r(s);a(s)||(u=u.map(function(t){return H(t)})),i.push(u)}return Ot(t,e,i)}function Lt(t,e,r){return t&&t.mergeDeep&&a(e)?t.mergeDeep(e):q(t,e)?t:e}function Ct(t){return function(e,r,n){if(e&&e.mergeDeepWith&&a(r))return e.mergeDeepWith(t,r);var i=t(e,r,n);return q(e,i)?e:i}}function Ot(t,e,r){return r=r.filter(function(t){return 0!==t.size}),0===r.length?t:0!==t.size||t.__ownerID||1!==r.length?t.withMutations(function(t){for(var n=e?function(r,n){t.update(n,mr,function(t){return t===mr?r:e(t,r,n)})}:function(e,r){t.set(r,e)},i=0;i<r.length;i++)r[i].forEach(n)}):t.constructor(r[0])}function Rt(t,e,r,n){var i=t===mr,a=e.next();if(a.done){var o=i?r:t,s=n(o);return s===o?t:s}J(i||t&&t.set,"invalid keyPath");var u=a.value,l=i?mr:t.get(u,mr),c=Rt(l,e,r,n);return c===l?t:c===mr?t.remove(u):(i?bt():t).set(u,c)}function zt(t){return t-=t>>1&1431655765,t=(858993459&t)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,127&(t+=t>>16)}function jt(t,e,r,n){var i=n?t:d(t);return i[e]=r,i}function Pt(t,e,r,n){var i=t.length+1;if(n&&e+1===i)return t[e]=r,t;for(var a=new Array(i),o=0,s=0;s<i;s++)s===e?(a[s]=r,o=-1):a[s]=t[s+o];return a}function Ut(t,e,r){var n=t.length-1;if(r&&e===n)return t.pop(),t;for(var i=new Array(n),a=0,o=0;o<n;o++)o===e&&(a=1),i[o]=t[o+a];return i}function Bt(t){var e=Yt();if(null===t||void 0===t)return e;if(Vt(t))return t;var r=n(t),i=r.size;return 0===i?e:(ct(i),i>0&&i<dr?Gt(0,i,fr,null,new Ft(r.toArray())):e.withMutations(function(t){t.setSize(i),r.forEach(function(e,r){return t.set(r,e)})}))}function Vt(t){return!(!t||!t[Hr])}function Ft(t,e){this.array=t,this.ownerID=e}function kt(t,e){function r(t,e,r){return 0===e?n(t,r):i(t,e,r)}function n(t,r){var n=r===s?u&&u.array:t&&t.array,i=r>a?0:a-r,l=o-r;return l>dr&&(l=dr),function(){if(i===l)return Xr;var t=e?--l:i++;return n&&n[t]}}function i(t,n,i){var s,u=t&&t.array,l=i>a?0:a-i>>n,c=1+(o-i>>n);return c>dr&&(c=dr),function(){for(;;){if(s){var t=s();if(t!==Xr)return t;s=null}if(l===c)return Xr;var a=e?--c:l++;s=r(u&&u[a],n-fr,i+(a<<n))}}}var a=t._origin,o=t._capacity,s=Kt(o),u=t._tail;return r(t._root,t._level,0)}function Gt(t,e,r,n,i,a,o){var s=Object.create(Qr);return s.size=e-t,s._origin=t,s._capacity=e,s._level=r,s._root=n,s._tail=i,s.__ownerID=a,s.__hash=o,s.__altered=!1,s}function Yt(){return Wr||(Wr=Gt(0,0,fr))}function Ht(t,e,r){if((e=m(t,e))!==e)return t;if(e>=t.size||e<0)return t.withMutations(function(t){e<0?qt(t,e).set(0,r):qt(t,0,e+1).set(e,r)});e+=t._origin;var n=t._tail,i=t._root,a=c(vr);return e>=Kt(t._capacity)?n=Qt(n,t.__ownerID,0,e,r,a):i=Qt(i,t.__ownerID,t._level,e,r,a),a.value?t.__ownerID?(t._root=i,t._tail=n,t.__hash=void 0,t.__altered=!0,t):Gt(t._origin,t._capacity,t._level,i,n):t}function Qt(t,e,r,n,i,a){var o=n>>>r&pr,s=t&&o<t.array.length;if(!s&&void 0===i)return t;var u;if(r>0){var l=t&&t.array[o],c=Qt(l,e,r-fr,n,i,a);return c===l?t:(u=Wt(t,e),u.array[o]=c,u)}return s&&t.array[o]===i?t:(h(a),u=Wt(t,e),void 0===i&&o===u.array.length-1?u.array.pop():u.array[o]=i,u)}function Wt(t,e){return e&&t&&e===t.ownerID?t:new Ft(t?t.array.slice():[],e)}function Xt(t,e){if(e>=Kt(t._capacity))return t._tail;if(e<1<<t._level+fr){for(var r=t._root,n=t._level;r&&n>0;)r=r.array[e>>>n&pr],n-=fr;return r}}function qt(t,e,r){void 0!==e&&(e|=0),void 0!==r&&(r|=0);var n=t.__ownerID||new f,i=t._origin,a=t._capacity,o=i+e,s=void 0===r?a:r<0?a+r:i+r;if(o===i&&s===a)return t;if(o>=s)return t.clear();for(var u=t._level,l=t._root,c=0;o+c<0;)l=new Ft(l&&l.array.length?[void 0,l]:[],n),u+=fr,c+=1<<u;c&&(o+=c,i+=c,s+=c,a+=c);for(var h=Kt(a),d=Kt(s);d>=1<<u+fr;)l=new Ft(l&&l.array.length?[l]:[],n),u+=fr;var p=t._tail,m=d<h?Xt(t,s-1):d>h?new Ft([],n):p;if(p&&d>h&&o<a&&p.array.length){l=Wt(l,n);for(var g=l,v=u;v>fr;v-=fr){var y=h>>>v&pr;g=g.array[y]=Wt(g.array[y],n)}g.array[h>>>fr&pr]=p}if(s<a&&(m=m&&m.removeAfter(n,0,s)),o>=d)o-=d,s-=d,u=fr,l=null,m=m&&m.removeBefore(n,0,o);else if(o>i||d<h){for(c=0;l;){var M=o>>>u&pr;if(M!==d>>>u&pr)break;M&&(c+=(1<<u)*M),u-=fr,l=l.array[M]}l&&o>i&&(l=l.removeBefore(n,u,o-c)),l&&d<h&&(l=l.removeAfter(n,u,d-c)),c&&(o-=c,s-=c)}return t.__ownerID?(t.size=s-o,t._origin=o,t._capacity=s,t._level=u,t._root=l,t._tail=m,t.__hash=void 0,t.__altered=!0,t):Gt(o,s,u,l,m)}function Zt(t,e,r){for(var i=[],o=0,s=0;s<r.length;s++){var u=r[s],l=n(u);l.size>o&&(o=l.size),a(u)||(l=l.map(function(t){return H(t)})),i.push(l)}return o>t.size&&(t=t.setSize(o)),Ot(t,e,i)}function Kt(t){return t<dr?0:t-1>>>fr<<fr}function Jt(t){return null===t||void 0===t?ee():$t(t)?t:ee().withMutations(function(e){var n=r(t);ct(n.size),n.forEach(function(t,r){return e.set(r,t)})})}function $t(t){return ft(t)&&l(t)}function te(t,e,r,n){var i=Object.create(Jt.prototype);return i.size=t?t.size:0,i._map=t,i._list=e,i.__ownerID=r,i.__hash=n,i}function ee(){return qr||(qr=te(bt(),Yt()))}function re(t,e,r){var n,i,a=t._map,o=t._list,s=a.get(e),u=void 0!==s;if(r===mr){if(!u)return t;o.size>=dr&&o.size>=2*a.size?(i=o.filter(function(t,e){return void 0!==t&&s!==e}),n=i.toKeyedSeq().map(function(t){return t[0]}).flip().toMap(),t.__ownerID&&(n.__ownerID=i.__ownerID=t.__ownerID)):(n=a.remove(e),i=s===o.size-1?o.pop():o.set(s,void 0))}else if(u){if(r===o.get(s)[1])return t;n=a,i=o.set(s,[e,r])}else n=a.set(e,o.size),i=o.set(o.size,[e,r]);return t.__ownerID?(t.size=n.size,t._map=n,t._list=i,t.__hash=void 0,t):te(n,i)}function ne(t,e){this._iter=t,this._useKeys=e,this.size=t.size}function ie(t){this._iter=t,this.size=t.size}function ae(t){this._iter=t,this.size=t.size}function oe(t){this._iter=t,this.size=t.size}function se(t){var e=De(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=Ne,e.__iterateUncached=function(e,r){var n=this;return t.__iterate(function(t,r){return!1!==e(r,t,n)},r)},e.__iteratorUncached=function(e,r){if(e===wr){var n=t.__iterator(e,r);return new x(function(){var t=n.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t})}return t.__iterator(e===Mr?yr:Mr,r)},e}function ue(t,e,r){var n=De(t);return n.size=t.size,n.has=function(e){return t.has(e)},n.get=function(n,i){var a=t.get(n,mr);return a===mr?i:e.call(r,a,n,t)},n.__iterateUncached=function(n,i){var a=this;return t.__iterate(function(t,i,o){return!1!==n(e.call(r,t,i,o),i,a)},i)},n.__iteratorUncached=function(n,i){var a=t.__iterator(wr,i);return new x(function(){var i=a.next();if(i.done)return i;var o=i.value,s=o[0];return b(n,s,e.call(r,o[1],s,t),i)})},n}function le(t,e){var r=De(t);return r._iter=t,r.size=t.size,r.reverse=function(){return t},t.flip&&(r.flip=function(){var e=se(t);return e.reverse=function(){return t.flip()},e}),r.get=function(r,n){return t.get(e?r:-1-r,n)},r.has=function(r){return t.has(e?r:-1-r)},r.includes=function(e){return t.includes(e)},r.cacheResult=Ne,r.__iterate=function(e,r){var n=this;return t.__iterate(function(t,r){return e(t,r,n)},!r)},r.__iterator=function(e,r){return t.__iterator(e,!r)},r}function ce(t,e,r,n){var i=De(t);return n&&(i.has=function(n){var i=t.get(n,mr);return i!==mr&&!!e.call(r,i,n,t)},i.get=function(n,i){var a=t.get(n,mr);return a!==mr&&e.call(r,a,n,t)?a:i}),i.__iterateUncached=function(i,a){var o=this,s=0;return t.__iterate(function(t,a,u){if(e.call(r,t,a,u))return s++,i(t,n?a:s-1,o)},a),s},i.__iteratorUncached=function(i,a){var o=t.__iterator(wr,a),s=0;return new x(function(){for(;;){var a=o.next();if(a.done)return a;var u=a.value,l=u[0],c=u[1];if(e.call(r,c,l,t))return b(i,n?l:s++,c,a)}})},i}function he(t,e,r){var n=ht().asMutable();return t.__iterate(function(i,a){n.update(e.call(r,i,a,t),0,function(t){return t+1})}),n.asImmutable()}function fe(t,e,r){var n=o(t),i=(l(t)?Jt():ht()).asMutable();t.__iterate(function(a,o){i.update(e.call(r,a,o,t),function(t){return t=t||[],t.push(n?[o,a]:a),t})});var a=Ae(t);return i.map(function(e){return Ee(t,a(e))})}function de(t,e,r,n){var i=t.size;if(void 0!==e&&(e|=0),void 0!==r&&(r===1/0?r=i:r|=0),v(e,r,i))return t;var a=y(e,i),o=M(r,i);if(a!==a||o!==o)return de(t.toSeq().cacheResult(),e,r,n);var s,u=o-a;u===u&&(s=u<0?0:u);var l=De(t);return l.size=0===s?s:t.size&&s||void 0,!n&&P(t)&&s>=0&&(l.get=function(e,r){return e=m(this,e),e>=0&&e<s?t.get(e+a,r):r}),l.__iterateUncached=function(e,r){var i=this;if(0===s)return 0;if(r)return this.cacheResult().__iterate(e,r);var o=0,u=!0,l=0;return t.__iterate(function(t,r){if(!u||!(u=o++<a))return l++,!1!==e(t,n?r:l-1,i)&&l!==s}),l},l.__iteratorUncached=function(e,r){if(0!==s&&r)return this.cacheResult().__iterator(e,r);var i=0!==s&&t.__iterator(e,r),o=0,u=0;return new x(function(){for(;o++<a;)i.next();if(++u>s)return T();var t=i.next();return n||e===Mr?t:e===yr?b(e,u-1,void 0,t):b(e,u-1,t.value[1],t)})},l}function pe(t,e,r){var n=De(t);return n.__iterateUncached=function(n,i){var a=this;if(i)return this.cacheResult().__iterate(n,i);var o=0;return t.__iterate(function(t,i,s){return e.call(r,t,i,s)&&++o&&n(t,i,a)}),o},n.__iteratorUncached=function(n,i){var a=this;if(i)return this.cacheResult().__iterator(n,i);var o=t.__iterator(wr,i),s=!0;return new x(function(){if(!s)return T();var t=o.next();if(t.done)return t;var i=t.value,u=i[0],l=i[1];return e.call(r,l,u,a)?n===wr?t:b(n,u,l,t):(s=!1,T())})},n}function me(t,e,r,n){var i=De(t);return i.__iterateUncached=function(i,a){var o=this;if(a)return this.cacheResult().__iterate(i,a);var s=!0,u=0;return t.__iterate(function(t,a,l){if(!s||!(s=e.call(r,t,a,l)))return u++,i(t,n?a:u-1,o)}),u},i.__iteratorUncached=function(i,a){var o=this;if(a)return this.cacheResult().__iterator(i,a);var s=t.__iterator(wr,a),u=!0,l=0;return new x(function(){var t,a,c;do{if(t=s.next(),t.done)return n||i===Mr?t:i===yr?b(i,l++,void 0,t):b(i,l++,t.value[1],t);var h=t.value;a=h[0],c=h[1],u&&(u=e.call(r,c,a,o))}while(u);return i===wr?t:b(i,a,c,t)})},i}function ge(t,e){var n=o(t),i=[t].concat(e).map(function(t){return a(t)?n&&(t=r(t)):t=n?B(t):V(Array.isArray(t)?t:[t]),t}).filter(function(t){return 0!==t.size});if(0===i.length)return t;if(1===i.length){var u=i[0];if(u===t||n&&o(u)||s(t)&&s(u))return u}var l=new O(i);return n?l=l.toKeyedSeq():s(t)||(l=l.toSetSeq()),l=l.flatten(!0),l.size=i.reduce(function(t,e){if(void 0!==t){var r=e.size;if(void 0!==r)return t+r}},0),l}function ve(t,e,r){var n=De(t);return n.__iterateUncached=function(n,i){function o(t,l){var c=this;t.__iterate(function(t,i){return(!e||l<e)&&a(t)?o(t,l+1):!1===n(t,r?i:s++,c)&&(u=!0),!u},i)}var s=0,u=!1;return o(t,0),s},n.__iteratorUncached=function(n,i){var o=t.__iterator(n,i),s=[],u=0;return new x(function(){for(;o;){var t=o.next();if(!1===t.done){var l=t.value;if(n===wr&&(l=l[1]),e&&!(s.length<e)||!a(l))return r?t:b(n,u++,l,t);s.push(o),o=l.__iterator(n,i)}else o=s.pop()}return T()})},n}function ye(t,e,r){var n=Ae(t);return t.toSeq().map(function(i,a){return n(e.call(r,i,a,t))}).flatten(!0)}function Me(t,e){var r=De(t);return r.size=t.size&&2*t.size-1,r.__iterateUncached=function(r,n){var i=this,a=0;return t.__iterate(function(t,n){return(!a||!1!==r(e,a++,i))&&!1!==r(t,a++,i)},n),a},r.__iteratorUncached=function(r,n){var i,a=t.__iterator(Mr,n),o=0;return new x(function(){return(!i||o%2)&&(i=a.next(),i.done)?i:o%2?b(r,o++,e):b(r,o++,i.value,i)})},r}function we(t,e,r){e||(e=Ie);var n=o(t),i=0,a=t.toSeq().map(function(e,n){return[n,e,i++,r?r(e,n,t):e]}).toArray();return a.sort(function(t,r){return e(t[3],r[3])||t[2]-r[2]}).forEach(n?function(t,e){a[e].length=2}:function(t,e){a[e]=t[1]}),n?I(a):s(t)?L(a):C(a)}function xe(t,e,r){if(e||(e=Ie),r){var n=t.toSeq().map(function(e,n){return[e,r(e,n,t)]}).reduce(function(t,r){return be(e,t[1],r[1])?r:t});return n&&n[0]}return t.reduce(function(t,r){return be(e,t,r)?r:t})}function be(t,e,r){var n=t(r,e);return 0===n&&r!==e&&(void 0===r||null===r||r!==r)||n>0}function Te(t,r,n){var i=De(t);return i.size=new O(n).map(function(t){return t.size}).min(),i.__iterate=function(t,e){for(var r,n=this.__iterator(Mr,e),i=0;!(r=n.next()).done&&!1!==t(r.value,i++,this););return i},i.__iteratorUncached=function(t,i){var a=n.map(function(t){return t=e(t),_(i?t.reverse():t)}),o=0,s=!1;return new x(function(){var e;return s||(e=a.map(function(t){return t.next()}),s=e.some(function(t){return t.done})),s?T():b(t,o++,r.apply(null,e.map(function(t){return t.value})))})},i}function Ee(t,e){return P(t)?e:t.constructor(e)}function Se(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function _e(t){return ct(t.size),p(t)}function Ae(t){return o(t)?r:s(t)?n:i}function De(t){return Object.create((o(t)?I:s(t)?L:C).prototype)}function Ne(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):N.prototype.cacheResult.call(this)}function Ie(t,e){return t>e?1:t<e?-1:0}function Le(t){var r=_(t);if(!r){if(!D(t))throw new TypeError("Expected iterable or array-like: "+t);r=_(e(t))}return r}function Ce(t,e){var r,n=function(a){if(a instanceof n)return a;if(!(this instanceof n))return new n(a);if(!r){r=!0;var o=Object.keys(t);ze(i,o),i.size=o.length,i._name=e,i._keys=o,i._defaultValues=t}this._map=ht(a)},i=n.prototype=Object.create(Zr);return i.constructor=n,n}function Oe(t,e,r){var n=Object.create(Object.getPrototypeOf(t));return n._map=e,n.__ownerID=r,n}function Re(t){return t._name||t.constructor.name||"Record"}function ze(t,e){try{e.forEach(je.bind(void 0,t))}catch(t){}}function je(t,e){Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){J(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}function Pe(t){return null===t||void 0===t?Fe():Ue(t)&&!l(t)?t:Fe().withMutations(function(e){var r=i(t);ct(r.size),r.forEach(function(t){return e.add(t)})})}function Ue(t){return!(!t||!t[Kr])}function Be(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function Ve(t,e){var r=Object.create(Jr);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function Fe(){return $r||($r=Ve(bt()))}function ke(t){return null===t||void 0===t?He():Ge(t)?t:He().withMutations(function(e){var r=i(t);ct(r.size),r.forEach(function(t){return e.add(t)})})}function Ge(t){return Ue(t)&&l(t)}function Ye(t,e){var r=Object.create(tn);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function He(){return en||(en=Ye(ee()))}function Qe(t){return null===t||void 0===t?qe():We(t)?t:qe().unshiftAll(t)}function We(t){return!(!t||!t[rn])}function Xe(t,e,r,n){var i=Object.create(nn);return i.size=t,i._head=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function qe(){return an||(an=Xe(0))}function Ze(t,e){var r=function(r){t.prototype[r]=e[r]};return Object.keys(e).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(r),t}function Ke(t,e){return e}function Je(t,e){return[e,t]}function $e(t){return function(){return!t.apply(this,arguments)}}function tr(t){return function(){return-t.apply(this,arguments)}}function er(t){return"string"==typeof t?JSON.stringify(t):String(t)}function rr(){return d(arguments)}function nr(t,e){return t<e?1:t>e?-1:0}function ir(t){if(t.size===1/0)return 0;var e=l(t),r=o(t),n=e?1:0;return ar(t.__iterate(r?e?function(t,e){n=31*n+or(at(t),at(e))|0}:function(t,e){n=n+or(at(t),at(e))|0}:e?function(t){n=31*n+at(t)|0}:function(t){n=n+at(t)|0}),n)}function ar(t,e){return e=Nr(e,3432918353),e=Nr(e<<15|e>>>-15,461845907),e=Nr(e<<13|e>>>-13,5),e=(e+3864292196|0)^t,e=Nr(e^e>>>16,2246822507),e=Nr(e^e>>>13,3266489909),e=it(e^e>>>16)}function or(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}var sr=Array.prototype.slice;t(r,e),t(n,e),t(i,e),e.isIterable=a,e.isKeyed=o,e.isIndexed=s,e.isAssociative=u,e.isOrdered=l,e.Keyed=r,e.Indexed=n,e.Set=i;var ur="@@__IMMUTABLE_ITERABLE__@@",lr="@@__IMMUTABLE_KEYED__@@",cr="@@__IMMUTABLE_INDEXED__@@",hr="@@__IMMUTABLE_ORDERED__@@",fr=5,dr=1<<fr,pr=dr-1,mr={},gr={value:!1},vr={value:!1},yr=0,Mr=1,wr=2,xr="function"==typeof Symbol&&Symbol.iterator,br="@@iterator",Tr=xr||br;x.prototype.toString=function(){return"[Iterator]"},x.KEYS=yr,x.VALUES=Mr,x.ENTRIES=wr,x.prototype.inspect=x.prototype.toSource=function(){return this.toString()},x.prototype[Tr]=function(){return this},t(N,e),N.of=function(){return N(arguments)},N.prototype.toSeq=function(){return this},N.prototype.toString=function(){return this.__toString("Seq {","}")},N.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},N.prototype.__iterate=function(t,e){return G(this,t,e,!0)},N.prototype.__iterator=function(t,e){return Y(this,t,e,!0)},t(I,N),I.prototype.toKeyedSeq=function(){return this},t(L,N),L.of=function(){return L(arguments)},L.prototype.toIndexedSeq=function(){return this},L.prototype.toString=function(){return this.__toString("Seq [","]")},L.prototype.__iterate=function(t,e){return G(this,t,e,!1)},L.prototype.__iterator=function(t,e){return Y(this,t,e,!1)},t(C,N),C.of=function(){return C(arguments)},C.prototype.toSetSeq=function(){return this},N.isSeq=P,N.Keyed=I,N.Set=C,N.Indexed=L;var Er="@@__IMMUTABLE_SEQ__@@";N.prototype[Er]=!0,t(O,L),O.prototype.get=function(t,e){return this.has(t)?this._array[m(this,t)]:e},O.prototype.__iterate=function(t,e){for(var r=this._array,n=r.length-1,i=0;i<=n;i++)if(!1===t(r[e?n-i:i],i,this))return i+1;return i},O.prototype.__iterator=function(t,e){var r=this._array,n=r.length-1,i=0;return new x(function(){return i>n?T():b(t,i,r[e?n-i++:i++])})},t(R,I),R.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},R.prototype.has=function(t){return this._object.hasOwnProperty(t)},R.prototype.__iterate=function(t,e){for(var r=this._object,n=this._keys,i=n.length-1,a=0;a<=i;a++){var o=n[e?i-a:a];if(!1===t(r[o],o,this))return a+1}return a},R.prototype.__iterator=function(t,e){var r=this._object,n=this._keys,i=n.length-1,a=0;return new x(function(){var o=n[e?i-a:a];return a++>i?T():b(t,o,r[o])})},R.prototype[hr]=!0,t(z,L),z.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var r=this._iterable,n=_(r),i=0;if(S(n))for(var a;!(a=n.next()).done&&!1!==t(a.value,i++,this););return i},z.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var r=this._iterable,n=_(r);if(!S(n))return new x(T);var i=0;return new x(function(){var e=n.next();return e.done?e:b(t,i++,e.value)})},t(j,L),j.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);for(var r=this._iterator,n=this._iteratorCache,i=0;i<n.length;)if(!1===t(n[i],i++,this))return i;for(var a;!(a=r.next()).done;){var o=a.value;if(n[i]=o,!1===t(o,i++,this))break}return i},j.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var r=this._iterator,n=this._iteratorCache,i=0;return new x(function(){if(i>=n.length){var e=r.next();if(e.done)return e;n[i]=e.value}return b(t,i,n[i++])})};var Sr;t(K,L),K.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},K.prototype.get=function(t,e){return this.has(t)?this._value:e},K.prototype.includes=function(t){return q(this._value,t)},K.prototype.slice=function(t,e){var r=this.size;return v(t,e,r)?this:new K(this._value,M(e,r)-y(t,r))},K.prototype.reverse=function(){return this},K.prototype.indexOf=function(t){return q(this._value,t)?0:-1},K.prototype.lastIndexOf=function(t){return q(this._value,t)?this.size:-1},K.prototype.__iterate=function(t,e){for(var r=0;r<this.size;r++)if(!1===t(this._value,r,this))return r+1;return r},K.prototype.__iterator=function(t,e){var r=this,n=0;return new x(function(){return n<r.size?b(t,n++,r._value):T()})},K.prototype.equals=function(t){return t instanceof K?q(this._value,t._value):Z(t)};var _r;t($,L),$.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},$.prototype.get=function(t,e){return this.has(t)?this._start+m(this,t)*this._step:e},$.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},$.prototype.slice=function(t,e){return v(t,e,this.size)?this:(t=y(t,this.size),e=M(e,this.size),e<=t?new $(0,0):new $(this.get(t,this._end),this.get(e,this._end),this._step))},$.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step==0){var r=e/this._step;if(r>=0&&r<this.size)return r}return-1},$.prototype.lastIndexOf=function(t){return this.indexOf(t)},$.prototype.__iterate=function(t,e){for(var r=this.size-1,n=this._step,i=e?this._start+r*n:this._start,a=0;a<=r;a++){if(!1===t(i,a,this))return a+1;i+=e?-n:n}return a},$.prototype.__iterator=function(t,e){var r=this.size-1,n=this._step,i=e?this._start+r*n:this._start,a=0;return new x(function(){var o=i;return i+=e?-n:n,a>r?T():b(t,a++,o)})},$.prototype.equals=function(t){return t instanceof $?this._start===t._start&&this._end===t._end&&this._step===t._step:Z(this,t)};var Ar;t(tt,e),t(et,tt),t(rt,tt),t(nt,tt),tt.Keyed=et,tt.Indexed=rt,tt.Set=nt;var Dr,Nr="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){t|=0,e|=0;var r=65535&t,n=65535&e;return r*n+((t>>>16)*n+r*(e>>>16)<<16>>>0)|0},Ir=Object.isExtensible,Lr=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}(),Cr="function"==typeof WeakMap;Cr&&(Dr=new WeakMap);var Or=0,Rr="__immutablehash__";"function"==typeof Symbol&&(Rr=Symbol(Rr));var zr=16,jr=255,Pr=0,Ur={};t(ht,et),ht.of=function(){var t=sr.call(arguments,0);return bt().withMutations(function(e){for(var r=0;r<t.length;r+=2){if(r+1>=t.length)throw new Error("Missing value for key: "+t[r]);e.set(t[r],t[r+1])}})},ht.prototype.toString=function(){return this.__toString("Map {","}")},ht.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},ht.prototype.set=function(t,e){return Tt(this,t,e)},ht.prototype.setIn=function(t,e){return this.updateIn(t,mr,function(){return e})},ht.prototype.remove=function(t){return Tt(this,t,mr)},ht.prototype.deleteIn=function(t){return this.updateIn(t,function(){return mr})},ht.prototype.update=function(t,e,r){return 1===arguments.length?t(this):this.updateIn([t],e,r)},ht.prototype.updateIn=function(t,e,r){r||(r=e,e=void 0);var n=Rt(this,Le(t),e,r);return n===mr?void 0:n},ht.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):bt()},ht.prototype.merge=function(){return It(this,void 0,arguments)},ht.prototype.mergeWith=function(t){return It(this,t,sr.call(arguments,1))},ht.prototype.mergeIn=function(t){var e=sr.call(arguments,1);return this.updateIn(t,bt(),function(t){return"function"==typeof t.merge?t.merge.apply(t,e):e[e.length-1]})},ht.prototype.mergeDeep=function(){return It(this,Lt,arguments)},ht.prototype.mergeDeepWith=function(t){var e=sr.call(arguments,1);return It(this,Ct(t),e)},ht.prototype.mergeDeepIn=function(t){var e=sr.call(arguments,1);return this.updateIn(t,bt(),function(t){return"function"==typeof t.mergeDeep?t.mergeDeep.apply(t,e):e[e.length-1]})},ht.prototype.sort=function(t){return Jt(we(this,t))},ht.prototype.sortBy=function(t,e){return Jt(we(this,e,t))},ht.prototype.withMutations=function(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this},ht.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new f)},ht.prototype.asImmutable=function(){return this.__ensureOwner()},ht.prototype.wasAltered=function(){return this.__altered},ht.prototype.__iterator=function(t,e){return new yt(this,t,e)},ht.prototype.__iterate=function(t,e){var r=this,n=0;return this._root&&this._root.iterate(function(e){return n++,t(e[1],e[0],r)},e),n},ht.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?xt(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},ht.isMap=ft;var Br="@@__IMMUTABLE_MAP__@@",Vr=ht.prototype;Vr[Br]=!0,Vr.delete=Vr.remove,Vr.removeIn=Vr.deleteIn,dt.prototype.get=function(t,e,r,n){for(var i=this.entries,a=0,o=i.length;a<o;a++)if(q(r,i[a][0]))return i[a][1];return n},dt.prototype.update=function(t,e,r,n,i,a,o){for(var s=i===mr,u=this.entries,l=0,c=u.length;l<c&&!q(n,u[l][0]);l++);var f=l<c;if(f?u[l][1]===i:s)return this;if(h(o),(s||!f)&&h(a),!s||1!==u.length){if(!f&&!s&&u.length>=kr)return At(t,u,n,i);var p=t&&t===this.ownerID,m=p?u:d(u);return f?s?l===c-1?m.pop():m[l]=m.pop():m[l]=[n,i]:m.push([n,i]),p?(this.entries=m,this):new dt(t,m)}},pt.prototype.get=function(t,e,r,n){void 0===e&&(e=at(r));var i=1<<((0===t?e:e>>>t)&pr),a=this.bitmap;return 0==(a&i)?n:this.nodes[zt(a&i-1)].get(t+fr,e,r,n)},pt.prototype.update=function(t,e,r,n,i,a,o){void 0===r&&(r=at(n));var s=(0===e?r:r>>>e)&pr,u=1<<s,l=this.bitmap,c=0!=(l&u);if(!c&&i===mr)return this;var h=zt(l&u-1),f=this.nodes,d=c?f[h]:void 0,p=Et(d,t,e+fr,r,n,i,a,o);if(p===d)return this;if(!c&&p&&f.length>=Gr)return Nt(t,f,l,s,p);if(c&&!p&&2===f.length&&St(f[1^h]))return f[1^h];if(c&&p&&1===f.length&&St(p))return p;var m=t&&t===this.ownerID,g=c?p?l:l^u:l|u,v=c?p?jt(f,h,p,m):Ut(f,h,m):Pt(f,h,p,m);return m?(this.bitmap=g,this.nodes=v,this):new pt(t,g,v)},mt.prototype.get=function(t,e,r,n){void 0===e&&(e=at(r));var i=(0===t?e:e>>>t)&pr,a=this.nodes[i];return a?a.get(t+fr,e,r,n):n},mt.prototype.update=function(t,e,r,n,i,a,o){void 0===r&&(r=at(n));var s=(0===e?r:r>>>e)&pr,u=i===mr,l=this.nodes,c=l[s];if(u&&!c)return this;var h=Et(c,t,e+fr,r,n,i,a,o);if(h===c)return this;var f=this.count;if(c){if(!h&&--f<Yr)return Dt(t,l,f,s)}else f++;var d=t&&t===this.ownerID,p=jt(l,s,h,d);return d?(this.count=f,this.nodes=p,this):new mt(t,f,p)},gt.prototype.get=function(t,e,r,n){for(var i=this.entries,a=0,o=i.length;a<o;a++)if(q(r,i[a][0]))return i[a][1];return n},gt.prototype.update=function(t,e,r,n,i,a,o){void 0===r&&(r=at(n));var s=i===mr;if(r!==this.keyHash)return s?this:(h(o),h(a),_t(this,t,e,r,[n,i]));for(var u=this.entries,l=0,c=u.length;l<c&&!q(n,u[l][0]);l++);var f=l<c;if(f?u[l][1]===i:s)return this;if(h(o),(s||!f)&&h(a),s&&2===c)return new vt(t,this.keyHash,u[1^l]);var p=t&&t===this.ownerID,m=p?u:d(u);return f?s?l===c-1?m.pop():m[l]=m.pop():m[l]=[n,i]:m.push([n,i]),p?(this.entries=m,this):new gt(t,this.keyHash,m)},vt.prototype.get=function(t,e,r,n){return q(r,this.entry[0])?this.entry[1]:n},vt.prototype.update=function(t,e,r,n,i,a,o){var s=i===mr,u=q(n,this.entry[0]);return(u?i===this.entry[1]:s)?this:(h(o),s?void h(a):u?t&&t===this.ownerID?(this.entry[1]=i,this):new vt(t,this.keyHash,[n,i]):(h(a),_t(this,t,e,at(n),[n,i])))},dt.prototype.iterate=gt.prototype.iterate=function(t,e){for(var r=this.entries,n=0,i=r.length-1;n<=i;n++)if(!1===t(r[e?i-n:n]))return!1},pt.prototype.iterate=mt.prototype.iterate=function(t,e){for(var r=this.nodes,n=0,i=r.length-1;n<=i;n++){var a=r[e?i-n:n];if(a&&!1===a.iterate(t,e))return!1}},vt.prototype.iterate=function(t,e){return t(this.entry)},t(yt,x),yt.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var r,n=e.node,i=e.index++;if(n.entry){if(0===i)return Mt(t,n.entry)}else if(n.entries){if(r=n.entries.length-1,i<=r)return Mt(t,n.entries[this._reverse?r-i:i])}else if(r=n.nodes.length-1,i<=r){var a=n.nodes[this._reverse?r-i:i];if(a){if(a.entry)return Mt(t,a.entry);e=this._stack=wt(a,e)}continue}e=this._stack=this._stack.__prev}return T()};var Fr,kr=dr/4,Gr=dr/2,Yr=dr/4;t(Bt,rt),Bt.of=function(){return this(arguments)},Bt.prototype.toString=function(){return this.__toString("List [","]")},Bt.prototype.get=function(t,e){if((t=m(this,t))>=0&&t<this.size){t+=this._origin;var r=Xt(this,t);return r&&r.array[t&pr]}return e},Bt.prototype.set=function(t,e){return Ht(this,t,e)},Bt.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},Bt.prototype.insert=function(t,e){return this.splice(t,0,e)},Bt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=fr,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Yt()},Bt.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations(function(r){qt(r,0,e+t.length);for(var n=0;n<t.length;n++)r.set(e+n,t[n])})},Bt.prototype.pop=function(){return qt(this,0,-1)},Bt.prototype.unshift=function(){var t=arguments;return this.withMutations(function(e){qt(e,-t.length);for(var r=0;r<t.length;r++)e.set(r,t[r])})},Bt.prototype.shift=function(){return qt(this,1)},Bt.prototype.merge=function(){return Zt(this,void 0,arguments)},Bt.prototype.mergeWith=function(t){return Zt(this,t,sr.call(arguments,1))},Bt.prototype.mergeDeep=function(){return Zt(this,Lt,arguments)},Bt.prototype.mergeDeepWith=function(t){var e=sr.call(arguments,1);return Zt(this,Ct(t),e)},Bt.prototype.setSize=function(t){return qt(this,0,t)},Bt.prototype.slice=function(t,e){var r=this.size;return v(t,e,r)?this:qt(this,y(t,r),M(e,r))},Bt.prototype.__iterator=function(t,e){var r=0,n=kt(this,e);return new x(function(){var e=n();return e===Xr?T():b(t,r++,e)})},Bt.prototype.__iterate=function(t,e){for(var r,n=0,i=kt(this,e);(r=i())!==Xr&&!1!==t(r,n++,this););return n},Bt.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Gt(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)},Bt.isList=Vt;var Hr="@@__IMMUTABLE_LIST__@@",Qr=Bt.prototype;Qr[Hr]=!0,Qr.delete=Qr.remove,Qr.setIn=Vr.setIn,Qr.deleteIn=Qr.removeIn=Vr.removeIn,Qr.update=Vr.update,Qr.updateIn=Vr.updateIn,Qr.mergeIn=Vr.mergeIn,Qr.mergeDeepIn=Vr.mergeDeepIn,Qr.withMutations=Vr.withMutations,Qr.asMutable=Vr.asMutable,Qr.asImmutable=Vr.asImmutable,Qr.wasAltered=Vr.wasAltered,Ft.prototype.removeBefore=function(t,e,r){if(r===e?1<<e:0===this.array.length)return this;var n=r>>>e&pr;if(n>=this.array.length)return new Ft([],t);var i,a=0===n;if(e>0){var o=this.array[n];if((i=o&&o.removeBefore(t,e-fr,r))===o&&a)return this}if(a&&!i)return this;var s=Wt(this,t);if(!a)for(var u=0;u<n;u++)s.array[u]=void 0;return i&&(s.array[n]=i),s},Ft.prototype.removeAfter=function(t,e,r){if(r===(e?1<<e:0)||0===this.array.length)return this;var n=r-1>>>e&pr;if(n>=this.array.length)return this;var i;if(e>0){var a=this.array[n];if((i=a&&a.removeAfter(t,e-fr,r))===a&&n===this.array.length-1)return this}var o=Wt(this,t);return o.array.splice(n+1),i&&(o.array[n]=i),o};var Wr,Xr={};t(Jt,ht),Jt.of=function(){return this(arguments)},Jt.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Jt.prototype.get=function(t,e){var r=this._map.get(t);return void 0!==r?this._list.get(r)[1]:e},Jt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):ee()},Jt.prototype.set=function(t,e){return re(this,t,e)},Jt.prototype.remove=function(t){return re(this,t,mr)},Jt.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Jt.prototype.__iterate=function(t,e){var r=this;return this._list.__iterate(function(e){return e&&t(e[1],e[0],r)},e)},Jt.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},Jt.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),r=this._list.__ensureOwner(t);return t?te(e,r,t,this.__hash):(this.__ownerID=t,this._map=e,this._list=r,this)},Jt.isOrderedMap=$t,Jt.prototype[hr]=!0,Jt.prototype.delete=Jt.prototype.remove;var qr;t(ne,I),ne.prototype.get=function(t,e){return this._iter.get(t,e)},ne.prototype.has=function(t){return this._iter.has(t)},ne.prototype.valueSeq=function(){return this._iter.valueSeq()},ne.prototype.reverse=function(){var t=this,e=le(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},ne.prototype.map=function(t,e){var r=this,n=ue(this,t,e);return this._useKeys||(n.valueSeq=function(){return r._iter.toSeq().map(t,e)}),n},ne.prototype.__iterate=function(t,e){var r,n=this;return this._iter.__iterate(this._useKeys?function(e,r){return t(e,r,n)}:(r=e?_e(this):0,function(i){return t(i,e?--r:r++,n)}),e)},ne.prototype.__iterator=function(t,e){if(this._useKeys)return this._iter.__iterator(t,e);var r=this._iter.__iterator(Mr,e),n=e?_e(this):0;return new x(function(){var i=r.next();return i.done?i:b(t,e?--n:n++,i.value,i)})},ne.prototype[hr]=!0,t(ie,L),ie.prototype.includes=function(t){return this._iter.includes(t)},ie.prototype.__iterate=function(t,e){var r=this,n=0;return this._iter.__iterate(function(e){return t(e,n++,r)},e)},ie.prototype.__iterator=function(t,e){var r=this._iter.__iterator(Mr,e),n=0;return new x(function(){var e=r.next();return e.done?e:b(t,n++,e.value,e)})},t(ae,C),ae.prototype.has=function(t){return this._iter.includes(t)},ae.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate(function(e){return t(e,e,r)},e)},ae.prototype.__iterator=function(t,e){var r=this._iter.__iterator(Mr,e);return new x(function(){var e=r.next();return e.done?e:b(t,e.value,e.value,e)})},t(oe,I),oe.prototype.entrySeq=function(){return this._iter.toSeq()},oe.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate(function(e){if(e){Se(e);var n=a(e);return t(n?e.get(1):e[1],n?e.get(0):e[0],r)}},e)},oe.prototype.__iterator=function(t,e){var r=this._iter.__iterator(Mr,e);return new x(function(){for(;;){var e=r.next();if(e.done)return e;var n=e.value;if(n){Se(n);var i=a(n);return b(t,i?n.get(0):n[0],i?n.get(1):n[1],e)}}})},ie.prototype.cacheResult=ne.prototype.cacheResult=ae.prototype.cacheResult=oe.prototype.cacheResult=Ne,t(Ce,et),Ce.prototype.toString=function(){return this.__toString(Re(this)+" {","}")},Ce.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)},Ce.prototype.get=function(t,e){if(!this.has(t))return e;var r=this._defaultValues[t];return this._map?this._map.get(t,r):r},Ce.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var t=this.constructor;return t._empty||(t._empty=Oe(this,bt()))},Ce.prototype.set=function(t,e){if(!this.has(t))throw new Error('Cannot set unknown key "'+t+'" on '+Re(this));if(this._map&&!this._map.has(t)){if(e===this._defaultValues[t])return this}var r=this._map&&this._map.set(t,e);return this.__ownerID||r===this._map?this:Oe(this,r)},Ce.prototype.remove=function(t){if(!this.has(t))return this;var e=this._map&&this._map.remove(t);return this.__ownerID||e===this._map?this:Oe(this,e)},Ce.prototype.wasAltered=function(){return this._map.wasAltered()},Ce.prototype.__iterator=function(t,e){var n=this;return r(this._defaultValues).map(function(t,e){return n.get(e)}).__iterator(t,e)},Ce.prototype.__iterate=function(t,e){var n=this;return r(this._defaultValues).map(function(t,e){return n.get(e)}).__iterate(t,e)},Ce.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map&&this._map.__ensureOwner(t);return t?Oe(this,e,t):(this.__ownerID=t,this._map=e,this)};var Zr=Ce.prototype;Zr.delete=Zr.remove,Zr.deleteIn=Zr.removeIn=Vr.removeIn,Zr.merge=Vr.merge,Zr.mergeWith=Vr.mergeWith,Zr.mergeIn=Vr.mergeIn,Zr.mergeDeep=Vr.mergeDeep,Zr.mergeDeepWith=Vr.mergeDeepWith,Zr.mergeDeepIn=Vr.mergeDeepIn,Zr.setIn=Vr.setIn,Zr.update=Vr.update,Zr.updateIn=Vr.updateIn,Zr.withMutations=Vr.withMutations,Zr.asMutable=Vr.asMutable,Zr.asImmutable=Vr.asImmutable,t(Pe,nt),Pe.of=function(){return this(arguments)},Pe.fromKeys=function(t){return this(r(t).keySeq())},Pe.prototype.toString=function(){return this.__toString("Set {","}")},Pe.prototype.has=function(t){return this._map.has(t)},Pe.prototype.add=function(t){return Be(this,this._map.set(t,!0))},Pe.prototype.remove=function(t){return Be(this,this._map.remove(t))},Pe.prototype.clear=function(){return Be(this,this._map.clear())},Pe.prototype.union=function(){var t=sr.call(arguments,0);return t=t.filter(function(t){return 0!==t.size}),0===t.length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations(function(e){for(var r=0;r<t.length;r++)i(t[r]).forEach(function(t){return e.add(t)})}):this.constructor(t[0])},Pe.prototype.intersect=function(){var t=sr.call(arguments,0);if(0===t.length)return this;t=t.map(function(t){return i(t)});var e=this;return this.withMutations(function(r){e.forEach(function(e){t.every(function(t){return t.includes(e)})||r.remove(e)})})},Pe.prototype.subtract=function(){var t=sr.call(arguments,0);if(0===t.length)return this;t=t.map(function(t){return i(t)});var e=this;return this.withMutations(function(r){e.forEach(function(e){t.some(function(t){return t.includes(e)})&&r.remove(e)})})},Pe.prototype.merge=function(){return this.union.apply(this,arguments)},Pe.prototype.mergeWith=function(t){var e=sr.call(arguments,1);return this.union.apply(this,e)},Pe.prototype.sort=function(t){return ke(we(this,t))},Pe.prototype.sortBy=function(t,e){return ke(we(this,e,t))},Pe.prototype.wasAltered=function(){return this._map.wasAltered()},Pe.prototype.__iterate=function(t,e){var r=this;return this._map.__iterate(function(e,n){return t(n,n,r)},e)},Pe.prototype.__iterator=function(t,e){return this._map.map(function(t,e){return e}).__iterator(t,e)},Pe.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):(this.__ownerID=t,this._map=e,this)},Pe.isSet=Ue;var Kr="@@__IMMUTABLE_SET__@@",Jr=Pe.prototype;Jr[Kr]=!0,Jr.delete=Jr.remove,Jr.mergeDeep=Jr.merge,Jr.mergeDeepWith=Jr.mergeWith,Jr.withMutations=Vr.withMutations,Jr.asMutable=Vr.asMutable,Jr.asImmutable=Vr.asImmutable,Jr.__empty=Fe,Jr.__make=Ve;var $r;t(ke,Pe),ke.of=function(){return this(arguments)},ke.fromKeys=function(t){return this(r(t).keySeq())},ke.prototype.toString=function(){return this.__toString("OrderedSet {","}")},ke.isOrderedSet=Ge;var tn=ke.prototype;tn[hr]=!0,tn.__empty=He,tn.__make=Ye;var en;t(Qe,rt),Qe.of=function(){return this(arguments)},Qe.prototype.toString=function(){return this.__toString("Stack [","]")},Qe.prototype.get=function(t,e){var r=this._head;for(t=m(this,t);r&&t--;)r=r.next;return r?r.value:e},Qe.prototype.peek=function(){return this._head&&this._head.value},Qe.prototype.push=function(){if(0===arguments.length)return this;for(var t=this.size+arguments.length,e=this._head,r=arguments.length-1;r>=0;r--)e={value:arguments[r],next:e};return this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):Xe(t,e)},Qe.prototype.pushAll=function(t){if(t=n(t),0===t.size)return this;ct(t.size);var e=this.size,r=this._head;return t.reverse().forEach(function(t){e++,r={value:t,next:r}}),this.__ownerID?(this.size=e,this._head=r,this.__hash=void 0,this.__altered=!0,this):Xe(e,r)},Qe.prototype.pop=function(){return this.slice(1)},Qe.prototype.unshift=function(){return this.push.apply(this,arguments)},Qe.prototype.unshiftAll=function(t){return this.pushAll(t)},Qe.prototype.shift=function(){return this.pop.apply(this,arguments)},Qe.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):qe()},Qe.prototype.slice=function(t,e){if(v(t,e,this.size))return this;var r=y(t,this.size);if(M(e,this.size)!==this.size)return rt.prototype.slice.call(this,t,e);for(var n=this.size-r,i=this._head;r--;)i=i.next;return this.__ownerID?(this.size=n,this._head=i,this.__hash=void 0,this.__altered=!0,this):Xe(n,i)},Qe.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Xe(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},Qe.prototype.__iterate=function(t,e){if(e)return this.reverse().__iterate(t);for(var r=0,n=this._head;n&&!1!==t(n.value,r++,this);)n=n.next;return r},Qe.prototype.__iterator=function(t,e){if(e)return this.reverse().__iterator(t);var r=0,n=this._head;return new x(function(){if(n){var e=n.value;return n=n.next,b(t,r++,e)}return T()})},Qe.isStack=We;var rn="@@__IMMUTABLE_STACK__@@",nn=Qe.prototype;nn[rn]=!0,nn.withMutations=Vr.withMutations,nn.asMutable=Vr.asMutable,nn.asImmutable=Vr.asImmutable,nn.wasAltered=Vr.wasAltered;var an;e.Iterator=x,Ze(e,{toArray:function(){ct(this.size);var t=new Array(this.size||0);return this.valueSeq().__iterate(function(e,r){t[r]=e}),t},toIndexedSeq:function(){return new ie(this)},toJS:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJS?t.toJS():t}).__toJS()},toJSON:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJSON?t.toJSON():t}).__toJS()},toKeyedSeq:function(){return new ne(this,!0)},toMap:function(){return ht(this.toKeyedSeq())},toObject:function(){ct(this.size);var t={};return this.__iterate(function(e,r){t[r]=e}),t},toOrderedMap:function(){return Jt(this.toKeyedSeq())},toOrderedSet:function(){return ke(o(this)?this.valueSeq():this)},toSet:function(){return Pe(o(this)?this.valueSeq():this)},toSetSeq:function(){return new ae(this)},toSeq:function(){return s(this)?this.toIndexedSeq():o(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Qe(o(this)?this.valueSeq():this)},toList:function(){return Bt(o(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){return Ee(this,ge(this,sr.call(arguments,0)))},includes:function(t){return this.some(function(e){return q(e,t)})},entries:function(){return this.__iterator(wr)},every:function(t,e){ct(this.size);var r=!0;return this.__iterate(function(n,i,a){if(!t.call(e,n,i,a))return r=!1,!1}),r},filter:function(t,e){return Ee(this,ce(this,t,e,!0))},find:function(t,e,r){var n=this.findEntry(t,e);return n?n[1]:r},forEach:function(t,e){return ct(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){ct(this.size),t=void 0!==t?""+t:",";var e="",r=!0;return this.__iterate(function(n){r?r=!1:e+=t,e+=null!==n&&void 0!==n?n.toString():""}),e},keys:function(){return this.__iterator(yr)},map:function(t,e){return Ee(this,ue(this,t,e))},reduce:function(t,e,r){ct(this.size);var n,i;return arguments.length<2?i=!0:n=e,this.__iterate(function(e,a,o){i?(i=!1,n=e):n=t.call(r,n,e,a,o)}),n},reduceRight:function(t,e,r){var n=this.toKeyedSeq().reverse();return n.reduce.apply(n,arguments)},reverse:function(){return Ee(this,le(this,!0))},slice:function(t,e){return Ee(this,de(this,t,e,!0))},some:function(t,e){return!this.every($e(t),e)},sort:function(t){return Ee(this,we(this,t))},values:function(){return this.__iterator(Mr)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(t,e){return p(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return he(this,t,e)},equals:function(t){return Z(this,t)},entrySeq:function(){var t=this;if(t._cache)return new O(t._cache);var e=t.toSeq().map(Je).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter($e(t),e)},findEntry:function(t,e,r){var n=r;return this.__iterate(function(r,i,a){if(t.call(e,r,i,a))return n=[i,r],!1}),n},findKey:function(t,e){var r=this.findEntry(t,e);return r&&r[0]},findLast:function(t,e,r){return this.toKeyedSeq().reverse().find(t,e,r)},findLastEntry:function(t,e,r){return this.toKeyedSeq().reverse().findEntry(t,e,r)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(){return this.find(g)},flatMap:function(t,e){return Ee(this,ye(this,t,e))},flatten:function(t){return Ee(this,ve(this,t,!0))},fromEntrySeq:function(){return new oe(this)},get:function(t,e){return this.find(function(e,r){return q(r,t)},void 0,e)},getIn:function(t,e){for(var r,n=this,i=Le(t);!(r=i.next()).done;){var a=r.value;if((n=n&&n.get?n.get(a,mr):mr)===mr)return e}return n},groupBy:function(t,e){return fe(this,t,e)},has:function(t){return this.get(t,mr)!==mr},hasIn:function(t){return this.getIn(t,mr)!==mr},isSubset:function(t){return t="function"==typeof t.includes?t:e(t),this.every(function(e){return t.includes(e)})},isSuperset:function(t){return t="function"==typeof t.isSubset?t:e(t),t.isSubset(this)},keyOf:function(t){return this.findKey(function(e){return q(e,t)})},keySeq:function(){return this.toSeq().map(Ke).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return xe(this,t)},maxBy:function(t,e){return xe(this,e,t)},min:function(t){return xe(this,t?tr(t):nr)},minBy:function(t,e){return xe(this,e?tr(e):nr,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return Ee(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,e){return Ee(this,me(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile($e(t),e)},sortBy:function(t,e){return Ee(this,we(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return Ee(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,e){return Ee(this,pe(this,t,e))},takeUntil:function(t,e){return this.takeWhile($e(t),e)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=ir(this))}});var on=e.prototype;on[ur]=!0,on[Tr]=on.values,on.__toJS=on.toArray,on.__toStringMapper=er,on.inspect=on.toSource=function(){return this.toString()},on.chain=on.flatMap,on.contains=on.includes,Ze(r,{flip:function(){return Ee(this,se(this))},mapEntries:function(t,e){var r=this,n=0;return Ee(this,this.toSeq().map(function(i,a){return t.call(e,[a,i],n++,r)}).fromEntrySeq())},mapKeys:function(t,e){var r=this;return Ee(this,this.toSeq().flip().map(function(n,i){return t.call(e,n,i,r)}).flip())}});var sn=r.prototype;return sn[lr]=!0,sn[Tr]=on.entries,sn.__toJS=on.toObject,sn.__toStringMapper=function(t,e){return JSON.stringify(e)+": "+er(t)},Ze(n,{toKeyedSeq:function(){return new ne(this,!1)},filter:function(t,e){return Ee(this,ce(this,t,e,!1))},findIndex:function(t,e){var r=this.findEntry(t,e);return r?r[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return Ee(this,le(this,!1))},slice:function(t,e){return Ee(this,de(this,t,e,!1))},splice:function(t,e){var r=arguments.length;if(e=Math.max(0|e,0),0===r||2===r&&!e)return this;t=y(t,t<0?this.count():this.size);var n=this.slice(0,t);return Ee(this,1===r?n:n.concat(d(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var r=this.findLastEntry(t,e);return r?r[0]:-1},first:function(){return this.get(0)},flatten:function(t){return Ee(this,ve(this,t,!1))},get:function(t,e){return t=m(this,t),t<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find(function(e,r){return r===t},void 0,e)},has:function(t){return(t=m(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return Ee(this,Me(this,t))},interleave:function(){var t=[this].concat(d(arguments)),e=Te(this.toSeq(),L.of,t),r=e.flatten(!0);return e.size&&(r.size=e.size*t.length),Ee(this,r)},keySeq:function(){return $(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(t,e){return Ee(this,me(this,t,e,!1))},zip:function(){return Ee(this,Te(this,rr,[this].concat(d(arguments))))},zipWith:function(t){var e=d(arguments);return e[0]=this,Ee(this,Te(this,t,e))}}),n.prototype[cr]=!0,n.prototype[hr]=!0,Ze(i,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),i.prototype.has=on.includes,i.prototype.contains=i.prototype.includes,Ze(I,r.prototype),Ze(L,n.prototype),Ze(C,i.prototype),Ze(et,r.prototype),Ze(rt,n.prototype),Ze(nt,i.prototype),{Iterable:e,Seq:N,Collection:tt,Map:ht,OrderedMap:Jt,List:Bt,Stack:Qe,Set:Pe,OrderedSet:ke,Record:Ce,Range:$,Repeat:K,is:q,fromJS:H}})},function(t,e,r){t.exports={default:r(409),__esModule:!0}},function(t,e){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e,r){var n=r(82),i=Math.min;t.exports=function(t){return t>0?i(n(t),9007199254740991):0}},function(t,e,r){"use strict";var n=r(403),i=r.n(n),a=r(191),o={Empty:i()({Array:i()(new Array(0)),Float64Array:new Float64Array(0),Float32Array:new Float32Array(0),Uint32Array:new Uint32Array(0),Int32Array:new Int32Array(0)}),rangeCopy:function(t,e,r,n,i){for(var a=0;a!==i;++a)r[n+a]=t[e+a];return r},rangeEquals:function(t,e,r,n,i){for(var a=0;a!==i;++a)if(t[e+a]!==r[n+a])return!1;return!0},stridedCopy:function(t,e,r,n,i,a,o,s){for(var u=0;u!==s;++u)for(var l=0;l!==o;++l)n[i+u*a+l]=t[e+u*r+l];return n},accumulate:function(t){for(var e=1,r=t.length;e<r;++e)t[e]+=t[e-1];return t},slice:function(t,e,r){return void 0!==t.slice?t.slice(e,r):new t.constructor(t.subarray(e,r))},clone:function(t){return null!==t?void 0!==t.slice?t.slice(0):new t.constructor(t):null},binarySearch:function(t,e,r,n){for(var i=void 0===r?0:r,a=void 0===n?t.length-i:n,o=a;i<a;){var s=i+a>>>1;t[s]<e?i=s+1:a=s}return i<o&&t[i]===e?i:~i},sort:function(t,e){return void 0!==t.sort?t.sort(e||a.a.Numeric):Array.prototype.sort.call(t,e||a.a.Numeric)},unique:function(t,e){var r=t.length;if(r<=1)return t.length;var n=0,i=t[0];if(void 0===e)for(var a=1;a!==r;++a){var o=t[a];o!==i&&(i=o,++n!==a&&(t[n]=o))}else{var s=e;if(!optionallyBuiltMap)for(var u=1;u!==r;++u){var l=t[u];0!==s(l,i)&&(i=l,++n!==u&&(t[n]=l))}}return n+1},maybeCreate:function(t,e){if(!t)throw Error("Missing array!");var r=null!==e&&!isNaN(e);if("function"==typeof t||t instanceof Function){if(!r)throw Error("Missing or invalid length!");return new t(e)}if(r&&t.length<e)throw Error("Array too short: "+t.length+" < "+e);return t},copyObjects:function(t,e,r){if(!t)return null;var n=t.length;if(0===n)return e;var i=t[0].constructor.InstanceScalarSize||r;if(void 0===i)throw Error("Arrays.fromObjects: Cannot determine stride!");for(var a=(o.maybeCreate(arrayOrType,n*i),0),s=0;a!==n;++a,s+=i){var u=t[a];void 0!==u?u.toArray(e,s):(console.warn("Arrays.fromObjects: Undefined object."),e.fill(0,s,s+i))}return e}};e.a=o},function(t,e,r){t.exports=!r(20)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,r){function n(t,e){if(t.ns="http://www.w3.org/2000/svg",void 0!==e)for(var r=0;r<e.length;++r)n(e[r].data,e[r].children)}var i=r(253),a=r(184);t.exports=function(t,e,r){var o,s,u,l={};if(3===arguments.length?(l=e,a.array(r)?o=r:a.primitive(r)&&(s=r)):2===arguments.length&&(a.array(e)?o=e:a.primitive(e)?s=e:l=e),a.array(o))for(u=0;u<o.length;++u)a.primitive(o[u])&&(o[u]=i(void 0,void 0,void 0,o[u]));return"s"===t[0]&&"v"===t[1]&&"g"===t[2]&&n(l,o),i(t,l,o,s,void 0)}},function(t,e,r){"use strict";function n(t,e){var r=t.getIn(["assets",e]);return r?r.toJS():{}}function i(t,e){return{type:B,payload:t,meta:{saveFile:e}}}function a(t){return{type:V,payload:t}}function o(t){return["https://d1mly9lp7y5o9.cloudfront.net","https://d313sr52mgc0rk.cloudfront.net","https://clara.io/resources"].map(function(e){return e+"/"+t.get("hash")+t.get("suffix")+"?filename="+t.get("name")})}function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var n=r.getIn(["assets",t]);if(n)return r.callApi(I()({types:[P.g,P.f,P.h],url:o(n),contentType:"img",payload:t,queryKey:"IMAGE"+n.get("hash"),fireAndForget:void 0===e.fireAndForget},e))}}function u(t,e){return e&&s(e,{fireAndForget:!1})(t)}function l(t){return function(e){var r=e.getIn(["assets",t]);if(!r)return e.error(new Error("target file not found"),null,{fileId:t}),null;if(r.get("content"))return r.get("content");var n=e.getTranslator(),i=r.get("lzma")&&!(n&&n.externals.isMobile),a=i?r.set("suffix","lzma1"):r;return e.callApi({types:[P.g,P.f,P.h],url:o(a),contentType:"binary",payload:t,queryKey:"FILE"+a.get("hash"),decompress:i,fireAndForget:!0})}}function c(t,e){return t.getIn(["assets",e,"hash"])}function h(t,e){var r=t.getIn(["assets",e]);if(r){var n=o(r);return n[n.length-1]}return r}function f(t){return function(e){return e.callApi({contentType:"text",url:["https://d1mly9lp7y5o9.cloudfront.net","https://d313sr52mgc0rk.cloudfront.net","https://clara.io/resources"].map(function(e){return e+"/"+t})})}}function d(t,e){return t.get("assets").find(e)}function p(t,e){return t.getIn(["assets"]).filter(e||function(){return!0})}function m(t){return t.getIn(["assets"]).map(function(t){var e=t.toJS();return e._id=e.id,delete e.id,e}).toArray()}function g(t){var e=r.i(z.a)(t);return p(t,function(t,r){return!!e.fileReferences.from[r]})}function v(t,e){return Math.log(t)/Math.log(e)}function y(t){return Math.pow(2,Math.ceil(v(t,2)))}function M(t,e,r){return Math.max(e,Math.min(t,r))}function w(t,e){var r={};return r.width=M(y(t.width),1,e.width),r.height=M(y(t.height),1,e.height),r}function x(t,e,r){return new D.a(function(n,i){var a=document.createElement("img"),o=new FileReader;o.onload=function(i){a.src=i.target.result,a.onload=function(){var i=document.createElement("canvas");i.getContext("2d").drawImage(a,0,0);var o=a.width,s=a.height,u=w({width:o,height:s},{width:e,height:r});i.width=u.width,i.height=u.height,i.getContext("2d").drawImage(a,0,0,u.width,u.height),n(i.toDataURL(t.type))}},o.readAsDataURL(t)})}function b(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){function a(e){var r=_()({content:e,name:t.name,sceneId:W,type:t.type});return T(n,{body:r})}function o(t){return n.dispatch(i(I()({id:t._id},t)))}function s(e){return n.dispatch(r.i(z.l)({name:e.name||t.name,type:"Image",parent:r.i(j.d)(n,{name:"Material Library"}),plugs:{Image:[["Image",{glBitmapFile:e.id,glOption:1}]],Properties:[["ImageProperties",{}]]}})).then(function(t){return{imageNodeId:t,assetId:e.id,imageSize:{width:e.height,height:e.width,originalWidth:e.originalWidth,originalHeight:e.originalHeight}}})}if("string"==typeof t)return r.i(U.a)(t)?function(t){return n.callApi({types:[F,k,G],url:"https://clara.io/api/files/"+t+"/asset"})}(t).then(o).then(s):function(t){var r=_()({url:t,maxSize:e.resizeTo||Q,sceneId:W});return n.callApi({types:[F,k,G],method:"POST",url:"https://clara.io/api/files/image",body:r})}(t).then(o).then(s).catch(function(t){var e=void 0;return e=t.status&&t.status<500?"Image not imported, bad url":t.status&&t.status>=500?"Image not imported, internal error":t,D.a.reject(e)});if(!t.type)return D.a.reject("Expect a File");if("image/jpeg"!==t.type&&"image/png"!==t.type)return D.a.reject("File must be a jpg or png");var u=e.resizeTo||Q;return x(t,u,u).then(a).then(o).then(s)}}function T(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.callApi(I()({types:[F,k,G],method:"POST",url:"https://clara.io/api/files"},e))}e.b=n,e.a=i,e.f=a,e.i=s,e.j=l,e.h=h,e.c=f,e.e=p,e.g=m,e.d=g;var E,S=r(52),_=r.n(S),A=r(37),D=r.n(A),N=r(2),I=r.n(N),L=r(19),C=r.n(L),O=r(24),R=(r.n(O),r(36)),z=r(8),j=r(5),P=r(60),U=r(86),B="ADD_FILE",V="REMOVE_FILE",F="IMPORTING_FILE",k="IMPORTED_FILE",G="IMPORT_FILE_ERROR",Y=r.i(O.Map)({}),H=r.i(R.a)(Y,(E={},C()(E,B,function(t,e,n){var i=n.action,a=n.createEvent,o=e.id;return i.meta&&i.meta.saveFile&&a("saveFile",e),t.set(o,r.i(O.Map)(e))}),C()(E,V,function(t,e){return t.delete(e)}),C()(E,P.d,function(t,e){var r=e.assets;return t.merge(r)}),C()(E,P.e,function(t){return Y}),E)),Q=4096,W="00000000-0000-0000-0000-000000000000",X={reducer:H,actions:{addFile:i,removeFile:a,importImage:b},selectors:{_getHash:c,getUrl:h,filter:p,find:d,getActiveAssets:g,exportJSON:m,fetchImage:u}};e.k=X},function(t,e,r){"use strict";function n(){u.a.call(this)}e.a=n;var i=r(2),a=r.n(i),o=r(69),s=r.n(o),u=r(18),l=r(1);r.n(l);n.prototype=s()(u.a.prototype),n.prototype.constructor=n,a()(n,{TypePosition:1,TypeNormal:2,TypeTangent:4,TypeUV:8,TypeColor:16,id:function(t,e){var r=n.TypeInfo[t].AnchorName;return null!=e?r+"."+e:r},checkId:function(t){var e=n.getAnchorName(t),r=n.getMapName(t,e);if(null===n.getTypeInfo(e)||""===r)throw Error("Invalid PolyMap ID '"+t+"'!");return t},getAnchorName:function(t){var e=t.indexOf(".");return-1===e?t:t.slice(0,e)},getMapName:function(t,e){return t===e?null:t.slice(e.length+1)},getTypeInfo:function(t){for(var e=n.TypeInfo,r=0,i=e.length;r!==i;++r){var a=e[r];if(null!==a&&a.AnchorName===t)return e[r]}return null},resolveMap:function(t,e){var r=n.getAnchorName(e);if(e===r)return t[r];var i=t[r];return i&&i.byName[e.slice(r.length+1)]},assignMap:function(t,e,r){var i=n.getAnchorName(e),a=n.getMapName(e,i);if(null===a)t[i]=r;else{var o=t[i];null===o&&(o=new n,t[i]=o),o.set(a,r)}},Iterator:function(t){u.a.Iterator.call(this),this.reset(t||null)}}),n.TypeInfo=[null,{Type:n.TypePosition,AnchorName:"positions",ElementType:l.Vector3},{Type:n.TypeNormal,AnchorName:"normalMap",ElementType:l.Vector3},null,{Type:n.TypeTangent,AnchorName:"tangentMap",ElementType:l.Vector4},null,null,null,{Type:n.TypeUV,AnchorName:"uvMaps",ElementType:l.Vector2},null,null,null,null,null,null,null,{Type:n.TypeColor,AnchorName:"colorMaps",ElementType:l.Color}],a()(n,{IdPositions:n.id(n.TypePosition),IdNormals:n.id(n.TypeNormal),IdTangents:n.id(n.TypeTangent)}),n.Iterator.prototype=a()(s()(u.a.Iterator.prototype),{constructor:n.Iterator,_super:u.a.Iterator.prototype,reset:function(t){this._super.reset.call(this,null);var e=t||null;this.mesh=e,this.byName=e,this.typeId=0},getId:function(){return n.id(this.typeId,this.name)},next:function(){if(this._super.next.call(this))return!0;var t=this.mesh,e=this.typeId,r=null,i=null;switch(e<<=1){case 0:e=1;case n.TypePosition:r=t.positions;break;case n.TypeNormal:r=t.normalMap;break;case n.TypeTangent:r=t.tangentMap;break;case n.TypeUV:i=t.uvMaps;break;case n.TypeColor:i=t.colorMaps;break;default:return this.reset(null),!1}return this.typeId=e,null!==i&&void 0!==i?(this.byName=i.byName,this._super.reset.call(this,i).next()):null!==r&&void 0!==r?(this.element=r,this.index=e,this.name=null,!0):this.next()}})},function(t,e,r){var n=r(48),i=r(215),a=r(158),o=Object.defineProperty;e.f=r(38)?Object.defineProperty:function(t,e,r){if(n(t),e=a(e,!0),n(r),i)try{return o(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},function(t,e,r){var n=r(23),i=r(56);t.exports=r(30)?function(t,e,r){return n.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e,r){"use strict";function n(t,e){return function(r,n,i,a){return n&&e.hasOwnProperty(n.type)?e[n.type](r,n.payload,{action:n,createEvent:a,state:i}):r||t}}e.a=n},function(t,e,r){t.exports={default:r(424),__esModule:!0}},function(t,e,r){t.exports=!r(63)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,r){var n=r(170),i=r(54);t.exports=function(t){return n(i(t))}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(406),a=n(i),o=r(405),s=n(o),u="function"==typeof s.default&&"symbol"==typeof a.default?function(t){return typeof t}:function(t){return t&&"function"==typeof s.default&&t.constructor===s.default&&t!==s.default.prototype?"symbol":typeof t};e.default="function"==typeof s.default&&"symbol"===u(a.default)?function(t){return void 0===t?"undefined":u(t)}:function(t){return t&&"function"==typeof s.default&&t.constructor===s.default&&t!==s.default.prototype?"symbol":void 0===t?"undefined":u(t)}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(398),a=n(i),o=r(25),s=n(o);e.default=function(){function t(t,e){var r=[],n=!0,i=!1,a=void 0;try{for(var o,u=(0,s.default)(t);!(n=(o=u.next()).done)&&(r.push(o.value),!e||r.length!==e);n=!0);}catch(t){i=!0,a=t}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}return r}return function(e,r){if(Array.isArray(e))return e;if((0,a.default)(Object(e)))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,r){"use strict";function n(){return r.i(N.Map)({all:{},prev:{},allCommands:r.i(N.List)(),tools:r.i(N.List)(),activeCommand:null,removedCommands:r.i(N.Map)()})}function i(t,e){var r=D()({},U,t,{name:e});return!0===r.display&&(r.display={playerTools:!0}),r}function a(t,e){return{type:O,payload:{command:t,name:e}}}function o(t){return{type:R,payload:t}}function s(t,e){return{type:z,payload:{name:t,opts:e}}}function u(t){return{type:j,payload:{name:t}}}function l(t,e){return{type:P,payload:{name:t,opts:e}}}function c(t){return t.getIn(["commands","tools"])}function h(t,e){var r=t.getIn(["commands","all"]);return e?E()(r).reduce(function(t,n){var i=r[n];return i.enabled&&i.display[e]&&(t[n]=i),t},{}):r}function f(t,e){return!!e.active||!!e.isActive&&e.isActive(t)}function d(t,e){var r=t.getIn(["commands","all"])[e];return r&&f(t,r)}function p(t){var e=h(t),r={};return b()(e).forEach(function(e){e.widget&&f(t,e)&&(r[e.name]=e)}),r}function m(t){return function(e){var r=c(e),n=h(e),i=n[t];i.activate?f(e,i)||(i.activate.call(i),e.dispatch(s(t,{active:!0}))):r.forEach(function(r){var i=n[r];i.active&&i.name!==t&&e.dispatch(s(i.name,{active:!1})),i.name===t&&e.dispatch(s(i.name,{active:!0}))})}}function g(t){return function(e){var r=h(e),n=r[t];n&&(n.active&&e.dispatch(s(n.name,{active:!1})),n.deactivate&&n.deactivate.call(n))}}function v(t){return function(e){var r=e.getIn(["commands","all"])[t];if(r&&r.enabled){if(r.execute)return r.execute(e);var n=f(e,r);return r.deactivate&&n?e.dispatch(g(t)):e.dispatch(m(t))}}}function y(t,e){return function(r){t.forEach(function(t){r.dispatch(s(t,e))})}}function M(t){return function(e){t.forEach(function(t){e.dispatch(u(t))})}}r.d(e,"c",function(){return C}),e.g=a,e.h=o,e.a=s,e.l=u,e.j=l,e.m=c,e.i=h,e.k=d,e.n=p,e.d=m,e.f=g,e.o=v,e.b=y,e.e=M;var w,x=r(112),b=r.n(x),T=r(6),E=r.n(T),S=r(19),_=r.n(S),A=r(2),D=r.n(A),N=r(24),I=(r.n(N),r(36)),L=(r(3),r(108)),C=["orbit","pan","zoom","home","fullscreen"],O="ADD_COMMAND",R="REMOVE_COMMAND",z="UPDATE_COMMAND",j="UNDO_UPDATE_COMMAND",P="UPDATE_COMMAND_OPTIONS;",U={enabled:!0,display:{},options:{},isEnabled:function(t,e){return e.enabled},isVisible:function(t,e){return e.display},command:null,widget:null},B=r.i(I.a)({},(w={},_()(w,L.a.INIT,function(t){return n()}),_()(w,O,function(t,e){var n=e.command,a=e.name;if(t.getIn(["removedCommands",a]))return t;var o=t.get("all");o[a]=D()(i(n,a),o[a]||{});var s=t.updateIn(["allCommands"],r.i(N.List)(),function(t){return t.push(a)});return o[a].tool&&(s=s.updateIn(["tools"],r.i(N.List)(),function(t){return t.push(a)})),s}),_()(w,R,function(t,e){delete t.get("all")[e];var r=t.getIn(["tools"]).indexOf(e),n=t.getIn(["allCommands"]).indexOf(e),i=t;return r>=0&&(i=i.deleteIn(["tools",r])),n>=0&&(i=i.deleteIn(["allCommands",n])),i=i.setIn(["removedCommands",e],!0)}),_()(w,z,function(t,e){var r=e.name,n=e.opts,a=t.get("all");a[r]||(a[r]=i(n,r));var o=a[r];return t.get("prev")[r]=D()({},o),D()(o,n),t}),_()(w,P,function(t,e){var r=e.name,n=e.opts,i=t.get("all")[r];return t.get("prev")[r]=D()({},i),i&&D()(i.options,n),t}),_()(w,j,function(t,e){var r=e.name,n=t.get("prev")[r];if(n){var i=t.get("all")[r];i&&D()(i,n)}return t}),w)),V={reducer:B,actions:{activateCommand:m,addCommand:a,deactivateCommand:g,runCommand:v,setCommandOptions:l,updateCommand:s,undoUpdateCommand:u,updateCommands:y,removeCommand:o},selectors:{}};e.p=V},function(t,e,r){"use strict";function n(t){var e=new i.Vector3,r=new i.Quaternion,n=new i.Vector3;t.decompose(e,r,n);var a=(new i.Vector3).copy((new i.Euler).setFromQuaternion(r,"ZYX"));return a.multiplyScalar(180/Math.PI),{translation:e,rotation:a}}e.a=n;var i=r(1);r.n(i)},function(t,e,r){var n=r(66);t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,r){"use strict";if(r(30)){var n=r(77),i=r(11),a=r(20),o=r(0),s=r(180),u=r(245),l=r(45),c=r(74),h=r(56),f=r(35),d=r(79),p=r(82),m=r(28),g=r(81),v=r(103),y=r(27),M=r(242),w=r(165),x=r(14),b=r(67),T=r(171),E=r(99),S=r(101),_=r(100).f,A=r(181),D=r(68),N=r(15),I=r(96),L=r(164),C=r(177),O=r(182),R=r(76),z=r(125),j=r(127),P=r(163),U=r(226),B=r(23),V=r(55),F=B.f,k=V.f,G=i.RangeError,Y=i.TypeError,H=i.Uint8Array,Q=Array.prototype,W=u.ArrayBuffer,X=u.DataView,q=I(0),Z=I(2),K=I(3),J=I(4),$=I(5),tt=I(6),et=L(!0),rt=L(!1),nt=O.values,it=O.keys,at=O.entries,ot=Q.lastIndexOf,st=Q.reduce,ut=Q.reduceRight,lt=Q.join,ct=Q.sort,ht=Q.slice,ft=Q.toString,dt=Q.toLocaleString,pt=N("iterator"),mt=N("toStringTag"),gt=D("typed_constructor"),vt=D("def_constructor"),yt=s.CONSTR,Mt=s.TYPED,wt=s.VIEW,xt=I(1,function(t,e){return At(C(t,t[vt]),e)}),bt=a(function(){return 1===new H(new Uint16Array([1]).buffer)[0]}),Tt=!!H&&!!H.prototype.set&&a(function(){new H(1).set({})}),Et=function(t,e){if(void 0===t)throw Y("Wrong length!");var r=+t,n=m(t);if(e&&!M(r,n))throw G("Wrong length!");return n},St=function(t,e){var r=p(t);if(r<0||r%e)throw G("Wrong offset!");return r},_t=function(t){if(x(t)&&Mt in t)return t;throw Y(t+" is not a typed array!")},At=function(t,e){if(!(x(t)&&gt in t))throw Y("It is not a typed array constructor!");return new t(e)},Dt=function(t,e){return Nt(C(t,t[vt]),e)},Nt=function(t,e){for(var r=0,n=e.length,i=At(t,n);n>r;)i[r]=e[r++];return i},It=function(t,e,r){F(t,e,{get:function(){return this._d[r]}})},Lt=function(t){var e,r,n,i,a,o,s=b(t),u=arguments.length,c=u>1?arguments[1]:void 0,h=void 0!==c,f=A(s);if(void 0!=f&&!T(f)){for(o=f.call(s),n=[],e=0;!(a=o.next()).done;e++)n.push(a.value);s=n}for(h&&u>2&&(c=l(c,arguments[2],2)),e=0,r=m(s.length),i=At(this,r);r>e;e++)i[e]=h?c(s[e],e):s[e];return i},Ct=function(){for(var t=0,e=arguments.length,r=At(this,e);e>t;)r[t]=arguments[t++];return r},Ot=!!H&&a(function(){dt.call(new H(1))}),Rt=function(){return dt.apply(Ot?ht.call(_t(this)):_t(this),arguments)},zt={copyWithin:function(t,e){return U.call(_t(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return J(_t(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return P.apply(_t(this),arguments)},filter:function(t){return Dt(this,Z(_t(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return $(_t(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return tt(_t(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){q(_t(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return rt(_t(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return et(_t(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return lt.apply(_t(this),arguments)},lastIndexOf:function(t){return ot.apply(_t(this),arguments)},map:function(t){return xt(_t(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return st.apply(_t(this),arguments)},reduceRight:function(t){return ut.apply(_t(this),arguments)},reverse:function(){for(var t,e=this,r=_t(e).length,n=Math.floor(r/2),i=0;i<n;)t=e[i],e[i++]=e[--r],e[r]=t;return e},some:function(t){return K(_t(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return ct.call(_t(this),t)},subarray:function(t,e){var r=_t(this),n=r.length,i=g(t,n);return new(C(r,r[vt]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,m((void 0===e?n:g(e,n))-i))}},jt=function(t,e){return Dt(this,ht.call(_t(this),t,e))},Pt=function(t){_t(this);var e=St(arguments[1],1),r=this.length,n=b(t),i=m(n.length),a=0;if(i+e>r)throw G("Wrong length!");for(;a<i;)this[e+a]=n[a++]},Ut={entries:function(){return at.call(_t(this))},keys:function(){return it.call(_t(this))},values:function(){return nt.call(_t(this))}},Bt=function(t,e){return x(t)&&t[Mt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Vt=function(t,e){return Bt(t,e=v(e,!0))?h(2,t[e]):k(t,e)},Ft=function(t,e,r){return!(Bt(t,e=v(e,!0))&&x(r)&&y(r,"value"))||y(r,"get")||y(r,"set")||r.configurable||y(r,"writable")&&!r.writable||y(r,"enumerable")&&!r.enumerable?F(t,e,r):(t[e]=r.value,t)};yt||(V.f=Vt,B.f=Ft),o(o.S+o.F*!yt,"Object",{getOwnPropertyDescriptor:Vt,defineProperty:Ft}),a(function(){ft.call({})})&&(ft=dt=function(){return lt.call(this)});var kt=d({},zt);d(kt,Ut),f(kt,pt,Ut.values),d(kt,{slice:jt,set:Pt,constructor:function(){},toString:ft,toLocaleString:Rt}),It(kt,"buffer","b"),It(kt,"byteOffset","o"),It(kt,"byteLength","l"),It(kt,"length","e"),F(kt,mt,{get:function(){return this[Mt]}}),t.exports=function(t,e,r,u){u=!!u;var l=t+(u?"Clamped":"")+"Array",h="Uint8Array"!=l,d="get"+t,p="set"+t,g=i[l],v=g||{},y=g&&S(g),M=!g||!s.ABV,b={},T=g&&g.prototype,A=function(t,r){var n=t._d;return n.v[d](r*e+n.o,bt)},D=function(t,r,n){var i=t._d;u&&(n=(n=Math.round(n))<0?0:n>255?255:255&n),i.v[p](r*e+i.o,n,bt)},N=function(t,e){F(t,e,{get:function(){return A(this,e)},set:function(t){return D(this,e,t)},enumerable:!0})};M?(g=r(function(t,r,n,i){c(t,g,l,"_d");var a,o,s,u,h=0,d=0;if(x(r)){if(!(r instanceof W||"ArrayBuffer"==(u=w(r))||"SharedArrayBuffer"==u))return Mt in r?Nt(g,r):Lt.call(g,r);a=r,d=St(n,e);var p=r.byteLength;if(void 0===i){if(p%e)throw G("Wrong length!");if((o=p-d)<0)throw G("Wrong length!")}else if((o=m(i)*e)+d>p)throw G("Wrong length!");s=o/e}else s=Et(r,!0),o=s*e,a=new W(o);for(f(t,"_d",{b:a,o:d,l:o,e:s,v:new X(a)});h<s;)N(t,h++)}),T=g.prototype=E(kt),f(T,"constructor",g)):z(function(t){new g(null),new g(t)},!0)||(g=r(function(t,r,n,i){c(t,g,l);var a;return x(r)?r instanceof W||"ArrayBuffer"==(a=w(r))||"SharedArrayBuffer"==a?void 0!==i?new v(r,St(n,e),i):void 0!==n?new v(r,St(n,e)):new v(r):Mt in r?Nt(g,r):Lt.call(g,r):new v(Et(r,h))}),q(y!==Function.prototype?_(v).concat(_(y)):_(v),function(t){t in g||f(g,t,v[t])}),g.prototype=T,n||(T.constructor=g));var I=T[pt],L=!!I&&("values"==I.name||void 0==I.name),C=Ut.values;f(g,gt,!0),f(T,Mt,l),f(T,wt,!0),f(T,vt,g),(u?new g(1)[mt]==l:mt in T)||F(T,mt,{get:function(){return l}}),b[l]=g,o(o.G+o.W+o.F*(g!=v),b),o(o.S,l,{BYTES_PER_ELEMENT:e,from:Lt,of:Ct}),"BYTES_PER_ELEMENT"in T||f(T,"BYTES_PER_ELEMENT",e),o(o.P,l,zt),j(l),o(o.P+o.F*Tt,l,{set:Pt}),o(o.P+o.F*!L,l,Ut),o(o.P+o.F*(T.toString!=ft),l,{toString:ft}),o(o.P+o.F*a(function(){new g(1).slice()}),l,{slice:jt}),o(o.P+o.F*(a(function(){return[1,2].toLocaleString()!=new g([1,2]).toLocaleString()})||!a(function(){T.toLocaleString.call([1,2])})),l,{toLocaleString:Rt}),R[l]=L?I:C,n||L||f(T,pt,C)}}else t.exports=function(){}},function(t,e,r){function n(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null}function i(){this.isPolyfilled=!0,this.displayId=c++,this.displayName="webvr-polyfill displayName",this.depthNear=.01,this.depthFar=1e4,this.isConnected=!0,this.isPresenting=!1,this.capabilities={hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1},this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,this.wakelock_=new l}function a(){this.isPolyfilled=!0,this.hardwareUnitId="webvr-polyfill hardwareUnitId",this.deviceId="webvr-polyfill deviceId",this.deviceName="webvr-polyfill deviceName"}function o(){}function s(){}var u=r(21),l=r(600),c=1e3,h=!1,f=[0,0,.5,1],d=[.5,0,.5,1];i.prototype.getFrameData=function(t){return u.frameDataFromPose(t,this.getPose(),this)},i.prototype.getPose=function(){return this.getImmediatePose()},i.prototype.requestAnimationFrame=function(t){return window.requestAnimationFrame(t)},i.prototype.cancelAnimationFrame=function(t){return window.cancelAnimationFrame(t)},i.prototype.wrapForFullscreen=function(t){if(u.isIOS())return t;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var e=["height: "+Math.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",e.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==t)return this.fullscreenWrapper_;this.removeFullscreenWrapper(),this.fullscreenElement_=t;var r=this.fullscreenElement_.parentElement;r.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),r.removeChild(this.fullscreenElement_),this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var n=this;return function(){if(n.fullscreenElement_){var t=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];n.fullscreenElement_.setAttribute("style",t.join("; ")+";")}}(),this.fullscreenWrapper_},i.prototype.removeFullscreenWrapper=function(){if(this.fullscreenElement_){var t=this.fullscreenElement_;this.fullscreenElementCachedStyle_?t.setAttribute("style",this.fullscreenElementCachedStyle_):t.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var e=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(t),e.insertBefore(t,this.fullscreenWrapper_),e.removeChild(this.fullscreenWrapper_),t}},i.prototype.requestPresent=function(t){var e=this.isPresenting,r=this;return t instanceof Array||(h||(console.warn("Using a deprecated form of requestPresent. Should pass in an array of VRLayers."),h=!0),t=[t]),new Promise(function(n,i){if(!r.capabilities.canPresent)return void i(new Error("VRDisplay is not capable of presenting."));if(0==t.length||t.length>r.capabilities.maxLayers)return void i(new Error("Invalid number of layers."));var a=t[0];if(!a.source)return void n();var o=a.leftBounds||f,s=a.rightBounds||d;if(e){var l=r.layer_;l.source!==a.source&&(l.source=a.source);for(var c=0;c<4;c++)l.leftBounds[c]=o[c],l.rightBounds[c]=s[c];return void n()}if(r.layer_={predistorted:a.predistorted,source:a.source,leftBounds:o.slice(0),rightBounds:s.slice(0)},r.waitingForPresent_=!1,r.layer_&&r.layer_.source){var h=r.wrapForFullscreen(r.layer_.source),p=function(){var t=u.getFullscreenElement();r.isPresenting=h===t,r.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch(function(t){console.error("screen.orientation.lock() failed due to",t.message)}),r.waitingForPresent_=!1,r.beginPresent_(),n()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),r.removeFullscreenWrapper(),r.wakelock_.release(),r.endPresent_(),r.removeFullscreenListeners_()),r.fireVRDisplayPresentChange_()},m=function(){r.waitingForPresent_&&(r.removeFullscreenWrapper(),r.removeFullscreenListeners_(),r.wakelock_.release(),r.waitingForPresent_=!1,r.isPresenting=!1,i(new Error("Unable to present.")))};r.addFullscreenListeners_(h,p,m),u.requestFullscreen(h)?(r.wakelock_.request(),r.waitingForPresent_=!0):(u.isIOS()||u.isWebViewAndroid())&&(r.wakelock_.request(),r.isPresenting=!0,r.beginPresent_(),r.fireVRDisplayPresentChange_(),n())}r.waitingForPresent_||u.isIOS()||(u.exitFullscreen(),i(new Error("Unable to present.")))})},i.prototype.exitPresent=function(){var t=this.isPresenting,e=this;return this.isPresenting=!1,this.layer_=null,this.wakelock_.release(),new Promise(function(r,n){t?(!u.exitFullscreen()&&u.isIOS()&&(e.endPresent_(),e.fireVRDisplayPresentChange_()),u.isWebViewAndroid()&&(e.removeFullscreenWrapper(),e.removeFullscreenListeners_(),e.endPresent_(),e.fireVRDisplayPresentChange_()),r()):n(new Error("Was not presenting to VRDisplay."))})},i.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},i.prototype.fireVRDisplayPresentChange_=function(){var t=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});window.dispatchEvent(t)},i.prototype.fireVRDisplayConnect_=function(){var t=new CustomEvent("vrdisplayconnect",{detail:{display:this}});window.dispatchEvent(t)},i.prototype.addFullscreenListeners_=function(t,e,r){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=t,this.fullscreenChangeHandler_=e,this.fullscreenErrorHandler_=r,e&&(document.fullscreenEnabled?t.addEventListener("fullscreenchange",e,!1):document.webkitFullscreenEnabled?t.addEventListener("webkitfullscreenchange",e,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",e,!1):document.msFullscreenEnabled&&t.addEventListener("msfullscreenchange",e,!1)),r&&(document.fullscreenEnabled?t.addEventListener("fullscreenerror",r,!1):document.webkitFullscreenEnabled?t.addEventListener("webkitfullscreenerror",r,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenerror",r,!1):document.msFullscreenEnabled&&t.addEventListener("msfullscreenerror",r,!1))},i.prototype.removeFullscreenListeners_=function(){if(this.fullscreenEventTarget_){var t=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var e=this.fullscreenChangeHandler_;t.removeEventListener("fullscreenchange",e,!1),t.removeEventListener("webkitfullscreenchange",e,!1),document.removeEventListener("mozfullscreenchange",e,!1),t.removeEventListener("msfullscreenchange",e,!1)}if(this.fullscreenErrorHandler_){var r=this.fullscreenErrorHandler_;t.removeEventListener("fullscreenerror",r,!1),t.removeEventListener("webkitfullscreenerror",r,!1),document.removeEventListener("mozfullscreenerror",r,!1),t.removeEventListener("msfullscreenerror",r,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},i.prototype.beginPresent_=function(){},i.prototype.endPresent_=function(){},i.prototype.submitFrame=function(t){},i.prototype.getEyeParameters=function(t){return null},o.prototype=new a,s.prototype=new a,t.exports.VRFrameData=n,t.exports.VRDisplay=i,t.exports.VRDevice=a,t.exports.HMDVRDevice=o,t.exports.PositionSensorVRDevice=s},function(t,e,r){var n=r(42);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e,r){var n=r(150),i=r(114);t.exports=function(t){return n(i(t))}},function(t,e,r){"use strict";function n(t){return{type:w,payload:t}}function i(t,e){return t.getIn(["selection","nodes"]).includes(e)}function a(t){return t.getIn(["selection","nodes"]).last()}function o(t){return t.getIn(["selection","nodes"]).toArray()}function s(){return{type:x}}function u(t){return{type:b,payload:t}}function l(t){return{type:T,payload:t}}function c(t){return t.getIn(["selection","highlightColor"])}function h(t){return t>5&&(t=5),t<=0&&(t=.1),{type:E,payload:t}}function f(t){return t.getIn(["selection","highlightThickness"])}function d(t){return t.getIn(["selection","highlightNodes"])}e.a=n,e.b=o,e.d=c,e.e=f,e.c=d;var p,m=r(19),g=r.n(m),v=r(24),y=(r.n(v),r(36)),M=r(60),w="SELECT_NODE",x="DESELECT_ALL",b="SET_HIGHLIGHTING",T="SET_HIGHLIGHT_COLOR",E="SET_HIGHLIGHT_THICKNESS",S=r.i(v.Map)({nodes:r.i(v.List)(),highlightNodes:!1,highlightColor:"#00ff00",highlightThickness:1}),_=r.i(y.a)(S,(p={},g()(p,w,function(t,e){var r=t.get("nodes");return t.set("nodes",r.includes(e)?r:r.clear().push(e))}),g()(p,M.b,function(t,e){var r=t.get("nodes").indexOf(e);return-1===r?t:t.deleteIn(["nodes",r])}),g()(p,M.e,function(t){return t.set("nodes",t.get("nodes").clear())}),g()(p,x,function(t){return t.set("nodes",t.get("nodes").clear())}),g()(p,b,function(t,e){return t.set("highlightNodes",e)}),g()(p,T,function(t,e){return t.set("highlightColor",e)}),g()(p,E,function(t,e){return t.set("highlightThickness",e)}),p)),A={reducer:_,actions:{selectNode:n,deselectAll:s,setHighlighting:u,setHighlightColor:l,setHighlightThickness:h},selectors:{isSelected:i,lastSelectedNode:a,getHighlightColor:c,getHighlightThickness:f}};e.f=A},function(t,e,r){"use strict";function n(t,e,n){var i=n||r.i(a.a)(t,{id:e,evalPlug:"Transform"}),h=r.i(a.a)(t,{id:e,evalPlug:"Camera"});if(i&&i.target){var f=r.i(a.b)(t,i.target.nodeId),d=h.offset;return f.decompose(u,l,c),d?f.compose(u.add(d),l,c):f}if(e===r.i(s.g)(t))return r.i(a.b)(t,o.h);var p=r.i(a.a)(t,{scene:!0,evalPlug:"Player"}),m=r.i(a.a)(t,{id:e,evalPlug:"Properties"})||{orbitTarget:o.h},g=p.overrideNavigation?p.orbitTarget:m.orbitTarget;return r.i(a.b)(t,g||o.h)}e.a=n;var i=r(1),a=(r.n(i),r(5)),o=r(8),s=r(3),u=new i.Vector3,l=new i.Quaternion,c=new i.Vector3},function(t,e,r){t.exports={default:r(411),__esModule:!0}},function(t,e,r){var n=r(34),i=r(93);t.exports=r(38)?function(t,e,r){return n.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,r){var n=r(102),i=r(56),a=r(39),o=r(103),s=r(27),u=r(230),l=Object.getOwnPropertyDescriptor;e.f=r(30)?l:function(t,e){if(t=a(t),e=o(e,!0),u)try{return l(t,e)}catch(t){}if(s(t,e))return i(!n.f.call(t,e),t[e])}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,r){var n=r(11),i=r(35),a=r(27),o=r(68)("src"),s=Function.toString,u=(""+s).split("toString");r(97).inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,r,s){var l="function"==typeof r;l&&(a(r,"name")||i(r,"name",e)),t[e]!==r&&(l&&(a(r,o)||i(r,o,t[e]?""+t[e]:u.join(String(e)))),t===n?t[e]=r:s?t[e]?t[e]=r:i(t,e,r):(delete t[e],i(t,e,r)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[o]||s.call(this)})},function(t,e,r){var n=r(146);t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";r.d(e,"d",function(){return n}),r.d(e,"a",function(){return i}),r.d(e,"b",function(){return a}),r.d(e,"g",function(){return o}),r.d(e,"f",function(){return s}),r.d(e,"h",function(){return u}),r.d(e,"c",function(){return l}),r.d(e,"i",function(){return c}),r.d(e,"e",function(){return h});var n="LOAD_SCENE",i="ADDNODE",a="DELETE_NODE",o="LOADING_FILE",s="LOADED_FILE",u="LOADING_FILE_ERROR",l="USE_SCENE",c="INITIALIZE_SCENE",h="CLEAR_SCENE"},function(t,e,r){"use strict";function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.i(U.Map)();return r.i(U.Map)({time:0,startTime:null,playing:!1,autoplay:!1,frameTime:0,animations:r.i(U.List)(),clips:t,timelineAnimationIndex:-1,dynamicsWorld:null,dynamicBodies:{},kinematicBodies:{}})}function i(t){return t.getIn(["animation","time"])}function a(t){return function(e){var n=new Date,i=t-e.getIn(["animation","time"]),a=e.getIn(["animation","dynamicsWorld"]);if(e.getIn(["animation","animations"]).size){var o=0;e.getIn(["animation","animations"]).forEach(function(r,n){u(e,i,t,r,n-o)||o++})}else e.getIn(["animation","autoplay"])&&e.dispatch(d());a&&r.i(H.a)(e,i,t,a,e.getIn(["animation","dynamicBodies"]),e.getIn(["animation","kinematicBodies"])),e.dispatch({type:Q,payload:{time:t,startTime:n}})}}function o(t,e,r,n){var i=e.vs,a=e.ts;if(!a.length)return n;var o=a.findIndex(function(e){return t<=e});return-1===o?i[i.length-1]:0===o?i[0]:r(t-a[o-1],i[o-1],i[o],a[o]-a[o-1])}function s(t,e,r,n){if(e.ts)return o(t,e,r,n);for(var i={},a=O()(e),s=0;s<a.length;s++)i[a[s]]=o(t,e[a[s]],r,n[a[s]]);return i}function u(t,e,n,i,a){var o=i.tracks,u=i.first,l=i.iterations,c=i.duration,h=i.easingFn,f=i.easingDuration,p=i.playSpeed,m=i.easingTime,g=i.start,v=(i.set,n),y=u&&n<g+f&&n>g;y?(m+=e*h(n-g,0,1,f),v=g+m):m&&(v=n-f+m);var M=p<0;1!==p&&(v=(v-g)*p+g,M&&(v+=c));for(var w=!1,x=[],b=(new Date,void 0),T=0;T<o.length;T++){b=o[T];var E=b.start+g,S=b.end+g;if(M?v>S:v<E)w=!0;else{var _=b.value,A=b,D=A.tween,N=A.path,I=A.keyframes,L=A.duration,C=A.currentValue,O=A.trackSet,R=b.startValue;null!=R||I||(R=r.i(V.i)(t,N),t.dispatch({type:Z,payload:{path:[a,T],attrs:{startValue:R}}}));var z=I?s(v-E,I,D,C):v>S?_:D(v-E,R,_,L),j=O(N,z);j&&x.push(j),(M?v>=E:v<=S)&&(w=!0)}}if(x.length&&t.dispatch(r.i(V.p)(x)),w)y&&t.dispatch({type:K,payload:{index:a,attrs:{easingTime:m}}});else if(l>1)t.dispatch({type:K,payload:{index:a,attrs:{first:!1,easingTime:0,start:n,iterations:l-1}}});else{if(i.onEnd&&i.onEnd(),a!==t.getIn(["animation","timelineAnimationIndex"]))return t.dispatch({type:J,payload:a}),!1;t.dispatch({type:K,payload:{index:a,attrs:{start:n}}}),t.dispatch(d())}return!0}function l(t){return t.getIn(["animation","playing"])}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e){e.dispatch({type:X,payload:t.autoplay}),"undefined"==typeof Ammo||e.getIn(["animation","dynamicsWorld"])||e.dispatch({type:rt,payload:r.i(H.b)(e)}),e.dispatch(a(e.getIn(["animation","time"])))}}function h(){return function(t){if(t.getIn(["animation","playing"])){var e=t.getIn(["animation","startTime"]),r=t.getIn(["animation","time"]),n=e?new Date-e:0;t.dispatch(a(r+n))}}}function f(t){if(t.ts)return t.ts.length?t.ts[t.ts.length-1]:0;for(var e=0,r=void 0,n=O()(t),i=0;i<n.length;i++)r=t[n[i]].ts,e=r.length?Math.max(r[r.length-1],e):e;return e}function d(){return{type:q}}function p(t,e,n){var i=Array.isArray(n.path)?n.path:n.path&&r.i(Y.d)(t,n.path);if(!i&&n.path&&n.path.id&&(delete n.path.id,i=r.i(Y.d)(t,n.path)),!i&&!n.set)return console.log("path is not defined for track",n),null;var a=n.start||0,o=n.value,s=n.tween||T(o,n.easing||"linear"),u=n.set||V.q,l=n.keyframes,c=l?f(l):n.duration||0;return{path:i,start:a,end:c+a,value:o,duration:c,tween:s,startValue:0===c?o:n.startValue,keyframes:l,currentValue:i&&r.i(V.i)(t,i),trackSet:u}}function m(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(n){var i=n.getIn(["animation","clips",t]);i&&(n.dispatch(g(P()({},i.toJS(),e))),r.useTimeline&&n.dispatch({type:tt}))}}function g(t){return function(e){var r=e.getIn(["animation","time"]),n=t.name||"Animation",i=t.iterations||1,a=t.start||r,o=t.easing||"linear",s=T(1,o),u=t.easingDuration||0,h=void 0!==t.playSpeed?t.playSpeed:1,f=t.tracks.map(function(t){return p(e,r,t)}).filter(function(t){return!!t}),d=f.reduce(function(t,e){return Math.max(t,e.end)},0),m=t.onEnd||null;return e.dispatch({type:$,payload:{name:n,start:a,easingTime:0,first:!0,easing:o,easingFn:s,easingDuration:u,iterations:i,tracks:f,onEnd:m,playSpeed:h,duration:d}}),t.autoplay&&!l(e)&&e.dispatch(c({autoplay:!0})),L.a.resolve(!0)}}function v(t,e){return function(r){var n=M(r,t);if(-1!==n)return r.dispatch({type:K,payload:{index:n,attrs:e}})}}function y(t,e){return t.getIn(["animation","animations"]).find(function(t){return t.name===e})}function M(t,e){return t.getIn(["animation","animations"]).findIndex(function(t){return t.name===e})}function w(t){return function(e){var r=M(e,t);if(-1!==r)return e.dispatch({type:J,payload:r})}}function x(t,e){return{type:et,payload:{clip:t,id:e}}}function b(t){return N()(t.getIn(["animation","clips"]).toJS())}function T(t,e){var r=F.a[e];if(!r)throw new Error("Unknown easing function: "+e);if("object"!==(void 0===t?"undefined":A()(t)))return r;var n=O()(t);return function(t,e,i,a){for(var o={},s=0;s<n.length;s++){var u=n[s];o[u]=r(t,e[u],i[u],a)}return o}}function E(t){var e=t.getIn(["animation","timelineAnimationIndex"]);return e<0?null:t.getIn(["animation","animations",e])}e.i=i,e.j=a,e.k=l,e.m=c,e.e=h,e.l=d,e.d=m,e.a=g,e.f=M,e.g=w,e.b=x,e.c=b,e.h=E;var S,_=r(40),A=r.n(_),D=r(112),N=r.n(D),I=r(37),L=r.n(I),C=r(6),O=r.n(C),R=r(19),z=r.n(R),j=r(2),P=r.n(j),U=r(24),B=(r.n(U),r(36)),V=r(8),F=r(285),k=r(60),G=r(108),Y=r(5),H=r(282),Q="SET_TIME",W="SET_FRAME_TIME",X="START_PLAYING",q="STOP_PLAYING",Z="UPDATE_TRACK",K="UPDATE_ANIMATION",J="REMOVE_ANIMATION",$="QUEUE_ANIMATION",tt="QUEUE_TIMELINE_ANIMATION",et="ADD_CLIP",rt="INIT_PHYSICS",nt=r.i(B.a)(n(),(S={},z()(S,G.a.INIT,function(t){return n()}),z()(S,Q,function(t,e){var r=e.time,n=e.startTime;return t.set("time",r).set("startTime",n)}),z()(S,W,function(t,e){var r=t.get("frameTime");return t.set("frameTime",r+.1*(e-r))}),z()(S,X,function(t,e){return t.merge({playing:!0,autoplay:!!e})}),z()(S,q,function(t){return t.set("playing",!1)}),z()(S,Z,function(t,e){var r=e.path,n=e.attrs,i=t.getIn(["animations",r[0]]),a=i&&i.tracks[r[1]];return a&&P()(a,n),t}),z()(S,K,function(t,e){var r=e.index,n=e.attrs,i=t.getIn(["animations",r]);return i&&P()(i,n),t}),z()(S,J,function(t,e){var r=t;return e===t.get("timelineAnimationIndex")&&(r=r.set("timelineAnimationIndex",-1)),r.deleteIn(["animations",e])}),z()(S,$,function(t,e){return t.updateIn(["animations"],r.i(U.List)(),function(t){return t.push(e)})}),z()(S,tt,function(t,e){return t.set("timelineAnimationIndex",t.get("animations").size-1)}),z()(S,et,function(t,e){var n=e.clip,i=e.id;return t.setIn(["clips",i],r.i(U.Map)(n).set("id",i))}),z()(S,k.d,function(t,e){var r=e.clips;return r?t.mergeIn(["clips"],r):t}),z()(S,k.e,function(t){return n()}),z()(S,rt,function(t,e){var r=e.dynamicsWorld,n=e.dynamicBodies,i=e.kinematicBodies;return t.set("dynamicsWorld",r).set("dynamicBodies",n).set("kinematicBodies",i)}),S)),it={reducer:nt,actions:{setTime:a,startPlaying:c,stopPlaying:d,removeAnimation:w,queueAnimation:g,addClip:x,queueClip:m,updateAnimationAttrs:v},selectors:{findAnimation:y,getTime:i,getClips:b,getTimelineAnimation:E,isPlaying:l}};e.n=it},function(t,e,r){"use strict";function n(t,e,r){o.setFromMatrixPosition(t),a.setFromMatrixPosition(e),u.makeTranslation(o.x,o.y,o.z),u.lookAt(o,a,r||s),u.decompose(l,h,c),t.decompose(o,d,f),t.compose(o,h,f)}e.a=n;var i=r(1),a=(r.n(i),new i.Vector3),o=new i.Vector3,s=new i.Vector3(0,1,1),u=new i.Matrix4,l=new i.Vector3,c=new i.Vector3,h=new i.Quaternion,f=new i.Vector3,d=new i.Quaternion},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e,r){var n=r(223),i=r(149);t.exports=Object.keys||function(t){return n(t,i)}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,r){var n=r(54);t.exports=function(t){return Object(n(t))}},function(t,e){var r=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+n).toString(36))}},function(t,e,r){t.exports={default:r(418),__esModule:!0}},function(t,e){t.exports={}},function(t,e,r){var n=r(114);t.exports=function(t){return Object(n(t))}},function(t,e,r){"use strict";var n=r(450)(!0);r(151)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=n(e,r),this._i+=t.length,{value:t,done:!1})})},function(t,e,r){var n=r(15)("unscopables"),i=Array.prototype;void 0==i[n]&&r(35)(i,n,{}),t.exports=function(t){i[n][t]=!0}},function(t,e){t.exports=function(t,e,r,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(r+": incorrect invocation!");return t}},function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e){t.exports={}},function(t,e){t.exports=!1},function(t,e,r){var n=r(239),i=r(168);t.exports=Object.keys||function(t){return n(t,i)}},function(t,e,r){var n=r(57);t.exports=function(t,e,r){for(var i in e)n(t,i,e[i],r);return t}},function(t,e,r){var n=r(23).f,i=r(27),a=r(15)("toStringTag");t.exports=function(t,e,r){t&&!i(t=r?t:t.prototype,a)&&n(t,a,{configurable:!0,value:e})}},function(t,e,r){var n=r(82),i=Math.max,a=Math.min;t.exports=function(t,e){return t=n(t),t<0?i(t+e,0):a(t,e)}},function(t,e){var r=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:r)(t)}},function(t,e){var r=window.MathUtil||{};r.degToRad=Math.PI/180,r.radToDeg=180/Math.PI,r.Vector2=function(t,e){this.x=t||0,this.y=e||0},r.Vector2.prototype={constructor:r.Vector2,set:function(t,e){return this.x=t,this.y=e,this},copy:function(t){return this.x=t.x,this.y=t.y,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}},r.Vector3=function(t,e,r){this.x=t||0,this.y=e||0,this.z=r||0},r.Vector3.prototype={constructor:r.Vector3,set:function(t,e,r){return this.x=t,this.y=e,this.z=r,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var t=this.length();if(0!==t){var e=1/t;this.multiplyScalar(e)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(t){this.x*=t,this.y*=t,this.z*=t},applyQuaternion:function(t){var e=this.x,r=this.y,n=this.z,i=t.x,a=t.y,o=t.z,s=t.w,u=s*e+a*n-o*r,l=s*r+o*e-i*n,c=s*n+i*r-a*e,h=-i*e-a*r-o*n;return this.x=u*s+h*-i+l*-o-c*-a,this.y=l*s+h*-a+c*-i-u*-o,this.z=c*s+h*-o+u*-a-l*-i,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},crossVectors:function(t,e){var r=t.x,n=t.y,i=t.z,a=e.x,o=e.y,s=e.z;return this.x=n*s-i*o,this.y=i*a-r*s,this.z=r*o-n*a,this}},r.Quaternion=function(t,e,r,n){this.x=t||0,this.y=e||0,this.z=r||0,this.w=void 0!==n?n:1},r.Quaternion.prototype={constructor:r.Quaternion,set:function(t,e,r,n){return this.x=t,this.y=e,this.z=r,this.w=n,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},setFromEulerXYZ:function(t,e,r){var n=Math.cos(t/2),i=Math.cos(e/2),a=Math.cos(r/2),o=Math.sin(t/2),s=Math.sin(e/2),u=Math.sin(r/2);return this.x=o*i*a+n*s*u,this.y=n*s*a-o*i*u,this.z=n*i*u+o*s*a,this.w=n*i*a-o*s*u,this},setFromEulerYXZ:function(t,e,r){var n=Math.cos(t/2),i=Math.cos(e/2),a=Math.cos(r/2),o=Math.sin(t/2),s=Math.sin(e/2),u=Math.sin(r/2);return this.x=o*i*a+n*s*u,this.y=n*s*a-o*i*u,this.z=n*i*u-o*s*a,this.w=n*i*a+o*s*u,this},setFromAxisAngle:function(t,e){var r=e/2,n=Math.sin(r);return this.x=t.x*n,this.y=t.y*n,this.z=t.z*n,this.w=Math.cos(r),this},multiply:function(t){return this.multiplyQuaternions(this,t)},multiplyQuaternions:function(t,e){var r=t.x,n=t.y,i=t.z,a=t.w,o=e.x,s=e.y,u=e.z,l=e.w;return this.x=r*l+a*o+n*u-i*s,this.y=n*l+a*s+i*o-r*u,this.z=i*l+a*u+r*s-n*o,this.w=a*l-r*o-n*s-i*u,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var r=this.x,n=this.y,i=this.z,a=this.w,o=a*t.w+r*t.x+n*t.y+i*t.z;if(o<0?(this.w=-t.w,this.x=-t.x,this.y=-t.y,this.z=-t.z,o=-o):this.copy(t),o>=1)return this.w=a,this.x=r,this.y=n,this.z=i,this;var s=Math.acos(o),u=Math.sqrt(1-o*o);if(Math.abs(u)<.001)return this.w=.5*(a+this.w),this.x=.5*(r+this.x),this.y=.5*(n+this.y),this.z=.5*(i+this.z),this;var l=Math.sin((1-e)*s)/u,c=Math.sin(e*s)/u;return this.w=a*l+this.w*c,this.x=r*l+this.x*c,this.y=n*l+this.y*c,this.z=i*l+this.z*c,this},setFromUnitVectors:function(){var t,e;return function(n,i){return void 0===t&&(t=new r.Vector3),e=n.dot(i)+1,e<1e-6?(e=0,Math.abs(n.x)>Math.abs(n.z)?t.set(-n.y,n.x,0):t.set(0,-n.z,n.y)):t.crossVectors(n,i),this.x=t.x,this.y=t.y,this.z=t.z,this.w=e,this.normalize(),this}}()},t.exports=r},function(t,e,r){"use strict";e.__esModule=!0;var n=r(2),i=function(t){return t&&t.__esModule?t:{default:t}}(n);e.default=i.default||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}},function(t,e,r){"use strict";function n(t){return function(e){return e.id===t||e.name===t}}function i(t){var e=t.id,n=t.form,i=t.preset,o=t.el,s=t.productTour,u=t.configuration;return function(t){var l=e||r.i(mt.a)(t),c=n&&("object"===(void 0===n?"undefined":rt()(n))?b(n,{attributes:D(t,{id:l})}):O(t,n,{id:l})),h=void 0;o&&(o.innerHTML="",h=document.createElement("div"),o.appendChild(h)),t.dispatch({type:"INIT_CONFIGURATOR",payload:{form:"object"===(void 0===n?"undefined":rt()(n))?c:n,el:h,productTour:s,sceneId:l}}),i&&t.dispatch(g(it()({},i,!0),{id:l})),u&&t.dispatch(g(u,{id:l})),c&&t.dispatch(a({id:l,form:c}))}}function a(t){var e=t.id,n=t.form;return function(t){var i=e||r.i(mt.a)(t),a=B(t,{id:i}),o=n.fields.reduce(function(t,e){return void 0===a[e.attribute.name]&&void 0!==e.attribute.defaultValue&&(t[e.attribute.name]=e.attribute.defaultValue),t},{});t.dispatch(g(o,{id:i}))}}function o(t,e,n){var i=[];if("string"==typeof e)i=r.i(ht.e)(t,r.i(gt.b)(e,{from:n,skipModels:!0}));else if(Array.isArray(e)){var a=e.map(function(e){return""===e?[]:r.i(gt.a)(e)?[r.i(ht.d)(t,{id:e})]:r.i(ht.e)(t,r.i(gt.b)(e,{from:n,skipModels:!0}))});a.forEach(function(t){return i=i.concat(t)})}return i=i.filter(function(t){return!!t})}function s(t,e){var n=t.tags,i=t.value,a=e.id;return function(t){var e=o(t,n,a);return tt.a.all(e.map(function(e){return t.dispatch(r.i(ht.c)({id:e,plug:"Properties",property:"visible",skipModels:!0},Boolean(i)))}))}}function u(t,e){var n=t.tags,i=t.value,a=e.id;return function(t){var e=r.i(gt.a)(n)?r.i(ht.d)(t,{id:n}):r.i(ht.d)(t,{from:a,name:n,type:"Annotation"});return e?t.dispatch(i?r.i(ft.a)(e):r.i(ft.b)(e)):tt.a.resolve(!0)}}function l(t,e){var n=t.tags,i=t.value,a=void 0===i?500:i,o=e.id;return function(t){var e=r.i(gt.a)(n)?r.i(ht.d)(t,{id:n}):r.i(ht.d)(t,{from:o,name:n,type:"Camera"});return e?t.dispatch(r.i(dt.i)(e,Number(a))):tt.a.resolve(!0)}}function c(t,e){var n=t.tags,i=t.value,a=e.id;return function(t){var e=r.i(gt.a)(i)?i:r.i(ht.d)(t,{from:a,type:"Material",name:i});if(!e)return tt.a.resolve(!0);var s=o(t,n,a);return tt.a.all(s.map(function(n){return t.dispatch(r.i(ht.c)({id:n,plug:"Material",property:"reference"},e))}))}}function h(t,e){var n=t.tags;e.id;return function(t){var e=r.i(pt.c)(t),i=(Array.isArray(n)?n:[n]).map(function(t){return e.find(function(e){return e.name===t})}).filter(function(t){return!!t});return tt.a.all(i.map(function(e){return t.dispatch(r.i(pt.d)(e.id,{autoplay:!0}))}))}}function f(t,e){var n=t.tags,i=t.value,a=e.id;return function(t){if(n&&3===n.split("[").length){var e=r.i(gt.b)(n,{from:a,skipModels:!0});t.dispatch(r.i(ht.h)(e,i))}}}function d(t,e){var r=t.tags,n=t.value;return g(it()({},r,n),e)}function p(t,e){var r=t.tags,n=t.value;return F({hidden:it()({},r,!n)},e)}function m(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return e.prop.set(void 0==r?B(t,n)[e.name]:r)}function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(i){var a=e.id||r.i(mt.a)(i),o=D(i,{id:a}),s=e.form||R(i);return tt.a.all(J()(t).map(function(e){var r=o.find(n(e));if(!r)return tt.a.reject(new Error("Attribute: "+e+" does not exist"));var u=m(i,r,t[e],{id:a}),l=s&&s.fields.find(function(t){return t.attributeId===r.id});i.dispatch({type:Et,payload:{id:a,attribute:r,value:u,formInfo:l}});var c=(r.actions||[]).concat(r.valueActions&&r.valueActions[u]||[]);return tt.a.all(c.map(function(t){var e=t.action,n=t.tags,o=t.value,s=t.variable,u=s&&(r.id===r?r:N(i,s,{id:a})),l=u?m(i,u,null,{id:a}):o,c=jt[e];return c&&""!==n&&i.dispatch(c({tags:n,value:l},{id:a}))}))}))}}function v(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return g(it()({},t,e),r)}function y(t,e){return console.log("DEPRECATED, use `executeAttribute`"),g(it()({},t,e))}function M(t){return{Number:0,Boolean:!1,Color:{a:1,b:0,g:0,r:0}}[t]}function w(t){var e=("Option"===t.type?"Options":t.type)||"Options",r={id:t.id||ut()(),name:t.name,type:e},n="";"Options"===e?(r.values=(t.values||[]).map(function(t){return t.name}),n=r.values[0],r.valueActions={},(t.values||[]).forEach(function(t){r.valueActions[t.name]=t.actions||[]})):"Boolean"===e&&(r.values=[!0,!1],r.valueActions=t.valueActions||{true:[],false:[]}),n=n||M(e),r.defaultValue=void 0===t.value?n:t.value,r.actions=t.actions||[];var i=yt.a[e];if(!i)throw new Error("Invalid attribute type for configuration: "+e);return r.prop=i(r),r}function x(t){var e=t.type,r={id:t.id||ut()(),name:t.name,type:e},n="";"Options"===e?(r.values=t.values||[],n=r.values[0],r.valueActions=t.valueActions||{},(t.values||[]).forEach(function(t){r.valueActions[t.name]=t.actions||[]})):"Boolean"===e?(r.values=[!0,!1],r.valueActions=t.valueActions||{true:[],false:[]}):"Number"===e&&(r.minValue=t.minValue||0,r.maxValue=t.maxValue||100,r.step=t.step||1),n=n||M(e),r.defaultValue=void 0===t.defaultValue?n:t.defaultValue,r.actions=t.actions||[];var i=yt.a[e];if(!i)throw new Error("Invalid attribute type for configuration: "+e);return r.prop=i(r),r}function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.meta||{},i={id:t.id||ut()(),name:t.name||"Form1",type:"Form",meta:{displayAs:r.displayAs||"all"}};return i.steps=(t.steps||[]).map(function(t){return{title:t.title||"Step",description:t.description||"",formId:t.formId||""}}),i.fields=(t.fields||t.values||[]).map(function(t){var r=t.bom,i=t.displayAs,a=t.optionId,o=t.attributeId,s={bom:r,displayAs:i,attributeId:o};return a&&(s.attributeId=a),e.attributes&&(s.attribute=e.attributes.find(n(s.attributeId))),s}),i}function T(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.title,r=t.handle,n=t.price,i=t.options,a=t.variants;return{title:e||r,handle:r,price:n||null,options:i||[],variants:a||[{}]}}function E(){return{attributes:[],forms:[]}}function S(t,e){var n=r.i(ht.a)(t,{id:e,plug:"Player",property:"configurator"});try{n=JSON.parse(n)}catch(t){n=E()}return n}function _(t,e){return{type:Rt,payload:{id:t,config:e}}}function A(t){t&&Array.isArray(t)&&(t={options:t}),t.options||t.attributes||(t=E());var e=function(t){return"Display"!==t.type&&"Preset"!==t.type&&"ProductTour"!==t.type};return{attributes:t.attributes?t.attributes.map(x):t.options.filter(e).map(w),forms:(t.forms||t.options.filter(function(t){return"Display"===t.type})).map(b)}}function D(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.id||r.i(mt.a)(t);return t.getIn(["configuration","configs",n,"attributes"])||[]}function N(t,e){return D(t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).find(n(e))}function I(t,e){return D(t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).filter(function(t){return t.type===e})}function L(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.id||r.i(mt.a)(t);return t.getIn(["configuration","configs",n,"forms"])||[]}function C(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.id||r.i(mt.a)(t),i=t.getIn(["configuration","formState",n]);return i?i.toJS():{}}function O(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.id||r.i(mt.a)(t),o=e&&L(t,{id:a}).find(n(e)),s=D(t,{id:a});return(o?o.fields:[]).forEach(function(t){t.attribute=s.find(n(t.attributeId))}),o||!0!==e||(o={id:ut()(),name:"All",type:"Form",fields:s.map(function(t){return{name:t.name,attributeId:t.id,attribute:t}}),steps:[],meta:{displayAs:"all"}}),o&&(o.nodeId=a),o}function R(t){var e=t.getIn(["configuration","activeForm"]);return e?"object"===(void 0===e?"undefined":rt()(e))?e:O(t,e,{id:t.getIn(["configuration","activeSceneId"])||r.i(mt.a)(t)}):null}function z(t){var e=t.getIn(["configuration","productTour"]),r=e&&N(t,e);return r&&"Options"===r.type?r:null}function j(t){return t.getIn(["configuration","products"]).toList().toArray()}function P(t,e){return t.getIn(["configuration","products",e])}function U(t){return t.getIn(["configuration","externalEl"])}function B(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.id||r.i(mt.a)(t),i=t.getIn(["configuration","configuration",n]);return i?i.toJS():{}}function V(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(i){var a=n.id||r.i(mt.a)(i);return i.dispatch({type:Tt,payload:{attrId:t,id:a,attrs:e,key:"attributes"}})}}function F(t,e){return function(n){var i=e.id||r.i(mt.a)(n);return n.dispatch({type:It,payload:{attrs:t,id:i}})}}function k(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.handle?{type:Lt,payload:T(t)}:tt.a.reject("Required product handle")}function G(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:Ot,payload:t}}function Y(t){return{type:Ct,payload:t}}function H(t,e){var r=function(e){var r=t.find(function(t){return t.handle===e});return r||t.push(T({handle:e})),r||t[t.length-1]};return{"set-product":function(t){var n=t.tags;if(n){var i=t.value,a=r(n);e[n]?e[n].quantity=i:e[n]={product:a,quantity:i,variant:a.variants[0]}}},"select-variant":function(t,n,i){var a=t.tags;if(a){var o=r(a);e[a]||(e[a]={product:o,quantity:1,options:[]});var s=e[a];s.options||(s.options=[]);var u=o.options.findIndex(function(t){return t.name===n.name});u>=0&&(s.options[u]=i);var l=o.variants.find(function(t){for(var e=!0,r=0;r<o.options.length;r++)e=e&&t.options[r]===s.options[r];return e});s.variant=l}},"select-quantity":function(t,n,i){var a=t.tags;if(a){var o=r(a),s="Boolean"===n.type?i?1:0:Number(i);e[a]=ot()(e[a]||{},{product:o,quantity:s}),e[a].variant||(e[a].variant=o.variants[0])}}}}function Q(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.id||r.i(mt.a)(t),i=B(t,{id:n}),a=e.all?O(t,!0,{id:n}):R(t),o=j(t),s={form:a&&a.name,products:o,properties:a?a.fields.reduce(function(t,e){return t[e.attribute.name]=""+i[e.attribute.name],t},{}):{},items:[]};if(!a)return s;var u={},l=H(o,u);return a.fields.forEach(function(t){var e=t.attribute,r=e.name,n=i[r];(e.actions||[]).concat(e.valueActions&&e.valueActions[n]||[]).forEach(function(t){l[t.action]&&l[t.action](t,e,n)})}),s.items=q()(u).filter(function(t){return t.quantity&&t.variant}),s.price=0,s.items.forEach(function(t){var e=t.variant,r=t.quantity,n=t.product,i=e&&void 0!==e.price?e.price:n.price;"number"==typeof i&&(s.price+=i*r)}),s}e.c=i,e.j=a,e.h=v,e.a=_,e.d=L,e.g=C,e.i=O,e.b=R,e.k=z,e.e=U,e.f=B;var W,X=r(112),q=r.n(X),Z=r(52),K=(r.n(Z),r(6)),J=r.n(K),$=r(37),tt=r.n($),et=r(40),rt=r.n(et),nt=r(19),it=r.n(nt),at=r(2),ot=r.n(at),st=r(254),ut=r.n(st),lt=r(24),ct=(r.n(lt),r(36)),ht=r(5),ft=r(104),dt=r(3),pt=r(61),mt=r(17),gt=r(86),vt=r(60),yt=r(185),Mt=r.i(lt.Map)({configuration:r.i(lt.Map)(),configs:r.i(lt.Map)(),savingSceneId:null,history:r.i(lt.List)(),savedConfig:r.i(lt.Map)(),activeForm:null,externalEl:null,formState:r.i(lt.Map)(),productTour:null,products:r.i(lt.Map)(),saving:!1,numSaveErrors:0}),wt=function(){return r.i(lt.Map)({hidden:{}})},xt="ADD_CONFIG",bt="DEL_CONFIG",Tt="SET_CONFIG",Et="SET_CONFIGURATION",St="SET_SAVING_SCENE_ID",_t="CONFIG_UNDO",At="CONFIG_SAVING",Dt="CONFIG_SAVED",Nt="CONFIG_SAVE_ERROR",It="SET_CONFIGURATOR_FORM_STATE",Lt="ADD_PRODUCT",Ct="DEL_PRODUCT",Ot="SET_PRODUCT",Rt="INITIALIZE_CONFIGURATION",zt=r.i(ct.a)(Mt,(W={},it()(W,vt.i,function(t,e){var n=e.id,i=e.store,a=A(S(i,n)),o=a.attributes,s=a.forms;return t.setIn(["configs",n],r.i(lt.Map)({attributes:o,forms:s}))}),it()(W,Rt,function(t,e){var n=e.id,i=e.config,a=i;try{"string"==typeof i&&(a=JSON.parse(i))}catch(t){a={}}var o=A(a),s=o.attributes,u=o.forms;return t.setIn(["configs",n],r.i(lt.Map)({attributes:s,forms:u}))}),it()(W,Et,function(t,e,n){var i=e.id,a=e.attribute,o=e.value,s=e.formInfo;(0,n.createEvent)("configurationChange",a,o,{field:s,id:i});var u=t.getIn(["configuration",i])||r.i(lt.Map)();return t.setIn(["configuration",i],u.set(a.name,o))}),it()(W,vt.e,function(t){return Mt}),it()(W,xt,function(t,e){var r=e.id,n=e.key,i=e.attrs,a=t.getIn(["configs",r]),o=t.get("savingSceneId")!==r?t:t.set("history",t.get("history").push(a)),s=[].concat(a.get(n));return s.push(i),o.setIn(["configs",r],a.set(n,s))}),it()(W,Tt,function(t,e){var r=e.attrId,i=e.key,a=e.id,o=e.attrs,s=t.getIn(["configs",a]),u=t.get("savingSceneId")!==a?t:t.set("history",t.get("history").push(s)),l=[].concat(s.get(i)),c=l.findIndex(n(r));return l[c]=ot()({},l[c],o),u.setIn(["configs",a],s.set(i,l))}),it()(W,bt,function(t,e){var r=e.id,i=e.attrId,a=e.key,o=t.getIn(["configs",r]),s=t.get("savingSceneId")!==r?t:t.set("history",t.get("history").push(o)),u=[].concat(o.get(a)),l=u.findIndex(n(i));u.splice(l,1);var c=o.set(a,u);return"attributes"===a&&(c=c.set("forms",o.get("forms").map(function(t){var e=ot()({},t);return e.fields=[].concat((t.fields||[]).filter(function(t){return t.attributeId!==i})),e}))),s.setIn(["configs",r],c)}),it()(W,St,function(t,e){var n=t.getIn(["configs",e]);return t.set("savingSceneId",e).set("history",r.i(lt.List)([])).set("savedConfig",n)}),it()(W,_t,function(t){var e=t.get("savingSceneId"),r=t.get("history");return e&&0!==r.size?t.setIn(["configs",e],r.last()).set("history",r.butLast()):t}),it()(W,At,function(t){return t.set("saving",!0)}),it()(W,Nt,function(t){return t.set("saving",!1).set("numSaveErrors",t.get("numSaveErrors")+1)}),it()(W,Dt,function(t,e){return t.set("saving",!1).set("savedConfig",e).set("numSaveErrors",0)}),it()(W,"INIT_CONFIGURATOR",function(t,e){var r=e.productTour,n=e.form,i=e.el,a=e.sceneId,o=t.getIn(["formState",a])||wt();return t.set("activeSceneId",a).set("activeForm",n).set("externalEl",i).set("productTour",r).setIn(["formState",a],o)}),it()(W,It,function(t,e){var n=e.attrs,i=e.id,a=t.getIn(["formState",i])||wt(),o=n.hidden;return t.setIn(["formState",i],r.i(lt.Map)({hidden:ot()({},a.get("hidden"),o)}))}),it()(W,Lt,function(t,e){return t.setIn(["products",e.handle],e)}),it()(W,Ot,function(t,e){var r=t.getIn(["products",e.handle]);return t.setIn(["products",e.handle],ot()({},r,e))}),it()(W,Ct,function(t,e){return t.deleteIn(["products",e])}),W)),jt={"set-visibility":s,"annotation-visibility":u,"set-property":f,"assign-material":c,"move-camera":l,"play-clip":h,"set-variable":d,"set-form-field-visibility":p},Pt={reducer:zt,actions:{executeAttribute:v,executeVariant:y,initConfigurator:i,addProduct:k,setAttribute:V,setProduct:G,deleteProduct:Y,setConfiguration:g},selectors:{getAttribute:N,getAttributes:D,getAttributesByType:I,getForm:O,getForms:L,getConfiguration:B,getBOM:Q,getActiveForm:R,getExternalEl:U,getProduct:P,getProducts:j,getProductTour:z,getFormState:C}};e.l=Pt},function(t,e,r){"use strict";function n(t){return w.test(t)}function i(t){return t instanceof RegExp?t:(t=t.replace(/\*/g,"(.*)").replace(/^\"|\"$/g,""),new RegExp("^"+t+"$","i"))}function a(t){for(var e,r,n=void 0,i=void 0;null!==(r=E.exec(t));)e=r[1].split("="),2===e.length?(i||(i={}),i[e[0]]=e[1]):n=e[0];return{property:n,properties:i}}function o(t,e){var r="~"===t[0],o=!r&&'"'===t[0]&&t.slice(1).indexOf('"'),s=o&&-1!==o,u=s||r?T.exec(t.slice(r?1:o+2)):b.exec(t),l=s?t.slice(1,o+1):!r&&u[1],c=u[2],h=u[3],f=u[4],d=u[5],p=u[6],m=n(l)?l:void 0,g=M()({scene:r,id:m,name:m||!l?void 0:i(l),type:c,filter:h,evalPlug:f,plug:d},a(p),{includeParent:!0});return g.name&&(g._name=l),M()(g,e),g}function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof t?o(t,e):"object"===(void 0===t?"undefined":v()(t))?M()({},t,{name:t.name?i(t.name):void 0,names:t.names&&Array.isArray(t.names)?t.names.map(i):void 0,includeParent:void 0===t.includeParent?!t.from:t.includeParent},e):{}}function u(t,e,r){var n=l(t,e);return n?r?n.id:h(t,e):null}function l(t,e){if(void 0!==e.id&&e.id!==t.id)return null;if(void 0!==e.name&&!e.name.test(t.name))return null;if(void 0!==e.type)if("string"==typeof e.type){if(e.type!==t.type)return null}else if(Array.isArray(e.type)&&-1===e.type.indexOf(t.type))return null;return void 0===e.hasPlug||t.plugs[e.hasPlug]?t:null}function c(t,e){for(var r=m()(t),n=0;n<r.length;n++)if(e[r[n]]!==t[r[n]])return!1;return!0}function h(t,e){var r=e.properties,n=e.property,i=e.operator,a=e.operatorIndex;if(e.evalPlug)return n?[t.id,"eval",e.evalPlug,n]:[t.id,"eval",e.evalPlug];if(!e.plug)return"name"===n||"type"===n?[t.id,n]:t.id;var o=t.plugs[e.plug];if(!o)return null;if(!r&&!n&&!i&&void 0===a)return t.id;var s=void 0!==e.operatorIndex?e.operatorIndex:o.findIndex(function(t){return(!n||t.hasOwnProperty(n))&&(!r||c(r,t))});return-1===s?null:n?[t.id,e.plug,s,n]:[t.id,e.plug,s]}function f(t,e,r,n){var i=[],a=t.get("sceneGraph"),o=n&&u(n,r);return o&&i.push(o),(e.children||[]).forEach(function(n){var o=a.nodes[n];if(!o)throw new Error("Invalid child for '"+e.get("name")+"' - "+n);var s=u(o,r);s&&i.push(s),r.shallow||r.skipModels&&"Model"===o.type||(i=i.concat(f(t,o,r)))}),i}function d(t,e,r,n,i){var a=void 0;if(n&&(a=u(n,r,i)))return a;var o=t.get("sceneGraph"),s=M()({},r);return s.names&&(s.name=s.names[0],s.names=s.names.slice(1)),(e.children||[]).find(function(e){var r=o.nodes[e];if(a=u(r,s,i||s.names&&s.names.length),s.names){if(!a||!s.names.length)return!!a;if(a=d(t,r,s,null,i))return!0}else{if(a)return!0;if(a=!s.shallow&&d(t,r,s,null,i))return!0}})?a:null}e.a=n,e.b=s,e.d=u,e.e=f,e.c=d;var p=r(6),m=r.n(p),g=r(40),v=r.n(g),y=r(2),M=r.n(y),w=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,x={bareName:"^([^!%[#:]*)*",type:"(?:%([^#!:]*))*",filter:"(?::([^#:]*))*",evalPlug:"(?:!([^#[]*))*",plugName:"(?:#([^[]*))*",attrs:"(.*)"},b=new RegExp(x.bareName+x.type+x.filter+x.evalPlug+x.plugName+x.attrs),T=new RegExp("()"+x.type+x.filter+x.evalPlug+x.plugName+x.attrs),E=/(?:\[([^\]]*)\])/g},function(t,e,r){"use strict";function n(t){for(var e=t.positions.faceRangeOffsets,n=t.positions.faceValueIndices,i=t.positions.values,a=t.positions.valueAdjacency,o=new Uint32Array(n.length),s=new d.a(c.Vector3,n.length),u=new c.Vector3,l=new c.Vector3,m=new c.Vector3,g=0;g<e.length;g++)for(var v=e[g];v<e[g+1];v++){var y=a.getAdjacentFaceValuesIndicesOnFace(v,g);i.getAt(n[v],m),u.multiplyScalar(0),l.multiplyScalar(0),2===y.length&&(i.getAt(n[y[0]],u),i.getAt(n[y[1]],l),u.subVectors(m,u),l.subVectors(m,l),m.copy(l.cross(u))),m.normalize(),o[v]=v,s.setAt(v,m)}var M=new f.a({faceRangeOffsets:t.positions.faceRangeOffsets,faceValueIndices:o,values:s}),w=new h.a(t);return w.normalMap=M,r.i(p.a)(w)}function i(t){for(var e=t.positions.faceValueIndices,r=t.positions.values,n=t.positions.valueAdjacency,i=new c.Vector3,a=new c.Vector3,s=new c.Vector3,u=new c.Vector3,l=new d.a(c.Vector3,r.length),p=0;p<r.length;p++){for(var m=n.getNumFacesForVertex(p),g=[],v=0;v<m;v++)g.push(n.getFaceForVertexId(p,v));r.getAt(p,u),s.multiplyScalar(0),i.multiplyScalar(0),a.multiplyScalar(0);for(var y=0;y<g.length;y++){var M=n.getAdjacentFaceValuesIndicesOnFace(o(t,p,g[y]),g[y]);2===M.length&&(r.getAt(e[M[0]],i),r.getAt(e[M[1]],a),i.subVectors(u,i),a.subVectors(u,a),s.add(a.cross(i)))}s.normalize(),l.setAt(p,s)}var w=new f.a({faceRangeOffsets:t.positions.faceRangeOffsets,faceValueIndices:t.positions.faceValueIndices,values:l}),x=new h.a(t);return x.normalMap=w,x}function a(t,e){e=e||30;for(var r=t,n=e*c.Math.DEG2RAD,i=r.faceRangeOffsets,a=r.positions.faceValueIndices,s=r.positions.values,u=new Uint32Array(r.positions.faceValueIndices.length),l=[],p=new c.Vector3,m=new c.Vector3,g=new c.Vector3,v=r.positions.valueAdjacency,y=r.positions.faceFaceAdjacency,M=0,w=0;w<s.length;w++){var x=v.getNumFacesForVertex(w),b=[],T=[];s.getAt(w,g);for(var E=0;E<x;E++)b.push(v.getFaceForVertexId(w,E)),T.push(-1);for(var S=0;S<b.length;S++)if(!(T[S]>-1)){var _=b[S],A=y.adjacentFacesOnVertex(b[S],w),D=[];D.push(_);for(var N=_,I=A[0],L=-1,C=0;C<A.length;C++){for(var O=0;O<b.length;O++){var R=v.getAdjacentFaceValuesIndicesOnFace(o(r,w,N),N);s.getAt(a[R[0]],p),s.getAt(a[R[1]],m),p.subVectors(g,p),m.subVectors(g,m);var z=(new c.Vector3).copy(m.cross(p));z.normalize();var j=v.getAdjacentFaceValuesIndicesOnFace(o(r,w,I),I);s.getAt(a[j[0]],p),s.getAt(a[j[1]],m),p.subVectors(g,p),m.subVectors(g,m);var P=(new c.Vector3).copy(m.cross(p));P.normalize();var U=z.dot(P);if(I===_||T[b.indexOf(I)]>-1||Math.acos(U)>n)break;D.push(I);var B=y.adjacentFacesOnVertex(I,w);if(B.length<2)break;L=B[0]===N?B[1]:B[0],N=I,I=L}N=_,I=A[1],L=-1}for(var V=new c.Vector3,F=0;F<D.length;F++){!function(t,e,r){for(var n=[],o=i[e];o<i[e+1];o++)if(n.push(a[o]),a[o]===t)return void(u[o]=r);console.error("index "+t+" is not on face "+e,n)}(w,D[F],M),T[b.indexOf(D[F])]=M;var k=v.getAdjacentFaceValuesIndicesOnFace(o(r,w,D[F]),D[F]);2===k.length&&(s.getAt(a[k[0]],p),s.getAt(a[k[1]],m),p.subVectors(g,p),m.subVectors(g,m),V.add(m.cross(p)))}V.normalize(),l.push(V),D.length>0&&M++}}for(var G=new d.a(c.Vector3,l.length),Y=0;Y<l.length;Y++)G.setAt(Y,l[Y]);var H=new f.a({faceRangeOffsets:r.faceRangeOffsets,faceValueIndices:u,values:G}),Q=new h.a(r);return Q.normalMap=H,Q}function o(t,e,r){for(var n=t.faceRangeOffsets,i=t.positions.faceValueIndices,a=n[r];a<n[r+1];a++)if(i[a]===e)return a;return-1}function s(t){if(!t||!t.normalMap||!t.normalMap.faceValueIndices)return t;for(var e=t.faceRangeOffsets,r=t.positions.faceValueIndices,n=t.normalMap.faceValueIndices,i=t.positions.values,a=new d.a(c.Vector3,t.normalMap.values.length),o=new c.Vector3,s=new c.Vector3,u=new c.Vector3,l=0;l<e.length-1;l++){i.getAt(r[e[l]],s),i.getAt(r[e[l]+1],o),i.getAt(r[e[l]+2],u),s.subVectors(o,s),u.subVectors(o,u),o.copy(u.cross(s));for(var f=e[l];f<e[l+1];f++)a.getAt(n[f],s),a.setAt(n[f],s.add(o))}for(var p=0;p<a.length;p++)a.getAt(p,o),o.normalize(),a.setAt(p,o);var m=new h.a(t);return m.normalMap.values=a,m}e.c=n,e.b=s;var u=r(2),l=r.n(u),c=r(1),h=(r.n(c),r(9)),f=r(7),d=r(4),p=r(137),m={Default:-1,Average:0,Flat:1,AutoSmooth:2,NoNormals:3,FromConnectivity:4},g={schema:{normalTypes:{label:"Normal Type",type:"Number",defaultValue:m.Default},smoothingAngle:{label:"Smooth Angle",type:"Number",defaultValue:30,step:1,minValue:0,maxValue:180},flipfaces:{label:"Flip Faces",type:"Boolean",defaultValue:!1}},update:function(t,e){var r=t.normalTypes,o=(t.flipfaces,t.smoothingAngle),u=e.mesh;if(!u)return e;switch(r){case m.NoNormals:u=l()({},u),u.normalMap=null,u=new h.a(u);break;case m.Flat:u=n(u);break;case m.Average:u=i(u);break;case m.AutoSmooth:u=a(u,o);break;case m.FromConnectivity:u=s(u);break;case m.Default:default:return e}return e.mesh=u,e}};e.a=g},function(t,e,r){"use strict";function n(t,e,r){u.a.call(this,e||Float32Array),this.elementSize=r||t.InstanceScalarSize,this.type=t}e.a=n;var i=r(69),a=r.n(i),o=r(2),s=r.n(o),u=r(188),l=r(4);n.prototype=s()(a()(u.a.prototype),{constructor:n,toObjectArrayViewAndClear:function(){return new l.a(this.type,null,this.toArrayAndClear())},getAt:function(t,e){var r=e||new this.type,n=t>>this.intraBlockIndexBits,i=t&this.intraBlockIndexMask;return r.fromArray(this.blocks[n],i*this.elementSize)},setAt:function(t,e){var r=t>>this.intraBlockIndexBits,n=t&this.intraBlockIndexMask;e.toArray(this.blocks[r],n*this.elementSize)},push:function(t){var e=this.length++,r=this.lastBlock,n=e&this.intraBlockIndexMask;if(0===n){var i=this.intraBlockIndexMask+1;r=new this.arrayType(i*this.elementSize),this.lastBlock=r,this.blocks.push(r)}return t.toArray(r,n*this.elementSize),e+1}})},function(t,e,r){"use strict";function n(t,e){var n=r.i(o.a)(t,{scene:!0,evalPlug:"Player"}),i=r.i(o.a)(t,{id:e,evalPlug:"Properties"});return n.overrideNavigation?n.orbitMode:i.orbitMode}function i(t,e){var n=r.i(o.a)(t,{scene:!0,evalPlug:"Player"}),i=r.i(o.a)(t,{id:e,evalPlug:"Properties"});return n.overrideNavigation?n.constraintCameraY:i.constraintCameraY}function a(t,e,n){var i={scene:!0,plug:"Player"},a={id:e,plug:"Properties"},s=r.i(o.a)(t,{scene:!0,plug:"Player",property:"overrideNavigation"}),u=s?i:a;return r.i(o.c)(u,n)}e.a=n,e.b=i,e.c=a;var o=r(5)},function(t,e,r){"use strict";function n(t,e){var r={};return a()(e).forEach(function(n,i){r[n]=t(e[n],n,i)}),r}e.a=n;var i=r(6),a=r.n(i)},function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,r){var n=r(34).f,i=r(64),a=r(22)("toStringTag");t.exports=function(t,e,r){t&&!i(t=r?t:t.prototype,a)&&n(t,a,{configurable:!0,value:e})}},function(t,e,r){r(455);for(var n=r(26),i=r(53),a=r(70),o=r(22)("toStringTag"),s=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],u=0;u<5;u++){var l=s[u],c=n[l],h=c&&c.prototype;h&&!h[o]&&i(h,o,l),a[l]=a.Array}},function(t,e,r){var n=r(45),i=r(170),a=r(67),o=r(28),s=r(475);t.exports=function(t,e){var r=1==t,u=2==t,l=3==t,c=4==t,h=6==t,f=5==t||h,d=e||s;return function(e,s,p){for(var m,g,v=a(e),y=i(v),M=n(s,p,3),w=o(y.length),x=0,b=r?d(e,w):u?d(e,0):void 0;w>x;x++)if((f||x in y)&&(m=y[x],g=M(m,x,v),t))if(r)b[x]=g;else if(g)switch(t){case 3:return!0;case 5:return m;case 6:return x;case 2:b.push(m)}else if(c)return!1;return h?-1:l||c?c:b}}},function(t,e){var r=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},function(t,e,r){var n=r(68)("meta"),i=r(14),a=r(27),o=r(23).f,s=0,u=Object.isExtensible||function(){return!0},l=!r(20)(function(){return u(Object.preventExtensions({}))}),c=function(t){o(t,n,{value:{i:"O"+ ++s,w:{}}})},h=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,n)){if(!u(t))return"F";if(!e)return"E";c(t)}return t[n].i},f=function(t,e){if(!a(t,n)){if(!u(t))return!0;if(!e)return!1;c(t)}return t[n].w},d=function(t){return l&&p.NEED&&u(t)&&!a(t,n)&&c(t),t},p=t.exports={KEY:n,NEED:!1,fastKey:h,getWeak:f,onFreeze:d}},function(t,e,r){var n=r(12),i=r(483),a=r(168),o=r(175)("IE_PROTO"),s=function(){},u=function(){var t,e=r(167)("iframe"),n=a.length;for(e.style.display="none",r(229).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;n--;)delete u.prototype[a[n]];return u()};t.exports=Object.create||function(t,e){var r;return null!==t?(s.prototype=n(t),r=new s,s.prototype=null,r[o]=t):r=u(),void 0===e?r:i(r,e)}},function(t,e,r){var n=r(239),i=r(168).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,i)}},function(t,e,r){var n=r(27),i=r(67),a=r(175)("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),n(t,a)?t[a]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?o:null}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,r){var n=r(14);t.exports=function(t,e){if(!n(t))return t;var r,i;if(e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!n(i=r.call(t)))return i;if(!e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,r){"use strict";function n(t,e){return{type:m,payload:{id:t,attrs:e}}}function i(t){return{type:m,payload:{id:t,attrs:{pinned:!0,open:!0}}}}function a(t){return{type:m,payload:{id:t,attrs:{pinned:!1,open:!1}}}}function o(t){return{type:g,payload:t}}function s(t){return{type:v,payload:t}}function u(t){return t.getIn(["annotations","customAnnotationFn"])}function l(t){return t.getIn(["annotations","customOverlayFn"])}e.e=n,e.a=i,e.b=a,e.c=u,e.d=l;var c,h=r(19),f=r.n(h),d=r(24),p=(r.n(d),r(36)),m=(r(60),"SET_ANNOTATION_PROPERTIES"),g="USE_CUSTOM_ANNOTATION_FUNCTION",v="USE_CUSTOM_OVERLAY_FUNCTION",y=r.i(d.Map)({customAnnotationFn:null,customOverlayFn:null}),M=r.i(p.a)(y,(c={},f()(c,m,function(t,e){var n=e.id,i=e.attrs,a=t.get("id")||r.i(d.Map)();return t.set(n,a.merge(i))}),f()(c,g,function(t,e){return t.set("customAnnotationFn",e)}),f()(c,v,function(t,e){return t.set("customOverlayFn",e)}),c)),w={reducer:M,actions:{setAnnotationProperties:n,openAnnotation:i,closeAnnotation:a,useCustomAnnotationFunction:o,useCustomOverlayFunction:s},selectors:{getCustomAnnotationFunction:u}};e.f=w},function(t,e,r){"use strict";function n(t,e,r){var n=S[t];if(!n)return r.push("Unknown plug: "+t),S.None.NoOp;var i=n[e];return i||(r.push("Unknown Operator: "+t+", "+e),S.None.NoOp)}e.a=n;var i=r(325),a=r(286),o=r(287),s=r(288),u=r(289),l=r(290),c=r(291),h=r(292),f=r(293),d=r(294),p=r(295),m=r(321),g=r(322),v=r(323),y=r(324),M={schema:{}},w={Bone:M},x={Null:M},b={Action:M,Mixer:M};v.a["vray/create"]=M;var T={Timeline:M},E={Viewport:M},S=r.i(i.a)({Annotation:a.a,BinMesh:o.a,Bone:w,Camera:s.a,Environment:u.a,GeneralRenderer:l.a,Light:h.a,Material:f.a,Mixer:b,Null:x,Pass:d.a,Player:p.a,PolyMesh:m.a,Properties:g.a,Renderer:v.a,Timeline:T,Transform:y.a,Image:c.a,Viewport:E},{withNone:!0});e.b=S},function(t,e,r){"use strict";var n=r(29),i={identity:function(t,e){for(var r=n.a.maybeCreate(e||Uint32Array,t),i=0;i!==t;++i)r[i]=i;return r},identityForReading:function(t){var e=i._identityProto;return t>e.length&&(e=i.identity(5*t/4|0),i._identityProto=e),e.subarray(0,t)},_identityProto:n.a.Empty.Uint32Array,inverse:function(t,e,r){for(var i=n.a.maybeCreate(r||Uint32Array,e),a=0,o=t.length;a!==o;++a)i[t[a]]=a;return i},apply:function(t,e,r){for(var n=r||t,i=0,a=t.length;i!==a;++i)n[i]=e[t[i]];return t},histogram:function(t,e,r){for(var i=n.a.maybeCreate(r||Uint32Array,e),a=0,o=t.length;a!==o;++a)++i[t[a]];return i}};e.a=i},function(t,e,r){"use strict";function n(t,e,n,c,h){n=n||12,c=c||0,h=h||2*Math.PI;var f=new a.a(i.Vector3,(n+1)*t.length),d=new a.a(i.Vector3,(n+1)*e.length),p=new a.a(i.Vector2,(n+1)*t.length),m=new Uint32Array(n*(t.length-1)*4),g=new Uint32Array(n*(t.length-1)+1),v=1/(t.length-1),y=1/n;g[0]=0;for(var M=1,w=new i.Vector2,x=new i.Vector3,b=new i.Vector3,T=new i.Matrix4,E=new i.Matrix3,S=0,_=0,A=n;_<=A;_++){var D=c+_*y*h;T.makeRotationY(D),E.getNormalMatrix(T);for(var N=_*y,I=0,L=t.length;I<L;I++){t.getAt(I,x),e.getAt(I,b),x.applyMatrix4(T),b.applyMatrix3(E),f.setAt(S,x),d.setAt(S,b);var C=I*v;w.set(N,C),p.setAt(S++,w)}}for(var O=t.length,R=0,z=0,j=n;z<j;z++)for(var P=0,U=t.length-1;P<U;P++){var B=P+O*z,V=B,F=B+O,k=B+1+O,G=B+1;m[R++]=V,m[R++]=F,m[R++]=k,m[R++]=G,g[M++]=R}var Y=new u.a({faceRangeOffsets:g,faceValueIndices:m,values:f}),H=new u.a({faceRangeOffsets:g,faceValueIndices:m,values:d}),Q=new u.a({faceRangeOffsets:g,faceValueIndices:m,values:p}),W=new o.a;W.set("default",Q);var X=new s.a;return X.faceRangeOffsets=Y.faceRangeOffsets,X.positions=Y,X.normalMap=H,X.uvMaps=W,r.i(l.a)(new s.a(X))}e.a=n;var i=r(1),a=(r.n(i),r(4)),o=r(18),s=r(9),u=r(7),l=r(136)},function(t,e,r){"use strict";function n(t,e){t?(h=t,f=e):(h=requestAnimationFrame,f=window)}function i(t,e){function i(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];R.push({type:t,args:r})}function a(){return C}function s(t){return C.getIn(t)}function p(t){return C.get(t)}function m(){return P}function g(t,e){P="function"==typeof t?t(e):t}function v(t){U=t}function y(){return!!U}function M(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return U.apply(void 0,[this].concat(e))}function w(t){B=t}function x(){return B}function b(t,e){var r="https://www.google-analytics.com/collect?v=1&tid=UA-38840155-1&cid=555&t=pageview&dh="+encodeURI(window.location.hostname)+"&dt="+encodeURI(document.title)+"&dp="+encodeURI(t)+(e?"&plt="+e:"");k.callApi({contentType:"text",method:"POST",url:r}).catch(function(t){})}function T(t){return r.i(l.a)(t)}function E(t){return r.i(l.b)(t)}function S(t){j=t}function _(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e&&console.error(e),!j)throw console.error(t),t;j.error(t,r),t.message?(console.error(t.message),t.stack&&console.log(t.stack)):console.error(t)}function A(t){O.push(t);var e=!0;return function(){if(e){e=!1;var r=O.indexOf(t);O.splice(r,1)}}}function D(t){if(!r.i(u.a)(t))throw console.log("Invalid action",t),new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===t.type)throw console.error("Invalid action: ",t),new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(z)throw new Error("Reducers may not dispatch actions.");try{z=!0,C=L(C,t,i)}catch(t){_(t)}finally{z=!1}return V(),c.a.Promise.resolve(t.resolve?t.resolve:t.payload)}function N(t){this.createCanvas=t}function I(t){L=t,D({type:d.INIT})}var L=t,C=e,O=[],R=[],z=!1,j=!1,P=null,U=null,B=null;c.a.on("error",_);var V=function(){function t(){e?r=!0:(e=!0,r=!1,h.call(f,function(){try{var n=R.splice(0,R.length);O.slice().forEach(function(t){return t(n)})}catch(t){_(t)}e=!1,r&&t()}))}var e=!1,r=!1;return t}(),F=function(t,e){var r=document.createElement("Canvas");return r.width=t,r.height=e,r};D({type:d.INIT});var k=o()({dispatch:D,subscribe:A,getState:a,getIn:s,get:p,replaceReducer:I,setTranslator:g,getTranslator:m,read:T,write:E,useRollbar:S,error:_,setApi:v,hasApi:y,callApi:M,createEvent:i,setRequestAnimationFrame:n,logPageView:b,setSocketApi:w,getSocketApi:x,createCanvas:F,setCreateCanvas:N},"createEvent",i);return k}r.d(e,"a",function(){return d}),e.b=i;var a=r(19),o=r.n(a),s=r(404),u=(r.n(s),r(201)),l=r(368),c=r(183),h=void 0,f=void 0;n();var d={INIT:"@@redux/INIT"}},function(t,e,r){"use strict";function n(t,e,n){var i=n.x/n.y;t.dispatch(r.i(d.c)(n)),r.i(p.i)(t,[e,"name"])&&t.dispatch(r.i(c.c)({id:e,plug:"Camera",property:"aspectRatio"},i))}function i(t,e,n,i){var a=(r.i(c.a)(t,{scene:!0,evalPlug:"Player"}),r.i(c.b)(t,e)),o=r.i(h.a)(t,e),s=r.i(c.b)(t,p.j);return"trackball"===r.i(y.a)(t,e)&&(_.setFromMatrixPosition(a),A.set(0,0,-1).transformDirection(a),D.setFromMatrixPosition(o).sub(_).normalize(),L.setFromUnitVectors(D,A),i.upPosition.applyQuaternion(L)),D.setFromMatrixPosition(o),s.setPosition(D.sub(i.offset)),r.i(v.a)(t,p.j,s),r.i(f.a)(a,o,i.upPosition),a}function a(t,e,i,a,u){var m=a||p.c,g=i||p.c,w=r.i(d.d)(t),x=u||r.i(d.e)(t),b=r.i(c.b)(t,g),T=r.i(h.a)(t,g),E=r.i(c.b)(t,p.j),S=(new l.Vector3).setFromMatrixPosition(b),_=(new l.Vector3).setFromMatrixPosition(T);n(t,m,x);var A=(r.i(c.a)(t,{scene:!0,evalPlug:"Player"}),r.i(c.a)(t,{id:g,evalPlug:"Camera"})),D=r.i(c.a)(t,{id:g,evalPlug:"Transform"}),N=r.i(c.a)(t,{id:g,evalPlug:"Properties"}),I=g===m?A:r.i(c.a)(t,{id:m,evalPlug:"Camera"}),L=r.i(y.a)(t,g),C=r.i(y.b)(t,g),O=!D.target,R=g!==p.c,z=r.i(d.f)(t).toJS(),j=null==z.azimuthAngle&&null==z.polarAngle;if(O&&R&&j){var P=new l.Ray(new l.Vector3(0,0,0),new l.Vector3(0,0,-1)).applyMatrix4(b);_=P.closestPointToPoint(_),_.equals(S)&&_.addScaledVector(P.direction,.01),T.setPosition(_),r.i(v.a)(t,p.h,T)}else O||r.i(v.a)(t,p.j,T);S.setFromMatrixPosition(b);var U=new l.Vector3(0,1,0);if("trackball"===L){U.transformDirection(b);var B=(new l.Vector3).subVectors(S,T).normalize(),V=new l.Plane(B,0);U.copy(V.projectPoint(U).normalize())}(new l.Vector3).setFromMatrixPosition(E);S.sub(_);var F=T.elements[13];F+S.length()<0&&C&&S.normalize().multiplyScalar(F),b.setPosition(S.add(_)),I.upPosition=U,I.offset=new l.Vector3(0,0,0),s(t,g,b,T,A,w),C&&r.i(M.a)(t,m,b,T,new l.Vector2(0,0));var k=r.i(d.f)(t).get("maxZoom");N.constrainCameraSphere||k?o(t,m,I,N.constrainCameraSphere?N.maxZoom:k,b,T):I.radiusConstraint=null;return r.i(f.a)(b,T,U),e&&r.i(v.a)(t,m,b),{camera:b,target:T,upPosition:U}}function o(t,e,n,i,a,o){var s=r.i(d.d)(t),u=new l.Sphere,f=a||r.i(c.b)(t,e),p=o||r.i(h.a)(t,e);r.i(c.a)(t,{scene:!0,evalPlug:"Player"});if(s.getBoundingSphere(u),!(i<=1)){var m=new l.Sphere(u.center,u.radius*i);D.setFromMatrixPosition(p),_.setFromMatrixPosition(f);var g=(new l.Vector3).subVectors(_,D),M=(new l.Vector3).crossVectors(g,n.upPosition).normalize(),x=u.clampPoint(D),b=m.clampPoint(_);if(f.setPosition(b),p.setPosition(x),"trackball"===r.i(y.a)(t,e)){var T=(new l.Vector3).subVectors(b,x);n.upPosition.crossVectors(M,T).normalize()}n.radiusConstraint={outerRadius:i,maxBoundingSphere:m,minBoundingSphere:u},n.newRadiusConstraint=null,r.i(w.a)(t,0,e,f),a||r.i(v.a)(t,e,f)}}function s(t,e,n,i,a,o){var s=r.i(d.f)(t).toJS(),u=s.azimuthAngle,l=s.polarAngle,c=s.boundingRadius,h=S,f=0,g=S;if(e===p.c&&(null==u&&(u=45),null==l&&(l=20),null==c&&(c=1)),null!=u||null!=l){if(I.getInverse(i,!0),_.setFromMatrixPosition(n).applyMatrix4(I),N.setFromVector3(_),N.theta=x(u),N.phi=x(90-l),f=E(f||0,0),g=T(g||S,h),N.phi=r.i(m.a)(N.phi,f,g),null!=c){var v=c*o.getBoundingSphere().radius;N.radius=(v<=0?1:v)/b(x(.5*a.fieldOfView)),N.radius=(v<=0||v===1/0?1:v)/b(x(.5*a.fieldOfView))}N.makeSafe(),_.setFromSpherical(N),N.setFromVector3(_),_.applyMatrix4(i),n.setPosition(_)}}function u(t,e){var n=r.i(d.g)(t),i=r.i(c.a)(t,{id:n,evalPlug:"Camera"}),a=(r.i(c.a)(t,{evalPlug:"Player"}),r.i(c.b)(t,n)),o=r.i(h.a)(t,n),s=new l.Vector3,u=new l.Quaternion,m=new l.Vector3,v=new l.Vector3;if(a.decompose(s,u,v),m.setFromMatrixPosition(o),i.offset.add(e.center).sub(m),o.setPosition(e.center),"Perspective"===i.projection){var M=i.aspectRatio>=1?Math.PI*i.fieldOfView/360:Math.atan(i.aspectRatio*Math.tan(Math.PI*i.fieldOfView/360)),w=e.radius/Math.sin(M);s.sub(e.center),s.normalize().multiplyScalar(w).add(e.center)}else{var x=Math.tan(Math.PI*i.fieldOfView/360),b=x*Math.min(i.aspectRatio,1),T=e.radius/b;t.dispatch(r.i(c.c)({id:n,plug:"Camera",property:"orthoZoom"},T))}if("trackball"===r.i(y.a)(t,n)){var E=new l.Vector3(0,0,-1).applyQuaternion(u).normalize(),S=(new l.Vector3).subVectors(e.center,s).normalize(),_=(new l.Quaternion).setFromUnitVectors(E,S);i.upPosition.applyQuaternion(_)}a.compose(s,u,v),r.i(f.a)(a,o,i.upPosition),t.dispatch(r.i(p.g)([n,"Transform",0],r.i(g.a)(a))),t.dispatch(r.i(p.g)([p.h,"Transform",0],r.i(g.a)(o)))}e.c=n,e.e=i,e.a=a,e.d=o,e.b=u;var l=r(1),c=(r.n(l),r(5)),h=r(51),f=r(62),d=r(3),p=r(8),m=r(144),g=r(44),v=r(111),y=r(89),M=r(207),w=r(210),x=l.Math.degToRad,b=(l.Math.radToDeg,Math.tan),T=(Math.cos,Math.atan,Math.acos,Math.min),E=Math.max,S=(Math.pow,Math.PI),_=(Math.sqrt,new l.Vector3),A=new l.Vector3,D=new l.Vector3,N=new l.Spherical,I=(new l.Spherical,new l.Matrix4),L=(new l.Matrix4,new l.Quaternion)},function(t,e,r){"use strict";function n(t){var e=new a.Matrix4;if("Orthographic"!==t.projection){var r=t.nearClip*Math.tan(a.Math.DEG2RAD*t.fieldOfView*.5),n=-r,o=n*t.aspectRatio,s=r*t.aspectRatio;return e.makePerspective(o,s,r,n,t.nearClip,t.farClip)}var u=i(!0,t)||{width:1,height:1};return e.makeOrthographic(-u.width,u.width,u.height,-u.height,t.nearClip,t.farClip),e}function i(t,e){if(!(e&&e.fieldOfView&&e.orthoZoom&&e.aspectRatio))return!1;var r=Math.tan(a.Math.degToRad(e.fieldOfView/2)),n=r*e.orthoZoom,i=n*e.aspectRatio;return!0===t?{width:i,height:n}:{width:2*i,height:2*n}}e.a=n;var a=r(1);r.n(a)},function(t,e,r){"use strict";function n(t,e,n){t.dispatch(r.i(i.g)([e,"Transform",0],r.i(a.a)(n)))}e.a=n;var i=r(8),a=r(44)},function(t,e,r){t.exports={default:r(423),__esModule:!0}},function(t,e,r){var n=r(91),i=r(22)("toStringTag"),a="Arguments"==n(function(){return arguments}()),o=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,r,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=o(e=Object(t),i))?r:a?n(e):"Object"==(s=n(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,r){var n=r(58),i=r(218),a=r(216),o=r(48),s=r(119),u=r(161),l={},c={},e=t.exports=function(t,e,r,h,f){var d,p,m,g,v=f?function(){return t}:u(t),y=n(r,h,e?2:1),M=0;if("function"!=typeof v)throw TypeError(t+" is not iterable!");if(a(v)){for(d=s(t.length);d>M;M++)if((g=e?y(o(p=t[M])[0],p[1]):y(t[M]))===l||g===c)return g}else for(m=v.call(t);!(p=m.next()).done;)if((g=i(m,y,p.value,e))===l||g===c)return g};e.BREAK=l,e.RETURN=c},function(t,e){t.exports=!0},function(t,e,r){var n=r(120)("meta"),i=r(42),a=r(64),o=r(34).f,s=0,u=Object.isExtensible||function(){return!0},l=!r(63)(function(){return u(Object.preventExtensions({}))}),c=function(t){o(t,n,{value:{i:"O"+ ++s,w:{}}})},h=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,n)){if(!u(t))return"F";if(!e)return"E";c(t)}return t[n].i},f=function(t,e){if(!a(t,n)){if(!u(t))return!0;if(!e)return!1;c(t)}return t[n].w},d=function(t){return l&&p.NEED&&u(t)&&!a(t,n)&&c(t),t},p=t.exports={KEY:n,NEED:!1,fastKey:h,getWeak:f,onFreeze:d}},function(t,e,r){var n=r(48),i=r(446),a=r(149),o=r(154)("IE_PROTO"),s=function(){},u=function(){var t,e=r(148)("iframe"),n=a.length;for(e.style.display="none",r(214).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;n--;)delete u.prototype[a[n]];return u()};t.exports=Object.create||function(t,e){var r;return null!==t?(s.prototype=n(t),r=new s,s.prototype=null,r[o]=t):r=u(),void 0===e?r:i(r,e)}},function(t,e,r){var n=r(157),i=Math.min;t.exports=function(t){return t>0?i(n(t),9007199254740991):0}},function(t,e){var r=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+n).toString(36))}},function(t,e,r){"use strict";var n=r(11),i=r(0),a=r(57),o=r(79),s=r(98),u=r(123),l=r(74),c=r(14),h=r(20),f=r(125),d=r(80),p=r(479);t.exports=function(t,e,r,m,g,v){var y=n[t],M=y,w=g?"set":"add",x=M&&M.prototype,b={},T=function(t){var e=x[t];a(x,t,"delete"==t?function(t){return!(v&&!c(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(v&&!c(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return v&&!c(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,r){return e.call(this,0===t?0:t,r),this})};if("function"==typeof M&&(v||x.forEach&&!h(function(){(new M).entries().next()}))){var E=new M,S=E[w](v?{}:-0,1)!=E,_=h(function(){E.has(1)}),A=f(function(t){new M(t)}),D=!v&&h(function(){for(var t=new M,e=5;e--;)t[w](e,e);return!t.has(-0)});A||(M=e(function(e,r){l(e,M,t);var n=p(new y,e,M);return void 0!=r&&u(r,g,n[w],n),n}),M.prototype=x,x.constructor=M),(_||D)&&(T("delete"),T("has"),g&&T("get")),(D||S)&&T(w),v&&x.clear&&delete x.clear}else M=m.getConstructor(e,t,g,w),o(M.prototype,r),s.NEED=!0;return d(M,t),b[t]=M,i(i.G+i.W+i.F*(M!=y),b),v||m.setStrong(M,t,g),M}},function(t,e,r){"use strict";var n=r(35),i=r(57),a=r(20),o=r(54),s=r(15);t.exports=function(t,e,r){var u=s(t),l=r(o,u,""[t]),c=l[0],h=l[1];a(function(){var e={};return e[u]=function(){return 7},7!=""[t](e)})&&(i(String.prototype,t,c),n(RegExp.prototype,u,2==e?function(t,e){return h.call(t,this,e)}:function(t){return h.call(t,this)}))}},function(t,e,r){var n=r(45),i=r(234),a=r(171),o=r(12),s=r(28),u=r(181),l={},c={},e=t.exports=function(t,e,r,h,f){var d,p,m,g,v=f?function(){return t}:u(t),y=n(r,h,e?2:1),M=0;if("function"!=typeof v)throw TypeError(t+" is not iterable!");if(a(v)){for(d=s(t.length);d>M;M++)if((g=e?y(o(p=t[M])[0],p[1]):y(t[M]))===l||g===c)return g}else for(m=v.call(t);!(p=m.next()).done;)if((g=i(m,y,p.value,e))===l||g===c)return g};e.BREAK=l,e.RETURN=c},function(t,e){t.exports=function(t,e,r){var n=void 0===r;switch(e.length){case 0:return n?t():t.call(r);case 1:return n?t(e[0]):t.call(r,e[0]);case 2:return n?t(e[0],e[1]):t.call(r,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(r,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(r,e[0],e[1],e[2],e[3])}return t.apply(r,e)}},function(t,e,r){var n=r(15)("iterator"),i=!1;try{var a=[7][n]();a.return=function(){i=!0},Array.from(a,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var r=!1;try{var a=[7],o=a[n]();o.next=function(){return{done:r=!0}},a[n]=function(){return o},t(a)}catch(t){}return r}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,r){"use strict";var n=r(11),i=r(23),a=r(30),o=r(15)("species");t.exports=function(t){var e=n[t];a&&e&&!e[o]&&i.f(e,o,{configurable:!0,get:function(){return this}})}},function(t,e,r){var n,i=r(573);"undefined"!=typeof navigator&&navigator&&(n=navigator.userAgent),t.exports=i(n)},function(t,e){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(t){if(c===setTimeout)return setTimeout(t,0);if((c===r||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function a(t){if(h===clearTimeout)return clearTimeout(t);if((h===n||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function o(){m&&d&&(m=!1,d.length?p=d.concat(p):g=-1,p.length&&s())}function s(){if(!m){var t=i(o);m=!0;for(var e=p.length;e;){for(d=p,p=[];++g<e;)d&&d[g].run();g=-1,e=p.length}d=null,m=!1,a(t)}}function u(t,e){this.fun=t,this.array=e}function l(){}var c,h,f=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:r}catch(t){c=r}try{h="function"==typeof clearTimeout?clearTimeout:n}catch(t){h=n}}();var d,p=[],m=!1,g=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];p.push(new u(t,e)),1!==p.length||m||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=l,f.addListener=l,f.once=l,f.off=l,f.removeListener=l,f.removeAllListeners=l,f.emit=l,f.prependListener=l,f.prependOnceListener=l,f.listeners=function(t){return[]},f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(t,e,r){var n=r(16),i=r(10),a=r(63);t.exports=function(t,e){var r=(i.Object||{})[t]||Object[t],o={};o[t]=e(r),n(n.S+n.F*a(function(){r(1)}),"Object",o)}},function(t,e,r){"use strict";function n(){return D()("svg",{attrs:{width:0,height:0}},[D()("filter",{attrs:{id:"glowfilter"}},[D()("feGaussianBlur",{attrs:{in:"SourceAlpha",stdDeviation:50,result:"blur"}}),D()("feOffset",{attrs:{in:"blur",dx:0,dy:0,result:"offsetBlur"}}),D()("feFlood",{attrs:{"flood-color":I,"flood-opacity":1,result:"offsetColor"}}),D()("feComposite",{attrs:{in:"offsetColor",in2:"offsetBlur",operator:"in",result:"offsetBlurComposed"}}),D()("feMerge",[D()("feMergeNode",{attrs:{in:"offsetBlurComposed"}}),D()("feMergeNode",{attrs:{in:"SourceGraphic"}})])])])}function i(t,e){return D()("svg",{attrs:_()({viewBox:R},t),style:{padding:C,boxSizing:O}},[D()("path",{attrs:{fill:L,filter:N,d:"M744.25 70.953c-64.735-46.677-146.050-70.016-243.947-70.016-74.445 0-137.306 16.411-188.355 49.29-81.031 51.447-124.075 138.839-129.298 262.062h187.787c0-35.945 10.505-70.413 31.402-103.803 20.954-33.276 56.501-49.914 106.642-49.914 50.993 0 86.142 13.515 105.279 40.488 19.25 27.086 28.847 57.012 28.847 89.833 0 28.62-14.309 54.797-31.629 78.534-9.483 13.856-21.975 26.632-37.535 38.273 0 0-101.816 65.302-146.505 117.772-25.894 30.38-28.222 75.978-30.551 141.281-0.113 4.656 1.647 14.309 17.887 14.309 16.297 0 131.513 0 145.993 0 14.537 0 17.547-10.733 17.716-15.559 1.023-23.736 3.634-35.945 8.006-49.687 8.177-25.95 30.551-48.551 55.592-68.085l51.674-35.604c46.677-36.399 83.871-66.211 100.338-89.607 28.052-38.386 47.812-85.745 47.812-141.962-0.057-91.707-32.424-160.814-97.158-207.605zM497.293 791.608c-64.678-1.987-118.056 42.816-120.1 113.002-1.987 70.073 48.722 116.465 113.456 118.34 67.517 1.987 119.475-41.282 121.576-111.469 1.931-70.186-47.359-117.885-114.933-119.872z"}})])}function a(t,e){return D()("svg",{attrs:_()({viewBox:R},t),style:{padding:C,boxSizing:O}},[D()("path",{attrs:{fill:L,filter:N,d:"M896 256h-190.016c0 0-1.984-3.808-1.984-48s-35.808-80-80-80h-256c-44.192 0-80 35.808-80 80s1.984 48 1.984 48h-193.984c-35.328 0-64 28.672-64 64v512c0 35.328 28.672 64 64 64h800c35.328 0 64-28.672 64-64v-512c0-35.328-28.672-64-64-64zM497.44 767.136c-106.048 0-192-85.952-192-192 0-106.016 85.952-192 192-192 106.016 0 192 85.952 192 192s-85.984 192-192 192z"}})])}function o(t,e){return D()("svg",{attrs:_()({viewBox:R},t),style:{padding:C,boxSizing:O}},[D()("path",{attrs:{fill:L,filter:N,d:"M1024 608l-192-192v-288h-128v160l-192-192-512 512v32h128v320h320v-192h128v192h320v-320h128z"}})])}function s(t,e){var r=e.active?e.activeColor:L;return D()("svg",{attrs:_()({viewBox:R},t),style:{padding:C,boxSizing:O}},[D()("path",{attrs:{fill:r,filter:N,d:"M1024 384h-384l143.53-143.53c-72.53-72.526-168.96-112.47-271.53-112.47s-199 39.944-271.53 112.47c-72.526 72.53-112.47 168.96-112.47 271.53s39.944 199 112.47 271.53c72.53 72.526 168.96 112.47 271.53 112.47s199-39.944 271.528-112.472c6.056-6.054 11.86-12.292 17.456-18.668l96.32 84.282c-93.846 107.166-231.664 174.858-385.304 174.858-282.77 0-512-229.23-512-512s229.23-512 512-512c141.386 0 269.368 57.326 362.016 149.984l149.984-149.984v384z"}})])}function u(t,e){var r=e.active?e.activeColor:L;return D()("svg",{attrs:_()({viewBox:z},t),style:{padding:C,boxSizing:O}},[D()("g",{attrs:{transform:"matrix(0.49680763,0.49680763,-0.49680763,0.49680763,255.01217,2.6223229)"}},[D()("path",{attrs:{fill:r,filter:N,d:"M -0.49680099,-1.4900844 -0.49680795,206.9137 79.659562,126.75733 207.90699,255.00476 79.657586,383.25416 -0.49680795,303.09977 l 4.41e-6,208.40379 208.40379354,0 -80.15637,-80.15637 128.2494,-128.2494 c 43.4197,43.41971 90.25956,90.25956 128.2494,128.2494 l -80.15637,80.15637 208.4038,0 0,-208.40379 -80.1544,80.15439 -128.2494,-128.2494 c 42.74914,-42.74914 85.49828,-85.49828 128.24743,-128.24743 l 80.15637,80.15637 -10e-6,-208.4037813 -208.40379,-1e-5 80.1544,80.1543943 C 341.4983,121.41344 298.74916,164.16259 256.00002,206.91173 L 127.75259,78.664303 207.90699,-1.4900913 Z"}})])])}function l(t,e){return D()("svg",{style:e,attrs:_()({viewBox:"0 0 800.000000 800.000000",preserveAspectRatio:"xMidYMid meet"},t)},[D()("g",{attrs:{transform:"translate(0.000000,800.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none"}},[D()("path",{attrs:{d:"M4450 7334 c-651 -47 -1223 -245 -1740 -602 -177 -122 -473 -355 -655 -516 -113 -100 -433 -415 -487 -479 l-40 -47 337 2 336 3 33 100 c81 249 197 406 443 602 460 366 982 588 1578 669 184 25 610 26 785 1 180 -25 352 -62 482 -103 232 -74 538 -233 746 -388 147 -110 332 -297 410 -416 171 -259 278 -575 313 -924 21 -209 1 -665 -37 -848 l-6 -28 -504 0 -503 0 -42 83 c-158 316 -444 517 -794 557 -49 5 -96 10 -102 10 -10 0 -13 25 -13 93 0 213 -90 375 -249 451 l-66 31 -1640 0 -1640 0 -57 -27 c-106 -49 -192 -151 -229 -269 -34 -109 -65 -99 304 -99 287 0 326 -2 356 -18 100 -50 106 -186 12 -249 -34 -23 -37 -23 -368 -23 l-334 0 3 -387 c4 -362 5 -392 25 -450 42 -126 135 -232 241 -275 l57 -23 1310 -3 1310 -2 30 -86 c112 -331 400 -579 760 -655 77 -17 293 -17 370 0 328 69 600 284 729 574 l25 57 411 0 411 0 -7 -22 c-16 -54 -80 -167 -174 -307 -166 -248 -223 -394 -250 -640 -37 -331 42 -762 226 -1240 25 -63 43 -115 42 -116 -9 -7 -453 -121 -618 -159 -600 -137 -1072 -188 -1317 -141 -164 31 -240 99 -349 310 -110 213 -183 304 -279 346 -40 18 -74 24 -173 27 -149 5 -240 -5 -587 -70 -395 -74 -471 -72 -702 24 -65 27 -73 33 -78 61 -3 18 -16 169 -30 337 -62 758 -105 990 -198 1088 -37 39 -96 71 -221 119 -50 19 -106 44 -125 55 -32 20 -33 23 -27 69 4 27 20 93 36 148 17 55 30 105 30 111 0 6 -36 10 -94 10 l-93 0 -29 -102 c-39 -141 -40 -258 -4 -311 33 -49 108 -100 195 -132 39 -15 100 -40 137 -57 64 -29 69 -34 87 -82 45 -122 76 -352 126 -946 19 -234 39 -435 44 -446 10 -24 196 -107 317 -143 190 -55 273 -53 638 14 322 59 432 75 536 75 163 0 200 -27 301 -225 149 -289 255 -395 446 -447 98 -26 409 -36 589 -19 289 28 646 94 1039 191 237 58 616 164 640 178 10 5 -2 42 -47 146 -208 487 -315 980 -279 1296 25 217 78 358 208 547 102 150 169 266 209 369 28 69 42 94 58 98 46 11 74 57 104 171 65 241 113 484 144 735 20 163 17 645 -5 795 -38 254 -103 475 -203 683 -255 534 -713 915 -1369 1139 -184 62 -389 106 -625 133 -101 11 -487 21 -580 14z"}})])])}function c(t,e){var r=e.active?e.activeColor:L;return D()("svg",{attrs:_()({viewBox:R},t),style:{padding:C,boxSizing:O}},[D()("path",{attrs:{fill:r,filter:N,d:"M992.262 871.396l-242.552-206.294c-25.074-22.566-51.89-32.926-73.552-31.926 57.256-67.068 91.842-154.078 91.842-249.176 0-212.078-171.922-384-384-384-212.076 0-384 171.922-384 384s171.922 384 384 384c95.098 0 182.108-34.586 249.176-91.844-1 21.662 9.36 48.478 31.926 73.552l206.294 242.552c35.322 39.246 93.022 42.554 128.22 7.356s31.892-92.898-7.354-128.22zM384 640c-141.384 0-256-114.616-256-256s114.616-256 256-256 256 114.616 256 256-114.614 256-256 256z"}})])}function h(t,e){var r=e.active?e.activeColor:L;return D()("svg",{attrs:_()({viewBox:R},t),style:{padding:O}},[e.active?D()("path",{attrs:{fill:r,filter:N,d:"M448 576v416l-160-160-192 192-96-96 192-192-160-160zM1024 96l-192 192 160 160h-416v-416l160 160 192-192z"}}):D()("path",{attrs:{fill:r,filter:N,d:"M1024 0v416l-160-160-192 192-96-96 192-192-160-160zM448 672l-192 192 160 160h-416v-416l160 160 192-192z"}})])}function f(t,e){var r=e.active?e.activeColor:L;return D()("svg",{attrs:_()({viewBox:R},t),style:{padding:O}},[D()("path",{attrs:{fill:r,filter:N,d:"M884.907 256h-748.373c-27.733 0-51.2 24.32-51.2 54.187v446.293c0 29.867 23.467 54.187 52.48 54.187h203.52c23.040 0 42.667-13.653 49.493-33.707l59.307-148.053c10.24-24.747 34.133-42.24 61.867-42.24s51.627 17.493 61.867 42.24l59.307 148.053c8.107 20.053 26.453 33.707 47.36 33.707h204.373c30.293 0 53.76-24.32 53.76-54.187v-446.293c0-29.867-23.467-54.187-53.76-54.187zM308.053 622.080c-52.053 0-94.72-43.947-94.72-97.707 0-55.040 42.667-97.707 94.72-97.707s94.293 42.667 94.293 97.707c0 53.76-42.24 97.707-94.293 97.707zM715.947 622.080c-52.053 0-94.293-43.947-94.293-97.707s42.24-97.707 94.293-97.707c52.053 0 94.72 43.947 94.72 97.707s-42.667 97.707-94.72 97.707z"}})])}function d(t,e){var r=e.active?e.activeColor:L;return D()("svg",{attrs:_()({viewBox:R},t),style:{padding:O}},[e.active?D()("path",{attrs:{fill:r,filter:N,d:"M317.143 762.857l44.571-80.571q-49.714-36-77.714-90.857t-28-116q0-69.143 34.857-128.571-130.857 66.857-217.714 201.714 95.429 147.429 244 214.286zM539.429 329.143q0-11.429-8-19.429t-19.429-8q-71.429 0-122.571 51.143t-51.143 122.571q0 11.429 8 19.429t19.429 8 19.429-8 8-19.429q0-49.143 34.857-84t84-34.857q11.429 0 19.429-8t8-19.429zM746.857 220q0 4-0.571 5.143-60 107.429-180 323.429t-180.571 324l-28 50.857q-5.714 9.143-16 9.143-6.857 0-76.571-40-9.143-5.714-9.143-16 0-6.857 25.143-49.714-81.714-37.143-150.571-98.857t-119.143-140q-11.429-17.714-11.429-39.429t11.429-39.429q87.429-134.286 217.143-212t283.429-77.714q50.857 0 102.857 9.714l30.857-55.429q5.714-9.143 16-9.143 2.857 0 10.286 3.429t17.714 8.857 18.857 10.571 18 10.571 11.143 6.571q9.143 5.714 9.143 15.429zM768 475.429q0 79.429-45.143 144.857t-119.429 94l160-286.857q4.571 25.714 4.571 48zM1024 548.571q0 20-11.429 39.429-22.286 36.571-62.286 82.857-85.714 98.286-198.571 152.571t-239.714 54.286l42.286-75.429q121.143-10.286 224.286-78.286t172.286-175.429q-65.714-102.286-161.143-168l36-64q54.286 36.571 104.286 87.429t82.571 105.143q11.429 19.429 11.429 39.429z"}}):D()("path",{attrs:{fill:r,filter:N,d:"M950.857 548.571q-86.857-134.857-217.714-201.714 34.857 59.429 34.857 128.571 0 105.714-75.143 180.857t-180.857 75.143-180.857-75.143-75.143-180.857q0-69.143 34.857-128.571-130.857 66.857-217.714 201.714 76 117.143 190.571 186.571t248.286 69.429 248.286-69.429 190.571-186.571zM539.429 329.143q0-11.429-8-19.429t-19.429-8q-71.429 0-122.571 51.143t-51.143 122.571q0 11.429 8 19.429t19.429 8 19.429-8 8-19.429q0-49.143 34.857-84t84-34.857q11.429 0 19.429-8t8-19.429zM1024 548.571q0 19.429-11.429 39.429-80 131.429-215.143 210.571t-285.429 79.143-285.429-79.429-215.143-210.286q-11.429-20-11.429-39.429t11.429-39.429q80-130.857 215.143-210.286t285.429-79.429 285.429 79.429 215.143 210.286q11.429 20 11.429 39.429z"}})])}function p(t,e){var r=e.active?e.activeColor:L;return D()("svg",{attrs:_()({viewBox:R},t),style:{padding:O}},[D()("path",{attrs:{fill:r,filter:N,d:"M395 37.2c-24.2 1.4-50.2 3.6-57.8 4.8-28.2 4.4-60.2 22.8-77.4 44.4-7.8 9.8-23.4 39-21.6 40.4 1.2 1 26.4 9.2 26.6 8.6 0.2-0.2 3.2-6.4 7-13.8 11.6-23.6 38.8-44 65.4-49.6 9.2-1.8 59.8-6 74.4-6h6.4v85.6l-16.4 1.2c-9.2 0.6-38.2 2-64.6 3.2-52.8 2.4-92.6 6.4-108 11-13 3.8-24.6 11.4-31.4 20.8-5 7-15.6 38.6-21.6 64l-2.6 10.6-8.2-1.2c-4.4-0.8-11.4-1.8-15.2-2.4l-7-1.2-17.6 88.4c-12.8 63.6-17 89-15.4 90 1.2 0.8 8.4 2.4 15.8 3.8l13.4 2.4-1.8 13.4c-1 7.4-1.8 31-2 52.4-0.2 34.6 0.2 40.4 4 51.4 15.2 45.6 59.8 72 133 78.6 24 2.2 25.2 2.2 42.6-3 62.8-18.2 121.4-24.2 219-22.4 79 1.6 130.2 8 175.6 22.4 15 4.8 17 5 38.6 3.2 73.4-6.2 118.6-32.2 134.8-77.2 4.6-13.2 6.4-64.6 3.2-95.2-1.4-12.2-2-22.6-1.6-23s6.8-2 14.2-3.6c7.4-1.4 13.8-3.2 14.4-3.6 0.4-0.6-7-40.4-16.8-88.8l-17.6-87.8-5.8 0.2c-3.4 0-10.2 0.8-15.2 1.6l-9.2 1.6-6.2-25c-9-35.4-13.2-45.8-22.2-54-8.8-8-30-18.4-43.6-21.6-15.4-3.4-63.8-7.4-120-10.2l-52.6-2.4v-85.6l5.6 1.2c3 0.6 18 1.6 33.4 2.2 15.4 0.8 34 2.6 41.6 4 28.2 5.8 54.4 26 67 51.6 3.8 7.6 7.8 13.2 9 12.8 1.4-0.4 7.2-2.4 13-4.2 5.6-2 10.4-4.6 10.4-6 0-1.6-3.4-9.4-7.4-17.4-10.6-21.4-32.6-43-54.4-53.6-9.2-4.4-23-9.4-31-11-38.2-8.2-203.8-11.6-296.2-6zM592 186c68.4 3.2 106 9 132.2 20.2 12 5.2 16.8 11.8 34.2 46.8 37.6 75 76.8 210.6 72.6 250.6-0.8 7.4-2.6 15.6-4 18.6-3.6 6.8-18.4 20.2-32.4 29.2-12.4 7.8-61.8 32-76.6 37.4-8.6 3-8.8 3-4-0.4 49.6-35 63.4-45.6 76.6-58.4 17.8-17.6 17.4-16 12.4-56-4.8-39-20-94.8-40.4-149-11-29.4-36.4-82.4-42.4-88.4-7.4-7.8-43.2-16.4-86.2-20.6-34.4-3.4-158.2-4.8-206.8-2.2-60.4 3.2-89.4 7.4-112.2 16.4-12 4.6-16.8 11.6-33.6 49.8-38 86.6-61.4 172.2-61.4 224.4v15.4l13.2 13.2c12.8 12.6 43.4 35.6 67.4 50.4 6.2 4 11.2 7.6 10.6 8-1.2 1.4-40.4-15-62.8-26.2-24.8-12.4-45-26.6-49-34.6-1.6-3-4-15.6-5.4-27.6-2.2-20-2-24.2 1.8-46.4 8-46.4 22.4-94.6 45.6-153.6 13.4-34 32-73 40.2-84.2 7.8-10.6 21.2-17 46.4-22.4 19.2-4.2 70.6-10 98-11 38.6-1.6 127.2-1.2 166 0.6zM194 656.8c0 6.4 6 33 10 45.2 21.6 63.6 98.4 169.8 171 236.8 28 25.8 44 37.4 60.8 44.2 25.2 10.4 69 15 103.6 11.2 52.2-6 69.8-16 125.6-71 90-89.2 156-193 163.8-257.8l1.4-11.4h-30.2v7.6c0 19.8-18 63.4-41.8 101.4-38 60.2-102 134.8-150 174.8-25.4 21-49.8 28.2-96.2 28.2-41.2 0-63.6-5.4-85.6-20.4-15.8-10.8-56-49.2-79-75.6-73.4-83.8-117.8-157.2-124.4-205.6l-1.4-10.4h-13.8c-10.6 0-13.8 0.6-13.8 2.8zM407.2 770.6c-1.8 7.4-3.2 13.6-3.2 14.2 0 1.6 28 7.4 55 11.4 43.2 6.4 79.6 4.6 136-6.2 12.2-2.4 22.2-4.6 22.6-5 0.4-0.2-1-6.6-2.8-14l-3.4-13.4-7.2 1c-4 0.6-17.6 3.2-30.2 5.6-33.6 6.6-93.2 6.6-126 0.2-12.6-2.6-26.2-5.2-30.2-5.8l-7.2-1-3.4 13z"}})])}function m(t,e){var r=e.active?e.activeColor:L;return D()("svg",{attrs:_()({viewBox:R},t),style:{padding:O}},[D()("path",{attrs:{fill:r,filter:N,d:"M1024 384h-384l143.53-143.53c-72.53-72.526-168.96-112.47-271.53-112.47s-199 39.944-271.53 112.47c-72.526 72.53-112.47 168.96-112.47 271.53s39.944 199 112.47 271.53c72.53 72.526 168.96 112.47 271.53 112.47s199-39.944 271.528-112.472c6.056-6.054 11.86-12.292 17.456-18.668l96.32 84.282c-93.846 107.166-231.664 174.858-385.304 174.858-282.77 0-512-229.23-512-512s229.23-512 512-512c141.386 0 269.368 57.326 362.016 149.984l149.984-149.984v384z"}}),D()("path",{attrs:{fill:r,filter:N,d:"M512 250l262 262-262 262-262-262z"}})])}function g(t,e){var r=e.active?e.activeColor:L;return D()("svg",{attrs:_()({viewBox:z},t),style:{padding:C,boxSizing:O}},[D()("g",{attrs:{transform:"matrix(0.49680763,0.49680763,-0.49680763,0.49680763,255.01217,2.6223229)"}},[D()("path",{attrs:{fill:r,filter:N,d:"M -0.49680099,-1.4900844 -0.49680795,206.9137 79.659562,126.75733 207.90699,255.00476 79.657586,383.25416 -0.49680795,303.09977 l 4.41e-6,208.40379 208.40379354,0 -80.15637,-80.15637 128.2494,-128.2494 c 43.4197,43.41971 90.25956,90.25956 128.2494,128.2494 l -80.15637,80.15637 208.4038,0 0,-208.40379 -80.1544,80.15439 -128.2494,-128.2494 c 42.74914,-42.74914 85.49828,-85.49828 128.24743,-128.24743 l 80.15637,80.15637 -10e-6,-208.4037813 -208.40379,-1e-5 80.1544,80.1543943 C 341.4983,121.41344 298.74916,164.16259 256.00002,206.91173 L 127.75259,78.664303 207.90699,-1.4900913 Z"}}),D()("path",{attrs:{fill:r,filter:N,d:"M256 0l256 256-256 256-256-256z"}})])])}function v(t,e){var r=e.active?e.activeColor:L;return D()("svg",{attrs:_()({viewBox:R},t),style:{padding:C,boxSizing:O}},[D()("path",{attrs:{fill:r,filter:N,d:"M992.262 871.396l-242.552-206.294c-25.074-22.566-51.89-32.926-73.552-31.926 57.256-67.068 91.842-154.078 91.842-249.176 0-212.078-171.922-384-384-384-212.076 0-384 171.922-384 384s171.922 384 384 384c95.098 0 182.108-34.586 249.176-91.844-1 21.662 9.36 48.478 31.926 73.552l206.294 242.552c35.322 39.246 93.022 42.554 128.22 7.356s31.892-92.898-7.354-128.22zM384 640c-141.384 0-256-114.616-256-256s114.616-256 256-256 256 114.616 256 256-114.614 256-256 256z"}}),D()("path",{attrs:{fill:r,filter:N,d:"M375 181l200 200-200 200-200-200z"}})])}function y(t,e){var r=e.active?e.activeColor:L;return D()("svg",{attrs:_()({viewBox:R},t),style:{padding:C,boxSizing:O}},[D()("path",{attrs:{fill:r,filter:N,d:"M64 0h384v1024h-384z"}}),D()("path",{attrs:{fill:r,filter:N,d:"M576 0h384v1024h-384z"}})])}function M(t,e){var r=e.active?e.activeColor:L;return D()("svg",{attrs:_()({viewBox:R},t),style:{padding:C,boxSizing:O}},[D()("path",{attrs:{fill:r,filter:N,d:"M138 0L1024 512L138 1024z"}})])}function w(t,e){var r=e.active?e.activeColor:"#000";return D()("svg",{attrs:_()({viewBox:"0 0 32 32"},t),style:{padding:C,boxSizing:O}},[D()("path",{attrs:{fill:r,filter:N,d:"M16 0c-8.837 0-16 7.163-16 16s7.163 16 16 16 16-7.163 16-16-7.163-16-16-16zM16 28c-6.627 0-12-5.373-12-12s5.373-12 12-12c6.627 0 12 5.373 12 12s-5.373 12-12 12zM10 16c0-3.314 2.686-6 6-6s6 2.686 6 6c0 3.314-2.686 6-6 6s-6-2.686-6-6z"}})])}function x(t,e){e.active&&e.activeColor;return D()("svg",{attrs:{}},[D()("g",[D()("line",{attrs:{x1:2,y1:2,x2:30,y2:30},style:{stroke:"black",strokeWidth:3}}),D()("line",{attrs:{x1:30,y1:2,x2:2,y2:30},style:{stroke:"black",strokeWidth:3}})]),D()("g",[D()("line",{attrs:{x1:2.4,y1:2.4,x2:29.6,y2:29.6},style:{stroke:"white",strokeWidth:2}}),D()("line",{attrs:{x1:29.6,y1:2.4,x2:2.4,y2:29.6},style:{stroke:"white",strokeWidth:2}})])])}function b(t,e){var r=e.active?e.activeColor:"#000";return D()("svg",{attrs:_()({viewBox:"0 0 32 32"},t),style:{padding:C,boxSizing:O}},[D()("rect",{attrs:{fill:r,filter:N,x:2,y:2,width:28,height:28}})])}function T(t,e){var r=e.active?e.activeColor:"#000";return D()("svg",{attrs:_()({viewBox:"0 0 32 32"},t),style:{padding:C,boxSizing:O}},[D()("circle",{attrs:{fill:r,filter:N,r:14,cx:16,cy:16}})])}function E(t,e){var r=e.active?e.activeColor:"#000";return D()("svg",{attrs:_()({viewBox:"0 0 32 32"},t),style:{padding:C,boxSizing:O}},[D()("polygon",{attrs:{fill:r,filter:N,points:"16,2 28,28 2,28"}})])}Object.defineProperty(e,"__esModule",{value:!0}),e.glowFilter=n,e.help=i,e.snapshot=a,e.home=o,e.orbit=s,e.pan=u,e.vrHeadSet=l,e.zoom=c,e.fullscreen=h,e.vrSettings=f,e.lenticularMode=d,e.deviceTracking=p,e.nodeRotate=m,e.nodeMove=g,e.nodeScale=v,e.pause=y,e.play=M,e.select=w,e.exit=x,e.box=b,e.sphere=T,e.cone=E;var S=r(84),_=r.n(S),A=r(31),D=r.n(A),N="url(#glowfilter)",I="#000",L="#fff",C="0",O="border-box",R="-300 -300 1624 1624",z="-150 -150 812 812"},function(t,e,r){"use strict";var n={gray:"#999",black:"#333",lightBg:"#eee",border:"#ccc",white:"#fff"};e.a={root:{height:"100%",fontSize:"14px",fontFamily:"'Lucida Grande', 'Lucida Sans Unicode', 'Lucida Sans', Verdana, Tahoma, sans-serif",position:"absolute",top:0,left:0,right:0,bottom:0},absoluteMaxCentered:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center"},header:{display:"flex",flex:"0 0 auto",justifyContent:"center",margin:"0",backgroundColor:n.lightBg,fontFamily:'-apple-system,".SFNSDisplay-Bold","Helvetica Neue","Roboto","Segoe UI",sans-serif'},mainRow:{display:"flex",flex:"1 1 100px",justifyContent:"center"},statsRow:{flex:"0 0 auto",backgroundColor:n.gray,color:n.lightBg,padding:"5px"},player:{position:"relative",top:0,left:0,right:0,bottom:0,height:"100%",width:"100%"},maxRow:{flex:"1 1 auto"},leftCol:{flex:"1 1 200px",maxWidth:"300px",overflow:"scroll"},centerCol:{flex:"2 2 500px",border:"1px solid "+n.border},rightCol:{flex:"1 1 200px",maxWidth:"300px",overflow:"scroll"},footer:{flex:"0 0 auto",padding:"5px",backgroundColor:n.lightBg,margin:"0"},explorerSelected:{backgroundColor:n.gray},explorerNotSelected:{backgroundColor:n.white,cursor:"pointer"}}},function(t,e,r){"use strict";function n(t){return function(e){var r=t[e];if(!r)throw new Error("Unknown content hash: "+e);try{return JSON.parse(r)}catch(t){throw console.log("Error parsing hash: "+e),new Error(t)}}}e.a=n},function(t,e,r){"use strict";function n(t,e,r,n){var i=void 0===r?0:r,a=void 0===n?1:n,o=(i+a-1)/a|0,s=null!==t?(o+t)*a:null,c=u.a.maybeCreate(e||Uint32Array,s);l.a.call(this,c,null!==t?t:(c.length-i+a-1)/a|0),this.offset=i,this.stride=a}e.a=n;var i=r(69),a=r.n(i),o=r(2),s=r.n(o),u=r(29),l=r(189),c=r(190);n.prototype=s()(a()(l.a.prototype),{constructor:n,getAt:function(t){return this.array[this.offset+t*this.stride]},setAt:function(t,e){this.array[this.offset+t*this.stride]=e},newCompatibleView:function(t,e){return new n(e||null,t,0)},newCompatibleBuffer:function(){return new c.a(this.data.constructor)}})},function(t,e,r){"use strict";function n(t,e,r){var n=r||{},o=new i.a(t);o.positions=e(o.positions,"positions",n),o.normalMap&&(o.normalMap=e(o.normalMap,"normalMap",n));for(var s=new a.a,u=0;u<t.uvMaps.length;u++){var l=t.uvMaps.namesByIndex[u],c=e(t.uvMaps.byName[l],l,n);s.set(l,c)}return o.uvMaps=s,o.faceRangeOffsets=o.positions.faceRangeOffsets,new i.a(o)}e.a=n;var i=r(9),a=r(18)},function(t,e,r){"use strict";function n(t){return r.i(o.a)(r.i(a.a)(r.i(i.a)(t)))}e.a=n;var i=r(138),a=r(343),o=r(344);r(137)},function(t,e,r){"use strict";function n(t,e,r){if(!t.normalMap)return t;for(var n=e||!0,l=r||!1,c=t.positions.faceValueIndices,h=t.positions.values,f=new Uint32Array(t.normalMap.faceValueIndices),d=t.normalMap.values,p=0,m=void 0,g=void 0,v=[],y=0;y<h.length;y++)v[y]=[];for(var M=0;M<c.length;M++)v[c[M]].push(M);for(var w=0;w<v.length;w++)for(var x=0;x<v[w].length;x++){m=f[v[w][x]];for(var b=0;b<v[w].length;b++)g=f[v[w][x+b]],m!==g&&d.getAt(m).dot(d.getAt(g))>.99&&(f[v[w][x+b]]=m,p++)}l&&console.log("Normal Duplicates Found: "+p);var T=d;if(n&&p){var E=new o.a(i.Vector3),S=new Int32Array(d.length);S.fill(-1);for(var _=0,A=0;A<f.length;A++)-1===S[f[A]]&&(E.push(d.getAt(f[A])),S[f[A]]=_++),f[A]=S[f[A]];var D=new a.a(i.Vector3,_);D.fromArray(E.toArray()),T=D,l&&console.log(d.length+" normal values reduced to "+D.length+", duplicates removed: "+(d.length-D.length))}var N=new u.a({faceRangeOffsets:t.faceRangeOffsets,faceValueIndices:f,values:T}),I=new s.a(t);return I.normalMap=N,I}e.a=n;var i=r(1),a=(r.n(i),r(4)),o=r(88),s=r(9),u=r(7)},function(t,e,r){"use strict";function n(t,e){var r=e||!1,n=new Uint32Array(t.positions.faceValueIndices),i=t.positions.values,o=new f.a(c.Vector3),u=new l.a,m=0,g=0,v=0,y=new c.Vector3,M=new c.Vector3,w=new c.Box3;w.setFromArray(new Float32Array(i.data));for(var x=Math.pow(2,16)/w.getSize().length(),b=0;b<n.length;b++)i.getAt(n[b],y),M.subVectors(y,w.min).multiplyScalar(x),M.x=s()(M.x)*Math.pow(2,32),M.y=s()(M.y)*Math.pow(2,16),M.z=s()(M.z),g=M.x+M.y+M.z,u.has(g)?v=u.get(g):(u.set(g,m),v=m,o.push(y),m++),n[b]=v;if(r&&console.log(i.length+" values reduced to "+m+", duplicates removed: "+(i.length-m)),i.length===m)return t;var T=new h.a(c.Vector3,m);T.fromArray(o.toArray());var E=new p.a({faceRangeOffsets:t.faceRangeOffsets,faceValueIndices:n,values:T}),S=a()({},t,{positions:E}),_=new d.a(S);return _.topologyChanged(),_}e.a=n;var i=r(2),a=r.n(i),o=r(400),s=r.n(o),u=r(145),l=r.n(u),c=r(1),h=(r.n(c),r(4)),f=r(88),d=r(9),p=r(7)},function(t,e,r){"use strict";function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!t.length)return[];var e=t.split(","),r=[],n=void 0,i=void 0,o=void 0,s=void 0,u=void 0;for(n=0;n<e.length;n++)if(u=e[n],-1!==u.indexOf("-")){var l=u.split("-"),c=a()(l,2);for(o=c[0],s=c[1],o=Number(o),s=Number(s),i=o;i<=s;i++)r.push(i)}else r.push(Number(u));return r}e.a=n;var i=r(41),a=r.n(i)},function(t,e,r){"use strict";function n(t,e,r){this.indices=t,this.meaning=e,this.mapId=r||a.a.IdPositions}e.a=n;var i=r(29),a=r(33),o=r(190),s=r(187),u=r(106);n.Faces=0,n.Vertices=1,n.Edges=2,n.prototype={constructor:n,getIndices:function(t,e,r){var i=this.indices,o=n.ConversionTable,s=o[this.meaning][e];return null!==s&&(i=s.call(null,t,i,this.mapId,r||a.a.IdPositions)),i}},n.newRandomSelection=function(t,e,r,i,a){for(var o=n.getNumElements(r,i,a),u=e*o|0,l=new s.a(o).fill(0,u),c=t,h=0,f=o-1;h<f;++h)c=22695477*c+1>>>0,l.swap(h,h+(1073741823&c)%(o-h));return new n(l.toIndexArray(),i,a)},n.getIndices=function(t,e,r,i){var o=a.a.IdPositions,s=i;return"string"==typeof r?o=r:s=r,s?s.getIndices(t,e,o):u.a.identityForReading(n.getNumElements(t,e,o))},n.getNumElements=function(t,e,r){switch(e){case n.Faces:return t.getNumFaces();case n.Vertices:return a.a.resolveMap(t,r||a.a.IdPositions).values.length;case n.Edges:return a.a.resolveMap(t,r||a.a.IdPositions).getNumEdges();default:throw Error("Bad meaning argument!")}},n.convFacesToVertices=function(t,e,r,n){for(var i=a.a.resolveMap(t,n),o=new s.a(i.values.length),u=t.faceRangeOffsets,l=i.faceValueIndices,c=0,h=e.length;c!==h;++c){var f=e[c],d=u[f],p=u[f+1];o.includeFromArray(l,d,p)}return o.toIndexArray()},n.convFacesToEdges=function(t,e,r,n){for(var i=a.a.resolveMap(t,n),o=new s.a(i.getNumEdges()),u=t.faceRangeOffsets,l=i.faceValueIndices,c=0,h=e.length;c!==h;++c){var f=e[c],d=u[f],p=u[f+1];if(d!==p)for(var m=l[p-1],g=d;g!==p;++g){var v=l[g];o.include(i.findEdgeId(m,v)),m=v}}return o.toIndexArray()},n.convVerticesToFaces=function(t,e,r,n){for(var s=new o.a(Uint32Array),u=t.faceRangeOffsets,l=a.a.resolveMap(t,r).faceValueIndices,c=t.getNumFaces(),h=0;h!==c;++h){for(var f=u[h],d=u[h+1],p=!0,m=f;m!==d&&p;++m)p=-1<i.a.binarySearch(e,l[m]);p&&s.push(h)}return s.toArrayAndClear()},n.convVerticesToVertices=function(t,e,r,n){if(r===n)return e;for(var i=a.a.resolveMap(t,n),o=new s.a(i.values.length),u=i.faceValueIndices,l=a.a.resolveMap(t,r).updateInverseIndex(),c=l.valueFaceIndexOffsets,h=l.valueFaceIndices,f=0,d=e.length;f!==d;++f)for(var p=e[f],m=c[p],g=c[p+1],v=m;v!==g;++v){var y=l.findValueIndexOffset(h[v],p);o.include(u[y])}return o.toIndexArray()},n.convVerticesToEdges=function(t,e,r,n){for(var o=a.a.resolveMap(t,n),u=new s.a(o.getNumEdges()),l=t.faceRangeOffsets,c=a.a.resolveMap(t,r).faceValueIndices,h=t.getNumFaces(),f=0;f!==h;++f){var d=l[f],p=l[f+1];if(d!==p){for(var m=c[--p],g=-1<i.a.binarySearch(e,m),v=m,y=g,M=d;M!==p;++M){var w=c[M],x=-1<i.a.binarySearch(e,w);y&&x&&u.include(o.findEdgeId(v,w)),v=w,y=x}y&&g&&u.include(o.findEdgeId(v,m))}}return u.toIndexArray()},n.convEdgesToFaces=function(t,e,r,i){var a=n.convEdgesToVertices(t,e,r,r);return n.convVerticesToFaces(t,a,r,"")},n.convEdgesToVertices=function(t,e,r,i){var a=n.convEdgesToVerticesOfSameMap(t,e,r);return n.convVerticesToVertices(t,a,r,i)},n.convEdgesToEdges=function(t,e,r,i){if(r===i)return e;n.convEdgesToVerticesOfSameMap(t,e,r);return n.convVerticesToEdges(t,e,r,i)},n.convEdgesToVerticesOfSameMap=function(t,e,r){for(var n=a.a.resolveMap(t,r).updateEdgeMap(),o=n.edgePivotRangeOffsets,u=n.edgeHighVertexIndices,l=new s.a(n.values.length),c=0,h=e.length;c!==h;++c){var f=e[c],d=u[f],p=i.a.binarySearch(o,f+1);p<0&&(p=~p);var m=p-1;l.include(d),l.include(m)}return l.toIndexArray()},n.ConversionTable=[[null,n.convFacesToVertices,n.convFacesToEdges],[n.convVerticesToFaces,n.convVerticesToVertices,n.convVerticesToEdges],[n.convEdgesToFaces,n.convEdgesToVertices,n.convEdgesToEdges]]},function(t,e,r){"use strict";var n=r(329),i=(r.n(n),r(361)),a=r(9),o=r(7),s=r(33),u=r(140);r.d(e,"d",function(){return i.a}),r.d(e,"b",function(){return o.a}),r.d(e,"a",function(){return s.a}),r.d(e,"c",function(){return a.a}),r.d(e,"e",function(){return u.a})},function(t,e,r){"use strict";(function(t){function n(e){if(e instanceof Uint32Array)return e;if(e instanceof ArrayBuffer)return new Uint32Array(e);if(void 0!==t&&e instanceof t)return new Uint32Array(new Uint8Array(e).buffer);throw new Error("Invalid bingeom type: "+(void 0===e?"undefined":m()(e)))}function i(t){var e=t[t.length-2];if(!e)throw new Error("No footer in bingeom");var r=new Uint8Array(t.buffer),n=r.byteLength-8;return r=r.subarray(n-e,n),JSON.parse(String.fromCharCode.apply(null,r))}function a(t){return void 0!==t&&"number"==typeof t.o&&"number"==typeof t.l}function o(t){return t&&a(t.faceCount)&&a(t.faces)&&a(t.positions)}function s(t,e){if(!t)throw new Error(e)}function u(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return r?new y[r].arr(0):[];var n=y[r||v[e.b||4]];return new n.arr(t,e.o,e.l>>n.shift)}function l(){M={},w={}}function c(t,e){if(e&&w[e])return w[e];var r=n(t),a=i(r),l=r.buffer,c=Object.prototype.hasOwnProperty;if(a&&!a.faceCount&&!a.faces&&!a.positions)return console.warn("Warning: PolyMesh is empty."),new g.c;s(o(a),"Invalid Polymesh Data?");var h=u(l,a.faceCount),f=new g.d;1===h.length?f.defaultFaceArity=h[0]:f.setFaceArities(h),f.collapsePositions=!1,f.collapseMapValues=!1;var p=u(l,a.faces),m=u(l,a.positions,"RawFloat32"),v=g.a.id(g.a.TypePosition);if(f.setMapIndices(v,p),f.setMapValues(v,m),a.normalMap){var y=u(l,a.normalMap.faces),M=u(l,a.normalMap.values,"RawFloat32"),x=g.a.id(g.a.TypeNormal);f.setMapIndices(x,y),f.setMapValues(x,M)}if(a.uvMaps&&d()(a.uvMaps).length)for(var b in a.uvMaps)if(c.call(a.uvMaps,b)){var T=a.uvMaps[b],E=u(l,T.faces),S=u(l,T.values,"RawFloat32"),_=g.a.id(g.a.TypeUV,b);f.setMapIndices(_,E),f.setMapValues(_,S)}if(a.tangentMap){var A=u(l,a.tangentMap.faces),D=u(l,a.tangentMap.values,"RawFloat32"),N=g.a.id(g.a.TypeTangent);f.setMapIndices(N,A),f.setMapValues(N,D)}if(a.blendShapes){f.initializeBlendShape();for(var I in a.blendShapes)if(c.call(a.blendShapes,I)){var L=a.blendShapes[I],C=u(l,L.positions,"RawFloat32"),O=L.normals?u(l,L.normals,"RawFloat32"):null,R=L.weights?u(l,L.weights,"RawFloat32"):null;f.setBlendShapes(I,C,O,R)}}if(a.skinning&&f.setSkinning(u(l,a.skinning.positionSkinRange,"RawUint32"),u(l,a.skinning.skinWeights,"RawFloat32"),u(l,a.skinning.skinBoneIndices,"RawUint16"),u(l,a.skinning.poseSkinToPoseBoneTransform,"RawFloat32")),a.edgeCreaseWeights)f.setCreases(u(l,a.edgeCreaseWeights,"RawFloat32"));else if(a.creases){var z=u(l,a.creases.weights,"RawFloat32"),j=u(l,a.creases.edgeVertexIndices,"RawUint32");f.setCreases(z,j)}a.materialIds&&f.setMaterialIds(u(l,a.materialIds,"RawUint32"));var P=f.toMeshAndClear();return e&&(w[e]=P),P}e.b=l,e.a=c;var h=r(52),f=(r.n(h),r(6)),d=r.n(f),p=r(40),m=r.n(p),g=r(141),v={1:"RawUint8",2:"RawUint16",4:"RawUint32"},y={RawUint8:{shift:0,arr:Uint8Array},RawUint16:{shift:1,arr:Uint16Array},RawUint32:{shift:2,arr:Uint32Array},RawFloat32:{shift:2,arr:Float32Array}},M={},w={}}).call(e,r(213).Buffer)},function(t,e,r){"use strict";function n(t){m[t].color=new c.Color(p[t]),m[t].needsUpdate=!0}function i(){["x","y","z"].forEach(n)}function a(t){var e=r.i(h.e)(t),n=(new c.Vector3).copy(e.height<e.width?{x:0,y:.4,z:0}:{x:.4,y:0,z:0}),i=r.i(f.b)(t)[0];if(!i)return 0;var a=(new c.Vector3).setFromMatrixPosition(r.i(d.b)(t,i)),o=r.i(h.q)(t),s=((new c.Vector3).setFromMatrixPosition(o.matrix),(new c.Matrix4).getInverse(o.projectionMatrix,!0)),u=(new c.Vector3).copy(a).applyMatrix4(o.matrixWorldInverse).applyMatrix4(o.projectionMatrix);return u.add(n).applyMatrix4(s).applyMatrix4(o.matrix),u.sub(a).length()}function o(){i();var t=new c.ConeGeometry(.08,.25,25),e=new c.CylinderGeometry(g,g,2,32),r=t.clone();t.translate(0,1,0),r.rotateX(Math.PI),r.translate(0,-1,0),e.merge(t),e.merge(r);var n=e.clone(),a=e.clone(),o=new c.Mesh(e,m.y);o.axis="y",n.rotateX(Math.PI/2);var s=new c.Mesh(n,m.z);s.axis="z",a.rotateZ(Math.PI/2);var u=new c.Mesh(a,m.x);u.axis="x";var l=new c.Object3D;return l.add(u),l.add(o),l.add(s),l}function s(){i();var t=new c.TorusGeometry(1,g,16,100),e=t.clone(),r=t.clone();t.rotateY(Math.PI/2),e.rotateX(Math.PI/2);var n=new c.Object3D,a=new c.Mesh(t,m.x);a.axis="x";var o=new c.Mesh(e,m.y);o.axis="y";var s=new c.Mesh(r,m.z);return s.axis="z",n.add(a),n.add(o),n.add(s),n}function u(){i();var t=new c.BoxGeometry(.2,.2,.2),e=new c.CylinderGeometry(g,g,1,32);e.translate(0,.5,0),t.translate(0,1,0),e.merge(t);var r=e.clone(),n=e.clone(),a=new c.Mesh(e,m.y);a.axis="y",r.rotateX(Math.PI/2);var o=new c.Mesh(r,m.z);o.axis="z",n.rotateZ(-Math.PI/2);var s=new c.Mesh(n,m.x);s.axis="x";var u=new c.Object3D;return u.add(s),u.add(a),u.add(o),u}function l(t,e,r){var i=null,a=e.clientX/(e.rect.width/2)-1,o=-(e.clientY/(e.rect.height/2)-1),s=t.raycastSelect({x:a,y:o},"Widgets");return s&&s[0]&&s[0].node&&s[0].node.axis?(r&&n(r),i=s[0].node.axis,m[i].color=new c.Color(1,1,0),m[i].needsUpdate=!0,t.postTranslate("normal",!0)):r&&(n(r),t.postTranslate("normal",!0)),i}e.c=a,e.e=o,e.d=s,e.b=u,e.a=l;var c=r(13),h=(r.n(c),r(3)),f=r(50),d=r(5),p={x:16711680,y:65280,z:255},m={x:new c.MeshStandardMaterial({color:p.x,depthTest:!1}),y:new c.MeshStandardMaterial({color:p.y,depthTest:!1}),z:new c.MeshStandardMaterial({color:p.z,depthTest:!1})},g=.02},function(t,e,r){"use strict";function n(t,e,r){return Math.max(Math.min(t,r),e)}e.a=n},function(t,e,r){t.exports={default:r(412),__esModule:!0}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(t,e,r,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(r+": incorrect invocation!");return t}},function(t,e,r){var n=r(42),i=r(26).document,a=n(i)&&n(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,r){var n=r(91);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e,r){"use strict";var n=r(116),i=r(16),a=r(224),o=r(53),s=r(64),u=r(70),l=r(441),c=r(94),h=r(222),f=r(22)("iterator"),d=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,r,m,g,v,y){l(r,e,m);var M,w,x,b=function(t){if(!d&&t in _)return _[t];switch(t){case"keys":case"values":return function(){return new r(this,t)}}return function(){return new r(this,t)}},T=e+" Iterator",E="values"==g,S=!1,_=t.prototype,A=_[f]||_["@@iterator"]||g&&_[g],D=A||b(g),N=g?E?b("entries"):D:void 0,I="Array"==e?_.entries||A:A;if(I&&(x=h(I.call(new t)))!==Object.prototype&&(c(x,T,!0),n||s(x,f)||o(x,f,p)),E&&A&&"values"!==A.name&&(S=!0,D=function(){return A.call(this)}),n&&!y||!d&&!S&&_[f]||o(_,f,D),u[e]=D,u[T]=p,g)if(M={values:E?D:b("values"),keys:v?D:b("keys"),entries:N},y)for(w in M)w in _||a(_,w,M[w]);else i(i.P+i.F*(d||S),e,M);return M}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,r){var n=r(53);t.exports=function(t,e,r){for(var i in e)r&&t[i]?t[i]=e[i]:n(t,i,e[i]);return t}},function(t,e,r){var n=r(155)("keys"),i=r(120);t.exports=function(t){return n[t]||(n[t]=i(t))}},function(t,e,r){var n=r(26),i=n["__core-js_shared__"]||(n["__core-js_shared__"]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,e,r){var n,i,a,o=r(58),s=r(439),u=r(214),l=r(148),c=r(26),h=c.process,f=c.setImmediate,d=c.clearImmediate,p=c.MessageChannel,m=0,g={},v=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},y=function(t){v.call(t.data)};f&&d||(f=function(t){for(var e=[],r=1;arguments.length>r;)e.push(arguments[r++]);return g[++m]=function(){s("function"==typeof t?t:Function(t),e)},n(m),m},d=function(t){delete g[t]},"process"==r(91)(h)?n=function(t){h.nextTick(o(v,t,1))}:p?(i=new p,a=i.port2,i.port1.onmessage=y,n=o(a.postMessage,a,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(n=function(t){c.postMessage(t+"","*")},c.addEventListener("message",y,!1)):n="onreadystatechange"in l("script")?function(t){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),v.call(t)}}:function(t){setTimeout(o(v,t,1),0)}),t.exports={set:f,clear:d}},function(t,e){var r=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:r)(t)}},function(t,e,r){var n=r(42);t.exports=function(t,e){if(!n(t))return t;var r,i;if(e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!n(i=r.call(t)))return i;if(!e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,r){var n=r(26),i=r(10),a=r(116),o=r(160),s=r(34).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=a?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:o.f(t)})}},function(t,e,r){e.f=r(22)},function(t,e,r){var n=r(113),i=r(22)("iterator"),a=r(70);t.exports=r(10).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||a[n(t)]}},function(t,e){},function(t,e,r){"use strict";var n=r(67),i=r(81),a=r(28);t.exports=function(t){for(var e=n(this),r=a(e.length),o=arguments.length,s=i(o>1?arguments[1]:void 0,r),u=o>2?arguments[2]:void 0,l=void 0===u?r:i(u,r);l>s;)e[s++]=t;return e}},function(t,e,r){var n=r(39),i=r(28),a=r(81);t.exports=function(t){return function(e,r,o){var s,u=n(e),l=i(u.length),c=a(o,l);if(t&&r!=r){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((t||c in u)&&u[c]===r)return t||c||0;return!t&&-1}}},function(t,e,r){var n=r(75),i=r(15)("toStringTag"),a="Arguments"==n(function(){return arguments}()),o=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,r,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=o(e=Object(t),i))?r:a?n(e):"Object"==(s=n(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,r){"use strict";var n=r(23),i=r(56);t.exports=function(t,e,r){e in t?n.f(t,e,i(0,r)):t[e]=r}},function(t,e,r){var n=r(14),i=r(11).document,a=n(i)&&n(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,r){var n=r(15)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[n]=!1,!"/./"[t](e)}catch(t){}}return!0}},function(t,e,r){var n=r(75);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e,r){var n=r(76),i=r(15)("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||a[i]===t)}},function(t,e){var r=Math.expm1;t.exports=!r||r(10)>22025.465794806718||r(10)<22025.465794806718||-2e-17!=r(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:r},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e,r){var n=r(14),i=r(12),a=function(t,e){if(i(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{n=r(45)(Function.call,r(55).f(Object.prototype,"__proto__").set,2),n(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,r){return a(t,r),e?t.__proto__=r:n(t,r),t}}({},!1):void 0),check:a}},function(t,e,r){var n=r(176)("keys"),i=r(68);t.exports=function(t){return n[t]||(n[t]=i(t))}},function(t,e,r){var n=r(11),i=n["__core-js_shared__"]||(n["__core-js_shared__"]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,e,r){var n=r(12),i=r(66),a=r(15)("species");t.exports=function(t,e){var r,o=n(t).constructor;return void 0===o||void 0==(r=n(o)[a])?e:i(r)}},function(t,e,r){var n=r(233),i=r(54);t.exports=function(t,e,r){if(n(e))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(t))}},function(t,e,r){var n,i,a,o=r(45),s=r(124),u=r(229),l=r(167),c=r(11),h=c.process,f=c.setImmediate,d=c.clearImmediate,p=c.MessageChannel,m=0,g={},v=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},y=function(t){v.call(t.data)};f&&d||(f=function(t){for(var e=[],r=1;arguments.length>r;)e.push(arguments[r++]);return g[++m]=function(){s("function"==typeof t?t:Function(t),e)},n(m),m},d=function(t){delete g[t]},"process"==r(75)(h)?n=function(t){h.nextTick(o(v,t,1))}:p?(i=new p,a=i.port2,i.port1.onmessage=y,n=o(a.postMessage,a,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(n=function(t){c.postMessage(t+"","*")},c.addEventListener("message",y,!1)):n="onreadystatechange"in l("script")?function(t){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),v.call(t)}}:function(t){setTimeout(o(v,t,1),0)}),t.exports={set:f,clear:d}},function(t,e,r){for(var n,i=r(11),a=r(35),o=r(68),s=o("typed_array"),u=o("view"),l=!(!i.ArrayBuffer||!i.DataView),c=l,h=0,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");h<9;)(n=i[f[h++]])?(a(n.prototype,s,!0),a(n.prototype,u,!0)):c=!1;t.exports={ABV:l,CONSTR:c,TYPED:s,VIEW:u}},function(t,e,r){var n=r(165),i=r(15)("iterator"),a=r(76);t.exports=r(97).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||a[n(t)]}},function(t,e,r){"use strict";var n=r(73),i=r(236),a=r(76),o=r(39);t.exports=r(235)(Array,"Array",function(t,e){this._t=o(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):"keys"==e?i(0,r):"values"==e?i(0,t[r]):i(0,[r,t[r]])},"values"),a.Arguments=a.Array,n("keys"),n("values"),n("entries")},function(t,e,r){"use strict";(function(t,n,i){function a(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function o(t){var e=t._promiseCallbacks;return e||(e=t._promiseCallbacks={}),e}function s(t,e){return"onerror"===t?void xt.on("error",e):2!==arguments.length?xt[t]:void(xt[t]=e)}function u(t){return"function"==typeof t||"object"==typeof t&&null!==t}function l(t){return"function"==typeof t}function c(t){return"object"==typeof t&&null!==t}function h(){}function f(){setTimeout(function(){for(var t=0;t<_t.length;t++){var e=_t[t],r=e.payload;r.guid=r.key+r.id,r.childGuid=r.key+r.childId,r.error&&(r.stack=r.error.stack),xt.trigger(e.name,e.payload)}_t.length=0},50)}function d(t,e,r){1===_t.push({name:t,payload:{key:e._guidKey,id:e._id,eventName:t,detail:e._result,childId:r&&r._id,label:e._label,timeStamp:Et(),error:xt["instrument-with-stack"]?new Error(e._label):null}})&&f()}function p(t,e){var r=this;if(t&&"object"==typeof t&&t.constructor===r)return t;var n=new r(g,e);return b(n,t),n}function m(){return new TypeError("A promises callback cannot return that same promise.")}function g(){}function v(t){try{return t.then}catch(t){return It.error=t,It}}function y(t,e,r,n){try{t.call(e,r,n)}catch(t){return t}}function M(t,e,r){xt.async(function(t){var n=!1,i=y(r,e,function(r){n||(n=!0,e!==r?b(t,r,void 0):E(t,r))},function(e){n||(n=!0,S(t,e))},"Settle: "+(t._label||" unknown promise"));!n&&i&&(n=!0,S(t,i))},t)}function w(t,e){e._state===Dt?E(t,e._result):e._state===Nt?(e._onError=null,S(t,e._result)):_(e,void 0,function(r){e!==r?b(t,r,void 0):E(t,r)},function(e){return S(t,e)})}function x(t,e,r){e.constructor===t.constructor&&r===C&&t.constructor.resolve===p?w(t,e):r===It?(S(t,It.error),It.error=null):void 0===r?E(t,e):l(r)?M(t,e,r):E(t,e)}function b(t,e){t===e?E(t,e):u(e)?x(t,e,v(e)):E(t,e)}function T(t){t._onError&&t._onError(t._result),A(t)}function E(t,e){t._state===At&&(t._result=e,t._state=Dt,0===t._subscribers.length?xt.instrument&&d("fulfilled",t):xt.async(A,t))}function S(t,e){t._state===At&&(t._state=Nt,t._result=e,xt.async(T,t))}function _(t,e,r,n){var i=t._subscribers,a=i.length;t._onError=null,i[a]=e,i[a+Dt]=r,i[a+Nt]=n,0===a&&t._state&&xt.async(A,t)}function A(t){var e=t._subscribers,r=t._state;if(xt.instrument&&d(r===Dt?"fulfilled":"rejected",t),0!==e.length){for(var n=void 0,i=void 0,a=t._result,o=0;o<e.length;o+=3)n=e[o],i=e[o+r],n?I(r,n,i,a):i(a);t._subscribers.length=0}}function D(){this.error=null}function N(t,e){try{return t(e)}catch(t){return Lt.error=t,Lt}}function I(t,e,r,n){var i=l(r),a=void 0,o=void 0,s=void 0,u=void 0;if(i){if(a=N(r,n),a===Lt?(u=!0,o=a.error,a.error=null):s=!0,e===a)return void S(e,m())}else a=n,s=!0;e._state!==At||(i&&s?b(e,a):u?S(e,o):t===Dt?E(e,a):t===Nt&&S(e,a))}function L(t,e){var r=!1;try{e(function(e){r||(r=!0,b(t,e))},function(e){r||(r=!0,S(t,e))})}catch(e){S(t,e)}}function C(t,e,r){var n=arguments,i=this,a=i._state;if(a===Dt&&!t||a===Nt&&!e)return xt.instrument&&d("chained",i,i),i;i._onError=null;var o=new i.constructor(g,r),s=i._result;return xt.instrument&&d("chained",i,o),a?function(){var t=n[a-1];xt.async(function(){return I(a,o,t,s)})}():_(i,o,t,e),o}function O(t,e,r){return t===Dt?{state:"fulfilled",value:r}:{state:"rejected",reason:r}}function R(t,e,r,n){this._instanceConstructor=t,this.promise=new t(g,n),this._abortOnReject=r,this._validateInput(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._init(),0===this.length?E(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&E(this.promise,this._result))):S(this.promise,this._validationError())}function z(t,e){return new R(this,t,!0,e).promise}function j(t,e){var r=this,n=new r(g,e);if(!Tt(t))return S(n,new TypeError("You must pass an array to race.")),n;for(var i=0;n._state===At&&i<t.length;i++)_(r.resolve(t[i]),void 0,function(t){return b(n,t)},function(t){return S(n,t)});return n}function P(t,e){var r=this,n=new r(g,e);return S(n,t),n}function U(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function B(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function V(t,e){this._id=Ot++,this._label=e,this._state=void 0,this._result=void 0,this._subscribers=[],xt.instrument&&d("created",this),g!==t&&("function"!=typeof t&&U(),this instanceof V?L(this,t):B())}function F(){this.value=void 0}function k(t){try{return t.then}catch(t){return Rt.value=t,Rt}}function G(t,e,r){try{t.apply(e,r)}catch(t){return Rt.value=t,Rt}}function Y(t,e){for(var r={},n=t.length,i=new Array(n),a=0;a<n;a++)i[a]=t[a];for(var o=0;o<e.length;o++){r[e[o]]=i[o+1]}return r}function H(t){for(var e=t.length,r=new Array(e-1),n=1;n<e;n++)r[n-1]=t[n];return r}function Q(t,e){return{then:function(r,n){return t.call(e,r,n)}}}function W(t,e){var r=function(){for(var r=this,n=arguments.length,i=new Array(n+1),a=!1,o=0;o<n;++o){var s=arguments[o];if(!a){if((a=Z(s))===zt){var u=new V(g);return S(u,zt.value),u}a&&!0!==a&&(s=Q(a,s))}i[o]=s}var l=new V(g);return i[n]=function(t,r){t?S(l,t):void 0===e?b(l,r):!0===e?b(l,H(arguments)):Tt(e)?b(l,Y(arguments,e)):b(l,r)},a?q(l,i,t,r):X(l,i,t,r)};return r.__proto__=t,r}function X(t,e,r,n){var i=G(r,n,e);return i===Rt&&S(t,i.value),t}function q(t,e,r,n){return V.all(e).then(function(e){var i=G(r,n,e);return i===Rt&&S(t,i.value),t})}function Z(t){return!(!t||"object"!=typeof t)&&(t.constructor===V||k(t))}function K(t,e){return V.all(t,e)}function J(t,e,r){this._superConstructor(t,e,!1,r)}function $(t,e){return new J(V,t,e).promise}function tt(t,e){return V.race(t,e)}function et(t,e,r){this._superConstructor(t,e,!0,r)}function rt(t,e){return new et(V,t,e).promise}function nt(t,e,r){this._superConstructor(t,e,!1,r)}function it(t,e){return new nt(V,t,e).promise}function at(t){throw setTimeout(function(){throw t}),t}function ot(t){var e={resolve:void 0,reject:void 0};return e.promise=new V(function(t,r){e.resolve=t,e.reject=r},t),e}function st(t,e,r){return V.all(t,r).then(function(t){if(!l(e))throw new TypeError("You must pass a function as map's second argument.");for(var n=t.length,i=new Array(n),a=0;a<n;a++)i[a]=e(t[a]);return V.all(i,r)})}function ut(t,e){return V.resolve(t,e)}function lt(t,e){return V.reject(t,e)}function ct(t,e){return V.all(t,e)}function ht(t,e){return V.resolve(t,e).then(function(t){return ct(t,e)})}function ft(t,e,r){return(Tt(t)?ct(t,r):ht(t,r)).then(function(t){if(!l(e))throw new TypeError("You must pass a function as filter's second argument.");for(var n=t.length,i=new Array(n),a=0;a<n;a++)i[a]=e(t[a]);return ct(i,r).then(function(e){for(var r=new Array(n),i=0,a=0;a<n;a++)e[a]&&(r[i]=t[a],i++);return r.length=i,r})})}function dt(t,e){Gt[jt]=t,Gt[jt+1]=e,2===(jt+=2)&&Yt()}function pt(){return void 0!==Pt?function(){Pt(gt)}:mt()}function mt(){return function(){return setTimeout(gt,1)}}function gt(){for(var t=0;t<jt;t+=2){(0,Gt[t])(Gt[t+1]),Gt[t]=void 0,Gt[t+1]=void 0}jt=0}function vt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yt(){xt.on.apply(xt,arguments)}function Mt(){xt.off.apply(xt,arguments)}var wt={mixin:function(t){return t.on=this.on,t.off=this.off,t.trigger=this.trigger,t._promiseCallbacks=void 0,t},on:function(t,e){if("function"!=typeof e)throw new TypeError("Callback must be a function");var r=o(this),n=void 0;n=r[t],n||(n=r[t]=[]),-1===a(n,e)&&n.push(e)},off:function(t,e){var r=o(this),n=void 0,i=void 0;if(!e)return void(r[t]=[]);n=r[t],-1!==(i=a(n,e))&&n.splice(i,1)},trigger:function(t,e,r){var n=o(this),i=void 0;if(i=n[t])for(var a=0;a<i.length;a++)(0,i[a])(e,r)}},xt={instrument:!1};wt.mixin(xt);var bt=void 0;bt=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var Tt=bt,Et=Date.now||function(){return(new Date).getTime()},St=Object.create||function(t){if(arguments.length>1)throw new Error("Second argument not supported");if("object"!=typeof t)throw new TypeError("Argument must be an object");return h.prototype=t,new h},_t=[],At=void 0,Dt=1,Nt=2,It=new D,Lt=new D;R.prototype._validateInput=function(t){return Tt(t)},R.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},R.prototype._init=function(){this._result=new Array(this.length)},R.prototype._enumerate=function(){for(var t=this.length,e=this.promise,r=this._input,n=0;e._state===At&&n<t;n++)this._eachEntry(r[n],n)},R.prototype._settleMaybeThenable=function(t,e){var r=this._instanceConstructor,n=r.resolve;if(n===p){var i=v(t);if(i===C&&t._state!==At)t._onError=null,this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=this._makeResult(Dt,e,t);else if(r===V){var a=new r(g);x(a,t,i),this._willSettleAt(a,e)}else this._willSettleAt(new r(function(e){return e(t)}),e)}else this._willSettleAt(n(t),e)},R.prototype._eachEntry=function(t,e){c(t)?this._settleMaybeThenable(t,e):(this._remaining--,this._result[e]=this._makeResult(Dt,e,t))},R.prototype._settledAt=function(t,e,r){var n=this.promise;n._state===At&&(this._remaining--,this._abortOnReject&&t===Nt?S(n,r):this._result[e]=this._makeResult(t,e,r)),0===this._remaining&&E(n,this._result)},R.prototype._makeResult=function(t,e,r){return r},R.prototype._willSettleAt=function(t,e){var r=this;_(t,void 0,function(t){return r._settledAt(Dt,e,t)},function(t){return r._settledAt(Nt,e,t)})};var Ct="rsvp_"+Et()+"-",Ot=0;V.cast=p,V.all=z,V.race=j,V.resolve=p,V.reject=P,V.prototype={constructor:V,_guidKey:Ct,_onError:function(t){var e=this;xt.after(function(){e._onError&&xt.trigger("error",t,e._label)})},then:C,catch:function(t,e){return this.then(void 0,t,e)},finally:function(t,e){var r=this,n=r.constructor;return r.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})},e)}};var Rt=new F,zt=new F;J.prototype=St(R.prototype),J.prototype._superConstructor=R,J.prototype._makeResult=O,J.prototype._validationError=function(){return new Error("allSettled must be called with an array")},et.prototype=St(R.prototype),et.prototype._superConstructor=R,et.prototype._init=function(){this._result={}},et.prototype._validateInput=function(t){return t&&"object"==typeof t},et.prototype._validationError=function(){return new Error("Promise.hash must be called with an object")},et.prototype._enumerate=function(){var t=this,e=t.promise,r=t._input,n=[];for(var i in r)e._state===At&&Object.prototype.hasOwnProperty.call(r,i)&&n.push({position:i,entry:r[i]});var a=n.length;t._remaining=a;for(var o=void 0,s=0;e._state===At&&s<a;s++)o=n[s],t._eachEntry(o.entry,o.position)},nt.prototype=St(et.prototype),nt.prototype._superConstructor=R,nt.prototype._makeResult=O,nt.prototype._validationError=function(){return new Error("hashSettled must be called with an object")};var jt=0,Pt=void 0,Ut="undefined"!=typeof window?window:void 0,Bt=Ut||{},Vt=Bt.MutationObserver||Bt.WebKitMutationObserver,Ft="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),kt="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Gt=new Array(1e3),Yt=void 0;Yt=Ft?function(){var e=t.nextTick,r=t.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(r)&&"0"===r[1]&&"10"===r[2]&&(e=n),function(){return e(gt)}}():Vt?function(){var t=0,e=new Vt(gt),r=document.createTextNode("");return e.observe(r,{characterData:!0}),function(){return r.data=t=++t%2}}():kt?function(){var t=new MessageChannel;return t.port1.onmessage=gt,function(){return t.port2.postMessage(0)}}():void 0===Ut?function(){try{var t=r(606);return Pt=t.runOnLoop||t.runOnContext,pt()}catch(t){return mt()}}():mt();if("object"==typeof self)self;else{if("object"!=typeof i)throw new Error("no global: `self` or `global` found");i}var Ht;xt.async=dt,xt.after=function(t){return setTimeout(t,0)};var Qt=ut,Wt=function(t,e){return xt.async(t,e)};if("undefined"!=typeof window&&"object"==typeof window.__PROMISE_INSTRUMENTATION__){var Xt=window.__PROMISE_INSTRUMENTATION__;s("instrument",!0);for(var qt in Xt)Xt.hasOwnProperty(qt)&&yt(qt,Xt[qt])}var Zt=(Ht={asap:dt,cast:Qt,Promise:V,EventTarget:wt,all:K,allSettled:$,race:tt,hash:rt,hashSettled:it,rethrow:at,defer:ot,denodeify:W,configure:s,on:yt,off:Mt,resolve:ut,reject:lt,map:st},vt(Ht,"async",Wt),vt(Ht,"filter",ft),Ht);e.a=Zt}).call(e,r(129),r(581).setImmediate,r(59))},function(t,e){t.exports={array:Array.isArray,primitive:function(t){return"string"==typeof t||"number"==typeof t}}},function(t,e,r){"use strict";function n(t){return t?t.isVector3?t:t.hasOwnProperty("x")?new c.Vector3(t.x,t.y,t.z):Array.isArray(t)?new c.Vector3(t[0],t[1],t[2]):new c.Vector3:new c.Vector3}function i(t){return t?t.isVector2?t:t.hasOwnProperty("x")?new c.Vector2(t.x,t.y):Array.isArray(t)?new c.Vector2(t[0],t[1]):new c.Vector2:new c.Vector2}function a(t){if(l()(t))return new c.Color(t);if(!t)return new c.Color;if("string"==typeof t){var e=new c.Color;return e.setHex(parseInt("0x"+t.replace("#",""))),e}return Array.isArray(t)?new c.Color(t[0],t[1],t[2]):t.hasOwnProperty("r")?new c.Color(t.r,t.g,t.b):new c.Color}var o=r(52),s=r.n(o),u=r(401),l=r.n(u),c=r(1),h=(r.n(c),{Boolean:function(t){var e=t.defaultValue||!1;return{defaultValue:e,set:function(t){return null==t?e:!!t}}},Label:function(t){return{set:function(t){return"string"==typeof t?t:""}}},Number:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){var e=t.minValue,r=t.maxValue,n=t.defaultValue||0,i=void 0;return i=void 0!==e&&void 0!==r?function(t){return Math.min(Math.max(e,t),r)}:void 0!==e?function(t){return Math.max(t,e)}:void 0!==r?function(t){return Math.min(t,r)}:function(t){return t},{defaultValue:n,set:function(t){var e=Number(t);return isNaN(e)?n:Math.round(1e4*i(e))/1e4}}}),Integer:function(t){var e=t.minValue,r=t.maxValue,n=t.defaultValue||0,i=void 0;return i=void 0!==e&&void 0!==r?function(t){return Math.min(Math.max(e,t),r)}:void 0!==e?function(t){return Math.max(t,e)}:void 0!==r?function(t){return Math.min(t,r)}:function(t){return t},{defaultValue:n,set:function(t){var e=Number(t);return isNaN(e)?n:Math.round(i(e))}}},Plug:function(t){if(!t.plug)throw new Error("plug property expects a `plug` property");return{isPlugReference:t.plug,set:function(t){return t&&t.id?t.id:t}}},Options:function(t){var e=t.defaultValue;return{defaultValue:e,set:function(t){return null==t?e:t}}},Image:function(t){return{isFileReference:!0,set:function(t){return t&&t.id?t.id:t}}},Binary:function(t){return{isFileReference:!0,set:function(t){return t&&t.id?t.id:t}}},File:function(t){return{isFileReference:!0,set:function(t){return t&&t.id?t.id:t}}},Object:function(t){var e=t.defaultValue||{};return{set:function(t){return t||e},equals:function(t,e){return s()(t)===s()(e)}}},String:function(t){var e=t.defaultValue||"";return{defaultValue:e,set:function(t){return"string"==typeof t?t:e}}},TextArea:function(t){var e=t.defaultValue||"";return{defaultValue:e,set:function(t){return"string"==typeof t?t:e}}},Node:function(t){return{isNodeReference:!0,set:function(t){return t&&t.id?t.id:t}}},NodeList:function(t){return{isReferenceList:!0,set:function(t){return Array.isArray(t)?t.map(function(t){return t&&t.id?t.id:t}):[]},equals:function(t,e){return s()(t)===s()(e)}}},Vec2:function(t){var e=i(t.defaultValue);return{defaultValue:e,set:function(t){return i(t||e)},get:function(t){return t.clone()},equals:function(t,e){return t&&e&&t.equals(e)}}},Color:function(t){var e=a(t.defaultValue);return{defaultValue:e,set:function(t){return a(void 0!==t?t:e)},get:function(t){return t.clone()},equals:function(t,e){return t&&e&&t.equals(e)}}},Vec3:function(t){var e=n(t.defaultValue);return{defaultValue:e,set:function(t){return n(t||e)},get:function(t){return t.clone()},equals:function(t,e){return t&&e&&t.equals(e)}}}});e.a=h},function(t,e,r){"use strict";var n=r(349),i={schema:{subdivisions:{label:"Subdivisions",type:"Number",defaultValue:1,minValue:0,maxValue:4},smoothByMaterialIds:{label:"Smooth by Material Ids",type:"Boolean",defaultValue:!0}},update:function(t,e){var i=e.mesh,a=void 0!==t.subdivisions?t.subdivisions:1;if(!i)return e;for(var o=0;o<a;o++)i=r.i(n.a)(i,t.smoothByMaterialIds);return e.mesh=i,e}};e.a=i},function(t,e,r){"use strict";function n(t){this.data=new Uint32Array(t+31>>>5),this.length=t,this.byteView=null}e.a=n,n.prototype={constructor:n,clear:function(){return this.data.fill(0),this},fill:function(t,e){var r=this.data,n=void 0!==t?t:0,i=void 0!==e?n+e:this.length,a=n>>>5,o=i>>>5,s=-2147483648>>~n,u=(1<<i)-1;return a===o?r[a]|=s&u:(r[a]|=s,++a!==o&&r.fill(-1,a,o),r[o]|=u),this},include:function(t){this.data[t>>>5]|=1<<t},exclude:function(t){this.data[t>>>5]&=~(1<<t)},contains:function(t){return 0!=(this.data[t>>>5]&1<<t)},swap:function(t,e){var r=this.data,n=t>>>5,i=1<<t,a=e>>>5,o=1<<e,s=0!=(r[n]&i);s!==(0!=(r[a]&o))&&(s?(r[n]&=~i,r[a]|=o):(r[n]|=i,r[a]&=~o))},testAndInclude:function(t){var e=this.data,r=t>>>5,n=1<<t,i=e[r];return e[r]=i|n,0!=(i&n)},includeFromArray:function(t,e,r){for(var n=this.data,i=e||0,a=r||t.length;i<a;++i){var o=t[i];n[o>>>5]|=1<<o}return this},containsAnyIn:function(t,e,r){for(var n=!1,i=this.data,a=e||0,o=r||t.length;a<o&&!n;++a){var s=t[a];n=0!=(i[s>>>5]&1<<s)}return n},countSetBits:function(t,e){var r=0,i=void 0!==t?t:0,a=void 0!==e?e:this.length;if(0==(a-i&-16384))r=this.countSetBitsInShortRange(i,a);else if(i<a){var o=this.byteView,s=n._ByteBitCount;null===o&&(o=new Uint8Array(this.data.buffer),this.byteView=o);var u=i>>>3,l=a>>>3,c=-2147483648>>31-(7&i),h=(1<<(7&a))-1;r=s[o[u]&c];for(var f=u+1;f!==l;++f)r+=s[o[f]];r+=s[o[l]&h]}return r},countSetBitsInShortRange:function(t,e){var r=0,n=this.data,i=t,a=i>>>5,o=n[a]>>i;for(r=1&o;++i!==e;)0!=(31&i)?o>>=1:o=0|n[++a],r+=1&o;return r},toIndexArray:function(t){for(var e=new Uint32Array(void 0===t?this.countSetBits():t),r=0,n=0,i=this.data,a=0,o=i.length;a!==o;++a){for(var s=i[a],u=r;0!==s;s>>>=1,++u)0!=(1&s)&&(e[n++]=u);r+=32}return e}},n._ByteBitCount=function(){for(var t=new Uint8Array(256),e=0;256!==e;++e){for(var r=0,n=e;0!==n;n>>>=1)0!=(1&n)&&++r;t[e]=r}return t}()},function(t,e,r){"use strict";function n(t,e){this.blocks=[],this.lastBlock=null,this.arrayType=t;var r=e||12;this.intraBlockIndexBits=r,this.intraBlockIndexMask=(1<<r)-1,this.length=0}e.a=n;var i=r(29);n.prototype={constructor:n,elementSize:1,toArrayAndClear:function(){var t=this.toArray();return this.clear(),t},newRangeArray:function(t){var e=t||1;return new this.arrayType(e*this.elementSize)},rangeToArray:function(t,e,r,n){for(var i=this.intraBlockIndexMask,a=this.elementSize,o=t>>this.intraBlockIndexBits,s=t&i,u=this.blocks[o],l=r||new this.arrayType(e*a),c=void 0===n?0:n,h=0;h<e;++h){for(var f=s*a,d=f+a;f!==d;++f)l[c++]=u[f];0==(++s&i)&&(u=this.blocks[++o])}return l},arrayToRange:function(t,e,r,n){for(var i=this.intraBlockIndexMask,a=this.elementSize,o=e>>this.intraBlockIndexBits,s=e&i,u=this.blocks[o],l=void 0===n?0:n,c=0;c<r;++c){for(var h=s*a,f=h+a;h!==f;++h)u[h]=t[l++];0==(++s&i)&&(u=this.blocks[++o])}return this},pushArrayRange:function(t,e,r){for(var n=this.intraBlockIndexMask,i=this.elementSize,a=this.length,o=this.lastBlock,s=void 0===r?0:r,u=0;u<e;++u){if(0==(a&=n)){var l=n+1;o=new this.arrayType(l*i),this.lastBlock=o,this.blocks.push(o)}for(var c=a++*i,h=c+i;c!==h;++c)o[c]=t[s++]}return this.length+=e},clear:function(){return this.blocks=[],this.length=0,this.lastBlock=null,this},toArray:function(t,e){for(var r=void 0===e?0:e,n=this.elementSize,a=this.length*n+r,o=i.a.maybeCreate(t||this.arrayType,a),s=this.blocks,u=(1<<this.intraBlockIndexBits)*n,l=Math.max(s.length-1,0),c=0;c!==l;++c)o.set(s[c],r),r+=u;var h=a-r;return 0!==h&&o.set(s[l].subarray(0,h),r),o}}},function(t,e,r){"use strict";function n(t,e){this.data=t,this.length=e}e.a=n;var i=r(29),a=r(191);n.prototype={constructor:n,offset:0,stride:1,elementSize:1,newRangeArray:function(t){var e=t||1;return new this.data.constructor(e*this.elementSize)},rangeToArray:function(t,e,r,n){for(var i=this.data,a=this.stride,o=this.elementSize,s=r||new this.data.constructor(e*this.elementSize),u=n||0,l=this.offset+t*a,c=l+e*a;l<c;l+=a)for(var h=l,f=l+o;h!==f;++h)s[u++]=i[h];return s},arrayToRange:function(t,e,r,n){for(var i=this.data,a=this.stride,o=this.elementSize,s=n||0,u=this.offset+e*a,l=u+r*a;u<l;u+=a)for(var c=u,h=u+o;c!==h;++c)i[c]=t[s++];return this},toArray:function(t,e){var r=this.stride,n=this.length,a=this.elementSize,o=void 0===e?0:e,s=o+n*a;if(r===a){var u=this.data,l=this.offset,c=l+n*a;if(0===o&&(void 0===t||t===this.data.constructor))return i.a.slice(u,l,c);var h=i.a.maybeCreate(t,s);return h.set(u.subarray(l,c),o),h}var f=i.a.maybeCreate(t,s);return this.rangeToArray(0,n,f,e)},fromArray:function(t,e){var r=this.stride,n=this.length,i=this.elementSize,a=void 0===e?0:e,o=a+n*i;if(r!==i)return this.arrayToRange(t,0,n,a);var s=0===a&&t.length===o?t:t.subarray(a,o);return this.data.set(s,this.offset),this},repack:function(t){var e=this.data.constructor,r=t||e;return this.stride===this.elementSize&&r===e||this.forceRepack(t),this},forceRepack:function(t){return this.data=this.toArray(t),this.offset=0,this.stride=this.elementSize,this},clone:function(){return this.newCompatibleView(this.toArray(),this.length)},newCompatibleView:function(t,e){throw Error("not implemented")},newCompatibleBuffer:function(){throw Error("not implemented")},newCompareAtIndices:function(){return a.a.derefedTuplesIn(this.data,this.elementSize,this.stride)},newCompareAtIndicesStable:function(){return a.a.derefedTuplesStableIn(this.data,this.elementSize,this.stride)}}},function(t,e,r){"use strict";function n(t){u.a.call(this,t||Uint32Array)}e.a=n;var i=r(69),a=r.n(i),o=r(2),s=r.n(o),u=r(188);n.prototype=s()(a()(u.a.prototype),{constructor:n,getAt:function(t){var e=t>>this.intraBlockIndexBits,r=t&this.intraBlockIndexMask;return this.blocks[e][r]},setAt:function(t,e){var r=t>>this.intraBlockIndexBits,n=t&this.intraBlockIndexMask;return this.blocks[r][n]=e,this},push:function(t){var e=this.length++,r=this.lastBlock,n=e&this.intraBlockIndexMask;if(0===n){var i=this.intraBlockIndexMask+1;r=new this.arrayType(i),this.lastBlock=r,this.blocks.push(r)}return r[n]=t,e+1}})},function(t,e,r){"use strict";var n={Numeric:function(t,e){return t-e},Natural:function(t,e){return t<e?-1:e<t?1:0},derefedNumbersIn:function(t){return function(e,r){return t[e]-t[r]}},derefedTuplesIn:function(t,e,r){if(!e)throw Error("Invalid element size!");var i=r||e;return 1===i&&1===e?n.derefNumbersIn(t):function(r,n){for(var a=r*i,o=n*i,s=t[a]-t[o],u=1;u!==e&&0===s;++u)s=t[a+u]-t[o+u];return s}},derefedNumbersStableIn:function(t){return function(e,r){var n=t[e]-t[r];return 0!==n?n:e-r}},derefedTuplesStableIn:function(t,e,r){if(!e)throw Error("Invalid element size!");var i=r||e;return 1===i&&1===e?n.derefNumbersStableIn(t):function(r,n){for(var a=r*i,o=n*i,s=t[a]-t[o],u=1;u!==e&&0===s;++u)s=t[a+u]-t[o+u];return 0!==s?s:r-n}}};e.a=n},function(t,e,r){"use strict";function n(t){this.mesh=t,this.groups=null;for(var e=0,r=t.faceRangeOffsets,n=r[0],i=0,a=1,o=r.length;a<o;++a){var s=r[a],u=s-n;u>=3&&(e+=u-2),i=Math.max(i,u),n=s}this.startFaceIndices=this.getStartFaceIndices(t.positions,i),this.numTriangles=e}e.a=n;var i=r(1);r.n(i);n.prototype={constructor:n,getStartFaceIndices:function(t,e){for(var r,n,a,o=this.mesh.faceRangeOffsets,s=this.mesh.faceRangeOffsets.length-1,u=new Uint32Array(s),l=new Float32Array(e),c=t.faceValueIndices,h=t.values,f=new i.Vector3,d=new i.Vector3,p=new i.Vector3,m=new i.Vector3,g=new i.Vector3,v=new i.Vector3,y=new i.Vector3,M=new i.Vector3,w=new i.Vector3,x=0,b=o.length-1;x<b;++x){var T=o[x],E=o[x+1],S=E-T;if(!(S<=3)){var _=c[T+(S-1)],A=c[T],D=c[T+1%S];h.getAt(_,g),h.getAt(A,v),h.getAt(D,y),d.copy(v).sub(g),p.copy(y).sub(v),w.copy(p).cross(d);for(var N=0;N<S;++N){_,_=A,A=D,D=c[T+(N+2)%S],n=m,m=g,g=v,v=y,y=n,h.getAt(D,y),r=f,f=d,d=p,p=r,p.copy(y).sub(v),a=M,M=w,w=a,w.copy(p).cross(d);var I=M.dot(w);l[N]=I}for(var N=0;N<S;++N){var I=l[N],L=l[(N+1)%S];if(I>=0&&L>=0){u[x]=(N+1)%S;break}}}}return u},translateIndices:function(t,e){var r=this.mesh.faceRangeOffsets,n=e.data,i=e.offset,a=e.stride,o=null,s=null,u=null,l=null;if(this.mesh.materialIds){o=this.mesh.materialIds;for(var c=r.length-1,s=new Uint32Array(c),h=0;h<s.length;h++)s[h]=h;s.sort(function(t,e){return o[t]-o[e]});var f=Math.min(o[s[c-1]]+1,30);u=new Uint32Array(f);for(var h=0;h<f;h++)u[h]=n.length;l=new Uint32Array(f)}for(var h=0;h<this.startFaceIndices.length;++h){var d=h;s&&(d=s[h]);for(var p=this.startFaceIndices[d],m=r[d],g=r[d+1],v=g-m,y=0;y<v-2;++y){if(o){var M=Math.min(o[d],29);u[M]=Math.min(u[M],i),l[M]=Math.max(l[M],i+2*a)}n[i]=t[m+p],i+=a,n[i]=t[m+(p+y+1)%v],i+=a,n[i]=t[m+(p+y+2)%v],i+=a}}if(o){for(var h=0;h<l.length;h++)l[h]=l[h]-u[h]+1;this.groups={groupStarts:u,groupCounts:l}}},translateMaterialIds:function(t){for(var e=this.mesh.faceRangeOffsets,r=this.mesh.materialIds,n=e[0],i=1,a=e.length;i<a;++i){for(var o=r[i-1],s=e[i],u=s-n,l=u>=3?u-2:0,c=writeIndex+l*stride;writeIndex!==c;writeIndex+=stride)outputArray[writeIndex]=o;n=s}},translateToUnindexedValues:function(t,e,r){var n=this.mesh.faceRangeOffsets,i=0,a=t.newRangeArray(1),o=null,s=null,u=null,l=null;if(this.mesh.materialIds){o=this.mesh.materialIds;for(var c=n.length-1,s=new Uint32Array(c),h=0;h<s.length;h++)s[h]=h;s.sort(function(t,e){return o[t]-o[e]});var f=o[s[c-1]]+1;u=new Uint32Array(f);for(var h=0;h<f;h++)u[h]=e.length;l=new Uint32Array(f)}for(var h=0;h<this.startFaceIndices.length;++h){var d=h;s&&(d=s[h]);for(var p=this.startFaceIndices[d],m=n[d],g=n[d+1],v=g-m,y=0;y<v-2;++y){if(o){var M=o[d];u[M]=Math.min(u[M],i),l[M]=Math.max(l[M],i+2)}e.arrayToRange(t.rangeToArray(r[m+p],1,a),i,1),e.arrayToRange(t.rangeToArray(r[m+(p+y+1)%v],1,a),i+1,1),e.arrayToRange(t.rangeToArray(r[m+(p+y+2)%v],1,a),i+2,1),i+=3}}if(o){for(var h=0;h<l.length;h++)l[h]=l[h]-u[h]+1;this.groups={groupStarts:u,groupCounts:l}}}}},function(t,e,r){"use strict";function n(t,e,r,n){this.positions=t||new a.a(i.Vector3,0),this.normals=e,this.weights=r,this.weight=n||1}var i=r(1),a=(r.n(i),r(4));n.prototype={constructor:n,isEmpty:function(){return!this.positions.length},setWeight:function(t){this.weight=t}},e.a=n},function(t,e,r){"use strict";function n(t,e,r,n,a){var o=(new i.Vector3).copy(a),s=(new i.Vector3).copy(t).multiplyScalar(Math.PI/180),u=(new i.Euler).setFromVector3(s,e),l=(new i.Matrix4).makeRotationFromEuler(u),c=void 0;return 1===r&&(c=(new i.Matrix4).makeRotationY(Math.PI/2),l.multiply(c)),2===r&&(c=(new i.Matrix4).makeRotationX(Math.PI/2),l.multiply(c)),o.applyMatrix4(l).normalize(),Math.abs(o.x)<1e-4&&(o.x=0),Math.abs(o.y)<1e-4&&(o.y=0),Math.abs(o.z)<1e-4&&(o.z=0),(new i.Plane).setFromNormalAndCoplanarPoint(o,n)}e.a=n;var i=r(13);r.n(i)},function(t,e,r){"use strict";function n(t,e,r){for(var n=t[0].values.type,i=0,a=1,s=0,l=0;l<t.length;++l)i+=t[l].values.length,a+=t[l].faceRangeOffsets.length-1,s+=t[l].faceValueIndices.length;var c=new o.a(n,i),h=new Uint32Array(s),f=e||new Uint32Array(a);e||(f[0]=0);for(var d=new n,p=0,m=1,g=0,v=0,y=0;y<t.length;++y){var M=t[y].values,w=void 0;r&&(w=r[y]);for(var x=0;x<M.length;++x){if(M.getAt(x,d),r)if(w&&w.isMatrix3)d.applyMatrix3(r[y]);else{if(!w||!w.isMatrix4)throw new Error("Unexpected type of value transform. Require Matrix3 or Matrix4");d.applyMatrix4(r[y])}c.setAt(x+p,d)}p+=M.length;var b=t[y].faceRangeOffsets;if(!e)for(var T=1;T<b.length;++T)f[T-1+m]=b[T]+f[m-1];m+=b.length-1;for(var E=t[y].faceValueIndices,S=0;S<E.length;++S)h[S+g]=E[S]+v;g+=E.length,v+=M.length}var _=new u.a({faceRangeOffsets:f,faceValueIndices:h,values:c});if(i!==c.length)throw new Error("mismatch between number of input and output values");return _}function i(t,e,i){if(!Array.isArray(t))return t;if(1===t.length)return t[0];for(var h=i||!1,f=[],d=[],p=[],m=0;m<t.length;++m){f.push(t[m].positions),d.push(t[m].normalMap);var g=t[m].uvMaps;if(g.byName[g.namesByIndex[0]])p.push(g.byName[g.namesByIndex[0]]);else{var v=t[m].positions.faceRangeOffsets,y=t[m].positions.faceValueIndices,M=new u.a.fromData(v,new Uint32Array(y.length),new o.a(a.Vector2,v.length-1));p.push(M)}}h&&console.log("Merging Positions...");var w=n(f,null,e),x=s.a.fromData(w.faceRangeOffsets,w);if(e)for(var b=0;b<e.length;++b)e[b]=(new a.Matrix3).getNormalMatrix(e[b]);return h&&console.log("Merging Normals..."),x.normalMap=n(d,w.faceRangeOffsets,e),x.uvMaps=new l.a,h&&console.log("Merging UVs..."),x.uvMaps.set("default",n(p,w.faceRangeOffsets)),r.i(c.a)(x,!0)}e.a=i;var a=r(1),o=(r.n(a),r(4)),s=(r(88),r(9)),u=r(7),l=r(18),c=r(138)},function(t,e,r){"use strict";function n(t,e){for(var r=t.length,n=new d.Vector3,i=new Float32Array(r),a=0;a<r;++a)t.getAt(a,n),i[a]=u()(e.distanceToPoint(n));return i}function i(t,e,r,n){for(var i=t.getNumEdges(),a=new Uint32Array(2),o=new Float32Array(i),s=new d.Line3,u=0;u<i;++u){t.getVerticesForEdge(u,a);var l=a[0],c=a[1],h=r[l],f=r[c];0===h||0===f?o[u]=0:h===f?o[u]=h:(n.getAt(l,s.start),n.getAt(c,s.end),o[u]=m(e,s))}return o}function a(t,e,r,n,i,a,o){for(var s=i.faceValueIndices,u=t.edgeVertexAdjacency,c=u.getNumEdges(),f=t.values,d=f.type,p=f.length,m=t.faceRangeOffsets,g=m.length-1,v=t.faceValueIndices,y=v.length,M=new Float32Array(c),w=new Float32Array(2*p),x=new Uint32Array(g+1),b=new Uint32Array(g+1),T=new Uint32Array(2*y),E=new l.a(d,2*p),S=0,_=0,A=0,D=0,N=new d,I=new d,L=new d,C=new d,O=0;O<g;++O){var R=m[O],z=m[O+1],j=z-R;if(a&&1!==a[O]){for(var P=v[R],U=v[R+1%j],B=0;B<j;++B){var V=P;P=U,U=v[R+(B+2)%j],0===w[V]?(f.getAt(V,N),E.setAt(A,N),T[_]=A,w[V]=A+1,++_,++A):(T[_]=w[V]-1,++_)}++D,x[++S]=_}else{for(var F=s[R],k=s[R+1%j],G=A,Y=_,H=new Uint32Array(j),Q=0;Q<j;++Q){var W=F;F=k,k=s[R+(Q+2)%j];var X=n.findEdgeId(W,F),q=e[X],Z=r[W];if(1===Z&&(b[O]=1|b[O]),-1===Z&&(b[O]=2|b[O]),q>=0){var K=v[R+Q%j];if(f.getAt(K,N),Z>=0&&(0===w[K]?(E.setAt(A,N),T[_]=A,w[K]=A+1,H[Q]=K,++_,++A):(T[_]=w[K]-1,++_)),q>0&&q<1){var J=v[R+(Q+1)%j],$=0;if($=o?u.findEdgeId(K,J):X,0===M[$]){var tt=K,et=J;if(F<W){var rt=et;et=tt,tt=rt}f.getAt(tt,I),f.getAt(et,L);var nt=e[X],it=1-nt;I.multiplyScalar(it),L.multiplyScalar(nt),C.addVectors(I,L),E.setAt(A,C),T[_]=A,M[$]=A+1,++_,++A}else T[_]=M[$]-1,++_}}}if(2===b[O]){A=G,_=Y;for(var at=0;at<j;++at)w[H[at]]=0}else++D;x[++S]=_}}var ot=new Uint32Array(D+1),st=new Uint32Array(_),ut=new l.a(d,A);w.fill(-1);for(var lt=0,ct=0,ht=0,ft=0;ft<S;++ft){var dt=x[ft],pt=x[ft+1],mt=pt-dt;if(2!==b[ft]){o||(ot[++lt]=ot[lt-1]+mt);for(var gt=T[dt],vt=T[dt+1%mt],yt=0;yt<mt;++yt){var Mt=gt;gt=vt,vt=T[dt+(yt+2)%mt],-1===w[Mt]?(w[Mt]=ct,st[ht]=ct,E.getAt(Mt,N),ut.setAt(ct,N),++ct,++ht):(st[ht]=w[Mt],++ht)}}}o||(o=ot);var wt={faceRangeOffsets:o,faceValueIndices:st,values:ut};return new h.a(wt)}function o(t,e,o,s,u){var l=u?new Uint32Array(t.faceRangeOffsets.length-1):null;if(u){var h=u.indices,d=h.length;if(0===d)return t;for(var m=0;m<d;++m){l[h[m]]=1}}var g=t.positions.edgeVertexAdjacency,v=t.positions,y=v.values,M=n(y,e),w=i(g,e,M,y),x=new f.a;if(!s||o){if(x.positions=a(v,w,M,g,v,l),x.faceRangeOffsets=x.positions.faceRangeOffsets,t.normalMap){var b=t.normalMap;x.normalMap=a(b,w,M,g,v,l,x.faceRangeOffsets)}if(t.uvMaps){for(var T=new c.a,E=0;E<t.uvMaps.length;E++){var S=t.uvMaps.namesByIndex[E];T.set(S,a(t.uvMaps.byName[S],w,M,g,v,l,x.faceRangeOffsets))}x.uvMaps=T}if(!o){return new f.a(x)}}var _=new f.a;if(o||s){for(var A=0;A<w.length;++A)(w[A]>=1||w[A]<0)&&(w[A]=-1*w[A]);for(var D=0;D<M.length;++D)M[D]=-1*M[D];if(_.positions=a(v,w,M,g,v,l),_.faceRangeOffsets=_.positions.faceRangeOffsets,t.normalMap){var N=t.normalMap;_.normalMap=a(N,w,M,g,v,l,_.faceRangeOffsets)}if(t.uvMaps){for(var I=new c.a,L=0;L<t.uvMaps.length;L++){var C=t.uvMaps.namesByIndex[L];I.set(C,a(t.uvMaps.byName[C],w,M,g,v,l,_.faceRangeOffsets))}_.uvMaps=I}if(o){var O=[x,_];return r.i(p.a)(O,null,null)}if(s){return new f.a(_)}}return new f.a(x)}e.a=o;var s=r(399),u=r.n(s),l=r(4),c=r(18),h=r(7),f=r(9),d=r(13),p=(r.n(d),r(195)),m=(r(140),function(){var t=new d.Vector3;return function(e,r){var n=r.delta(t),i=e.normal.dot(n);if(0===i)return 0===e.distanceToPoint(r.start)?0:-1;var a=-(r.start.dot(e.normal)+e.constant)/i;return a>=1||a<=0?-2:a}}())},function(t,e,r){"use strict";function n(t){function e(t,e,r){var n=r.newFaceRangeOffsets,o=r.triangulation,s=new a.a(3*o.numTriangles);o.translateIndices(t.faceValueIndices,s);var u=s.data;return new i.a({faceRangeOffsets:n,faceValueIndices:u,values:t.values})}for(var n=new o.a(t),u=new Uint32Array(n.numTriangles+1),l=1;l<u.length;l++)u[l]=u[l-1]+3;var c={newFaceRangeOffsets:u,triangulation:n};return r.i(s.a)(t,e,c).topologyChanged()}e.a=n;var i=r(7),a=r(134),o=r(192),s=r(135)},function(t,e,r){"use strict";function n(t,e,n,s,u,l,c,h){t=void 0!==t?t:20,e=void 0!==e?e:20,n=void 0!==n?n:100,l=l||!1,s=Math.max(1,Math.floor(s||8)),u=Math.max(1,Math.floor(u||8)),c=i.Math.clamp(c||0,0,2*Math.PI),h=i.Math.clamp(h||2*Math.PI,0,2*Math.PI-c);var f=n/u,d=n/2,p=(t-e)/n,m=void 0,g=void 0;l?(m=new a.a(i.Vector3,u+1),g=new a.a(i.Vector3,u+1)):(m=new a.a(i.Vector3,u+1+4),g=new a.a(i.Vector3,u+1+4));var v=new i.Vector3,y=new i.Vector3(0,-1,0);l||(v.set(0,-1*d,0),m.setAt(0,v),g.setAt(0,y),v.set(0,-1*d,e),m.setAt(1,v),g.setAt(1,y));for(var M=0,w=u;M<=w;M++){v.set(0,M*f-d,p*M*f+e),0===t&&M===w?y.set(0,1,0):0===e&&0===M?y.set(0,-1,0):y.set(0,0,1).applyAxisAngle(new i.Vector3(1,0,0),Math.atan(p));var x=l?M:M+2;m.setAt(x,v),g.setAt(x,y)}l||(y.set(0,1,0),v.set(0,1*d,t),m.setAt(u+1+2,v),g.setAt(u+1+2,y),v.set(0,1*d,0),m.setAt(u+1+3,v),g.setAt(u+1+3,y));var b=s<3?3:s;return r.i(o.a)(m,g,b,c,h,l)}e.a=n;var i=r(1),a=(r.n(i),r(4)),o=r(354)},function(t,e,r){"use strict";function n(){d={}}function i(t){g++,v>=m?y.push(t):(v+=1,t())}function a(){v-=1,y.length&&v<m&&(v+=1,y.shift()())}function o(t){return function(e,n){var o=n.types,s=n.url,l=n.fireAndForget,m=n.payload,g=n.queryKey,v=(n.requestPayload,n.ignoreCache),y=n.method,M=n.contentType,w=n.body,x=n.files,b=n.success,T=n.failure,E=n.decompress,S=n.onReadyStateChange,_=n.withCredentials,A=n.ignoreErrorMessage,D=Array.isArray(s)?s:[s];M||(M="json");var N=o||["IGN","IGN","IGN"],I=c()(N,3),L=I[0],C=I[1],O=I[2];if(g){if(d[g])return l?d[g]:u.a.resolve(d[g]);if(p[g])return l?(p[g].push({payload:m,store:e}),void e.dispatch({type:L,payload:m})):new f.a.Promise(function(t,r){p[g].push({payload:m,store:e,resolve:t,reject:r}),e.dispatch({type:L,payload:m})});p[g]=[{payload:m,store:e}]}e.dispatch({type:L,payload:m});var R=new f.a.Promise(function(n,o){function s(t,r){a();var n=r||f,i=n.failureType,s=n.failure,u=n.queryKey,l=n.payload;u?(p[u].forEach(function(e){var r=e.payload,n=e.store,a=e.reject;n.dispatch({type:i,payload:r,error:t,ignoreErrorMessage:A}),a&&a(t)}),delete p[u]):e.dispatch({type:i,payload:l,error:t,ignoreErrorMessage:A}),s&&s(t),o(t)}function u(t,r){var i=r||f,a=i.successType,o=(i.sucess,i.queryKey),s=i.payload;o?(v||(d[o]=t),p[o].forEach(function(e){var r=e.payload,n=e.store,i=e.resolve;n.dispatch({type:a,payload:l?r:t,response:t}),i&&i(t)}),delete p[o]):e.dispatch({type:a,payload:l?s:t,response:t}),b&&b(t),n(t)}function c(t){a(),E?r.i(h.a)(t,f,u,s):u(t)}var f={queryKey:g,payload:m,successType:C,success:b,failureType:O,failure:T};i(function(){return t(D[0],D.slice(1),c,s,{contentType:M,method:y,body:w,files:x,onReadyStateChange:S,withCredentials:_})})});return l&&R.catch(function(t){console.error(t)}),l?null:R}}e.a=n,e.b=o;var s=r(37),u=r.n(s),l=r(41),c=r.n(l),h=r(369),f=r(183),d={},p={},m=15,g=0,v=0,y=[]},function(t,e,r){"use strict";function n(t){return r.i(o.a)(t)&&void 0!==t.type}function i(t){var e=t.dispatch;return function(i){if("function"==typeof i)return i(t);if(!n(i)||!r.i(a.a)(i.payload)||i.error)return e(i);var o=i.type,c=i.payload,h=i.meta;return e({type:o+"_"+s,meta:h}),c.then(function(t){return e({type:o+"_"+u,payload:t,meta:h})},function(t){return e({type:o+"_"+l,payload:c,error:t,meta:h})})}}e.a=i;var a=r(367),o=r(201),s="PENDING",u="FULFILLED",l="REJECTED"},function(t,e,r){"use strict";function n(t){if(!t||"object"!==(void 0===t?"undefined":s()(t)))return!1;var e="function"==typeof t.constructor?a()(t):Object.prototype;if(null===e)return!0;var r=e.constructor;return"function"==typeof r&&r instanceof r&&u(r)===l}e.a=n;var i=r(260),a=r.n(i),o=r(40),s=r.n(o),u=function(t){return Function.prototype.toString.call(t)},l=u(Object)},function(t,e,r){"use strict";function n(t,e,r){var n=e.asset,i=e.hdr;return r&&e.preferHDR&&i?i:n}function i(t,e,i){var o=n(t,e,i);return o&&r.i(a.i)(o)(t)}e.a=i;var a=r(32)},function(t,e,r){"use strict";function n(t,e,n){function i(){return vt.getContext()}function a(e,n){var i=r.i(D.t)(t);if(wt&&i!==D.m.vr){var a=wt.parentNode.getBoundingClientRect();e=a.width,n=a.height}else i===D.m.vr&&(e=window.innerWidth,n=window.innerHeight,jt.vrEffect.setSize(e,n));e<10||n<10||(St.set(e,n),i!==D.m.vr&&(r.i(x.c)(t,Dt,St),vt.setSize(St.width,St.height)),null!==Ot&&Ot.setSize(St.width,St.height),kt.setSize(St.width*yt,St.height*yt),At&&At.resize(St),n&&0!==n&&(lt.aspect=e/n,lt.updateProjectionMatrix()),Jt.uniforms.resolution.value.set(1/(St.width*yt),1/(St.height*yt)))}function s(e){wt!==e&&(wt=e,wt.insertBefore(vt.domElement,wt.firstChild),vt.domElement.tabIndex=1,xt=wt.parentElement,t.dispatch(r.i(D.u)(xt,vt.domElement)),a())}function l(e){e?zt=r.i(O.a)(t,jt):(window.removeEventListener("deviceorientation",zt),zt=null)}function h(){!function(e,r){var n=t.getIn(["player",e]);Ut[e]!==n&&(r(n,Ut[e]),Ut[e]=n)}("deviceTracking",l)}function d(t){var e=t&&bt[t];Kt.selectedObjects=e?[e]:[]}function g(){var t=Date.now();ie=ne>0?t-ne:-1,ne=t}function V(t){t===B.HIGH?(Qt.enabled=!0,Jt.enabled=!1,Wt.enabled=!1,Xt.enabled=ee.saoPass,qt.enabled=ee.dofPass,Zt.enabled=ee.bloomPass,Rt&&(Rt.visible=ee.reflectiveFloorMesh)):(Qt.enabled=!1,Jt.enabled=!0,Wt.enabled=!0,Xt.enabled=ee.saoPass,Rt&&(Rt.visible=ee.reflectiveFloorMesh),gt&&(Xt.enabled=!1,qt.enabled=!1,Zt.enabled=!1,Rt&&(Rt.visible=!1)))}function F(){var e=r.i(D.t)(t);re&&clearTimeout(re),g();var n=r.i(D.g)(t);if(Dt!==n&&(Dt=n,Nt=Dt,It=Dt,Q(),J(Dt,st.evaluatedNodes[Dt],st.nodes[Dt],!0)),Nt!==It&&J(Dt,st.evaluatedNodes[Dt],st.nodes[Dt],!0),h(),At&&(k(),H(),At.frameUpdate(e)),Bt=r.i(I.b)(t),r.i(I.c)(t)&&Bt.length){var i=new m.Color(r.i(I.d)(t));Kt.visibleEdgeColor=i,Kt.hiddenEdgeColor=i,Kt.edgeThickness=r.i(I.e)(t),Kt.enabled=!0,d(Bt[0])}else Kt.enabled=!1,d(null);if(Rt&&Rt.data.reflectiveFloor&&!gt&&(Ot.distanceFade=Rt.data.reflectiveFloorFade,Ot.roughness=Rt.data.reflectiveFloorRoughness,Ot.metalness=Rt.data.reflectiveFloorMetallic,Ot.opacity=Rt.data.reflectiveFloorOpacity,Ot.fresnelStrength=Rt.data.reflectiveFloorFresnel,Ot.reflectivity=.5,vt.setClearColor(Wt.clearColor,Wt.clearAlpha),Ot.render(vt,ut,lt,St.width,St.height)),Ht.camera=lt,e===D.m.normal)vt.setClearColor(16777215),Ft=Vt?B.HIGH:B.LOW,V(Ft),kt.render();else if(e===D.m.vr){if(Ft=B.LOW,V(Ft),Xt.enabled=!1,!jt.vrEffect)throw new Error("Expect vr mode to initialize vrEffect");kt.vrRender(jt.vrEffect,ut,lt,!0)}else e===D.m.lenticular&&te.render(ut,lt);e===D.m.normal&&(!Vt||ie>0)&&(re=setTimeout(function(){g(),Qt.sampleLevel=2,Ft=B.HIGH,V(Ft),kt.render(),Qt.sampleLevel=1,Ft=B.LOW,V(Ft),ne=-1},4*Math.max(ie,100)))}function k(){var e=r.i(N.i)(t);_t!==r.i(N.m)(t)&&(_t=r.i(N.m)(t),At.updateTools(_t.map(function(t){return e[t]}).toArray()))}function G(t,e,r){bt[r]=new m.Object3D,bt[r].name=e,bt.widgets.add(bt[r]),!1!==t.options.displayGizmo&&t.widget.draw.call(t,bt[r])}function Y(t,e,r,n){var i=t.widget;i&&i.remove&&i.remove.call(t,e),bt.widgets.remove(e),delete bt[n]}function H(){var e=r.i(N.i)(t),n=r.i(N.n)(t);bt.widgets.children.forEach(function(t){n[t.name]||Y(e[t.name],t,t.name,"widgetsRoot-"+t.name)}),f()(n).forEach(function(t){var e=t.name,r=t.widget,n="widgetsRoot-"+e;bt[n]||G(t,e,n),r&&r.position&&r.position.call(t,bt[n])})}function Q(){r.i(T.a)(t,_.h,r.i(A.b)(t,_.j))}function W(){var e=st.evaluatedNodes[r.i(S.a)(t)].Player,n=st.evaluatedNodes[r.i(D.g)(t)].Properties;if(!e.orbitTarget&&!n.orbitTarget){var i=r.i(C.a)(ut).getCenter();(isNaN(i.x)||isNaN(i.y)||isNaN(i.z))&&i.set(0,0,0),r.i(T.a)(t,_.j,(new m.Matrix4).makeTranslation(i.x,i.y,i.z))}}function X(){return!!xt&&(Ct=!0,W(),Q(),e||(At=r.i(b.a)(t,this,vt.domElement),At.resize(St)),bt.widgets=new m.Object3D,bt.widgets.name="Widgets",ut.add(bt.widgets),ut.nodeId=r.i(S.a)(t),r.i(M.a)(ut),!0)}function q(){}function Z(){return Et}function K(t,e,r){var n=e&&e.parent,i=n&&bt[n]||ut;r.name=e.name,r.nodeId=t;var a=bt[t];if(a){for(var o=[].concat(a.children),s=0;s<o.length;s++)a.remove(o[s]),r.add(o[s]);var u=a.parent&&bt[a.parent.nodeId];u&&u.remove(a),a.geometry&&a.geometry.dispose()}bt[t]=r,i.add(bt[t])}function J(t,e,r,n){var i=r.type,a=oe[i]||[];Tt[t]||(Tt[t]={});var s={},l=void 0,c=void 0,h=!0,f=!1,d=void 0;try{for(var p,m=u()(a);!(h=(p=m.next()).done);h=!0){var g=p.value,v=Array.isArray(g)?g:[g,g],y=o()(v,2);l=y[0],c=y[1];var M=e[l];(n||!M||M._v!==Tt[t][l]||s[l])&&(se[l]&&(s=se[l]),ae[c]?(ae[c](t,M,r,e.Properties,e),Tt[t][l]=M&&M._v):console.warn("Unknown plug translator for: ",l,r.name))}}catch(t){f=!0,d=t}finally{try{!h&&m.return&&m.return()}finally{if(f)throw d}}}function $(t){var e=bt[t],r=Et[t];(e||r)&&delete Tt[t],e?(delete bt[t],e.parent.remove(e),e.geometry&&e.geometry.dispose(),e.material&&(e.material.dispose?e.material.dispose():e.material.materials.forEach(function(t){t.dispose()}))):r&&delete Et[t],delete Tt[t]}function tt(e){var n=e===r.i(S.a)(t)?ut:bt[e];return r.i(C.a)(n)}function et(e){var n=(new m.Box3).makeEmpty();return e.reduce(function(e,n){var i=n===r.i(S.a)(t)?r.i(C.a)(ut):tt(n);return e.union(i)},n)}function rt(t){return bt[t]}function nt(t){var e=new m.Raycaster;return e.setFromCamera(t,lt),e}function it(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Objects",n=arguments[2],i=arguments[3],a=[],o=n&&i?new m.Raycaster(n,i):nt(t),s=ut;return s=r.i(L.a)(e)&&bt[e]?bt[e]:ut.children.find(function(t){return"Object3D"===t.type&&t.name===e}),s.traverse(function(t){if(t.visible&&t.geometry){null===t.geometry.boundingBox&&t.geometry.computeBoundingBox();var e=t.geometry,r=e.isBufferGeometry?!!e.attributes.position.array:!!e.vertices;if(!1===e.boundingBox.isEmpty()&&r){t.matrix.compose(t.position,t.quaternion,t.scale),t.updateMatrixWorld(!0);var n=o.intersectObject(t);n.length>0&&a.push({id:t.nodeId,node:t,data:n})}}}),a.sort(function(t,e){return t.data[0].distance-e.data[0].distance}),a}function at(t){if(t){var e=bt[t];if(e){var n=.5*St.width,i=.5*St.height;e.updateMatrixWorld();var a=r.i(C.a)(e);if(ue.makeEmpty(),a.isEmpty()){var o=e.getWorldPosition();return o.project(lt),{top:(o.y-1)*-i,left:(o.x+1)*n,width:0,height:0,x:(o.x+1)*n,y:(o.y-1)*-i}}for(var s=0;s<8;s++)le.set(a[Math.floor(s/4)?"max":"min"].x,a[Math.floor(s/2)%2?"max":"min"].y,a[s%2?"max":"min"].z),le.project(lt),ue.expandByPoint(le);var u={top:(ue.max.y-1)*-i,left:(ue.min.x+1)*n,width:(ue.max.x-ue.min.x)*n,height:(ue.max.y-ue.min.y)*i};return u.x=u.left+u.width/2,u.y=u.top+u.height/2,u}}return null}function ot(){r.i(v.b)(),Ct=!1,Dt=_.c,Nt=_.c,It=null,Lt=null,Tt={},bt={},p()(Pt).forEach(function(t){return delete Pt[t]}),ut.nodeId=r.i(S.a)(t)}var st=t.get("sceneGraph"),ut=new m.Scene,lt=new m.CombinedCamera(1,1,75,.1,1e3),ct={antialias:!1,precision:"highp",alpha:!0,preserveDrawingBuffer:!0};e&&(ct.canvas={style:{},addEventListener:function(){}},ct.context=e);var ht=!1,ft=!1,dt=!1,pt=!1,mt=!1,gt=!1,vt=new m.WebGLRenderer(ct);vt.setClearColor(16777215),vt.autoResizeTextures=!1,vt.gammaInput=!0,vt.gammaOutput=!0,vt.toneMapping=m.ReinhardToneMapping,vt.physicallyCorrectLights=!0,vt.shadowMap.enabled=!0,vt.shadowMap.type=m.BasicShadowMap;var yt=1;if(yt=window.devicePixelRatio,window.navigator){var Mt=window.navigator.userAgent;ht=/iPad|iPhone|iPod/.test(Mt),ft=/Android/i.test(Mt),dt=/IEMobile|Windows Phone|Lumia/i.test(Mt),pt=/CrOS/i.test(Mt),mt=/Blackberry|webOS/i.test(Mt),gt=ht||ft||dt||pt||mt}vt.setPixelRatio(yt),vt.isMobile=gt;var wt=null,xt=null,bt={},Tt={},Et={},St=new m.Vector2(400,300),_t=[],At=null,Dt=_.c,Nt=_.c,It=null,Lt=null,Ct=!1,Ot=null,Rt=null,zt=void 0,jt={isIOS:ht,isAndroid:ft,isMSPhone:dt,isChromebook:pt,isBlackberry:mt,isMobile:gt},Pt={},Ut={},Bt=r.i(I.b)(t),Vt=!!e,Ft=void 0,kt=new m.EffectComposer(vt,!0),Gt=new m.ClearPass;Gt.enabled=!0,Gt.cameraAware=!0,kt.addPass(Gt);var Yt=new m.TexturePass;Yt.clear=!1,Yt.enabled=!1,Yt.cameraAware=!0,kt.addPass(Yt);var Ht=new m.CubeTexturePass(ut,lt);Ht.clear=!1,Ht.enabled=!1,Ht.cameraAware=!0,kt.addPass(Ht);var Qt=new m.SSAARenderPass(ut,lt);Qt.clear=!1,Qt.unbiased=!0,Qt.sampleRenderTarget=kt.requestBuffer("temp"),Qt.enabled=Vt,Qt.cameraAware=!0,kt.addPass(Qt);var Wt=new m.RenderPass(ut,lt);Wt.clear=!1,Wt.renderOver=!0,Wt.enabled=!Vt,Wt.cameraAware=!0,kt.addPass(Wt);var Xt=new m.SAOPass(ut,lt);Xt.downSamplingRatio=1,Xt.intensity=3,Xt.occlusionSphereWorldRadius=2,Xt.blurEnabled=!0,Xt.outputOverride="default",Xt.manualCompositing=!1,Xt.blurKernelSize=(Xt.downSamplingRatio,6+(Vt?2:0)),Xt.enabled=!1,Xt.cameraAware=!0,gt||kt.addPass(Xt);var qt=new m.DofPass(new m.Vector2(256,256),ut,lt);qt.enabled=!1,qt.cameraAware=!0,kt.addPass(qt);var Zt=new m.UnrealBloomPass(new m.Vector2(256,256),1.5,1,1);Zt.enabled=!1,Zt.cameraAware=!0,kt.addPass(Zt);var Kt=new m.OutlinePass(new m.Vector2(256,256),ut,lt);Kt.edgeStrength=10,Kt.edgeGlow=0,Kt.edgeThickness=1,Kt.pulsePeriod=0,Kt.visibleEdgeColor=new m.Color(0,1,0),Kt.hiddenEdgeColor=new m.Color(0,1,0),Kt.enabled=!1,Kt.cameraAware=!0,kt.addPass(Kt);var Jt=new m.ShaderPass(m.FXAAShader);Jt.uniforms.resolution.value.set(1/256,1/256),Jt.enabled=!Vt,Jt.cameraAware=!0,kt.addPass(Jt);var $t=new m.ShaderPass(m.CopyShader);$t.renderToScreen=!0,$t.cameraAware=!0,kt.addPass($t);var te=new m.ParallaxBarrierEffect(vt);te.setSize(256,256);var ee={saoPass:!1,dofPass:!1,bloomPass:!1,reflectiveFloorMesh:!1};t.dispatch(r.i(D.s)({scene:ut,camera:lt,renderer:vt,THREE:m,composer:kt}));var re=null,ne=-1,ie=-1,ae={PolyMesh:function(e,n,i,a){var o=a.visible,s=a.castShadow,u=a.receiveShadow,l=a.discardable,c=n.mesh,h=n.previousMesh,f=vt.extensions.get("OES_element_index_uint")?R.a.CompactIndices:R.a.NoIndices,d=bt[e],g=d&&d.userData.triangulation,v=d&&d.userData.renderIndexing,M=d&&d.userData.valueMap,w=c&&R.a.exportBufferGeometry(c,f,!1,null,h,g,v,M),x=void 0,b=void 0,T=void 0,E=void 0,S=void 0;w&&(x=w.geometry,b=w.triangulation,T=w.triangulationChanged,E=w.renderIndexing,S=w.valueMap);var _=void 0;T||!d?_=x&&new m.Mesh(x,r.i(y.a)(t)):(_=d,x&&(_.geometry.dispose(),_.geometry=x)),x&&l&&p()(x.attributes).forEach(function(t){x.attributes[t].onUploadCallback=function(){this.array=null}}),l&&(n.mesh=null,n.previousMesh=null),_&&(_.visible=o,_.castShadow=s,_.receiveShadow=u,l||(_.userData.triangulation=b),l||(_.userData.renderIndexing=E),l||(_.userData.valueMap=S)),K(e,i,_||new m.Object3D)},Light:function(t,e,n,i){var a=bt[t];if(a){var o=ut.getObjectByName("Objects");a.visible=i.visible,r.i(M.c)(e,a,o)}else{var s=n.plugs.Transform[0];a=r.i(M.b)(e,s,ut,i.visible),a&&K(t,n,a)}},Bone:function(t,e,r){K(t,r,new m.Object3D)},Null:function(t,e,r,n){K(t,r,new m.Object3D),n&&(bt[t].visible=n.visible)},NullProperties:function(t,e,r,n){n&&bt[t]&&(bt[t].visible=n.visible)},PrefetchMaterialNull:function(t,e,r,n){Ct&&n.prefetch&&!bt[t]&&K(t,r,new m.Object3D)},Transform:function(t,e,n){e&&e.transform&&bt[t]&&r.i(w.a)(bt[t],e.transform)},Material:function(e,n){bt[e]&&(bt[e].material=r.i(y.a)(t,vt,n,bt[e].material))},Image:function(e,n,i,a){Ct&&a.prefetch&&r.i(y.b)(t,n)},Environment:function(e,n){var i=n.backgroundStyle;switch(Gt.enabled=!1,Ht.enabled=!1,i){case z:Gt.enabled=!0,Gt.clearColor=n.backgroundColor,Gt.clearAlpha=n.backgroundOpacity;break;case j:Yt.enabled=!0,Yt.map=r.i(y.c)(t,vt,n.background);break;case P:case U:Gt.enabled=!0,Gt.clearColor=0,Gt.clearAlpha=0,Ht.enabled=!0;var a=void 0;i===U?(a=n.environmentMap,a&&(a=a.specularCubeMap),n.environmentMapBlurring):(a=n.cubeMap,n.cubeMapBlurring),a?(Ht.envMap=r.i(y.d)(t,vt,a,!0,!0),Ht.envMapIntensity=1,Ht.opacity=n.backgroundOpacity,Ht.roughness=n.cubeMapBlurring):Ht.enabled=!1;break;default:Gt.enabled=!0,Gt.clearColor=new m.Color(1,1,1),Gt.clearAlpha=0}},Player:function(e,n,i){if(n.camera&&n.camera!==Nt&&st.nodes[n.camera]){var a=st.nodes[n.camera],o=st.nodes[Dt],s=r.i(_.e)(a);s.plugs.Transform.find(function(t){return t.target})&&(s.plugs.Camera[0].targeted=!0),t.dispatch(r.i(_.f)(Dt,c()(o,{plugs:s.plugs}))),Nt=n.camera}n.overrideNavigation&&n.orbitTarget&&n.orbitTarget!==Lt?(Lt=n.orbitTarget,r.i(T.a)(t,_.j,r.i(A.b)(t,Lt))):n.overrideNavigation&&!n.orbitTarget&&n.orbitTarget!==Lt&&(Lt=null,W());var u={Linear:m.LinearToneMapping,Reinhard:m.ReinhardToneMapping,Cineon:m.CineonToneMapping,Filmic:m.Uncharted2ToneMapping},l={Basic:m.BasicShadowMap,PCF:m.PCFShadowMap,PCFSoft:m.PCFSoftShadowMap,PCSSSoft:m.PCSSSoftShadowMap,0:m.BasicShadowMap,1:m.PCFShadowMap,2:m.PCFSoftShadowMap,3:m.PCSSSoftShadowMap};if(vt.toneMapping=u[n.toneMapStyle],vt.toneMappingExposure=n.toneMapExposureGain,vt.toneMappingWhitePoint=n.toneMapWhitePoint,vt.gammaInput=!0,vt.gammaOutput=!0,vt.autoClear=!1,vt.shadowMap.type=(gt?l[0]:l[n.shadowType])||l[0],Xt.enabled=n.saoPass,Xt.intensity=n.saoIntensity,Xt.occlusionSphereWorldRadius=n.saoScale,ee.saoPass=n.saoPass,Zt.enabled=n.bloomPass,Zt.threshold=n.bloomThreshold,ee.bloomPass=n.bloomPass,qt.enabled=n.dofPass,ee.dofPass=n.dofPass,!n.reflectiveFloor||(n.reflectiveFloorExcludeServer,0)||gt)Rt&&Rt.parent&&(Rt.visible=!1);else{if(!Ot){var h=new m.PlaneBufferGeometry(1,1);Ot=new m.GlossyMirror({clipBias:.003,textureWidth:1024,textureHeight:1024,color:7829367,localMirrorNormal:new m.Vector3(0,1,0)}),Rt=new m.Mesh(h,Ot.material)}Ot.specularColor=new m.Color(16777215),Rt.scale.x=n.reflectiveFloorWidth,Rt.scale.y=n.reflectiveFloorWidth,Rt.rotation.x=.5*-Math.PI,Rt.position.y=n.reflectiveFloorHeight,Rt.data=n,Rt.parent||ut.add(Rt),ee.reflectiveFloorMesh=!0}},Camera:function(e,n,i,a){if(e===Dt&&Ct){!st.evaluatedNodes[r.i(S.a)(t)].Player.overrideNavigation&&a.orbitTarget&&a.orbitTarget!==Lt&&(Lt=a.orbitTarget,r.i(T.a)(t,_.j,r.i(A.b)(t,Lt))),lt.fov=n.fieldOfView,lt.aspect=n.aspectRatio,lt.near=n.nearClip,lt.far=n.farClip,"Orthographic"===n.projection?(Xt.enabled=!1,Qt.enabled=!0,qt.enabled=!1,Rt&&(Rt.visible=!1),lt.zoom=1/n.orthoZoom,lt.hyperfocusOffset=1,lt.hyperfocusScale=0,lt.inPerspectiveMode=!1,lt.inOrthographicMode=!0,lt.isOrthographicCamera=!0,lt.isPerspectiveCamera=!1):(lt.isOrthographicCamera=!1,lt.isPerspectiveCamera=!0,lt.inPerspectiveMode=!0,lt.inOrthographicMode=!1,qt.focalDepth=n.focalDepthEnabled?n.focalDepth:n.targetDistance),!a.constrainCameraSphere||n.radiusConstraint&&a.maxZoom===n.radiusConstraint.outerRadius||!n.upPosition||r.i(x.d)(t,e,n,a.maxZoom),lt.updateProjectionMatrix()}},CameraTransform:function(e,n,i,a,o){if(e===Dt&&Ct){It===Nt&&o.Camera.upPosition&&!o.Camera.newAngleAttrs||(Q(),r.i(x.a)(t,!0,Nt,e,St),It=Nt,delete o.Camera.newAngleAttrs);var s=o.Camera,u=r.i(D.t)(t),l=n.target&&s.targeted&&s.upPosition&&u!==D.m.vr&&!Ut.deviceTracking?r.i(x.e)(t,e,n,s):n.transform;r.i(w.a)(lt,l)}},Annotation:function(t,e,n,i){var a="awayFromOrigin"===e.directionMode;Et[t]={id:t,annotation:e,position:r.i(E.a)(t,a,e.directionAxis,e.directionTarget),visible:i.visible}}},oe={Scene:["Player","Environment"],PolyMesh:["PolyMesh","Transform","Material"],Camera:["Camera",["Transform","CameraTransform"]],Null:["Null","Transform","NullProperties"],Model:["Null","Transform"],Objects:["Null"],Light:["Light","Transform"],MaterialLibrary:["Null"],Material:["PrefetchMaterialNull","Material"],Image:["Image"],Renderers:[],Passes:[],Pass:[],Renderer:[],Bone:["Bone","Transform"],Annotation:["Annotation"]},se={PolyMesh:{Material:!0,Transform:!0}},ue=new m.Box2,le=new m.Vector3;return{attach:s,resize:a,translate:J,deleteNode:$,raycastSelect:it,getCameraMouseRay:nt,getNodeBoundingBox:tt,getNodeListBoundingBox:et,getThreeObject:rt,toScreenPosition:at,postTranslate:F,onLoad:X,getAnnotations:Z,getContext:i,reset:ot,scene:ut,camera:lt,renderer:vt,composer:kt,externals:jt,textureCache:Pt,indexRender:q,renderQualityControl:V}}function i(t,e){return r.i(g.a)(t,n,e)}Object.defineProperty(e,"__esModule",{value:!0}),r.d(e,"QUALITY_MODE",function(){return B}),e.default=i;var a=r(41),o=r.n(a),s=r(25),u=r.n(s),l=r(2),c=r.n(l),h=r(112),f=r.n(h),d=r(6),p=r.n(d),m=r(13),g=(r.n(m),r(390)),v=r(142),y=r(373),M=(r(374),r(371)),w=r(389),x=r(109),b=r(372),T=r(111),E=r(370),S=r(17),_=r(8),A=r(5),D=r(3),N=r(43),I=r(50),L=r(86),C=r(211),O=r(391),R=r(362),z=1,j=2,P=3,U=4,B={LOW:"LOW",HIGH:"HIGH"}},function(t,e,r){"use strict";function n(t,e){var n=!1;return{label:"Move Node",enabled:!0,display:{playerTools:!1,editorTools:!0},options:{displayGizmo:!0,mode:"free",plane:{normal:{x:0,y:1,z:0},constant:0},surfaceNodeIds:[],onChange:void 0,onEnd:void 0},tool:{hover:function(t){this.active&&(n=r.i(c.a)(e,t,n))},drag:function(e){if(1!==e.which||!this.active||e.metaKey)return!1;if(!n&&!a(t,r.i(s.r)(t,e)[0],r.i(l.b)(t)[0]))return!1;var o=this;return{momentum:!1,handle:function(e){switch(o.options.mode){case"plane":w(t,e.deltaX,e.deltaY,o.options.plane);break;case"surface":M(t,e.clientX,e.clientY,o.options.surfaceNodeIds);break;default:i(t,e.deltaX,e.deltaY,n)}"function"==typeof o.options.onChange&&o.options.onChange(e)},end:function(){"function"==typeof o.options.onEnd&&o.options.onEnd(e)}}}},widget:{draw:function(e){e.add(r.i(c.e)());var n=r.i(c.c)(t);e.scale.set(n,n,n)},position:function(e){var n=r.i(l.b)(t);if(!n.length)return void(e.visible=!1);e.visible=!0;var i=n[0],a=r.i(u.b)(t,i),s=new o.Vector3;s.setFromMatrixPosition(a),e.position.set(s.x,s.y,s.z);var h=r.i(c.c)(t);e.scale.set(h,h,h)}}}}function i(t,e,n,i){var a=r.i(l.b)(t);if(a.length){var c=a[0],g=r.i(s.h)(t),v=r.i(u.b)(t,c);if(v){var y=r.i(u.b)(t,r.i(u.d)(t,{id:c,parent:!0})),M=(new o.Vector3).setFromMatrixPosition(v);if(m.copy(r.i(h.a)(t,c,e,n)),i){var w=new o.Vector3(0,0,0);w[i]=1;var x=(new o.Vector3).setFromMatrixPosition(g).sub(M),b=new o.Vector3(0,0,0),T=(new o.Plane).setFromCoplanarPoints(x,w,b);m.projectOnPlane(T.normal);var E=(new o.Vector3).subVectors(m,x);m.projectOnVector(w).normalize();var S=x.angleTo(m),_=f-x.angleTo(E),A=f-S-_,D=x.length()*d(_)/d(A);m.multiplyScalar(D)}M.add(m),v.setPosition(M),y&&v.premultiply(p.getInverse(y)),M.setFromMatrixPosition(v),t.dispatch(r.i(u.c)({id:c,plug:"Transform",property:"translation"},M))}}}function a(t,e,n){if(!e||!n)return!1;for(;e;){if(e===n)return!0;e=r.i(u.d)(t,{id:e,parent:!0})}return!1}e.a=n,e.d=i,r.d(e,"c",function(){return M}),r.d(e,"b",function(){return w});var o=r(1),s=(r.n(o),r(110),r(3)),u=r(5),l=(r(8),r(50)),c=r(143),h=r(209),f=Math.PI,d=Math.sin,p=(new o.Matrix4,new o.Matrix4,new o.Matrix4,new o.Matrix4),m=(new o.Vector3,new o.Vector3),g=(new o.Vector3(0,1,0),function(){var t=new o.Matrix4,e=new o.Matrix4;return function(n,i,a,o,s){t.compose(a,o,s);var l=r.i(u.d)(n,{id:i,parent:!0}),c=r.i(u.b)(n,l);c&&(e.getInverse(c,!0),t.premultiply(e),t.decompose(a,o,s))}}()),v=function(){var t=new o.Vector3,e=new o.Quaternion,n=new o.Euler;return function(i,a,o){var s=r.i(u.a)(i,{id:a,plug:"Transform",property:"scale"}),l=r.i(u.a)(i,{id:a,plug:"Transform",property:"rotation"}),c=r.i(u.a)(i,{id:a,plug:"Transform",property:"rotateOrder"});t.set(s.x,s.y,s.z),n.set(l,c),e.setFromEuler(n),g(i,a,o,e,t),i.dispatch(r.i(u.c)({id:a,plug:"Transform",property:"translation"},o))}}(),y=function(){var t=new o.Vector3,e=new o.Matrix4;return function(n,i){t.setFromMatrixPosition(r.i(u.b)(n,i));var a=r.i(s.q)(n);return e.getInverse(a.matrix,!0).premultiply(a.projectionMatrix),t.applyMatrix4(e),t}}(),M=function(){new o.Quaternion;return function(t,e,n,i){var a=r.i(s.e)(t),o=r.i(l.b)(t)[0];if(o){var c={x:2*e/a.width-1,y:-2*n/a.height+1},h=t.getTranslator().raycastSelect(c),f=r.i(u.e)(t,{from:{id:o}}),d=h.find(function(t){return i.findIndex(function(e){return e===t.id&&e!==o&&f.indexOf(e)<0})>=0});if(d){var p=d.data[0].point;v(t,o,p)}}}}(),w=function(){var t=new o.Vector3,e=(new o.Quaternion,new o.Plane),n=new o.Vector3;return function(i,a,o,c){var h=r.i(s.e)(i),f=r.i(l.b)(i)[0];if(f){var d=y(i,f),p=c.normal;n.set(p.x,p.y,p.z),e.set(n,c.constant);var m={x:d.x+2*a/h.width,y:d.y-2*o/h.height},g=i.getTranslator().getCameraMouseRay(m).ray;g.intersectsPlane(e)&&(g.intersectPlane(e,t),i.dispatch(r.i(u.c)({id:f})),v(i,f,t))}}}()},function(t,e,r){"use strict";function n(t,e){var n=!1;return{label:"Rotate Node",enabled:!0,display:{playerTools:!1,editorTools:!0},options:{onChange:void 0,onEnd:void 0},tool:{hover:function(t){this.active&&(n=r.i(l.a)(e,t,n))},drag:function(e){if(1!==e.which||!this.active||e.metaKey)return!1;var r=this;return{momentum:!1,handle:function(e){i(t,e.deltaX,e.deltaY,n),"function"==typeof r.options.onChange&&r.options.onChange(e)},end:function(){"function"==typeof r.options.onEnd&&r.options.onEnd(e)}}}},widget:{draw:function(e){e.add(r.i(l.d)());var n=r.i(l.c)(t);e.scale.set(n,n,n)},position:function(e){var n=r.i(u.b)(t);if(!n.length)return void(e.visible=!1);e.visible=!0;var i=n[0],o=r.i(s.b)(t,i),c=new a.Vector3;c.setFromMatrixPosition(o),e.position.set(c.x,c.y,c.z);var h=r.i(l.c)(t);e.scale.set(h,h,h)}}}}function i(t,e,n,i){var l=r.i(o.e)(t),M=r.i(u.b)(t);if(M.length){var w=M[0],x=r.i(s.b)(t,w);if(x){var b=r.i(o.h)(t);x.decompose(m,p,g),y.setFromMatrixPosition(b);var T=r.i(c.a)(t,w),E=(new a.Vector3).set(2*e/l.x/T,-2*n/l.y/T,0);if(E.length()>1)E.normalize();else if(0===E.length())return;var S=E.length();E.transformDirection(b).multiplyScalar(S);var _=(new a.Vector3).subVectors(y,m).normalize();if(i){var A=new a.Vector3(0,0,0);A[i]=1,E.projectOnPlane(A),_.projectOnPlane(A)}var D=f(1-E.lengthSq());E.addScaledVector(_,D).normalize();var N=(new a.Quaternion).setFromUnitVectors(_,E);p.premultiply(N),x.compose(m,p,g);var I=r.i(s.b)(t,r.i(s.d)(t,{id:w,parent:!0}));I&&(d.getInverse(I,!0),x.premultiply(d)),x.decompose(m,p,g),v.setFromQuaternion(p,"ZYX"),t.dispatch(r.i(s.c)({id:w,plug:"Transform",property:"rotation"},v.toVector3().multiplyScalar(180/h)))}}}e.a=n,e.b=i;var a=r(1),o=(r.n(a),r(3)),s=r(5),u=(r(8),r(50)),l=r(143),c=r(208),h=(Math.min,Math.PI),f=Math.sqrt,d=new a.Matrix4,p=new a.Quaternion,m=new a.Vector3,g=new a.Vector3,v=new a.Euler,y=new a.Vector3},function(t,e,r){"use strict";function n(t,e){var n=!1;return{label:"Scale Node",enabled:!0,display:{playerTools:!1,editorTools:!0},options:{onChange:void 0,onEnd:void 0},tool:{hover:function(t){this.active&&(n=r.i(l.a)(e,t,n))},drag:function(e){if(1!==e.which||!this.active||e.metaKey)return!1;var r=this;return{momentum:!1,handle:function(e){i(t,e,n),"function"==typeof r.options.onChange&&r.options.onChange(e)},end:function(){"function"==typeof r.options.onEnd&&r.options.onEnd(e)}}}},widget:{draw:function(e){e.add(r.i(l.b)());var n=r.i(l.c)(t);e.scale.set(n,n,n)},position:function(e){var n=r.i(u.b)(t);if(!n.length)return void(e.visible=!1);e.visible=!0;var i=n[0],o=r.i(s.b)(t,i),c=new a.Vector3;c.setFromMatrixPosition(o),e.position.set(c.x,c.y,c.z);var h=r.i(l.c)(t);e.scale.set(h,h,h)}}}}function i(t,e,n){var i=r.i(o.e)(t),l=r.i(u.b)(t);if(l.length){var y=l[0],M=r.i(s.a)(t,{id:y,plug:"Transform",property:"scale"});if(M){var w=f(r.i(h.a)(t,y),v)||v,x=e.delta||e.deltaX/30-e.deltaY/30,b=f(g(2*x/i.y/w,.001),-.001),T=d(2,100*b),E=r.i(s.b)(t,y),S=(new a.Vector3).setFromMatrixPosition(E),_=(new a.Vector3).copy(M),A=r.i(o.h)(t);if(n){var D=new a.Vector3(0,0,0);D[n]=1;var N=r.i(c.a)(t,y,e.deltaX,e.deltaY);N.projectOnVector(D);var I=(new a.Vector3).setFromMatrixPosition(A).sub(S),L=new a.Vector3(0,0,0),C=(new a.Plane).setFromCoplanarPoints(I,D,L);N.projectOnPlane(C.normal);var O=(new a.Vector3).subVectors(N,I);N.projectOnVector(D).normalize();var R=I.angleTo(N),z=p-I.angleTo(O),j=p-R-z,P=I.length()*m(z)/m(j);N.multiplyScalar(P),D.set(1,1,1),D[n]=1+2*N[n]/_[n],_.multiply(D)}else{var U=f(_.length(),v);_.setLength(U*T)}t.dispatch(r.i(s.c)({id:y,plug:"Transform",property:"scale"},_))}}}e.a=n,e.b=i;var a=r(1),o=(r.n(a),r(3)),s=r(5),u=(r(8),r(50)),l=r(143),c=r(209),h=r(208),f=Math.max,d=Math.pow,p=Math.PI,m=Math.sin,g=Math.min,v=(Math.sqrt,1e-6)},function(t,e,r){"use strict";function n(t,e,n,i,u){var l=r.i(f.a)(t,{scene:!0,evalPlug:"Player"}),c=r.i(f.a)(t,{id:e,evalPlug:"Camera"}),d=r.i(h.e)(t);(({trackball:o,firstPerson:s})[r.i(g.a)(t,e)]||a)(t,l,e,c,i,n,d,u)}function i(t,e){return{label:"Orbit",active:!0,enabled:!0,display:{playerTools:!0},options:{touchVerticalDefault:!1,turnTable:!1,mobileOnly:!1},tool:{drag:function(e){if(1!==e.which||!this.active&&!e.metaKey)return!1;var i=this.options.touchVerticalDefault,a=this.options.turnTable,o=this.options.mobileOnly;return{momentum:!0,allowDefault:!0,handle:function(e){var s=e.deltaX,l=e.deltaY,p=e.isTouch,g=e.originalEvent;if(!(p&&i&&Math.abs(l)>Math.abs(s))){g&&g.preventDefault();var y=r.i(h.g)(t),M=r.i(h.h)(t),w=r.i(m.a)(t,y);a&&(l=o?r.i(v.a)()?0:l:0),n(t,y,M,w,new u.Vector2(s,l)),t.dispatch(r.i(d.g)([y,"Transform",0],r.i(c.a)(M))),r.i(f.a)(t,{id:y,evalPlug:"Transform"}).target||t.dispatch(r.i(d.g)([d.h,"Transform",0],r.i(c.a)(w)))}}}}}}}function a(t,e,n,i,a,o,s,c){var h=c.x,m=c.y,v=r.i(f.b)(t,d.j);E.setFromMatrixPosition(v);var M=r.i(g.b)(t,n);T.setFromMatrixPosition(a).sub(E),b.setFromMatrixPosition(o).sub(E);var x=(new u.Spherical).setFromVector3(b),S=(new u.Spherical).setFromVector3(T),_=(new u.Spherical).setFromVector3(i.offset),A=2*w*(-h/s.x);x.theta+=A,S.theta+=A,_.theta+=A,x.makeSafe(),S.makeSafe(),_.makeSafe(),T.setFromSpherical(S).add(E),b.setFromSpherical(x).add(E).sub(T),i.offset.setFromSpherical(_),x.setFromVector3(b);var D=2*w*(-m/s.y);x.phi+=D;var N=void 0;if(N=T.y/b.length()<=1&&M?y(-T.y/b.length()):w,x.phi=r.i(l.a)(x.phi,.001,N-.001),x.makeSafe(),b.setFromSpherical(x).add(T),i.radiusConstraint){var I=i.radiusConstraint,L=I.maxBoundingSphere,C=I.minBoundingSphere,O=(new u.Vector3).subVectors(T,b);if(C.containsPoint(b)){var R=new u.Ray(b,O.multiplyScalar(-1)),z=R.intersectSphere(C).addScaledVector(O,.001);b.copy(z)}else if(!L.containsPoint(b)){var j=new u.Ray(b,O),P=j.intersectSphere(L).addScaledVector(O,.001);b.copy(P)}}o.setPosition(b),a.setPosition(T),r.i(p.a)(o,a,i.upPosition)}function o(t,e,n,i,a,o,s,l){var c=l.x,h=l.y,m=M(s.x,s.y),g=r.i(f.b)(t,d.j),v=(new u.Vector3).setFromMatrixPosition(g),y=(new u.Vector3).set(-2*c/m,2*h/m,0);if(y.length()>1&&y.normalize(),0!==y.x||0!==y.y){var w=y.length();y.transformDirection(o).multiplyScalar(w),b.setFromMatrixPosition(o).sub(v),T.setFromMatrixPosition(a).sub(v);var E=(new u.Vector3).copy(b).normalize(),S=x(1-y.lengthSq());y.addScaledVector(E,S).normalize();var _=(new u.Vector3).crossVectors(E,y).normalize(),A=E.angleTo(y),D=(new u.Quaternion).setFromAxisAngle(_,A);if(b.applyQuaternion(D).add(v),T.applyQuaternion(D).add(v),i.upPosition.applyQuaternion(D),i.offset.applyQuaternion(D),i.radiusConstraint){var N=i.radiusConstraint,I=N.maxBoundingSphere,L=N.minBoundingSphere,C=(new u.Vector3).subVectors(T,b);if(L.containsPoint(b)){var O=new u.Ray(b,(new u.Vector3).copy(C).multiplyScalar(-1)),R=O.intersectSphere(L).addScaledVector(C,-.001);b.copy(R)}else if(!I.containsPoint(b)){var z=new u.Ray(b,C),j=z.intersectSphere(I).addScaledVector(C,.001);b.copy(j)}if(!L.containsPoint(T)){var P=(new u.Vector3).crossVectors(C,i.upPosition),U=L.clampPoint(T),B=(new u.Vector3).subVectors(U,T);U.addScaledVector(B,.001),i.upPosition.crossVectors(P,C.subVectors(U,b)).normalize(),T.copy(U)}}o.setPosition(b),a.setPosition(T),r.i(p.a)(o,a,i.upPosition)}}function s(t,e,n,i,a,o,s,l){var c=l.x,h=l.y;b.setFromMatrixPosition(o),T.setFromMatrixPosition(a).sub(b);var f=(new u.Spherical).setFromVector3(T),d=2*w*(-c/s.x);f.theta+=d;var m=2*w*(h/s.y);f.phi+=m,f.makeSafe(),T.setFromSpherical(f).add(b),a.setPosition(T),r.i(p.a)(o,a,i.upPosition)}e.a=n,e.b=i;var u=r(1),l=(r.n(u),r(144)),c=r(44),h=r(3),f=r(5),d=r(8),p=r(62),m=r(51),g=r(89),v=r(386),y=(Math.tan,Math.cos,Math.atan,Math.acos),M=Math.min,w=(Math.max,Math.pow,Math.PI),x=Math.sqrt,b=new u.Vector3,T=new u.Vector3,E=new u.Vector3;new u.Spherical,new u.Spherical,new u.Matrix4,new u.Matrix4},function(t,e,r){"use strict";function n(t,e){var n=r.i(o.q)(t);r.i(a.b)(t,e);s.setFromMatrixPosition(n.matrix);var i=t.getTranslator().getNodeBoundingBox(e).getBoundingSphere(c).radius;return l.subVectors(s,u),l.z=-l.length(),l.y=i,l.x=0,l.applyMatrix4(n.projectionMatrix),l.z=0,l.length()}e.a=n;var i=r(1),a=(r.n(i),r(5)),o=r(3),s=new i.Vector3,u=new i.Vector3,l=new i.Vector3,c=new i.Sphere},function(t,e,r){"use strict";function n(t,e,n,i){var m=r.i(o.g)(t),g=r.i(o.h)(t),v=r.i(a.a)(r.i(s.a)(t,{id:m,evalPlug:"Camera"}));u.getInverse(g,!0),l.copy(v).multiply(u);var y=r.i(s.b)(t,e);if(y){var M=r.i(o.e)(t);r.i(s.b)(t,r.i(s.d)(t,{id:e,parent:!0}));return h.setFromMatrixPosition(y),d.set(n,-i).divide(M).multiplyScalar(2),f.copy(h).applyMatrix4(l),f.x=0,f.y=0,p.set(d.x,d.y,f.z),c.getInverse(l,!0),f.applyMatrix4(c),p.applyMatrix4(c).sub(f),p}}e.a=n;var i=r(1),a=(r.n(i),r(110)),o=r(3),s=r(5),u=new i.Matrix4,l=new i.Matrix4,c=new i.Matrix4,h=new i.Vector3,f=new i.Vector3,d=new i.Vector2,p=new i.Vector3},function(t,e,r){"use strict";function n(t,e){function n(e){var n=e.delta,a=e.deltaX,o=e.deltaY,h=void 0!==n?n:a/30+-o/30,f=r.i(u.g)(t),d=r.i(l.b)(t,f);i(t,-h,f,d),t.dispatch(r.i(c.g)([f,"Transform",0],r.i(s.a)(d)))}return{label:"Zoom",enabled:!0,display:{playerTools:!0},options:{},tool:{drag:function(t){return!(!this.active&&!t.ctrlKey)&&{momentum:!0,handle:function(t){n({delta:void 0!==t.delta?t.delta:t.deltaX/30+-t.deltaY/30})}}},pinch:function(t){n(t)},scroll:function(e){r.i(d.a)(t)&&n(e)}}}}function i(t,e,n,i){var s=r.i(l.a)(t,{id:n,evalPlug:"Camera"}),c=(r.i(l.a)(t,{scene:!0,evalPlug:"Player"}),r.i(f.a)(t,n)),d=r.i(u.e)(t),x=e/d.y,b=g(2,100*x);if("Perspective"===s.projection){y.setFromMatrixPosition(i),M.setFromMatrixPosition(c),w.copy(y).sub(M);var T=m(w.length(),v),E=T*b;if(s.radiusConstraint){var S=s.radiusConstraint,_=S.maxBoundingSphere,A=S.minBoundingSphere,D=(new a.Vector3).copy(w).normalize(),N=(new a.Vector3).copy(D).multiplyScalar(-1),I=new a.Ray(y,N),L=new a.Ray(y,D),C=new a.Vector3,O=new a.Vector3;I.intersectSphere(A,C),L.intersectSphere(_,O);var R=C.sub(M).length(),z=_.radius===1/0?1/0:O.sub(M).length();E=r.i(o.a)(E,R+.001,z-.001)}if(w.multiplyScalar(E/T),y.copy(M).add(w),y.y<0&&r.i(p.b)(t,n)&&"trackball"!==r.i(p.a)(t,n)){(new a.Vector3).crossVectors(w,s.upPosition).normalize();y.y=0,w.copy(y).sub(M)}i.setPosition(y),r.i(h.a)(i,c,s.upPosition)}else if("Orthographic"===s.projection){var j=r.i(l.a)(t,{id:n,plug:"Camera",property:"orthoZoom"});t.dispatch(r.i(l.c)({id:n,plug:"Camera",property:"orthoZoom"},j*b))}}e.b=n,e.a=i;var a=r(1),o=(r.n(a),r(144)),s=r(44),u=r(3),l=r(5),c=r(8),h=r(62),f=r(51),d=r(385),p=r(89),m=(Math.tan,Math.cos,Math.atan,Math.acos,Math.min,Math.max),g=Math.pow,v=(Math.PI,Math.sqrt,1e-6),y=new a.Vector3,M=new a.Vector3,w=new a.Vector3},function(t,e,r){"use strict";function n(t){var e=new i.Box3,r=new i.Box3;if(!t)return r;var n=t;return t.children.forEach(function(t){"Object3D"===t.type&&"Objects"===t.name&&(n=t)}),r.makeEmpty(),t.updateMatrixWorld(!0),n.traverse(function(t){if(t.visible&&t.geometry&&!t.isDirectionalLightHelper&&!t.isCameraHelper){var n=t.geometry;null===n.boundingBox&&n.computeBoundingBox(),!1===n.boundingBox.isEmpty()&&(e.copy(n.boundingBox),t.matrix.compose(t.position,t.quaternion,t.scale),t.updateMatrixWorld(!0),e.applyMatrix4(t.matrixWorld),r.union(e))}}),r}e.a=n;var i=r(1);r.n(i)},function(t,e,r){"use strict";function n(t,e){this.offset=new i.Vector3(0,0,0),this.rotationalOffset=new i.Quaternion(0,0,0,1),this.threeVRControls=new i.VRControls(t,e),this.setOffset=function(t){this.offset.copy(t)},this.setRotationalOffset=function(t){this.rotationalOffset.copy(t)},this.update=function(){this.threeVRControls.update(),t.quaternion.premultiply(this.rotationalOffset),t.position.applyQuaternion(this.rotationalOffset),t.position.add(this.offset)},this.setStanding=function(t){this.threeVRControls.standing=t},this.resetPose=function(){var t=this.threeVRControls.getVRDisplay();t&&t.resetPose&&this.threeVRControls.resetPose()},this.getStandingMatrix=function(){return this.threeVRControls.getStandingMatrix()},this.setUserHeight=function(t){this.threeVRControls.userHeight=Number(t)}}e.a=n;var i=r(13);r.n(i)},function(t,e,r){"use strict";(function(t){function n(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(t,e){if(n()<e)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=a.prototype):(null===t&&(t=new a(e)),t.length=e),t}function a(t,e,r){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}return o(this,t,e,r)}function o(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?f(t,e,r,n):"string"==typeof e?c(t,e,r):d(t,e)}function s(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e,r,n){return s(e),e<=0?i(t,e):void 0!==r?"string"==typeof n?i(t,e).fill(r,n):i(t,e).fill(r):i(t,e)}function l(t,e){if(s(e),t=i(t,e<0?0:0|p(e)),!a.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function c(t,e,r){if("string"==typeof r&&""!==r||(r="utf8"),!a.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|g(e,r);t=i(t,n);var o=t.write(e,r);return o!==n&&(t=t.slice(0,o)),t}function h(t,e){var r=e.length<0?0:0|p(e.length);t=i(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function f(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n),a.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=a.prototype):t=h(t,e),t}function d(t,e){if(a.isBuffer(e)){var r=0|p(e.length);return t=i(t,r),0===t.length?t:(e.copy(t,0,0,r),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||q(e.length)?i(t,0):h(t,e);if("Buffer"===e.type&&J(e.data))return h(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function p(t){if(t>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|t}function m(t){return+t!=t&&(t=0),a.alloc(+t)}function g(t,e){if(a.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return Y(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return W(t).length;default:if(n)return Y(t).length;e=(""+e).toLowerCase(),n=!0}}function v(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,e>>>=0,r<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return C(this,e,r);case"utf8":case"utf-8":return D(this,e,r);case"ascii":return I(this,e,r);case"latin1":case"binary":return L(this,e,r);case"base64":return A(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function y(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function M(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=a.from(e,n)),a.isBuffer(e))return 0===e.length?-1:w(t,e,r,n,i);if("number"==typeof e)return e&=255,a.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):w(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function w(t,e,r,n,i){function a(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}var o=1,s=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;o=2,s/=2,u/=2,r/=2}var l;if(i){var c=-1;for(l=r;l<s;l++)if(a(t,l)===a(e,-1===c?0:l-c)){if(-1===c&&(c=l),l-c+1===u)return c*o}else-1!==c&&(l-=l-c),c=-1}else for(r+u>s&&(r=s-u),l=r;l>=0;l--){for(var h=!0,f=0;f<u;f++)if(a(t,l+f)!==a(e,f)){h=!1;break}if(h)return l}return-1}function x(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var a=e.length;if(a%2!=0)throw new TypeError("Invalid hex string");n>a/2&&(n=a/2);for(var o=0;o<n;++o){var s=parseInt(e.substr(2*o,2),16);if(isNaN(s))return o;t[r+o]=s}return o}function b(t,e,r,n){return X(Y(e,t.length-r),t,r,n)}function T(t,e,r,n){return X(H(e),t,r,n)}function E(t,e,r,n){return T(t,e,r,n)}function S(t,e,r,n){return X(W(e),t,r,n)}function _(t,e,r,n){return X(Q(e,t.length-r),t,r,n)}function A(t,e,r){return 0===e&&r===t.length?Z.fromByteArray(t):Z.fromByteArray(t.slice(e,r))}function D(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var a=t[i],o=null,s=a>239?4:a>223?3:a>191?2:1;if(i+s<=r){var u,l,c,h;switch(s){case 1:a<128&&(o=a);break;case 2:u=t[i+1],128==(192&u)&&(h=(31&a)<<6|63&u)>127&&(o=h);break;case 3:u=t[i+1],l=t[i+2],128==(192&u)&&128==(192&l)&&(h=(15&a)<<12|(63&u)<<6|63&l)>2047&&(h<55296||h>57343)&&(o=h);break;case 4:u=t[i+1],l=t[i+2],c=t[i+3],128==(192&u)&&128==(192&l)&&128==(192&c)&&(h=(15&a)<<18|(63&u)<<12|(63&l)<<6|63&c)>65535&&h<1114112&&(o=h)}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return N(n)}function N(t){var e=t.length;if(e<=$)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=$));return r}function I(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function L(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function C(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",a=e;a<r;++a)i+=G(t[a]);return i}function O(t,e,r){for(var n=t.slice(e,r),i="",a=0;a<n.length;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}function R(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function z(t,e,r,n,i,o){if(!a.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function j(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,a=Math.min(t.length-r,2);i<a;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function P(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,a=Math.min(t.length-r,4);i<a;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function U(t,e,r,n,i,a){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function B(t,e,r,n,i){return i||U(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),K.write(t,e,r,n,23,4),r+4}function V(t,e,r,n,i){return i||U(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),K.write(t,e,r,n,52,8),r+8}function F(t){if(t=k(t).replace(tt,""),t.length<2)return"";for(;t.length%4!=0;)t+="=";return t}function k(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function G(t){return t<16?"0"+t.toString(16):t.toString(16)}function Y(t,e){e=e||1/0;for(var r,n=t.length,i=null,a=[],o=0;o<n;++o){if((r=t.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&a.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;a.push(r)}else if(r<2048){if((e-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function H(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function Q(t,e){for(var r,n,i,a=[],o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,i=r%256,a.push(i),a.push(n);return a}function W(t){return Z.toByteArray(F(t))}function X(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function q(t){return t!==t}var Z=r(407),K=r(574),J=r(575);e.Buffer=a,e.SlowBuffer=m,e.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=n(),a.poolSize=8192,a._augment=function(t){return t.__proto__=a.prototype,t},a.from=function(t,e,r){return o(null,t,e,r)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(t,e,r){return u(null,t,e,r)},a.allocUnsafe=function(t){return l(null,t)},a.allocUnsafeSlow=function(t){return l(null,t)},a.isBuffer=function(t){return!(null==t||!t._isBuffer)},a.compare=function(t,e){if(!a.isBuffer(t)||!a.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(t,e){if(!J(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return a.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=a.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var o=t[r];if(!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},a.byteLength=g,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},a.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},a.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},a.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?D(this,0,t):v.apply(this,arguments)},a.prototype.equals=function(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===a.compare(this,t)},a.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},a.prototype.compare=function(t,e,r,n,i){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,i>>>=0,this===t)return 0;for(var o=i-n,s=r-e,u=Math.min(o,s),l=this.slice(n,i),c=t.slice(e,r),h=0;h<u;++h)if(l[h]!==c[h]){o=l[h],s=c[h];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},a.prototype.indexOf=function(t,e,r){return M(this,t,e,r,!0)},a.prototype.lastIndexOf=function(t,e,r){return M(this,t,e,r,!1)},a.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return x(this,t,e,r);case"utf8":case"utf-8":return b(this,t,e,r);case"ascii":return T(this,t,e,r);case"latin1":case"binary":return E(this,t,e,r);case"base64":return S(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,t,e,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;a.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n;if(a.TYPED_ARRAY_SUPPORT)n=this.subarray(t,e),n.__proto__=a.prototype;else{var i=e-t;n=new a(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},a.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=this[t],i=1,a=0;++a<e&&(i*=256);)n+=this[t+a]*i;return n},a.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},a.prototype.readUInt8=function(t,e){return e||R(t,1,this.length),this[t]},a.prototype.readUInt16LE=function(t,e){return e||R(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.readUInt16BE=function(t,e){return e||R(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.readUInt32LE=function(t,e){return e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},a.prototype.readUInt32BE=function(t,e){return e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=this[t],i=1,a=0;++a<e&&(i*=256);)n+=this[t+a]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},a.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=e,i=1,a=this[t+--n];n>0&&(i*=256);)a+=this[t+--n]*i;return i*=128,a>=i&&(a-=Math.pow(2,8*e)),a},a.prototype.readInt8=function(t,e){return e||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},a.prototype.readInt16LE=function(t,e){e||R(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt16BE=function(t,e){e||R(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt32LE=function(t,e){return e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.readInt32BE=function(t,e){return e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.readFloatLE=function(t,e){return e||R(t,4,this.length),K.read(this,t,!0,23,4)},a.prototype.readFloatBE=function(t,e){return e||R(t,4,this.length),K.read(this,t,!1,23,4)},a.prototype.readDoubleLE=function(t,e){return e||R(t,8,this.length),K.read(this,t,!0,52,8)},a.prototype.readDoubleBE=function(t,e){return e||R(t,8,this.length),K.read(this,t,!1,52,8)},a.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e|=0,r|=0,!n){z(this,t,e,r,Math.pow(2,8*r)-1,0)}var i=1,a=0;for(this[e]=255&t;++a<r&&(i*=256);)this[e+a]=t/i&255;return e+r},a.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e|=0,r|=0,!n){z(this,t,e,r,Math.pow(2,8*r)-1,0)}var i=r-1,a=1;for(this[e+i]=255&t;--i>=0&&(a*=256);)this[e+i]=t/a&255;return e+r},a.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||z(this,t,e,1,255,0),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},a.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||z(this,t,e,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):j(this,t,e,!0),e+2},a.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||z(this,t,e,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):j(this,t,e,!1),e+2},a.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||z(this,t,e,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):P(this,t,e,!0),e+4},a.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||z(this,t,e,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):P(this,t,e,!1),e+4},a.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);z(this,t,e,r,i-1,-i)}var a=0,o=1,s=0;for(this[e]=255&t;++a<r&&(o*=256);)t<0&&0===s&&0!==this[e+a-1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+r},a.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);z(this,t,e,r,i-1,-i)}var a=r-1,o=1,s=0;for(this[e+a]=255&t;--a>=0&&(o*=256);)t<0&&0===s&&0!==this[e+a+1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+r},a.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||z(this,t,e,1,127,-128),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},a.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||z(this,t,e,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):j(this,t,e,!0),e+2},a.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||z(this,t,e,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):j(this,t,e,!1),e+2},a.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||z(this,t,e,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):P(this,t,e,!0),e+4},a.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||z(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):P(this,t,e,!1),e+4},a.prototype.writeFloatLE=function(t,e,r){return B(this,t,e,!0,r)},a.prototype.writeFloatBE=function(t,e,r){return B(this,t,e,!1,r)},a.prototype.writeDoubleLE=function(t,e,r){return V(this,t,e,!0,r)},a.prototype.writeDoubleBE=function(t,e,r){return V(this,t,e,!1,r)},a.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,o=n-r;if(this===t&&r<e&&e<n)for(i=o-1;i>=0;--i)t[i+e]=this[i+r];else if(o<1e3||!a.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},a.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!a.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0);var o;if("number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var s=a.isBuffer(t)?t:Y(new a(t,n).toString()),u=s.length;for(o=0;o<r-e;++o)this[o+e]=s[o%u]}return this};var tt=/[^+\/0-9A-Za-z-_]/g}).call(e,r(59))},function(t,e,r){t.exports=r(26).document&&document.documentElement},function(t,e,r){t.exports=!r(38)&&!r(63)(function(){return 7!=Object.defineProperty(r(148)("div"),"a",{get:function(){return 7}}).a})},function(t,e,r){var n=r(70),i=r(22)("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||a[i]===t)}},function(t,e,r){var n=r(91);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,r){var n=r(48);t.exports=function(t,e,r,i){try{return i?e(n(r)[0],r[1]):e(r)}catch(e){var a=t.return;throw void 0!==a&&n(a.call(t)),e}}},function(t,e,r){var n=r(22)("iterator"),i=!1;try{var a=[7][n]();a.return=function(){i=!0},Array.from(a,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var r=!1;try{var a=[7],o=a[n]();o.next=function(){return{done:r=!0}},a[n]=function(){return o},t(a)}catch(t){}return r}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,r){var n=r(223),i=r(149).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,i)}},function(t,e,r){var n=r(64),i=r(71),a=r(154)("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),n(t,a)?t[a]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?o:null}},function(t,e,r){var n=r(64),i=r(49),a=r(430)(!1),o=r(154)("IE_PROTO");t.exports=function(t,e){var r,s=i(t),u=0,l=[];for(r in s)r!=o&&n(s,r)&&l.push(r);for(;e.length>u;)n(s,r=e[u++])&&(~a(l,r)||l.push(r));return l}},function(t,e,r){t.exports=r(53)},function(t,e,r){"use strict";var n=r(26),i=r(10),a=r(34),o=r(38),s=r(22)("species");t.exports=function(t){var e="function"==typeof i[t]?i[t]:n[t];o&&e&&!e[s]&&a.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,r){"use strict";var n=r(67),i=r(81),a=r(28);t.exports=[].copyWithin||function(t,e){var r=n(this),o=a(r.length),s=i(t,o),u=i(e,o),l=arguments.length>2?arguments[2]:void 0,c=Math.min((void 0===l?o:i(l,o))-u,o-s),h=1;for(u<s&&s<u+c&&(h=-1,u+=c-1,s+=c-1);c-- >0;)u in r?r[s]=r[u]:delete r[s],s+=h,u+=h;return r}},function(t,e,r){"use strict";var n=r(23).f,i=r(99),a=r(79),o=r(45),s=r(74),u=r(54),l=r(123),c=r(235),h=r(236),f=r(127),d=r(30),p=r(98).fastKey,m=d?"_s":"size",g=function(t,e){var r,n=p(e);if("F"!==n)return t._i[n];for(r=t._f;r;r=r.n)if(r.k==e)return r};t.exports={getConstructor:function(t,e,r,c){var h=t(function(t,n){s(t,h,e,"_i"),t._i=i(null),t._f=void 0,t._l=void 0,t[m]=0,void 0!=n&&l(n,r,t[c],t)});return a(h.prototype,{clear:function(){for(var t=this,e=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete e[r.i];t._f=t._l=void 0,t[m]=0},delete:function(t){var e=this,r=g(e,t);if(r){var n=r.n,i=r.p;delete e._i[r.i],r.r=!0,i&&(i.n=n),n&&(n.p=i),e._f==r&&(e._f=n),e._l==r&&(e._l=i),e[m]--}return!!r},forEach:function(t){s(this,h,"forEach");for(var e,r=o(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.n:this._f;)for(r(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!g(this,t)}}),d&&n(h.prototype,"size",{get:function(){return u(this[m])}}),h},def:function(t,e,r){var n,i,a=g(t,e);return a?a.v=r:(t._l=a={i:i=p(e,!0),k:e,v:r,p:n=t._l,n:void 0,r:!1},t._f||(t._f=a),n&&(n.n=a),t[m]++,"F"!==i&&(t._i[i]=a)),t},getEntry:g,setStrong:function(t,e,r){c(t,e,function(t,e){this._t=t,this._k=e,this._l=void 0},function(){for(var t=this,e=t._k,r=t._l;r&&r.r;)r=r.p;return t._t&&(t._l=r=r?r.n:t._t._f)?"keys"==e?h(0,r.k):"values"==e?h(0,r.v):h(0,[r.k,r.v]):(t._t=void 0,h(1))},r?"entries":"values",!r,!0),f(e)}}},function(t,e,r){"use strict";var n=r(79),i=r(98).getWeak,a=r(12),o=r(14),s=r(74),u=r(123),l=r(96),c=r(27),h=l(5),f=l(6),d=0,p=function(t){return t._l||(t._l=new m)},m=function(){this.a=[]},g=function(t,e){return h(t.a,function(t){return t[0]===e})};m.prototype={get:function(t){var e=g(this,t);if(e)return e[1]},has:function(t){return!!g(this,t)},set:function(t,e){var r=g(this,t);r?r[1]=e:this.a.push([t,e])},delete:function(t){var e=f(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,r,a){var l=t(function(t,n){s(t,l,e,"_i"),t._i=d++,t._l=void 0,void 0!=n&&u(n,r,t[a],t)});return n(l.prototype,{delete:function(t){if(!o(t))return!1;var e=i(t);return!0===e?p(this).delete(t):e&&c(e,this._i)&&delete e[this._i]},has:function(t){if(!o(t))return!1;var e=i(t);return!0===e?p(this).has(t):e&&c(e,this._i)}}),l},def:function(t,e,r){var n=i(a(e),!0);return!0===n?p(t).set(e,r):n[t._i]=r,t},ufstore:p}},function(t,e,r){t.exports=r(11).document&&document.documentElement},function(t,e,r){t.exports=!r(30)&&!r(20)(function(){return 7!=Object.defineProperty(r(167)("div"),"a",{get:function(){return 7}}).a})},function(t,e,r){var n=r(75);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,r){var n=r(14),i=Math.floor;t.exports=function(t){return!n(t)&&isFinite(t)&&i(t)===t}},function(t,e,r){var n=r(14),i=r(75),a=r(15)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[a])?!!e:"RegExp"==i(t))}},function(t,e,r){var n=r(12);t.exports=function(t,e,r,i){try{return i?e(n(r)[0],r[1]):e(r)}catch(e){var a=t.return;throw void 0!==a&&n(a.call(t)),e}}},function(t,e,r){"use strict";var n=r(77),i=r(0),a=r(57),o=r(35),s=r(27),u=r(76),l=r(480),c=r(80),h=r(101),f=r(15)("iterator"),d=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,r,m,g,v,y){l(r,e,m);var M,w,x,b=function(t){if(!d&&t in _)return _[t];switch(t){case"keys":case"values":return function(){return new r(this,t)}}return function(){return new r(this,t)}},T=e+" Iterator",E="values"==g,S=!1,_=t.prototype,A=_[f]||_["@@iterator"]||g&&_[g],D=A||b(g),N=g?E?b("entries"):D:void 0,I="Array"==e?_.entries||A:A;if(I&&(x=h(I.call(new t)))!==Object.prototype&&(c(x,T,!0),n||s(x,f)||o(x,f,p)),E&&A&&"values"!==A.name&&(S=!0,D=function(){return A.call(this)}),n&&!y||!d&&!S&&_[f]||o(_,f,D),u[e]=D,u[T]=p,g)if(M={values:E?D:b("values"),keys:v?D:b("keys"),entries:N},y)for(w in M)w in _||a(_,w,M[w]);else i(i.P+i.F*(d||S),e,M);return M}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,e,r){"use strict";var n=r(78),i=r(126),a=r(102),o=r(67),s=r(170),u=Object.assign;t.exports=!u||r(20)(function(){var t={},e={},r=Symbol(),n="abcdefghijklmnopqrst";return t[r]=7,n.split("").forEach(function(t){e[t]=t}),7!=u({},t)[r]||Object.keys(u({},e)).join("")!=n})?function(t,e){for(var r=o(t),u=arguments.length,l=1,c=i.f,h=a.f;u>l;)for(var f,d=s(arguments[l++]),p=c?n(d).concat(c(d)):n(d),m=p.length,g=0;m>g;)h.call(d,f=p[g++])&&(r[f]=d[f]);return r}:u},function(t,e,r){var n=r(27),i=r(39),a=r(164)(!1),o=r(175)("IE_PROTO");t.exports=function(t,e){var r,s=i(t),u=0,l=[];for(r in s)r!=o&&n(s,r)&&l.push(r);for(;e.length>u;)n(s,r=e[u++])&&(~a(l,r)||l.push(r));return l}},function(t,e,r){var n=r(78),i=r(39),a=r(102).f;t.exports=function(t){return function(e){for(var r,o=i(e),s=n(o),u=s.length,l=0,c=[];u>l;)a.call(o,r=s[l++])&&c.push(t?[r,o[r]]:o[r]);return c}}},function(t,e,r){var n=r(100),i=r(126),a=r(12),o=r(11).Reflect;t.exports=o&&o.ownKeys||function(t){var e=n.f(a(t)),r=i.f;return r?e.concat(r(t)):e}},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,r){var n=r(28),i=r(244),a=r(54);t.exports=function(t,e,r,o){var s=String(a(t)),u=s.length,l=void 0===r?" ":String(r),c=n(e);if(c<=u||""==l)return s;var h=c-u,f=i.call(l,Math.ceil(h/l.length));return f.length>h&&(f=f.slice(0,h)),o?f+s:s+f}},function(t,e,r){"use strict";var n=r(82),i=r(54);t.exports=function(t){var e=String(i(this)),r="",a=n(t);if(a<0||a==1/0)throw RangeError("Count can't be negative");for(;a>0;(a>>>=1)&&(e+=e))1&a&&(r+=e);return r}},function(t,e,r){"use strict";var n=r(11),i=r(30),a=r(77),o=r(180),s=r(35),u=r(79),l=r(20),c=r(74),h=r(82),f=r(28),d=r(100).f,p=r(23).f,m=r(163),g=r(80),v=n.ArrayBuffer,y=n.DataView,M=n.Math,w=n.RangeError,x=n.Infinity,b=v,T=M.abs,E=M.pow,S=M.floor,_=M.log,A=M.LN2,D=i?"_b":"buffer",N=i?"_l":"byteLength",I=i?"_o":"byteOffset",L=function(t,e,r){var n,i,a,o=Array(r),s=8*r-e-1,u=(1<<s)-1,l=u>>1,c=23===e?E(2,-24)-E(2,-77):0,h=0,f=t<0||0===t&&1/t<0?1:0;for(t=T(t),t!=t||t===x?(i=t!=t?1:0,n=u):(n=S(_(t)/A),t*(a=E(2,-n))<1&&(n--,a*=2),t+=n+l>=1?c/a:c*E(2,1-l),t*a>=2&&(n++,a/=2),n+l>=u?(i=0,n=u):n+l>=1?(i=(t*a-1)*E(2,e),n+=l):(i=t*E(2,l-1)*E(2,e),n=0));e>=8;o[h++]=255&i,i/=256,e-=8);for(n=n<<e|i,s+=e;s>0;o[h++]=255&n,n/=256,s-=8);return o[--h]|=128*f,o},C=function(t,e,r){var n,i=8*r-e-1,a=(1<<i)-1,o=a>>1,s=i-7,u=r-1,l=t[u--],c=127&l;for(l>>=7;s>0;c=256*c+t[u],u--,s-=8);for(n=c&(1<<-s)-1,c>>=-s,s+=e;s>0;n=256*n+t[u],u--,s-=8);if(0===c)c=1-o;else{if(c===a)return n?NaN:l?-x:x;n+=E(2,e),c-=o}return(l?-1:1)*n*E(2,c-e)},O=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},R=function(t){return[255&t]},z=function(t){return[255&t,t>>8&255]},j=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},P=function(t){return L(t,52,8)},U=function(t){return L(t,23,4)},B=function(t,e,r){p(t.prototype,e,{get:function(){return this[r]}})},V=function(t,e,r,n){var i=+r,a=h(i);if(i!=a||a<0||a+e>t[N])throw w("Wrong index!");var o=t[D]._b,s=a+t[I],u=o.slice(s,s+e);return n?u:u.reverse()},F=function(t,e,r,n,i,a){var o=+r,s=h(o);if(o!=s||s<0||s+e>t[N])throw w("Wrong index!");for(var u=t[D]._b,l=s+t[I],c=n(+i),f=0;f<e;f++)u[l+f]=c[a?f:e-f-1]},k=function(t,e){c(t,v,"ArrayBuffer");var r=+e,n=f(r);if(r!=n)throw w("Wrong length!");return n};if(o.ABV){if(!l(function(){new v})||!l(function(){new v(.5)})){v=function(t){return new b(k(this,t))};for(var G,Y=v.prototype=b.prototype,H=d(b),Q=0;H.length>Q;)(G=H[Q++])in v||s(v,G,b[G]);a||(Y.constructor=v)}var W=new y(new v(2)),X=y.prototype.setInt8;W.setInt8(0,2147483648),W.setInt8(1,2147483649),!W.getInt8(0)&&W.getInt8(1)||u(y.prototype,{setInt8:function(t,e){X.call(this,t,e<<24>>24)},setUint8:function(t,e){X.call(this,t,e<<24>>24)}},!0)}else v=function(t){var e=k(this,t);this._b=m.call(Array(e),0),this[N]=e},y=function(t,e,r){c(this,y,"DataView"),c(t,v,"DataView");var n=t[N],i=h(e);if(i<0||i>n)throw w("Wrong offset!");if(r=void 0===r?n-i:f(r),i+r>n)throw w("Wrong length!");this[D]=t,this[I]=i,this[N]=r},i&&(B(v,"byteLength","_l"),B(y,"buffer","_b"),B(y,"byteLength","_l"),B(y,"byteOffset","_o")),u(y.prototype,{getInt8:function(t){return V(this,1,t)[0]<<24>>24},getUint8:function(t){return V(this,1,t)[0]},getInt16:function(t){var e=V(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=V(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return O(V(this,4,t,arguments[1]))},getUint32:function(t){return O(V(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return C(V(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return C(V(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){F(this,1,t,R,e)},setUint8:function(t,e){F(this,1,t,R,e)},setInt16:function(t,e){F(this,2,t,z,e,arguments[2])},setUint16:function(t,e){F(this,2,t,z,e,arguments[2])},setInt32:function(t,e){F(this,4,t,j,e,arguments[2])},setUint32:function(t,e){F(this,4,t,j,e,arguments[2])},setFloat32:function(t,e){F(this,4,t,U,e,arguments[2])},setFloat64:function(t,e){F(this,8,t,P,e,arguments[2])}});g(v,"ArrayBuffer"),g(y,"DataView"),s(y.prototype,o.VIEW,!0),e.ArrayBuffer=v,e.DataView=y},function(t,e,r){e.f=r(15)},function(t,e){function r(t,e){var r,n,a=e.elm,o=t.data.attrs||{},s=e.data.attrs||{};for(r in s)n=s[r],o[r]!==n&&(!n&&i[r]?a.removeAttribute(r):a.setAttribute(r,n));for(r in o)r in s||a.removeAttribute(r)}for(var n=["allowfullscreen","async","autofocus","autoplay","checked","compact","controls","declare","default","defaultchecked","defaultmuted","defaultselected","defer","disabled","draggable","enabled","formnovalidate","hidden","indeterminate","inert","ismap","itemscope","loop","multiple","muted","nohref","noresize","noshade","novalidate","nowrap","open","pauseonexit","readonly","required","reversed","scoped","seamless","selected","sortable","spellcheck","translate","truespeed","typemustmatch","visible"],i={},a=0,o=n.length;a<o;a++)i[n[a]]=!0;t.exports={create:r,update:r}},function(t,e){function r(t,e){var r,n,i=e.elm,a=t.data.class||{},o=e.data.class||{};for(n in o)(r=o[n])!==a[n]&&i.classList[r?"add":"remove"](n)}t.exports={create:r,update:r}},function(t,e,r){function n(t){return function(){2===t.length?t[0](t[1]):t[0].apply(void 0,t.slice(1))}}function i(t){return function(e){t.fn(e)}}function a(t,e){var r,a,s,u=e.elm,l=t.data.on||{},c=e.data.on;if(c)for(r in c)if(a=c[r],void 0===(s=l[r]))o.array(a)?u.addEventListener(r,n(a)):(a={fn:a},c[r]=a,u.addEventListener(r,i(a)));else if(o.array(s)){s.length=a.length;for(var h=0;h<s.length;++h)s[h]=a[h];c[r]=s}else s.fn=a,c[r]=s}var o=r(184);t.exports={create:a,update:a}},function(t,e){function r(t,e){var r,n,i=e.elm,a=t.data.props||{},o=e.data.props||{};for(r in o)n=o[r],a[r]!==n&&(i[r]=n)}t.exports={create:r,update:r}},function(t,e){function r(t,e,r){s(function(){t[e]=r})}function n(t,e){var n,i,a=e.elm,o=t.data.style||{},s=e.data.style||{},u="delayed"in o;for(i in s)if(n=s[i],"delayed"===i)for(i in s.delayed)n=s.delayed[i],u&&n===o.delayed[i]||r(a.style,i,n);else"remove"!==i&&n!==o[i]&&(a.style[i]=n)}function i(t){var e,r,n=t.elm,i=t.data.style;if(i&&(e=i.destroy))for(r in e)n.style[r]=e[r]}function a(t,e){var r=t.data.style;if(!r||!r.remove)return void e();var n,i,a=t.elm,o=0,s=r.remove,u=0,l=[];for(n in s)l.push(n),a.style[n]=s[n];i=getComputedStyle(a);for(var c=i["transition-property"].split(", ");o<c.length;++o)-1!==l.indexOf(c[o])&&u++;a.addEventListener("transitionend",function(t){t.target===a&&--u,0===u&&e()})}var o=requestAnimationFrame||setTimeout,s=function(t){o(function(){o(t)})};t.exports={create:n,update:n,destroy:i,remove:a}},function(t,e,r){"use strict";function n(t){return void 0===t}function i(t){return void 0!==t}function a(t){return c(t.tagName,{},[],void 0,t)}function o(t,e){return t.key===e.key&&t.sel===e.sel}function s(t,e,r){var n,a,o={};for(n=e;n<=r;++n)a=t[n].key,i(a)&&(o[a]=n);return o}function u(t,e){return function(){0==--e&&t.parentElement.removeChild(t)}}function l(t){function e(t,r){var n,a=t.data;i(a)&&(i(n=a.hook)&&i(n=n.init)&&n(t),i(n=a.vnode)&&(t=n));var o,s=t.children,u=t.sel;if(i(u)){var l=u.indexOf("#"),c=u.indexOf(".",l),d=l>0?l:u.length,p=c>0?c:u.length,m=-1!==l||-1!==c?u.slice(0,Math.min(d,p)):u;if(o=t.elm=i(a)&&i(n=a.ns)?document.createElementNS(n,m):document.createElement(m),d<p&&(o.id=u.slice(d+1,p)),c>0&&(o.className=u.slice(p+1).replace(/\./g," ")),h.array(s))for(n=0;n<s.length;++n)o.appendChild(e(s[n],r));else h.primitive(t.text)&&o.appendChild(document.createTextNode(t.text));for(n=0;n<y.create.length;++n)y.create[n](f,t);n=t.data.hook,i(n)&&(n.create&&n.create(f,t),n.insert&&r.push(t))}else o=t.elm=document.createTextNode(t.text);return t.elm}function r(t,r,n,i,a,o){for(;i<=a;++i)t.insertBefore(e(n[i],o),r)}function l(t){var e,r=t.data;if(i(r)){for(i(r=r.hook)&&i(r=r.destroy)&&r(t),r=0;r<y.destroy.length;++r)y.destroy[r](t);if(i(r=t.children))for(e=0;e<t.children.length;++e)l(t.children[e])}}function c(t,e,r,n){for(;r<=n;++r){var a,o,s,c=e[r];if(i(c))if(i(c.sel)){for(l(c),o=y.remove.length+1,s=u(c.elm,o),a=0;a<y.remove.length;++a)y.remove[a](c,s);i(a=c.data)&&i(a=a.hook)&&i(a=a.remove)?a(c,s):s()}else t.removeChild(c.elm)}}function p(t,i,a,u){for(var l,h,f,d,p=0,g=0,v=i.length-1,y=i[0],M=i[v],w=a.length-1,x=a[0],b=a[w];p<=v&&g<=w;)n(y)?y=i[++p]:n(M)?M=i[--v]:o(y,x)?(m(y,x,u),y=i[++p],x=a[++g]):o(M,b)?(m(M,b,u),M=i[--v],b=a[--w]):o(y,b)?(m(y,b,u),t.insertBefore(y.elm,M.elm.nextSibling),y=i[++p],b=a[--w]):o(M,x)?(m(M,x,u),t.insertBefore(M.elm,y.elm),M=i[--v],x=a[++g]):(n(l)&&(l=s(i,p,v)),h=l[x.key],n(h)?(t.insertBefore(e(x,u),y.elm),x=a[++g]):(f=i[h],m(f,x,u),i[h]=void 0,t.insertBefore(f.elm,y.elm),x=a[++g]));p>v?(d=n(a[w+1])?null:a[w+1].elm,r(t,d,a,g,w,u)):g>w&&c(t,i,p,v)}function m(t,e,a){var o,s;i(o=e.data)&&i(s=o.hook)&&i(o=s.prepatch)&&o(t,e),i(o=t.data)&&i(o=o.vnode)&&(t=o),i(o=e.data)&&i(o=o.vnode)&&(e=o);var u=e.elm=t.elm,l=t.children,h=e.children;if(t!==e){if(i(e.data)){for(o=0;o<y.update.length;++o)y.update[o](t,e);o=e.data.hook,i(o)&&i(o=o.update)&&o(t,e)}n(e.text)?i(l)&&i(h)?l!==h&&p(u,l,h,a):i(h)?r(u,null,h,0,h.length-1,a):i(l)&&c(u,l,0,l.length-1):t.text!==e.text&&(u.textContent=e.text),i(s)&&i(o=s.postpatch)&&o(t,e)}}var g,v,y={};for(g=0;g<d.length;++g)for(y[d[g]]=[],v=0;v<t.length;++v)void 0!==t[v][d[g]]&&y[d[g]].push(t[v][d[g]]);return function(t,r){var n,i=[];for(n=0;n<y.pre.length;++n)y.pre[n]();for(t instanceof Element?null!==t.parentElement?(e(r,i),t.parentElement.replaceChild(r.elm,t)):(t=a(t),m(t,r,i)):m(t,r,i),n=0;n<i.length;++n)i[n].data.hook.insert(i[n]);for(n=0;n<y.post.length;++n)y.post[n]();return r}}var c=r(253),h=r(184),f=c("",{},[],void 0,void 0),d=["create","update","remove","destroy","pre","post"];t.exports={init:l}},function(t,e){t.exports=function(t,e,r,n,i){return{sel:t,data:e,children:r,text:n,elm:i,key:void 0===e?void 0:e.key}}},function(t,e,r){function n(t,e,r){var n=e&&r||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null),t=t||{};var o=t.random||(t.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var s=0;s<16;++s)e[n+s]=o[s];return e||a(o)}var i=r(583),a=r(582);t.exports=n},function(t,e,r){function n(t){this.gl=t,this.attribs={position:0},this.program=i.linkProgram(t,o,s,this.attribs),this.uniforms=i.getProgramUniforms(t,this.program),this.vertexBuffer=t.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}var i=r(21),a=r(256),o=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join("\n"),s=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join("\n"),u=Math.PI/180,l=.3125;n.prototype.destroy=function(){var t=this.gl;this.listener&&t.canvas.removeEventListener("click",this.listener,!1),t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer)},n.prototype.listen=function(t,e){var r=this.gl.canvas;this.listener=function(n){var i=r.clientWidth/2;n.clientX>i-42&&n.clientX<i+42&&n.clientY>r.clientHeight-42?t(n):n.clientX<42&&n.clientY<42&&e(n)},r.addEventListener("click",this.listener,!1)},n.prototype.onResize=function(){var t=this.gl,e=this,r=[t.ARRAY_BUFFER_BINDING];a(t,r,function(t){function r(t,e){var r=(90-t)*u,n=Math.cos(r),o=Math.sin(r);i.push(l*n*d+a,l*o*d+d),i.push(e*n*d+a,e*o*d+d)}function n(e,r){i.push(p+e,t.drawingBufferHeight-p-r)}var i=[],a=t.drawingBufferWidth/2,o=Math.max(screen.width,screen.height)*window.devicePixelRatio,s=t.drawingBufferWidth/o,c=s*window.devicePixelRatio,h=4*c/2,f=42*c,d=28*c/2,p=14*c;i.push(a-h,f),i.push(a-h,t.drawingBufferHeight),i.push(a+h,f),i.push(a+h,t.drawingBufferHeight),e.gearOffset=i.length/2;for(var m=0;m<=6;m++){var g=60*m;r(g,1),r(g+12,1),r(g+20,.75),r(g+40,.75),r(g+48,1)}e.gearVertexCount=i.length/2-e.gearOffset,e.arrowOffset=i.length/2;var v=h/Math.sin(45*u);n(0,d),n(d,0),n(d+v,v),n(v,d+v),n(v,d-v),n(0,d),n(d,2*d),n(d+v,2*d-v),n(v,d-v),n(0,d),n(v,d-h),n(28*c,d-h),n(v,d+h),n(28*c,d+h),e.arrowVertexCount=i.length/2-e.arrowOffset,t.bindBuffer(t.ARRAY_BUFFER,e.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(i),t.STATIC_DRAW)})},n.prototype.render=function(){var t=this.gl,e=this,r=[t.CULL_FACE,t.DEPTH_TEST,t.BLEND,t.SCISSOR_TEST,t.STENCIL_TEST,t.COLOR_WRITEMASK,t.VIEWPORT,t.CURRENT_PROGRAM,t.ARRAY_BUFFER_BINDING];a(t,r,function(t){t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.BLEND),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.colorMask(!0,!0,!0,!0),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),e.renderNoState()})},n.prototype.renderNoState=function(){var t=this.gl;t.useProgram(this.program),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.enableVertexAttribArray(this.attribs.position),t.vertexAttribPointer(this.attribs.position,2,t.FLOAT,!1,8,0),t.uniform4f(this.uniforms.color,1,1,1,1),i.orthoMatrix(this.projMat,0,t.drawingBufferWidth,0,t.drawingBufferHeight,.1,1024),t.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),t.drawArrays(t.TRIANGLE_STRIP,0,4),t.drawArrays(t.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),t.drawArrays(t.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},t.exports=n},function(t,e){function r(t,e,r){if(!e)return void r(t);for(var n=[],i=null,a=0;a<e.length;++a){var o=e[a];switch(o){case t.TEXTURE_BINDING_2D:case t.TEXTURE_BINDING_CUBE_MAP:var s=e[++a];if(s<t.TEXTURE0||s>t.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),n.push(null,null);break}i||(i=t.getParameter(t.ACTIVE_TEXTURE)),t.activeTexture(s),n.push(t.getParameter(o),null);break;case t.ACTIVE_TEXTURE:i=t.getParameter(t.ACTIVE_TEXTURE),n.push(null);break;default:n.push(t.getParameter(o))}}r(t);for(var a=0;a<e.length;++a){var o=e[a],u=n[a];switch(o){case t.ACTIVE_TEXTURE:break;case t.ARRAY_BUFFER_BINDING:t.bindBuffer(t.ARRAY_BUFFER,u);break;case t.COLOR_CLEAR_VALUE:t.clearColor(u[0],u[1],u[2],u[3]);break;case t.COLOR_WRITEMASK:t.colorMask(u[0],u[1],u[2],u[3]);break;case t.CURRENT_PROGRAM:t.useProgram(u);break;case t.ELEMENT_ARRAY_BUFFER_BINDING:t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,u);break;case t.FRAMEBUFFER_BINDING:t.bindFramebuffer(t.FRAMEBUFFER,u);break;case t.RENDERBUFFER_BINDING:t.bindRenderbuffer(t.RENDERBUFFER,u);break;case t.TEXTURE_BINDING_2D:var s=e[++a];if(s<t.TEXTURE0||s>t.TEXTURE31)break;t.activeTexture(s),t.bindTexture(t.TEXTURE_2D,u);break;case t.TEXTURE_BINDING_CUBE_MAP:var s=e[++a];if(s<t.TEXTURE0||s>t.TEXTURE31)break;t.activeTexture(s),t.bindTexture(t.TEXTURE_CUBE_MAP,u);break;case t.VIEWPORT:t.viewport(u[0],u[1],u[2],u[3]);break;case t.BLEND:case t.CULL_FACE:case t.DEPTH_TEST:case t.SCISSOR_TEST:case t.STENCIL_TEST:u?t.enable(o):t.disable(o);break;default:console.log("No GL restore behavior for 0x"+o.toString(16))}i&&t.activeTexture(i)}}t.exports=r},function(t,e,r){function n(t){this.width=t.width||u.getScreenWidth(),this.height=t.height||u.getScreenHeight(),this.widthMeters=t.widthMeters,this.heightMeters=t.heightMeters,this.bevelMeters=t.bevelMeters}function i(t){this.viewer=h.CardboardV2,this.updateDeviceParams(t),this.distortion=new o(this.viewer.distortionCoefficients)}function a(t){this.id=t.id,this.label=t.label,this.fov=t.fov,this.interLensDistance=t.interLensDistance,this.baselineLensDistance=t.baselineLensDistance,this.screenLensDistance=t.screenLensDistance,this.distortionCoefficients=t.distortionCoefficients,this.inverseCoefficients=t.inverseCoefficients}var o=r(587),s=r(83),u=r(21),l=new n({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),c=new n({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),h={CardboardV1:new a({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new a({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};i.prototype.updateDeviceParams=function(t){this.device=this.determineDevice_(t)||this.device},i.prototype.getDevice=function(){return this.device},i.prototype.setViewer=function(t){this.viewer=t,this.distortion=new o(this.viewer.distortionCoefficients)},i.prototype.determineDevice_=function(t){if(!t)return u.isIOS()?(console.warn("Using fallback iOS device measurements."),c):(console.warn("Using fallback Android device measurements."),l);var e=.0254/t.xdpi,r=.0254/t.ydpi;return new n({widthMeters:e*u.getScreenWidth(),heightMeters:r*u.getScreenHeight(),bevelMeters:.001*t.bevelMm})},i.prototype.getDistortedFieldOfViewLeftEye=function(){var t=this.viewer,e=this.device,r=this.distortion,n=t.screenLensDistance,i=(e.widthMeters-t.interLensDistance)/2,a=t.interLensDistance/2,o=t.baselineLensDistance-e.bevelMeters,u=e.heightMeters-o,l=s.radToDeg*Math.atan(r.distort(i/n)),c=s.radToDeg*Math.atan(r.distort(a/n)),h=s.radToDeg*Math.atan(r.distort(o/n)),f=s.radToDeg*Math.atan(r.distort(u/n));return{leftDegrees:Math.min(l,t.fov),rightDegrees:Math.min(c,t.fov),downDegrees:Math.min(h,t.fov),upDegrees:Math.min(f,t.fov)}},i.prototype.getLeftEyeVisibleTanAngles=function(){var t=this.viewer,e=this.device,r=this.distortion,n=Math.tan(-s.degToRad*t.fov),i=Math.tan(s.degToRad*t.fov),a=Math.tan(s.degToRad*t.fov),o=Math.tan(-s.degToRad*t.fov),u=e.widthMeters/4,l=e.heightMeters/2,c=t.baselineLensDistance-e.bevelMeters-l,h=t.interLensDistance/2-u,f=-c,d=t.screenLensDistance,p=r.distort((h-u)/d),m=r.distort((f+l)/d),g=r.distort((h+u)/d),v=r.distort((f-l)/d),y=new Float32Array(4);return y[0]=Math.max(n,p),y[1]=Math.min(i,m),y[2]=Math.min(a,g),y[3]=Math.max(o,v),y},i.prototype.getLeftEyeNoLensTanAngles=function(){var t=this.viewer,e=this.device,r=this.distortion,n=new Float32Array(4),i=r.distortInverse(Math.tan(-s.degToRad*t.fov)),a=r.distortInverse(Math.tan(s.degToRad*t.fov)),o=r.distortInverse(Math.tan(s.degToRad*t.fov)),u=r.distortInverse(Math.tan(-s.degToRad*t.fov)),l=e.widthMeters/4,c=e.heightMeters/2,h=t.baselineLensDistance-e.bevelMeters-c,f=t.interLensDistance/2-l,d=-h,p=t.screenLensDistance,m=(f-l)/p,g=(d+c)/p,v=(f+l)/p,y=(d-c)/p;return n[0]=Math.max(i,m),n[1]=Math.min(a,g),n[2]=Math.min(o,v),n[3]=Math.max(u,y),n},i.prototype.getLeftEyeVisibleScreenRect=function(t){var e=this.viewer,r=this.device,n=e.screenLensDistance,i=(r.widthMeters-e.interLensDistance)/2,a=e.baselineLensDistance-r.bevelMeters,o=(t[0]*n+i)/r.widthMeters,s=(t[1]*n+a)/r.heightMeters,u=(t[2]*n+i)/r.widthMeters,l=(t[3]*n+a)/r.heightMeters;return{x:o,y:l,width:u-o,height:s-l}},i.prototype.getFieldOfViewLeftEye=function(t){return t?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},i.prototype.getFieldOfViewRightEye=function(t){var e=this.getFieldOfViewLeftEye(t);return{leftDegrees:e.rightDegrees,rightDegrees:e.leftDegrees,upDegrees:e.upDegrees,downDegrees:e.downDegrees}},i.prototype.getUndistortedFieldOfViewLeftEye=function(){var t=this.getUndistortedParams_();return{leftDegrees:s.radToDeg*Math.atan(t.outerDist),rightDegrees:s.radToDeg*Math.atan(t.innerDist),downDegrees:s.radToDeg*Math.atan(t.bottomDist),upDegrees:s.radToDeg*Math.atan(t.topDist)}},i.prototype.getUndistortedViewportLeftEye=function(){var t=this.getUndistortedParams_(),e=this.viewer,r=this.device,n=e.screenLensDistance,i=r.widthMeters/n,a=r.heightMeters/n,o=r.width/i,s=r.height/a,u=Math.round((t.eyePosX-t.outerDist)*o),l=Math.round((t.eyePosY-t.bottomDist)*s);return{x:u,y:l,width:Math.round((t.eyePosX+t.innerDist)*o)-u,height:Math.round((t.eyePosY+t.topDist)*s)-l}},i.prototype.getUndistortedParams_=function(){var t=this.viewer,e=this.device,r=this.distortion,n=t.screenLensDistance,i=t.interLensDistance/2/n,a=e.widthMeters/n,o=e.heightMeters/n,u=a/2-i,l=(t.baselineLensDistance-e.bevelMeters)/n,c=t.fov,h=r.distortInverse(Math.tan(s.degToRad*c)),f=Math.min(u,h),d=Math.min(i,h),p=Math.min(l,h);return{outerDist:f,innerDist:d,topDist:Math.min(o-l,h),bottomDist:p,eyePosX:u,eyePosY:l}},i.Viewers=h,t.exports=i},function(t,e,r){function n(t){this.display=t,this.hardwareUnitId=t.displayId,this.deviceId="webvr-polyfill:HMD:"+t.displayId,this.deviceName=t.displayName+" (HMD)"}function i(t){this.display=t,this.hardwareUnitId=t.displayId,this.deviceId="webvr-polyfill:PositionSensor: "+t.displayId,this.deviceName=t.displayName+" (PositionSensor)"}var a=(r(47).VRDisplay,r(47).HMDVRDevice),o=r(47).PositionSensorVRDevice;n.prototype=new a,n.prototype.getEyeParameters=function(t){var e=this.display.getEyeParameters(t);return{currentFieldOfView:e.fieldOfView,maximumFieldOfView:e.fieldOfView,minimumFieldOfView:e.fieldOfView,recommendedFieldOfView:e.fieldOfView,eyeTranslation:{x:e.offset[0],y:e.offset[1],z:e.offset[2]},renderRect:{x:"right"==t?e.renderWidth:0,y:0,width:e.renderWidth,height:e.renderHeight}}},n.prototype.setFieldOfView=function(t,e,r,n){},i.prototype=new o,i.prototype.getState=function(){var t=this.display.getPose();return{position:t.position?{x:t.position[0],y:t.position[1],z:t.position[2]}:null,orientation:t.orientation?{x:t.orientation[0],y:t.orientation[1],z:t.orientation[2],w:t.orientation[3]}:null,linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},i.prototype.resetState=function(){return this.positionDevice.resetPose()},t.exports.VRDisplayHMDDevice=n,t.exports.VRDisplayPositionSensorDevice=i},function(t,e,r){t.exports=r(326).default},function(t,e,r){t.exports={default:r(421),__esModule:!0}},function(t,e,r){"use strict";e.__esModule=!0;var n=r(397),i=function(t){return t&&t.__esModule?t:{default:t}}(n);e.default=function(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return(0,i.default)(t)}},function(t,e,r){var n=r(92),i=r(93),a=r(49),o=r(158),s=r(64),u=r(215),l=Object.getOwnPropertyDescriptor;e.f=r(38)?l:function(t,e){if(t=a(t),e=o(e,!0),u)try{return l(t,e)}catch(t){}if(s(t,e))return i(!n.f.call(t,e),t[e])}},function(t,e,r){t.exports={default:r(419),__esModule:!0}},function(t,e,r){!function(t,r){r(e)}(0,function(t){"use strict";function e(){}function r(t,e){this.x=t||0,this.y=e||0}function n(t,e,i,a,o,s,u,l,c,h){Object.defineProperty(this,"id",{value:is++}),this.uuid=ns.generateUUID(),this.name="",this.image=void 0!==t?t:n.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:n.DEFAULT_MAPPING,this.wrapS=void 0!==i?i:ao,this.wrapT=void 0!==a?a:ao,this.magFilter=void 0!==o?o:co,this.minFilter=void 0!==s?s:fo,this.anisotropy=void 0!==c?c:1,this.format=void 0!==u?u:Do,this.type=void 0!==l?l:po,this.offset=new r(0,0),this.repeat=new r(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==h?h:Xo,this.version=0,this.onUpdate=null}function i(t,e,r,n){this.x=t||0,this.y=e||0,this.z=r||0,this.w=void 0!==n?n:1}function a(t,e,r){this.uuid=ns.generateUUID(),this.width=t,this.height=e,this.scissor=new i(0,0,t,e),this.scissorTest=!1,this.viewport=new i(0,0,t,e),r=r||{},void 0===r.minFilter&&(r.minFilter=co),this.texture=new n(void 0,void 0,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.depthBuffer=void 0===r.depthBuffer||r.depthBuffer,this.stencilBuffer=void 0===r.stencilBuffer||r.stencilBuffer,this.depthTexture=void 0!==r.depthTexture?r.depthTexture:null,this.texture.name=void 0!==r.name?r.name:""}function o(t,e,r){a.call(this,t,e,r),this.activeCubeFace=0,this.activeMipMapLevel=0}function s(t,e,r,n){this._x=t||0,this._y=e||0,this._z=r||0,this._w=void 0!==n?n:1}function u(t,e,r){this.x=t||0,this.y=e||0,this.z=r||0}function l(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function c(t,e,r,i,a,o,s,u,l,c){t=void 0!==t?t:[],e=void 0!==e?e:Ka,n.call(this,t,e,r,i,a,o,s,u,l,c),this.flipY=!1}function h(){this.seq=[],this.map={}}function f(t,e,r){var n=t[0];if(n<=0||n>0)return t;var i=e*r,a=ss[i];if(void 0===a&&(a=new Float32Array(i),ss[i]=a),0!==e){n.toArray(a,0);for(var o=1,s=0;o!==e;++o)s+=r,t[o].toArray(a,s)}return a}function d(t,e){var r=us[e];void 0===r&&(r=new Int32Array(e),us[e]=r);for(var n=0;n!==e;++n)r[n]=t.allocTextureUnit();return r}function p(t,e){t.uniform1f(this.addr,e)}function m(t,e){t.uniform1i(this.addr,e)}function g(t,e){void 0===e.x?t.uniform2fv(this.addr,e):t.uniform2f(this.addr,e.x,e.y)}function v(t,e){void 0!==e.x?t.uniform3f(this.addr,e.x,e.y,e.z):void 0!==e.r?t.uniform3f(this.addr,e.r,e.g,e.b):t.uniform3fv(this.addr,e)}function y(t,e){void 0===e.x?t.uniform4fv(this.addr,e):t.uniform4f(this.addr,e.x,e.y,e.z,e.w)}function M(t,e){t.uniformMatrix2fv(this.addr,!1,e.elements||e)}function w(t,e){t.uniformMatrix3fv(this.addr,!1,e.elements||e)}function x(t,e){t.uniformMatrix4fv(this.addr,!1,e.elements||e)}function b(t,e,r){var n=r.allocTextureUnit();t.uniform1i(this.addr,n),r.setTexture2D(e||as,n)}function T(t,e,r){var n=r.allocTextureUnit();t.uniform1i(this.addr,n),r.setTextureCube(e||os,n)}function E(t,e){t.uniform2iv(this.addr,e)}function S(t,e){t.uniform3iv(this.addr,e)}function _(t,e){t.uniform4iv(this.addr,e)}function A(t){switch(t){case 5126:return p;case 35664:return g;case 35665:return v;case 35666:return y;case 35674:return M;case 35675:return w;case 35676:return x;case 35678:return b;case 35680:return T;case 5124:case 35670:return m;case 35667:case 35671:return E;case 35668:case 35672:return S;case 35669:case 35673:return _}}function D(t,e){t.uniform1fv(this.addr,e)}function N(t,e){t.uniform1iv(this.addr,e)}function I(t,e){t.uniform2fv(this.addr,f(e,this.size,2))}function L(t,e){t.uniform3fv(this.addr,f(e,this.size,3))}function C(t,e){t.uniform4fv(this.addr,f(e,this.size,4))}function O(t,e){t.uniformMatrix2fv(this.addr,!1,f(e,this.size,4))}function R(t,e){t.uniformMatrix3fv(this.addr,!1,f(e,this.size,9))}function z(t,e){t.uniformMatrix4fv(this.addr,!1,f(e,this.size,16))}function j(t,e,r){var n=e.length,i=d(r,n);t.uniform1iv(this.addr,i);for(var a=0;a!==n;++a)r.setTexture2D(e[a]||as,i[a])}function P(t,e,r){var n=e.length,i=d(r,n);t.uniform1iv(this.addr,i);for(var a=0;a!==n;++a)r.setTextureCube(e[a]||os,i[a])}function U(t){switch(t){case 5126:return D;case 35664:return I;case 35665:return L;case 35666:return C;case 35674:return O;case 35675:return R;case 35676:return z;case 35678:return j;case 35680:return P;case 5124:case 35670:return N;case 35667:case 35671:return E;case 35668:case 35672:return S;case 35669:case 35673:return _}}function B(t,e,r){this.id=t,this.addr=r,this.setValue=A(e.type)}function V(t,e,r){this.id=t,this.addr=r,this.size=e.size,this.setValue=U(e.type)}function F(t){this.id=t,h.call(this)}function k(t,e){t.seq.push(e),t.map[e.id]=e}function G(t,e,r){var n=t.name,i=n.length;for(ls.lastIndex=0;;){var a=ls.exec(n),o=ls.lastIndex,s=a[1],u="]"===a[2],l=a[3];if(u&&(s|=0),void 0===l||"["===l&&o+2===i){k(r,void 0===l?new B(s,t,e):new V(s,t,e));break}var c=r.map,h=c[s];void 0===h&&(h=new F(s),k(r,h)),r=h}}function Y(t,e,r){h.call(this),this.renderer=r;for(var n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),i=0;i!==n;++i){var a=t.getActiveUniform(e,i),o=a.name;G(a,t.getUniformLocation(e,o),this)}}function H(t,e,r){return void 0===e&&void 0===r?this.set(t):this.setRGB(t,e,r)}function Q(t,e,r,i,a,o,s,u,l,c,h,f){n.call(this,null,o,s,u,l,c,i,a,h,f),this.image={data:t,width:e,height:r},this.magFilter=void 0!==l?l:so,this.minFilter=void 0!==c?c:so,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function W(t,e){this.min=void 0!==t?t:new r(1/0,1/0),this.max=void 0!==e?e:new r(-1/0,-1/0)}function X(t,e){function n(){var t=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),e=new Uint16Array([0,1,2,0,2,3]);a=p.createBuffer(),o=p.createBuffer(),p.bindBuffer(p.ARRAY_BUFFER,a),p.bufferData(p.ARRAY_BUFFER,t,p.STATIC_DRAW),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,o),p.bufferData(p.ELEMENT_ARRAY_BUFFER,e,p.STATIC_DRAW),f=p.createTexture(),d=p.createTexture(),m.bindTexture(p.TEXTURE_2D,f),p.texImage2D(p.TEXTURE_2D,0,p.RGB,16,16,0,p.RGB,p.UNSIGNED_BYTE,null),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),m.bindTexture(p.TEXTURE_2D,d),p.texImage2D(p.TEXTURE_2D,0,p.RGBA,16,16,0,p.RGBA,p.UNSIGNED_BYTE,null),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),s={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},l=i(s),c={vertex:p.getAttribLocation(l,"position"),uv:p.getAttribLocation(l,"uv")},h={renderType:p.getUniformLocation(l,"renderType"),map:p.getUniformLocation(l,"map"),occlusionMap:p.getUniformLocation(l,"occlusionMap"),opacity:p.getUniformLocation(l,"opacity"),color:p.getUniformLocation(l,"color"),scale:p.getUniformLocation(l,"scale"),rotation:p.getUniformLocation(l,"rotation"),screenPosition:p.getUniformLocation(l,"screenPosition")}}function i(e){var r=p.createProgram(),n=p.createShader(p.FRAGMENT_SHADER),i=p.createShader(p.VERTEX_SHADER),a="precision "+t.getPrecision()+" float;\n";return p.shaderSource(n,a+e.fragmentShader),p.shaderSource(i,a+e.vertexShader),p.compileShader(n),p.compileShader(i),p.attachShader(r,n),p.attachShader(r,i),p.linkProgram(r),r}var a,o,s,l,c,h,f,d,p=t.context,m=t.state;this.render=function(i,s,g){if(0!==e.length){var v=new u,y=g.w/g.z,M=.5*g.z,w=.5*g.w,x=16/g.w,b=new r(x*y,x),T=new u(1,1,0),E=new r(1,1),S=new W;S.min.set(g.x,g.y),S.max.set(g.x+(g.z-16),g.y+(g.w-16)),void 0===l&&n(),p.useProgram(l),m.initAttributes(),m.enableAttribute(c.vertex),m.enableAttribute(c.uv),m.disableUnusedAttributes(),p.uniform1i(h.occlusionMap,0),p.uniform1i(h.map,1),p.bindBuffer(p.ARRAY_BUFFER,a),p.vertexAttribPointer(c.vertex,2,p.FLOAT,!1,16,0),p.vertexAttribPointer(c.uv,2,p.FLOAT,!1,16,8),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,o),m.disable(p.CULL_FACE),m.setDepthWrite(!1);for(var _=0,A=e.length;_<A;_++){x=16/g.w,b.set(x*y,x);var D=e[_];if(v.set(D.matrixWorld.elements[12],D.matrixWorld.elements[13],D.matrixWorld.elements[14]),v.applyMatrix4(s.matrixWorldInverse),v.applyMatrix4(s.projectionMatrix),T.copy(v),E.x=g.x+T.x*M+M-8,E.y=g.y+T.y*w+w-8,!0===S.containsPoint(E)){m.activeTexture(p.TEXTURE0),m.bindTexture(p.TEXTURE_2D,null),m.activeTexture(p.TEXTURE1),m.bindTexture(p.TEXTURE_2D,f),p.copyTexImage2D(p.TEXTURE_2D,0,p.RGB,E.x,E.y,16,16,0),p.uniform1i(h.renderType,0),p.uniform2f(h.scale,b.x,b.y),p.uniform3f(h.screenPosition,T.x,T.y,T.z),m.disable(p.BLEND),m.enable(p.DEPTH_TEST),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0),m.activeTexture(p.TEXTURE0),m.bindTexture(p.TEXTURE_2D,d),p.copyTexImage2D(p.TEXTURE_2D,0,p.RGBA,E.x,E.y,16,16,0),p.uniform1i(h.renderType,1),m.disable(p.DEPTH_TEST),m.activeTexture(p.TEXTURE1),m.bindTexture(p.TEXTURE_2D,f),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0),D.positionScreen.copy(T),D.customUpdateCallback?D.customUpdateCallback(D):D.updateLensFlares(),p.uniform1i(h.renderType,2),m.enable(p.BLEND);for(var N=0,I=D.lensFlares.length;N<I;N++){var L=D.lensFlares[N];L.opacity>.001&&L.scale>.001&&(T.x=L.x,T.y=L.y,T.z=L.z,x=L.size*L.scale/g.w,b.x=x*y,b.y=x,p.uniform3f(h.screenPosition,T.x,T.y,T.z),p.uniform2f(h.scale,b.x,b.y),p.uniform1f(h.rotation,L.rotation),p.uniform1f(h.opacity,L.opacity),p.uniform3f(h.color,L.color.r,L.color.g,L.color.b),m.setBlending(L.blending,L.blendEquation,L.blendSrc,L.blendDst),t.setTexture2D(L.texture,1),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0))}}}m.enable(p.CULL_FACE),m.enable(p.DEPTH_TEST),m.setDepthWrite(!0),t.resetGLState()}}}function q(t,e){function r(){var t=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),e=new Uint16Array([0,1,2,0,2,3]);o=p.createBuffer(),l=p.createBuffer(),p.bindBuffer(p.ARRAY_BUFFER,o),p.bufferData(p.ARRAY_BUFFER,t,p.STATIC_DRAW),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,l),p.bufferData(p.ELEMENT_ARRAY_BUFFER,e,p.STATIC_DRAW),c=i(),h={position:p.getAttribLocation(c,"position"),uv:p.getAttribLocation(c,"uv")},f={uvOffset:p.getUniformLocation(c,"uvOffset"),uvScale:p.getUniformLocation(c,"uvScale"),rotation:p.getUniformLocation(c,"rotation"),scale:p.getUniformLocation(c,"scale"),color:p.getUniformLocation(c,"color"),map:p.getUniformLocation(c,"map"),opacity:p.getUniformLocation(c,"opacity"),modelViewMatrix:p.getUniformLocation(c,"modelViewMatrix"),projectionMatrix:p.getUniformLocation(c,"projectionMatrix"),fogType:p.getUniformLocation(c,"fogType"),fogDensity:p.getUniformLocation(c,"fogDensity"),fogNear:p.getUniformLocation(c,"fogNear"),fogFar:p.getUniformLocation(c,"fogFar"),fogColor:p.getUniformLocation(c,"fogColor"),alphaTest:p.getUniformLocation(c,"alphaTest")};var r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");r.width=8,r.height=8;var a=r.getContext("2d");a.fillStyle="white",a.fillRect(0,0,8,8),d=new n(r),d.needsUpdate=!0}function i(){var e=p.createProgram(),r=p.createShader(p.VERTEX_SHADER),n=p.createShader(p.FRAGMENT_SHADER);return p.shaderSource(r,["precision "+t.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),p.shaderSource(n,["precision "+t.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),p.compileShader(r),p.compileShader(n),p.attachShader(e,r),p.attachShader(e,n),p.linkProgram(e),e}function a(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:e.id-t.id}var o,l,c,h,f,d,p=t.context,m=t.state,g=new u,v=new s,y=new u;this.render=function(n,i){if(0!==e.length){void 0===c&&r(),p.useProgram(c),m.initAttributes(),m.enableAttribute(h.position),m.enableAttribute(h.uv),m.disableUnusedAttributes(),m.disable(p.CULL_FACE),m.enable(p.BLEND),p.bindBuffer(p.ARRAY_BUFFER,o),p.vertexAttribPointer(h.position,2,p.FLOAT,!1,16,0),p.vertexAttribPointer(h.uv,2,p.FLOAT,!1,16,8),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,l),p.uniformMatrix4fv(f.projectionMatrix,!1,i.projectionMatrix.elements),m.activeTexture(p.TEXTURE0),p.uniform1i(f.map,0);var s=0,u=0,M=n.fog;M?(p.uniform3f(f.fogColor,M.color.r,M.color.g,M.color.b),M.isFog?(p.uniform1f(f.fogNear,M.near),p.uniform1f(f.fogFar,M.far),p.uniform1i(f.fogType,1),s=1,u=1):M.isFogExp2&&(p.uniform1f(f.fogDensity,M.density),p.uniform1i(f.fogType,2),s=2,u=2)):(p.uniform1i(f.fogType,0),s=0,u=0);for(var w=0,x=e.length;w<x;w++){var b=e[w];b.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,b.matrixWorld),b.z=-b.modelViewMatrix.elements[14]}e.sort(a);for(var T=[],w=0,x=e.length;w<x;w++){var b=e[w],E=b.material;if(!1!==E.visible){p.uniform1f(f.alphaTest,E.alphaTest),p.uniformMatrix4fv(f.modelViewMatrix,!1,b.modelViewMatrix.elements),b.matrixWorld.decompose(g,v,y),T[0]=y.x,T[1]=y.y;var S=0;n.fog&&E.fog&&(S=u),s!==S&&(p.uniform1i(f.fogType,S),s=S),null!==E.map?(p.uniform2f(f.uvOffset,E.map.offset.x,E.map.offset.y),p.uniform2f(f.uvScale,E.map.repeat.x,E.map.repeat.y)):(p.uniform2f(f.uvOffset,0,0),p.uniform2f(f.uvScale,1,1)),p.uniform1f(f.opacity,E.opacity),p.uniform3f(f.color,E.color.r,E.color.g,E.color.b),p.uniform1f(f.rotation,E.rotation),p.uniform2fv(f.scale,T),m.setBlending(E.blending,E.blendEquation,E.blendSrc,E.blendDst),m.setDepthTest(E.depthTest),m.setDepthWrite(E.depthWrite),E.map?t.setTexture2D(E.map,0):t.setTexture2D(d,0),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0)}}m.enable(p.CULL_FACE),t.resetGLState()}}}function Z(){Object.defineProperty(this,"id",{value:ms++}),this.uuid=ns.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=pa,this.side=aa,this.shading=la,this.vertexColors=ca,this.opacity=1,this.transparent=!1,this.blendSrc=Da,this.blendDst=Na,this.blendEquation=Ma,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Ua,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this._needsUpdate=!0,this.version=0}function K(t){Z.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function J(t){Z.call(this),this.type="MeshDepthMaterial",this.depthPacking=es,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clearColor=new H(1,1,1),this.clearAlpha=1,this.setValues(t)}function $(t,e){this.min=void 0!==t?t:new u(1/0,1/0,1/0),this.max=void 0!==e?e:new u(-1/0,-1/0,-1/0)}function tt(t,e){this.center=void 0!==t?t:new u,this.radius=void 0!==e?e:0}function et(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function rt(t,e){this.normal=void 0!==t?t:new u(1,0,0),this.constant=void 0!==e?e:0}function nt(t,e,r,n,i,a){this.planes=[void 0!==t?t:new rt,void 0!==e?e:new rt,void 0!==r?r:new rt,void 0!==n?n:new rt,void 0!==i?i:new rt,void 0!==a?a:new rt]}function it(t,e,n,o){function s(e,r,n,i){var a=e.geometry,o=null,s=E,u=e.customDepthMaterial;if(n&&(s=S,u=e.customDistanceMaterial),u)o=u;else{var l=!1;r.morphTargets&&(a&&a.isBufferGeometry?l=a.morphAttributes&&a.morphAttributes.position&&a.morphAttributes.position.length>0:a&&a.isGeometry&&(l=a.morphTargets&&a.morphTargets.length>0));var c=e.isSkinnedMesh&&r.skinning,h=0;l&&(h|=x),c&&(h|=b),o=s[h]}if(t.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){var f=o.uuid,d=r.uuid,p=_[f];void 0===p&&(p={},_[f]=p);var m=p[d];void 0===m&&(m=o.clone(),p[d]=m),o=m}o.visible=r.visible,o.wireframe=r.wireframe;var g=r.side;return U.renderSingleSided&&g==sa&&(g=aa),U.renderReverseSided&&(g===aa?g=oa:g===oa&&(g=aa)),o.side=g,o.clipShadows=r.clipShadows,o.clippingPlanes=r.clippingPlanes,o.wireframeLinewidth=r.wireframeLinewidth,o.linewidth=r.linewidth,n&&void 0!==o.uniforms.lightPos&&o.uniforms.lightPos.value.copy(i),o}function c(t,e,r){if(!1!==t.visible){if(0!=(t.layers.mask&e.layers.mask)&&(t.isMesh||t.isLine||t.isPoints)&&t.castShadow&&(!1===t.frustumCulled||!0===d.intersectsObject(t))){!0===t.material.visible&&(t.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,t.matrixWorld),w.push(t))}for(var n=t.children,i=0,a=n.length;i<a;i++)c(n[i],e,r)}}var h=t.context,f=t.state,d=new nt,p=new l,m=e.shadows,g=new r,v=new r(o.maxTextureSize,o.maxTextureSize),y=new u,M=new u,w=[],x=1,b=2,T=1+(x|b),E=new Array(T),S=new Array(T),_={},A=[new u(1,0,0),new u(-1,0,0),new u(0,0,1),new u(0,0,-1),new u(0,1,0),new u(0,-1,0)],D=[new u(0,1,0),new u(0,1,0),new u(0,1,0),new u(0,1,0),new u(0,0,1),new u(0,0,-1)],N=[new i,new i,new i,new i,new i,new i],I=new J;I.depthPacking=rs,I.clipping=!0;for(var L=ps.distanceRGBA,C=cs.clone(L.uniforms),O=0;O!==T;++O){var R=0!=(O&x),z=0!=(O&b),j=I.clone();j.morphTargets=R,j.skinning=z,E[O]=j;var P=new K({defines:{USE_SHADOWMAP:""},uniforms:C,vertexShader:L.vertexShader,fragmentShader:L.fragmentShader,morphTargets:R,skinning:z,clipping:!0});S[O]=P}var U=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ra,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(e,r){if(!1!==U.enabled&&(!1!==U.autoUpdate||!1!==U.needsUpdate)&&0!==m.length){f.buffers.color.setClear(1,1,1,1),f.disable(h.BLEND),f.setDepthTest(!0),f.setScissorTest(!1);for(var i,o,u=0,l=m.length;u<l;u++){var x=m[u],b=x.shadow;if(void 0!==b){var T=b.camera;if(g.copy(b.mapSize),g.min(v),x&&x.isPointLight){i=6,o=!0;var E=g.x,S=g.y;N[0].set(2*E,S,E,S),N[1].set(0,S,E,S),N[2].set(3*E,S,E,S),N[3].set(E,S,E,S),N[4].set(3*E,0,E,S),N[5].set(E,0,E,S),g.x*=4,g.y*=2}else i=1,o=!1;if(null===b.map){var _={minFilter:so,magFilter:so,format:Do,name:x.name+".shadowMap"};b.map=new a(g.x,g.y,_),T.updateProjectionMatrix()}(b.isSpotLightShadow||b.isDirectionalLightShadow)&&b.update(x),b&&b.isRectAreaLightShadow&&b.update(x);var I=b.map,L=b.matrix;M.setFromMatrixPosition(x.matrixWorld),T.position.copy(b.virtualPosition?b.virtualPosition:M),t.setRenderTarget(I),t.clear();for(var C=0;C<i;C++){if(o){y.copy(T.position),y.add(A[C]),T.up.copy(D[C]),T.lookAt(y);var O=N[C];f.viewport(O)}else y.setFromMatrixPosition(x.target.matrixWorld),T.lookAt(y);if(b.virtualPosition){var R=T.position.clone().sub(M);y.add(R),T.lookAt(y)}T.updateMatrixWorld(),T.matrixWorldInverse.getInverse(T.matrixWorld),L.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),L.multiply(T.projectionMatrix),L.multiply(T.matrixWorldInverse),p.multiplyMatrices(T.projectionMatrix,T.matrixWorldInverse),d.setFromMatrix(p),w.length=0,c(e,r,T);for(var z=0,j=w.length;z<j;z++){var P=w[z],B=n.update(P),V=P.material;if(V&&V.isMultiMaterial)for(var F=B.groups,k=V.materials,G=0,Y=F.length;G<Y;G++){var H=F[G],Q=k[H.materialIndex];if(!0===Q.visible){var W=s(P,Q,o,M);t.renderBufferDirect(T,null,B,W,P,H)}}else{var W=s(P,V,o,M);t.renderBufferDirect(T,null,B,W,P,null)}}}}else console.warn("THREE.WebGLShadowMap:",x,"has no shadow.")}var X=t.getClearColor(),q=t.getClearAlpha();t.setClearColor(X,q),U.needsUpdate=!1}}}function at(t,e){this.origin=void 0!==t?t:new u,this.direction=void 0!==e?e:new u}function ot(t,e,r,n){this._x=t||0,this._y=e||0,this._z=r||0,this._order=n||ot.DefaultOrder}function st(){this.mask=1}function ut(){function t(){i.setFromEuler(n,!1)}function e(){n.setFromQuaternion(i,void 0,!1)}Object.defineProperty(this,"id",{value:gs++}),this.uuid=ns.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ut.DefaultUp.clone();var r=new u,n=new ot,i=new s,a=new u(1,1,1);n.onChange(t),i.onChange(e),Object.defineProperties(this,{position:{enumerable:!0,value:r},rotation:{enumerable:!0,value:n},quaternion:{enumerable:!0,value:i},scale:{enumerable:!0,value:a},modelViewMatrix:{value:new l},normalMatrix:{value:new et}}),this.matrix=new l,this.matrixWorld=new l,this.matrixAutoUpdate=ut.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new st,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={},this.onBeforeRender=function(){},this.onAfterRender=function(){}}function lt(t,e){this.start=void 0!==t?t:new u,this.end=void 0!==e?e:new u}function ct(t,e,r){this.a=void 0!==t?t:new u,this.b=void 0!==e?e:new u,this.c=void 0!==r?r:new u}function ht(t,e,r,n,i,a){this.a=t,this.b=e,this.c=r,this.normal=n&&n.isVector3?n:new u,this.vertexNormals=Array.isArray(n)?n:[],this.color=i&&i.isColor?i:new H,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==a?a:0}function ft(t){Z.call(this),this.type="MeshBasicMaterial",this.color=new H(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ga,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function dt(t,e,r){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=ns.generateUUID(),this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===r,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function pt(t,e){dt.call(this,new Int8Array(t),e)}function mt(t,e){dt.call(this,new Uint8Array(t),e)}function gt(t,e){dt.call(this,new Uint8ClampedArray(t),e)}function vt(t,e){dt.call(this,new Int16Array(t),e)}function yt(t,e){dt.call(this,new Uint16Array(t),e)}function Mt(t,e){dt.call(this,new Int32Array(t),e)}function wt(t,e){dt.call(this,new Uint32Array(t),e)}function xt(t,e){dt.call(this,new Float32Array(t),e)}function bt(t,e){dt.call(this,new Float64Array(t),e)}function Tt(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Et(){return vs++}function St(){Object.defineProperty(this,"id",{value:Et()}),this.uuid=ns.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function _t(){Object.defineProperty(this,"id",{value:Et()}),this.uuid=ns.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function At(t,e){ut.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new _t,this.material=void 0!==e?e:new ft({color:16777215*Math.random()}),this.drawMode=Ho,this.updateMorphTargets()}function Dt(t,e,r,n,i,a){function o(t,e,r,n,i,a,o,l,c,w,x){for(var b=a/c,T=o/w,E=a/2,S=o/2,_=l/2,A=c+1,D=w+1,N=0,I=0,L=new u,C=0;C<D;C++)for(var O=C*T-S,R=0;R<A;R++){var z=R*b-E;L[t]=z*n,L[e]=O*i,L[r]=_,f[m]=L.x,f[m+1]=L.y,f[m+2]=L.z,L[t]=0,L[e]=0,L[r]=l>0?1:-1,d[m]=L.x,d[m+1]=L.y,d[m+2]=L.z,p[g]=R/c,p[g+1]=1-C/w,m+=3,g+=2,N+=1}for(C=0;C<w;C++)for(R=0;R<c;R++){var j=y+R+A*C,P=y+R+A*(C+1),U=y+(R+1)+A*(C+1),B=y+(R+1)+A*C;h[v]=j,h[v+1]=P,h[v+2]=B,h[v+3]=P,h[v+4]=U,h[v+5]=B,v+=6,I+=6}s.addGroup(M,I,x),M+=I,y+=N}_t.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:r,widthSegments:n,heightSegments:i,depthSegments:a};var s=this;n=Math.floor(n)||1,i=Math.floor(i)||1,a=Math.floor(a)||1;var l=function(t,e,r){var n=0;return n+=(t+1)*(e+1)*2,n+=(t+1)*(r+1)*2,n+=(r+1)*(e+1)*2}(n,i,a),c=function(t,e,r){var n=0;return n+=t*e*2,n+=t*r*2,6*(n+=r*e*2)}(n,i,a),h=new(c>65535?Uint32Array:Uint16Array)(c),f=new Float32Array(3*l),d=new Float32Array(3*l),p=new Float32Array(2*l),m=0,g=0,v=0,y=0,M=0;o("z","y","x",-1,-1,r,e,t,a,i,0),o("z","y","x",1,-1,r,e,-t,a,i,1),o("x","z","y",1,1,t,r,e,n,a,2),o("x","z","y",1,-1,t,r,-e,n,a,3),o("x","y","z",1,-1,t,e,r,n,i,4),o("x","y","z",-1,-1,t,e,-r,n,i,5),this.setIndex(new dt(h,1)),this.addAttribute("position",new dt(f,3)),this.addAttribute("normal",new dt(d,3)),this.addAttribute("uv",new dt(p,2))}function Nt(t,e,r,n){_t.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:r,heightSegments:n};for(var i=t/2,a=e/2,o=Math.floor(r)||1,s=Math.floor(n)||1,u=o+1,l=s+1,c=t/o,h=e/s,f=new Float32Array(u*l*3),d=new Float32Array(u*l*3),p=new Float32Array(u*l*2),m=0,g=0,v=0;v<l;v++)for(var y=v*h-a,M=0;M<u;M++){var w=M*c-i;f[m]=w,f[m+1]=-y,d[m+2]=1,p[g]=M/o,p[g+1]=1-v/s,m+=3,g+=2}m=0;for(var x=new(f.length/3>65535?Uint32Array:Uint16Array)(o*s*6),v=0;v<s;v++)for(var M=0;M<o;M++){var b=M+u*v,T=M+u*(v+1),E=M+1+u*(v+1),S=M+1+u*v;x[m]=b,x[m+1]=T,x[m+2]=S,x[m+3]=T,x[m+4]=E,x[m+5]=S,m+=6}this.setIndex(new dt(x,1)),this.addAttribute("position",new dt(f,3)),this.addAttribute("normal",new dt(d,3)),this.addAttribute("uv",new dt(p,2))}function It(t,e,n,i){this.name=t||"unnamed",this.texture=null,this.uvChannel=e||0,this.uvTransform=n||!1,this.uvOffset=new r(0,0),this.uvRepeat=new r(1,1),this.texelTransform=n||!1,this.texelScale=1,this.texelOffset=0,this.texelInvert=!1}function Lt(){ut.call(this),this.type="Camera",this.matrixWorldInverse=new l,this.projectionMatrix=new l}function Ct(t,e,r,n){Lt.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==r?r:.1,this.far=void 0!==n?n:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Ot(t,e,r,n,i,a){Lt.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=r,this.bottom=n,this.near=void 0!==i?i:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function Rt(t,e,r){function n(t){s=t}function i(r){r.array instanceof Uint32Array&&e.get("OES_element_index_uint")?(u=t.UNSIGNED_INT,l=4):r.array instanceof Uint16Array?(u=t.UNSIGNED_SHORT,l=2):(u=t.UNSIGNED_BYTE,l=1)}function a(e,n){t.drawElements(s,n,u,e*l),r.calls++,r.vertices+=n,s===t.TRIANGLES&&(r.faces+=n/3)}function o(n,i,a){var o=e.get("ANGLE_instanced_arrays");if(null===o)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");o.drawElementsInstancedANGLE(s,a,u,i*l,n.maxInstancedCount),r.calls++,r.vertices+=a*n.maxInstancedCount,s===t.TRIANGLES&&(r.faces+=n.maxInstancedCount*a/3)}var s,u,l;return{setMode:n,setIndex:i,render:a,renderInstances:o}}function zt(t,e,r){function n(t){o=t}function i(e,n){t.drawArrays(o,e,n),r.calls++,r.vertices+=n,o===t.TRIANGLES&&(r.faces+=n/3)}function a(n){var i=e.get("ANGLE_instanced_arrays");if(null===i)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");var a=n.attributes.position,s=0;a.isInterleavedBufferAttribute?(s=a.data.count,i.drawArraysInstancedANGLE(o,0,s,n.maxInstancedCount)):(s=a.count,i.drawArraysInstancedANGLE(o,0,s,n.maxInstancedCount)),r.calls++,r.vertices+=s*n.maxInstancedCount,o===t.TRIANGLES&&(r.faces+=n.maxInstancedCount*s/3)}var o;return{setMode:n,render:i,renderInstances:a}}function jt(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new u,color:new H,shadow:!1,shadowBias:0,shadowRadius:1,shadowSpreadAngle:0,shadowMapSize:new r,shadowCameraParams:new u};break;case"SpotLight":n={position:new u,direction:new u,color:new H,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new r,shadowCameraParams:new u};break;case"PointLight":n={position:new u,color:new H,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new r};break;case"HemisphereLight":n={direction:new u,skyColor:new H,groundColor:new H};break;case"RectAreaLight":n={color:new H,position:new u,halfWidth:new u,halfHeight:new u}}return t[e.id]=n,n}}}function Pt(t){for(var e=t.split("\n"),r=0;r<e.length;r++)e[r]=r+1+": "+e[r];return e.join("\n")}function Ut(t,e,r){var n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),!1===t.getShaderParameter(n,t.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile.",t.getShaderInfoLog(n),Pt(r)),""!==t.getShaderInfoLog(n)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",e===t.VERTEX_SHADER?"vertex":"fragment",t.getShaderInfoLog(n),Pt(r)),n}function Bt(t){switch(t){case Xo:return["Linear","( value )"];case qo:return["sRGB","( value )"];case Ko:return["RGBE","( value )"];case Jo:return["RGBM","( value, 7.0 )"];case $o:return["RGBM","( value, 16.0 )"];case ts:return["RGBD","( value, 256.0 )"];case Zo:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+t)}}function Vt(t,e){var r=Bt(e);return"vec4 "+t+"( vec4 value ) { return "+r[0]+"ToLinear"+r[1]+"; }"}function Ft(t,e){var r=Bt(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function kt(t,e){if(!e||!e.texelTransform)return"vec4 "+t+"TexelTransform( vec4 value ) { return value; }\n";e.getFlattenedTexelTransform();return hs.slot_texel_transform_template.replace(/\$SLOT_NAME\$/g,t)}function Gt(t,e,r){var n=r?"uv":"vUv";if(e&&e.uvChannel>0&&(n+=e.uvChannel+1),!e||!e.uvTransform)return"vec2 "+t+"UV() { return "+n+"; }\n";var i=(e.getFlattenedTexelTransform(),hs.slot_uv_transform_template),a=i.replace(/\$SLOT_NAME\$/g,t);return a=a.replace(/\$UV_VAR_NAME\$/g,n)}function Yt(t,e){var r;switch(e){case Wa:r="Linear";break;case Xa:r="Reinhard";break;case qa:r="Uncharted2";break;case Za:r="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function Ht(t,e,r){return t=t||{},[t.derivatives||e.envMapCubeUV||e.bumpMap||e.normalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&r.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&r.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&r.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Xt).join("\n")}function Qt(t){var e=[];for(var r in t){var n=t[r];!1!==n&&e.push("#define "+r+" "+n)}return e.join("\n")}function Wt(t,e,r){for(var n={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),a=0;a<i;a++){var o=t.getActiveAttrib(e,a),s=o.name;n[s]=t.getAttribLocation(e,s)}return n}function Xt(t){return""!==t}function qt(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights)}function Zt(t){function e(t,e){var r=hs[e];if(void 0===r)throw new Error("Can not resolve #include <"+e+">");return Zt(r)}var r=/#include +<([\w\d.]+)>/g;return t.replace(r,e)}function Kt(t){function e(t,e,r,n){for(var i="",a=parseInt(e);a<parseInt(r);a++)i+=n.replace(/\[ i \]/g,"[ "+a+" ]");return i}var r=/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return t.replace(r,e)}function Jt(t,e,r,n){var i=t.context,a=r.extensions,o=r.defines,s=r.__webglShader.vertexShader,u=r.__webglShader.fragmentShader,l="SHADOWMAP_TYPE_BASIC";n.shadowMapType===ra?l="SHADOWMAP_TYPE_PCF":n.shadowMapType===ia?l="SHADOWMAP_TYPE_PCSS":n.shadowMapType===na&&(l="SHADOWMAP_TYPE_PCF_SOFT");var c="ENVMAP_TYPE_CUBE",h="ENVMAP_MODE_REFLECTION",f="ENVMAP_BLENDING_MULTIPLY";if(n.envMap){switch(r.envMap.mapping){case Ka:case Ja:c="ENVMAP_TYPE_CUBE";break;case ro:case no:c="ENVMAP_TYPE_CUBE_UV";break;case $a:case to:c="ENVMAP_TYPE_EQUIREC";break;case eo:c="ENVMAP_TYPE_SPHERE"}switch(r.envMap.mapping){case Ja:case to:h="ENVMAP_MODE_REFRACTION"}switch(r.combine){case Ga:f="ENVMAP_BLENDING_MULTIPLY";break;case Ya:f="ENVMAP_BLENDING_MIX";break;case Ha:f="ENVMAP_BLENDING_ADD"}}var d,p,m=t.gammaFactor>0?t.gammaFactor:1,g=Ht(a,n,t.extensions),v=Qt(o),y=i.createProgram();if(r.isRawShaderMaterial)d=[v,"\n"].filter(Xt).join("\n"),p=[g,v,"\n"].filter(Xt).join("\n");else{d=["precision "+n.precision+" float;","precision "+n.precision+" int;","#define SHADER_NAME "+r.__webglShader.name,v,n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+m,"#define MAX_BONES "+n.maxBones,n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexColors?"#define USE_COLOR":"",n.falloffMap&&n.falloff?"#define USE_FALLOFFMAP":"",n.falloffAlphaMap&&n.falloff?"#define USE_FALLOFFALPHAMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+n.numClippingPlanes,n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&t.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Xt).join("\n"),p=[g,"precision "+n.precision+" float;","precision "+n.precision+" int;","#define SHADER_NAME "+r.__webglShader.name,v,n.alphaTest?"#define ALPHATEST "+n.alphaTest:"",n.falloff?"#define FALLOFF":"",n.falloffMap&&n.falloff?"#define USE_FALLOFFMAP":"",n.falloffAlphaMap&&n.falloff?"#define USE_FALLOFFALPHAMAP":"","#define GAMMA_FACTOR "+m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+h:"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexColors?"#define USE_COLOR":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+n.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(n.numClippingPlanes-n.numClipIntersection),n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&t.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",n.outputEncoding||n.mapEncoding||n.envMapEncoding||n.falloffMapEncoding||n.emissiveMapEncoding?hs.encodings_pars_fragment:"",n.mapEncoding?Vt("mapTexelToLinear",n.mapEncoding):"",n.envMapEncoding?Vt("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMapEncoding?Vt("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.falloffMapEncoding?Vt("falloffMapTexelToLinear",n.falloffMapEncoding):"",n.outputEncoding?Ft("linearToOutputTexel",n.outputEncoding):"",n.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"",n.envMap&&t.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",n.toneMapping!==Qa?"#define TONE_MAPPING":"",n.toneMapping!==Qa?hs.tonemapping_pars_fragment:"",n.toneMapping!==Qa?Yt("toneMapping",n.toneMapping):"","\n"].filter(Xt).join("\n");for(var M=It.SupportedMapNames,w="",x="",b={},T=0;T<M.length;T++){var E=M[T],S=r[E+"Slot"];(r[E]||S&&S.texture)&&(S&&!b[S.uvChannel]&&(b[S.uvChannel]=!0),x+=kt(E,S),w+="uniform sampler2D "+E+";\n",w+=Gt(E,S,!1))}if(Object.keys(b).length>0){var _="";_+="#define TEXTURE_SLOTS\n";for(var A in b){A=parseInt(A);var D="vUv";A>0&&(D+=""+(A+1)),_+="varying vec2 "+D+";\n"}p+=_+w}p+=x}s=Zt(s,n),s=qt(s,n),u=Zt(u,n),u=qt(u,n),r.isShaderMaterial||(s=Kt(s),u=Kt(u));var N=d+s,I=p+u,L=Ut(i,i.VERTEX_SHADER,N),C=Ut(i,i.FRAGMENT_SHADER,I);i.attachShader(y,L),i.attachShader(y,C),void 0!==r.index0AttributeName?i.bindAttribLocation(y,0,r.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y);var O=i.getProgramInfoLog(y),R=i.getShaderInfoLog(L),z=i.getShaderInfoLog(C),j=!0,P=!0;if(!1===i.getProgramParameter(y,i.LINK_STATUS)){j=!1;i.getExtension("WEBGL_debug_shaders")&&(console.log("**VERTEX**",N,"----------------------------------------------------------",i.getExtension("WEBGL_debug_shaders").getTranslatedShaderSource(L)),console.log("**FRAGMENT**",I,"----------------------------------------------------------",i.getExtension("WEBGL_debug_shaders").getTranslatedShaderSource(C))),console.error("THREE.WebGLProgram: shader error: ",i.getError(),"gl.VALIDATE_STATUS",i.getProgramParameter(y,i.VALIDATE_STATUS),"gl.getProgramInfoLog",O,R,z)}else""!==O?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",O):""!==R&&""!==z||(P=!1);P&&(this.diagnostics={runnable:j,material:r,programLog:O,vertexShader:{log:R,prefix:d},fragmentShader:{log:z,prefix:p}}),i.deleteShader(L),i.deleteShader(C);var U;this.getUniforms=function(){return void 0===U&&(U=new Y(i,y,t)),U};var B;return this.getAttributes=function(){return void 0===B&&(B=Wt(i,y)),B},this.destroy=function(){i.deleteProgram(y),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=ws++,this.code=e,this.usedTimes=1,this.program=y,this.vertexShader=L,this.fragmentShader=C,this}function $t(t,e){function r(t){if(e.floatVertexTextures&&t&&t.skeleton&&t.skeleton.useVertexTexture)return 1024;var r=e.maxVertexUniforms,n=Math.floor((r-20)/4),i=n;return void 0!==t&&t&&t.isSkinnedMesh&&(i=Math.min(t.skeleton.bones.length,i))<t.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+t.skeleton.bones.length+", this GPU supports just "+i+" (try OpenGL instead of ANGLE)"),i}function n(t,e){var r;return t?t.isTexture?r=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),r=t.texture.encoding):r=Xo,r===Xo&&e&&(r=Zo),r}for(var i=[],a={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshCubeMaterial:"cubeEnv",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},o=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","falloff","falloffMap","falloffAlphaMap"],s=It.SupportedMapNames,u=0;u<s.length;u++){var l=s[u];o.push(l),o.push(l+"UVChannel"),o.push(l+"UVTransform"),o.push(l+"TexelTransform")}this.getParameters=function(i,o,s,u,l,c){var h=a[i.type],f=r(c),d=t.getPrecision();null!==i.precision&&(d=e.getMaxPrecision(i.precision))!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",d,"instead.");for(var p=t.getCurrentRenderTarget(),m={shaderID:h,precision:d,supportsVertexTextures:e.vertexTextures,outputEncoding:n(p?p.texture:null,t.gammaOutput),mapEncoding:n(i.map,t.gammaInput),envMap:!!i.envMap,envMapMode:i.envMap&&i.envMap.mapping,envMapEncoding:n(i.envMap,t.gammaInput),envMapCubeUV:!!i.envMap&&(i.envMap.mapping===ro||i.envMap.mapping===no),emissiveMapEncoding:n(i.emissiveMap,t.gammaInput),falloff:i.falloff,falloffMapEncoding:n(i.falloffMap,t.gammaInput),gradientMap:!!i.gradientMap,combine:i.combine,vertexColors:i.vertexColors,fog:!!s,useFog:i.fog,fogExp:s&&s.isFogExp2,flatShading:i.shading===ua,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:e.logarithmicDepthBuffer,skinning:i.skinning,maxBones:f,useVertexTexture:e.floatVertexTextures&&c&&c.skeleton&&c.skeleton.useVertexTexture,morphTargets:i.morphTargets,morphNormals:i.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numClippingPlanes:u,numClipIntersection:l,shadowMapEnabled:t.shadowMap.enabled&&c.receiveShadow&&o.shadows.length>0,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,alphaTest:i.alphaTest,doubleSided:i.side===sa,flipSided:i.side===oa,depthPacking:void 0!==i.depthPacking&&i.depthPacking},g=It.SupportedMapNames,v=0;v<g.length;v++){var y=g[v],M=It.SupportedMapSlotNames[v];m[y]=!!i[y];var w=i[M];m[y+"UVChannel"]=void 0!==w?w.uvChannel:0,m[y+"UVTransform"]=void 0!==w&&w.uvTransform,m[y+"TexelTransform"]=void 0!==w&&w.texelTransform}return m},this.getProgramCode=function(t,e){var r=[];if(e.shaderID?r.push(e.shaderID):(r.push(t.fragmentShader),r.push(t.vertexShader)),void 0!==t.defines)for(var n in t.defines)r.push(n),r.push(t.defines[n]);for(var i=0;i<o.length;i++)r.push(e[o[i]]);return r.join()},this.acquireProgram=function(e,r,n){for(var a,o=0,s=i.length;o<s;o++){var u=i[o];if(u.code===n){a=u,++a.usedTimes;break}}return void 0===a&&(a=new Jt(t,n,e,r),i.push(a)),a},this.releaseProgram=function(t){if(0==--t.usedTimes){var e=i.indexOf(t);i[e]=i[i.length-1],i.pop(),t.destroy()}},this.programs=i}function te(t,e,r){function n(t){var i=t.target,s=u[i.id];null!==s.index&&a(s.index),o(s.attributes),i.removeEventListener("dispose",n),delete u[i.id];var l=e.get(i);l.wireframe&&a(l.wireframe),e.delete(i);var c=e.get(s);c.wireframe&&a(c.wireframe),e.delete(s),r.memory.geometries--}function i(t){return t.isInterleavedBufferAttribute?e.get(t.data).__webglBuffer:e.get(t).__webglBuffer}function a(e){var r=i(e);void 0!==r&&(t.deleteBuffer(r),s(e))}function o(t){for(var e in t)a(t[e])}function s(t){t.isInterleavedBufferAttribute?e.delete(t.data):e.delete(t)}var u={};return{get:function(t){var e=t.geometry;if(void 0!==u[e.id])return u[e.id];e.addEventListener("dispose",n);var i;return e.isBufferGeometry?i=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new _t).setFromObject(t)),i=e._bufferGeometry),u[e.id]=i,r.memory.geometries++,i}}}function ee(t,e,r){function n(e){var r=c.get(e);e.geometry.isGeometry&&r.updateFromObject(e);var n=r.index,a=r.attributes;null!==n&&i(n,t.ELEMENT_ARRAY_BUFFER);for(var o in a)i(a[o],t.ARRAY_BUFFER);var s=r.morphAttributes;for(var o in s)for(var u=s[o],l=0,h=u.length;l<h;l++)i(u[l],t.ARRAY_BUFFER);return r}function i(t,r){var n=t.isInterleavedBufferAttribute?t.data:t,i=e.get(n);void 0===i.__webglBuffer?a(i,n,r):i.version!==n.version&&o(i,n,r)}function a(e,r,n){e.__webglBuffer=t.createBuffer(),t.bindBuffer(n,e.__webglBuffer);var i=r.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW;t.bufferData(n,r.array,i);var a=t.FLOAT,o=r.array;o instanceof Float32Array?a=t.FLOAT:o instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array"):o instanceof Uint16Array?a=t.UNSIGNED_SHORT:o instanceof Int16Array?a=t.SHORT:o instanceof Uint32Array?a=t.UNSIGNED_INT:o instanceof Int32Array?a=t.INT:o instanceof Int8Array?a=t.BYTE:o instanceof Uint8Array&&(a=t.UNSIGNED_BYTE),e.bytesPerElement=o.BYTES_PER_ELEMENT,e.type=a,e.version=r.version,r.onUploadCallback()}function o(e,r,n){t.bindBuffer(n,e.__webglBuffer),!1===r.dynamic?t.bufferData(n,r.array,t.STATIC_DRAW):-1===r.updateRange.count?t.bufferSubData(n,0,r.array):0===r.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(n,r.updateRange.offset*r.array.BYTES_PER_ELEMENT,r.array.subarray(r.updateRange.offset,r.updateRange.offset+r.updateRange.count)),r.updateRange.count=0),e.version=r.version}function s(t){return t.isInterleavedBufferAttribute?e.get(t.data).__webglBuffer:e.get(t).__webglBuffer}function u(t){return t.isInterleavedBufferAttribute?e.get(t.data):e.get(t)}function l(r){var n=e.get(r);if(void 0!==n.wireframe)return n.wireframe;var a=[],o=r.index,s=r.attributes,u=s.position;if(null!==o)for(var l=o.array,c=0,h=l.length;c<h;c+=3){var f=l[c+0],d=l[c+1],p=l[c+2];a.push(f,d,d,p,p,f)}else for(var l=s.position.array,c=0,h=l.length/3-1;c<h;c+=3){var f=c+0,d=c+1,p=c+2;a.push(f,d,d,p,p,f)}var m=u.count>65535?Uint32Array:Uint16Array,g=new dt(new m(a),1);return i(g,t.ELEMENT_ARRAY_BUFFER),n.wireframe=g,g}var c=new te(t,e,r);return{getAttributeBuffer:s,getAttributeProperties:u,getWireframeAttribute:l,update:n}}function re(t,e,r,n,i,a,o){function s(t,e){if(t.width>e||t.height>e){var r=e/Math.max(t.width,t.height),n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");n.width=Math.floor(t.width*r),n.height=Math.floor(t.height*r);return n.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,n.width,n.height),console.warn("THREE.WebGLRenderer: image is too big ("+t.width+"x"+t.height+"). Resized to "+n.width+"x"+n.height,t),n}return t}function u(t){return ns.isPowerOfTwo(t.width)&&ns.isPowerOfTwo(t.height)}function l(t){if(t instanceof HTMLImageElement||t instanceof HTMLCanvasElement){var e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");e.width=ns.nearestPowerOfTwo(t.width),e.height=ns.nearestPowerOfTwo(t.height);return e.getContext("2d").drawImage(t,0,0,e.width,e.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+t.width+"x"+t.height+"). Resized to "+e.width+"x"+e.height,t),e}return t}function c(t){return t.wrapS!==ao||t.wrapT!==ao||t.minFilter!==so&&t.minFilter!==co}function h(e){return e===so||e===uo||e===lo?t.NEAREST:t.LINEAR}function f(t){var e=t.target;e.removeEventListener("dispose",f),p(e),A.textures--}function d(t){var e=t.target;e.removeEventListener("dispose",d),m(e),A.textures--}function p(e){var r=n.get(e);if(e.image&&r.__image__webglTextureCube)t.deleteTexture(r.__image__webglTextureCube);else{if(void 0===r.__webglInit)return;t.deleteTexture(r.__webglTexture)}n.delete(e)}function m(e){var r=n.get(e),i=n.get(e.texture);if(e){if(void 0!==i.__webglTexture&&t.deleteTexture(i.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLRenderTargetCube)for(var a=0;a<6;a++)t.deleteFramebuffer(r.__webglFramebuffer[a]),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer[a]);else t.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer);n.delete(e.texture),n.delete(e)}}function g(e,i){var a=n.get(e);if(e.version>0&&a.__version!==e.version){var o=e.image;if(void 0===o)N||(console.trace("THREE.WebGLRenderer: Texture marked for update but image is undefined",e),N=!0);else{if(!1!==o.complete)return void w(a,e,i);I||(console.trace("THREE.WebGLRenderer: Texture marked for update but image is incomplete",e),I=!0)}}r.activeTexture(t.TEXTURE0+i),r.bindTexture(t.TEXTURE_2D,a.__webglTexture)}function v(e,o){var l=n.get(e);if(6===e.image.length)if(e.version>0&&l.__version!==e.version){l.__image__webglTextureCube||(e.addEventListener("dispose",f),l.__image__webglTextureCube=t.createTexture(),A.textures++),r.activeTexture(t.TEXTURE0+o),r.bindTexture(t.TEXTURE_CUBE_MAP,l.__image__webglTextureCube),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e.flipY);for(var c=e&&e.isCompressedTexture,h=e.image[0]&&e.image[0].isDataTexture,d=[],p=0;p<6;p++)d[p]=c||h?h?e.image[p].image:e.image[p]:s(e.image[p],i.maxCubemapSize);var m=d[0],g=u(m),v=a(e.format),y=a(e.type);M(t.TEXTURE_CUBE_MAP,e,g);for(var p=0;p<6;p++)if(c)for(var w,x=d[p].mipmaps,b=0,T=x.length;b<T;b++)w=x[b],e.format!==Do&&e.format!==Ao?r.getCompressedTextureFormats().indexOf(v)>-1?r.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+p,b,v,w.width,w.height,0,w.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):r.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+p,b,v,w.width,w.height,0,v,y,w.data);else h?r.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+p,0,v,d[p].width,d[p].height,0,v,y,d[p].data):r.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+p,0,v,v,y,d[p]);e.generateMipmaps&&g&&t.generateMipmap(t.TEXTURE_CUBE_MAP),l.__version=e.version,e.onUpdate&&e.onUpdate(e)}else r.activeTexture(t.TEXTURE0+o),r.bindTexture(t.TEXTURE_CUBE_MAP,l.__image__webglTextureCube)}function y(e,i){r.activeTexture(t.TEXTURE0+i),r.bindTexture(t.TEXTURE_CUBE_MAP,n.get(e).__webglTexture)}function M(r,o,s){var u;if(s?(t.texParameteri(r,t.TEXTURE_WRAP_S,a(o.wrapS)),t.texParameteri(r,t.TEXTURE_WRAP_T,a(o.wrapT)),t.texParameteri(r,t.TEXTURE_MAG_FILTER,a(o.magFilter)),t.texParameteri(r,t.TEXTURE_MIN_FILTER,a(o.minFilter))):(t.texParameteri(r,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(r,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),o.wrapS===ao&&o.wrapT===ao||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",o),t.texParameteri(r,t.TEXTURE_MAG_FILTER,h(o.magFilter)),t.texParameteri(r,t.TEXTURE_MIN_FILTER,h(o.minFilter)),o.minFilter!==so&&o.minFilter!==co&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",o)),u=e.get("EXT_texture_filter_anisotropic")){if(o.type===wo&&null===e.get("OES_texture_float_linear"))return;if(o.type===xo&&null===e.get("OES_texture_half_float_linear"))return;(o.anisotropy>1||n.get(o).__currentAnisotropy)&&(t.texParameterf(r,u.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),n.get(o).__currentAnisotropy=o.anisotropy)}}function w(e,n,o){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",f),e.__webglTexture=t.createTexture(),A.textures++),r.activeTexture(t.TEXTURE0+o),r.bindTexture(t.TEXTURE_2D,e.__webglTexture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,n.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,n.unpackAlignment);var h=s(n.image,i.maxTextureSize);c(n)&&!1===u(h)&&(h=l(h));var d=u(h),p=a(n.format),m=a(n.type);M(t.TEXTURE_2D,n,d);var g,v=n.mipmaps;if(n.isDepthTexture){var y=t.DEPTH_COMPONENT;if(n.type===wo){if(!D)throw new Error("Float Depth Texture only supported in WebGL2.0");y=t.DEPTH_COMPONENT32F}else D&&(y=t.DEPTH_COMPONENT16);n.format===Co&&y===t.DEPTH_COMPONENT&&n.type!==vo&&n.type!==Mo&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),n.type=vo,m=a(n.type)),n.format===Oo&&(y=t.DEPTH_STENCIL,n.type!==So&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),n.type=So,m=a(n.type))),r.texImage2D(t.TEXTURE_2D,0,y,h.width,h.height,0,p,m,null)}else if(n.isDataTexture)if(v.length>0&&d){for(var w=0,x=v.length;w<x;w++)g=v[w],r.texImage2D(t.TEXTURE_2D,w,p,g.width,g.height,0,p,m,g.data);n.generateMipmaps=!1}else r.texImage2D(t.TEXTURE_2D,0,p,h.width,h.height,0,p,m,h.data);else if(n.isCompressedTexture)for(var w=0,x=v.length;w<x;w++)g=v[w],n.format!==Do&&n.format!==Ao?r.getCompressedTextureFormats().indexOf(p)>-1?r.compressedTexImage2D(t.TEXTURE_2D,w,p,g.width,g.height,0,g.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):r.texImage2D(t.TEXTURE_2D,w,p,g.width,g.height,0,p,m,g.data);else if(v.length>0&&d){for(var w=0,x=v.length;w<x;w++)g=v[w],r.texImage2D(t.TEXTURE_2D,w,p,p,m,g);n.generateMipmaps=!1}else r.texImage2D(t.TEXTURE_2D,0,p,p,m,h);n.generateMipmaps&&d&&t.generateMipmap(t.TEXTURE_2D),e.__version=n.version,n.onUpdate&&n.onUpdate(n)}function x(e,i,o,s){var u=a(i.texture.format),l=a(i.texture.type);r.texImage2D(s,0,u,i.width,i.height,0,u,l,null),t.bindFramebuffer(t.FRAMEBUFFER,e),t.framebufferTexture2D(t.FRAMEBUFFER,o,s,n.get(i.texture).__webglTexture,0),t.bindFramebuffer(t.FRAMEBUFFER,null)}function b(e,r){t.bindRenderbuffer(t.RENDERBUFFER,e),r.depthBuffer&&!r.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,r.width,r.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e)):r.depthBuffer&&r.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,r.width,r.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)):t.renderbufferStorage(t.RENDERBUFFER,t.RGBA4,r.width,r.height),t.bindRenderbuffer(t.RENDERBUFFER,null)}function T(e,r){if(r&&r.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported!");if(t.bindFramebuffer(t.FRAMEBUFFER,e),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");n.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),g(r.depthTexture,0);var i=n.get(r.depthTexture).__webglTexture;if(r.depthTexture.format===Co)t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,i,0);else{if(r.depthTexture.format!==Oo)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,i,0)}}function E(e){var r=n.get(e),i=!0===e.isWebGLRenderTargetCube;if(e.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");T(r.__webglFramebuffer,e)}else if(i){r.__webglDepthbuffer=[];for(var a=0;a<6;a++)t.bindFramebuffer(t.FRAMEBUFFER,r.__webglFramebuffer[a]),r.__webglDepthbuffer[a]=t.createRenderbuffer(),b(r.__webglDepthbuffer[a],e)}else t.bindFramebuffer(t.FRAMEBUFFER,r.__webglFramebuffer),r.__webglDepthbuffer=t.createRenderbuffer(),b(r.__webglDepthbuffer,e);t.bindFramebuffer(t.FRAMEBUFFER,null)}function S(e){var i=n.get(e),a=n.get(e.texture);e.addEventListener("dispose",d),a.__webglTexture=t.createTexture(),A.textures++;var o=!0===e.isWebGLRenderTargetCube,s=u(e);if(o){i.__webglFramebuffer=[];for(var l=0;l<6;l++)i.__webglFramebuffer[l]=t.createFramebuffer()}else i.__webglFramebuffer=t.createFramebuffer();if(o){r.bindTexture(t.TEXTURE_CUBE_MAP,a.__webglTexture),M(t.TEXTURE_CUBE_MAP,e.texture,s);for(var l=0;l<6;l++)x(i.__webglFramebuffer[l],e,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+l);e.texture.generateMipmaps&&s&&t.generateMipmap(t.TEXTURE_CUBE_MAP),r.bindTexture(t.TEXTURE_CUBE_MAP,null)}else r.bindTexture(t.TEXTURE_2D,a.__webglTexture),M(t.TEXTURE_2D,e.texture,s),x(i.__webglFramebuffer,e,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),e.texture.generateMipmaps&&s&&t.generateMipmap(t.TEXTURE_2D),r.bindTexture(t.TEXTURE_2D,null);e.depthBuffer&&E(e)}function _(e){var i=e.texture;if(i.generateMipmaps&&u(e)&&i.minFilter!==so&&i.minFilter!==co){var a=e&&e.isWebGLRenderTargetCube?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,o=n.get(i).__webglTexture;r.bindTexture(a,o),t.generateMipmap(a),r.bindTexture(a,null)}}var A=o.memory,D="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext,N=!1,I=!1;this.setTexture2D=g,this.setTextureCube=v,this.setTextureCubeDynamic=y,this.setupRenderTarget=S,this.updateRenderTargetMipmap=_}function ne(){var t={};return{get:function(e){var r=e.uuid,n=t[r];return void 0===n&&(n={},t[r]=n),n},delete:function(e){delete t[e.uuid]},clear:function(){t={}}}}function ie(t,e,r){function n(){var e=!1,r=new i,n=null,a=new i;return{setMask:function(r){n===r||e||(t.colorMask(r,r,r,r),n=r)},setLocked:function(t){e=t},setClear:function(e,n,i,o,s){!0===s&&(e*=o,n*=o,i*=o),r.set(e,n,i,o),!1===a.equals(r)&&(t.clearColor(e,n,i,o),a.copy(r))},reset:function(){e=!1,n=null,a.set(0,0,0,1)}}}function a(){var e=!1,r=null,n=null,i=null;return{setTest:function(e){e?d(t.DEPTH_TEST):p(t.DEPTH_TEST)},setMask:function(n){r===n||e||(t.depthMask(n),r=n)},setFunc:function(e){if(n!==e){if(e)switch(e){case za:t.depthFunc(t.NEVER);break;case ja:t.depthFunc(t.ALWAYS);break;case Pa:t.depthFunc(t.LESS);break;case Ua:t.depthFunc(t.LEQUAL);break;case Ba:t.depthFunc(t.EQUAL);break;case Va:t.depthFunc(t.GEQUAL);break;case Fa:t.depthFunc(t.GREATER);break;case ka:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}else t.depthFunc(t.LEQUAL);n=e}},setLocked:function(t){e=t},setClear:function(e){i!==e&&(t.clearDepth(e),i=e)},reset:function(){e=!1,r=null,n=null,i=null}}}function o(){var e=!1,r=null,n=null,i=null,a=null,o=null,s=null,u=null,l=null;return{setTest:function(e){e?d(t.STENCIL_TEST):p(t.STENCIL_TEST)},setMask:function(n){r===n||e||(t.stencilMask(n),r=n)},setFunc:function(e,r,o){n===e&&i===r&&a===o||(t.stencilFunc(e,r,o),n=e,i=r,a=o)},setOp:function(e,r,n){o===e&&s===r&&u===n||(t.stencilOp(e,r,n),o=e,s=r,u=n)},setLocked:function(t){e=t},setClear:function(e){l!==e&&(t.clearStencil(e),l=e)},reset:function(){e=!1,r=null,n=null,i=null,a=null,o=null,s=null,u=null,l=null}}}function s(e,r,n){var i=new Uint8Array(4),a=t.createTexture();t.bindTexture(e,a),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(var o=0;o<n;o++)t.texImage2D(r+o,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,i);return a}function u(){U.setClear(0,0,0,1),B.setClear(1),V.setClear(0),d(t.DEPTH_TEST),w(Ua),S(!1),_($i),d(t.CULL_FACE),d(t.BLEND),g(pa)}function l(){for(var t=0,e=k.length;t<e;t++)k[t]=0}function c(r){if(k[r]=1,0===G[r]&&(t.enableVertexAttribArray(r),G[r]=1),0!==Y[r]){e.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(r,0),Y[r]=0}}function h(e,r,n){k[e]=1,0===G[e]&&(t.enableVertexAttribArray(e),G[e]=1),Y[e]!==r&&(n.vertexAttribDivisorANGLE(e,r),Y[e]=r)}function f(){for(var e=0,r=G.length;e!==r;++e)G[e]!==k[e]&&(t.disableVertexAttribArray(e),G[e]=0)}function d(e){!0!==H[e]&&(t.enable(e),H[e]=!0)}function p(e){!1!==H[e]&&(t.disable(e),H[e]=!1)}function m(){if(null===Q&&(Q=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")))for(var r=t.getParameter(t.COMPRESSED_TEXTURE_FORMATS),n=0;n<r.length;n++)Q.push(r[n]);return Q}function g(e,n,i,a,o,s,u,l){e!==da?d(t.BLEND):p(t.BLEND),e===W&&l===tt||(e===ma?l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE,t.ONE,t.ONE)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE)):e===ga?l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.ONE_MINUS_SRC_COLOR)):e===va?l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.SRC_COLOR)):l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE_MINUS_DST_ALPHA,t.ONE)):(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)),W=e,tt=l),e===ya?(o=o||n,s=s||i,u=u||a,n===X&&o===K||(t.blendEquationSeparate(r(n),r(o)),X=n,K=o),i===q&&a===Z&&s===J&&u===$||(t.blendFuncSeparate(r(i),r(a),r(s),r(u)),q=i,Z=a,J=s,$=u)):(X=null,q=null,Z=null,K=null,J=null,$=null)}function v(t){U.setMask(t)}function y(t){B.setTest(t)}function M(t){B.setMask(t)}function w(t){B.setFunc(t)}function x(t){V.setTest(t)}function b(t){V.setMask(t)}function T(t,e,r){V.setFunc(t,e,r)}function E(t,e,r){V.setOp(t,e,r)}function S(e){et!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),et=e)}function _(e){e!==Ji?(d(t.CULL_FACE),e!==rt&&(e===$i?t.cullFace(t.BACK):e===ta?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):p(t.CULL_FACE),rt=e}function A(e){e!==nt&&(lt&&t.lineWidth(e),nt=e)}function D(e,r,n){e?(d(t.POLYGON_OFFSET_FILL),it===r&&at===n||(t.polygonOffset(r,n),it=r,at=n)):p(t.POLYGON_OFFSET_FILL)}function N(){return ot}function I(e){ot=e,e?d(t.SCISSOR_TEST):p(t.SCISSOR_TEST)}function L(e){void 0===e&&(e=t.TEXTURE0+st-1),ct!==e&&(t.activeTexture(e),ct=e)}function C(e,r){null===ct&&L();var n=ht[ct];void 0===n&&(n={type:void 0,texture:void 0},ht[ct]=n),n.type===e&&n.texture===r||(t.bindTexture(e,r||pt[e]),n.type=e,n.texture=r)}function O(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error(t)}}function R(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error(t)}}function z(e){!1===ft.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),ft.copy(e))}function j(e){!1===dt.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),dt.copy(e))}function P(){for(var e=0;e<G.length;e++)1===G[e]&&(t.disableVertexAttribArray(e),G[e]=0);H={},Q=null,ct=null,ht={},W=null,et=null,rt=null,U.reset(),B.reset(),V.reset()}var U=new n,B=new a,V=new o,F=t.getParameter(t.MAX_VERTEX_ATTRIBS),k=new Uint8Array(F),G=new Uint8Array(F),Y=new Uint8Array(F),H={},Q=null,W=null,X=null,q=null,Z=null,K=null,J=null,$=null,tt=!1,et=null,rt=null,nt=null,it=null,at=null,ot=null,st=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),ut=parseFloat(/^WebGL\ ([0-9])/.exec(t.getParameter(t.VERSION))[1]),lt=parseFloat(ut)>=1,ct=null,ht={},ft=new i,dt=new i,pt={};return pt[t.TEXTURE_2D]=s(t.TEXTURE_2D,t.TEXTURE_2D,1),pt[t.TEXTURE_CUBE_MAP]=s(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),{buffers:{color:U,depth:B,stencil:V},init:u,initAttributes:l,enableAttribute:c,enableAttributeAndDivisor:h,disableUnusedAttributes:f,enable:d,disable:p,getCompressedTextureFormats:m,setBlending:g,setColorWrite:v,setDepthTest:y,setDepthWrite:M,setDepthFunc:w,setStencilTest:x,setStencilWrite:b,setStencilFunc:T,setStencilOp:E,setFlipSided:S,setCullFace:_,setLineWidth:A,setPolygonOffset:D,getScissorTest:N,setScissorTest:I,activeTexture:L,bindTexture:C,compressedTexImage2D:O,texImage2D:R,scissor:z,viewport:j,reset:P}}function ae(t,e,r){function n(){if(void 0!==a)return a;var r=e.get("EXT_texture_filter_anisotropic");return a=null!==r?t.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}function i(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var a,o=void 0!==r.precision?r.precision:"highp",s=i(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var u=!0===r.logarithmicDepthBuffer&&!!e.get("EXT_frag_depth"),l=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),c=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=t.getParameter(t.MAX_TEXTURE_SIZE),f=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),d=t.getParameter(t.MAX_VERTEX_ATTRIBS),p=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),m=t.getParameter(t.MAX_VARYING_VECTORS),g=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),v=c>0,y=!!e.get("OES_texture_float");return{getMaxAnisotropy:n,getMaxPrecision:i,precision:o,logarithmicDepthBuffer:u,maxTextures:l,maxVertexTextures:c,maxTextureSize:h,maxCubemapSize:f,maxAttributes:d,maxVertexUniforms:p,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:v,floatFragmentTextures:y,floatVertexTextures:v&&y}}function oe(t){var e={};return{get:function(r){if(void 0!==e[r])return e[r];var n;switch(r){case"WEBGL_depth_texture":n=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":n=t.getExtension("WEBGL_compressed_texture_etc1");break;default:n=t.getExtension(r)}return null===n&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),e[r]=n,n}}}function se(){function t(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),r.numPlanes=i,r.numIntersection=0}function e(t,e,n,i){var a=null!==t?t.length:0,o=null;if(0!==a){if(o=l.value,!0!==i||null===o){var c=n+4*a,h=e.matrixWorldInverse;u.getNormalMatrix(h),(null===o||o.length<c)&&(o=new Float32Array(c));for(var f=0,d=n;f!==a;++f,d+=4)s.copy(t[f]).applyMatrix4(h,u),s.normal.toArray(o,d),o[d+3]=s.constant}l.value=o,l.needsUpdate=!0}return r.numPlanes=a,o}var r=this,n=null,i=0,a=!1,o=!1,s=new rt,u=new et,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,r,o){var s=0!==t.length||r||0!==i||a;return a=r,n=e(t,o,0),i=t.length,s},this.beginShadows=function(){o=!0,e(null)},this.endShadows=function(){o=!1,t()},this.setState=function(r,s,u,c,h,f){if(!a||null===r||0===r.length||o&&!u)o?e(null):t();else{var d=o?0:i,p=4*d,m=h.clippingState||null;l.value=m,m=e(r,c,p,f);for(var g=0;g!==p;++g)m[g]=n[g];h.clippingState=m,this.numIntersection=s?this.numPlanes:0,this.numPlanes+=d}}}function ue(){ut.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function le(t){function e(){return null===vt?Vt:1}function r(){pe.init(),pe.scissor(bt.copy(Ft).multiplyScalar(Vt)),pe.viewport(Et.copy(Gt).multiplyScalar(Vt)),pe.buffers.color.setClear(Lt.r,Lt.g,Lt.b,Pt,J)}function n(){gt=null,xt=null,wt="",Mt=-1,pe.reset()}function a(t){t.preventDefault(),n(),r(),me.clear()}function o(t){var e=t.target;e.removeEventListener("dispose",o),s(e)}function s(t){c(t),me.delete(t)}function c(t){var e=me.get(t).program;t.program=void 0,void 0!==e&&ye.releaseProgram(e)}function h(t,e,r,n){var i;if(r&&r.isInstancedBufferGeometry&&null===(i=fe.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");void 0===n&&(n=0),pe.initAttributes();var a=r.attributes,o=e.getAttributes(),s=t.defaultAttributeValues;for(var u in o){var l=o[u];if(l>=0){var c=a[u];if(void 0!==c){var h=c.normalized,f=c.itemSize,d=ve.getAttributeProperties(c),p=d.__webglBuffer,m=d.type,g=d.bytesPerElement;if(c.isInterleavedBufferAttribute){var v=c.data,y=v.stride,M=c.offset;v&&v.isInstancedInterleavedBuffer?(pe.enableAttributeAndDivisor(l,v.meshPerAttribute,i),void 0===r.maxInstancedCount&&(r.maxInstancedCount=v.meshPerAttribute*v.count)):pe.enableAttribute(l),ce.bindBuffer(ce.ARRAY_BUFFER,p),ce.vertexAttribPointer(l,f,m,h,y*g,(n*y+M)*g)}else c.isInstancedBufferAttribute?(pe.enableAttributeAndDivisor(l,c.meshPerAttribute,i),void 0===r.maxInstancedCount&&(r.maxInstancedCount=c.meshPerAttribute*c.count)):pe.enableAttribute(l),ce.bindBuffer(ce.ARRAY_BUFFER,p),ce.vertexAttribPointer(l,f,m,h,0,n*f*g)}else if(void 0!==s){var w=s[u];if(void 0!==w)switch(w.length){case 2:ce.vertexAttrib2fv(l,w);break;case 3:ce.vertexAttrib3fv(l,w);break;case 4:ce.vertexAttrib4fv(l,w);break;default:ce.vertexAttrib1fv(l,w)}}}}pe.disableUnusedAttributes()}function f(t,e){return Math.abs(e[0])-Math.abs(t[0])}function d(t,e){return t.object.renderOrder!==e.object.renderOrder?t.object.renderOrder-e.object.renderOrder:t.material.program&&e.material.program&&t.material.program!==e.material.program?t.material.program.id-e.material.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function p(t,e){return t.object.renderOrder!==e.object.renderOrder?t.object.renderOrder-e.object.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function m(t,e,r,n,i){var a,o;r.transparent?(a=ot,o=++st):(a=rt,o=++at);var s=a[o];void 0!==s?(s.id=t.id,s.object=t,s.geometry=e,s.material=r,s.z=Zt.z,s.group=i):(s={id:t.id,object:t,geometry:e,material:r,z:Zt.z,group:i},a.push(s))}function g(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),Xt.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),y(Xt)}function v(t){return Xt.center.set(0,0,0),Xt.radius=.7071067811865476,Xt.applyMatrix4(t.matrixWorld),y(Xt)}function y(t){if(!Yt.intersectsSphere(t))return!1;var e=Ht.numPlanes;if(0===e)return!0;var r=mt.clippingPlanes,n=t.center,i=-t.radius,a=0;do{if(r[a].distanceToPoint(n)<i)return!1}while(++a!==e);return!0}function M(t,e){if(!1!==t.visible){if(0!=(t.layers.mask&e.layers.mask))if(t.isLight)et.push(t);else if(t.isSprite)!1!==t.frustumCulled&&!0!==v(t)||lt.push(t);else if(t.isLensFlare)ct.push(t);else if(t.isImmediateRenderObject)!0===mt.sortObjects&&(Zt.setFromMatrixPosition(t.matrixWorld),Zt.applyMatrix4(qt)),m(t,null,t.material,Zt.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!1===t.frustumCulled||!0===g(t))){var r=t.material;if(!0===r.visible){!0===mt.sortObjects&&(Zt.setFromMatrixPosition(t.matrixWorld),Zt.applyMatrix4(qt));var n=ve.update(t);if(r.isMultiMaterial)for(var i=n.groups,a=r.materials,o=0,s=i.length;o<s;o++){var u=i[o],l=a[u.materialIndex];!0===l.visible&&m(t,n,l,Zt.z,u)}else m(t,n,r,Zt.z,null)}}for(var c=t.children,o=0,s=c.length;o<s;o++)M(c[o],e)}}function w(t,e,r,n){for(var i=0,a=t.length;i<a;i++){var o=t[i],s=o.object,u=o.geometry,l=void 0===n?o.material:n,c=o.group;if(s.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,s.matrixWorld),s.normalMatrix.getNormalMatrix(s.modelViewMatrix),s.onBeforeRender(mt,e,r,u,l,c),s.isImmediateRenderObject){b(l);var h=T(r,e.fog,l,s);wt="",s.render(function(t){mt.renderBufferImmediate(t,h,l)})}else mt.renderBufferDirect(r,e.fog,u,l,s,c);s.onAfterRender(mt,e,r,u,l,c)}}function x(t,e,r){var n=me.get(t),i=ye.getParameters(t,te,e,Ht.numPlanes,Ht.numIntersection,r),a=ye.getProgramCode(t,i),s=n.program,u=!0;if(void 0===s)t.addEventListener("dispose",o);else if(s.code!==a)c(t);else{if(void 0!==i.shaderID)return;u=!1}if(u){if(i.shaderID){var l=ps[i.shaderID];n.__webglShader={name:t.type,uniforms:cs.clone(l.uniforms),vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}}else n.__webglShader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};t.__webglShader=n.__webglShader,s=ye.acquireProgram(t,i,a),n.program=s,t.program=s}var h=s.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var f=0;f<mt.maxMorphTargets;f++)h["morphTarget"+f]>=0&&t.numSupportedMorphTargets++}if(t.morphNormals){t.numSupportedMorphNormals=0;for(var f=0;f<mt.maxMorphNormals;f++)h["morphNormal"+f]>=0&&t.numSupportedMorphNormals++}var d=n.__webglShader.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(n.numClippingPlanes=Ht.numPlanes,n.numIntersection=Ht.numIntersection,d.clippingPlanes=Ht.uniform),n.fog=e,n.lightsHash=te.hash,t.lights&&(d.ambientLightColor.value=te.ambient,d.directionalLights.value=te.directional,d.spotLights.value=te.spot,d.rectAreaLights.value=te.rectArea,d.pointLights.value=te.point,d.hemisphereLights.value=te.hemi,d.directionalShadowMap.value=te.directionalShadowMap,d.directionalShadowMatrix.value=te.directionalShadowMatrix,d.spotShadowMap.value=te.spotShadowMap,d.spotShadowMatrix.value=te.spotShadowMatrix,d.pointShadowMap.value=te.pointShadowMap,d.pointShadowMatrix.value=te.pointShadowMatrix);var p=n.program.getUniforms(),m=Y.seqWithValue(p.seq,d);n.uniformsList=m}function b(t){t.side===sa?pe.disable(ce.CULL_FACE):pe.enable(ce.CULL_FACE),pe.setFlipSided(t.side===oa),!0===t.transparent?pe.setBlending(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):pe.setBlending(da),pe.setDepthFunc(t.depthFunc),pe.setDepthTest(t.depthTest),pe.setDepthWrite(t.depthWrite),pe.setColorWrite(t.colorWrite),pe.setPolygonOffset(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)}function T(t,e,r,n){St=0;var i=me.get(r);if(Qt&&(Wt||t!==xt)){var a=t===xt&&r.id===Mt;Ht.setState(r.clippingPlanes,r.clipIntersection,r.clipShadows,t,i,a)}!1===r.needsUpdate&&(void 0===i.program?r.needsUpdate=!0:r.fog&&i.fog!==e?r.needsUpdate=!0:r.lights&&i.lightsHash!==te.hash?r.needsUpdate=!0:void 0===i.numClippingPlanes||i.numClippingPlanes===Ht.numPlanes&&i.numIntersection===Ht.numIntersection||(r.needsUpdate=!0)),r.needsUpdate&&(x(r,e,n),r.needsUpdate=!1);var o=!1,s=!1,u=!1,l=i.program,c=l.getUniforms(),h=i.__webglShader.uniforms;if(l.id!==gt&&(ce.useProgram(l.program),gt=l.id,o=!0,s=!0,u=!0),r.id!==Mt&&(Mt=r.id,s=!0),o||t!==xt){if(c.set(ce,t,"projectionMatrix"),de.logarithmicDepthBuffer&&c.setValue(ce,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),t!==xt&&(xt=t,s=!0,u=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshStandardMaterial||r.envMap){var f=c.map.cameraPosition;void 0!==f&&f.setValue(ce,Zt.setFromMatrixPosition(t.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.skinning)&&c.setValue(ce,"viewMatrix",t.matrixWorldInverse),c.set(ce,mt,"toneMappingExposure"),c.set(ce,mt,"toneMappingWhitePoint")}if(r.skinning){c.setOptional(ce,n,"bindMatrix"),c.setOptional(ce,n,"bindMatrixInverse");var d=n.skeleton;d&&(de.floatVertexTextures&&d.useVertexTexture?(c.set(ce,d,"boneTexture"),c.set(ce,d,"boneTextureWidth"),c.set(ce,d,"boneTextureHeight")):c.setOptional(ce,d,"boneMatrices"))}return s&&(r.lights&&j(h,u),e&&r.fog&&N(h,e),(r.isMeshBasicMaterial||r.isMeshLambertMaterial||r.isMeshPhongMaterial||r.isMeshStandardMaterial||r.isMeshDepthMaterial||r.isMeshNormalMaterial||r.isMeshCubeMaterial)&&E(h,r),r.isLineBasicMaterial?_(h,r):r.isLineDashedMaterial?(_(h,r),A(h,r)):r.isPointsMaterial?D(h,r):r.isMeshCubeMaterial?S(h,r):r.isMeshLambertMaterial?I(h,r):r.isMeshToonMaterial?C(h,r):r.isMeshPhongMaterial?L(h,r):r.isMeshPhysicalMaterial?R(h,r):r.isMeshStandardMaterial?O(h,r):r.isMeshDepthMaterial?r.displacementMap&&(h.displacementMap.value=r.displacementMap,h.displacementScale.value=r.displacementScale,h.displacementBias.value=r.displacementBias):r.isMeshNormalMaterial&&z(h,r),void 0!==h.ltcMat&&(h.ltcMat.value=UniformsLib.LTC_MAT_TEXTURE),void 0!==h.ltcMag&&(h.ltcMag.value=UniformsLib.LTC_MAG_TEXTURE),Y.upload(ce,i.uniformsList,h,mt)),c.set(ce,n,"modelViewMatrix"),c.set(ce,n,"normalMatrix"),c.setValue(ce,"modelMatrix",n.matrixWorld),l}function E(t,e){t.opacity.value=e.opacity,t.diffuse.value=e.color,e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity);var r=It.SupportedMapNames,n=It.SupportedMapSlotNames,i=It.SupportedMapUVNames,a=It.SupportedMapTexelNames;if(!e.usedSlots||e.usedSlotsVersion!=e.version){e.usedSlots=[];for(var o=0,s=r.length;o<s;o++){var u=r[o],l=n[o],c=e[l];e.usedSlots.push({index:o,mapUniform:t[u],uvUniform:t[i[o]],texelUniform:t[a[o]]})}e.usedSlotsVersion=e.version}for(var h=0,f=e.usedSlots.length;h<f;h++){var d=e.usedSlots[h],o=d.index,u=r[o],l=n[o],c=e[l];if(c){if(d.mapUniform.value=c.texture,c.texture){if(c.uvTransform){var p=d.uvUniform.value;p.set(c.uvRepeat.x,c.uvRepeat.y,c.uvOffset.x,c.uvOffset.y)}c.texelTransform&&(Ie=c.getFlattenedTexelTransform(Ie),d.texelUniform.value.set(Ie.texelScale,Ie.texelOffset))}}else e[u]&&(t[u].value=e[u])}e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMapIntensity.value=e.aoMapIntensity);var m;if(e.map?m=e.map:e.specularMap?m=e.specularMap:e.displacementMap?m=e.displacementMap:e.normalMap?m=e.normalMap:e.bumpMap?m=e.bumpMap:e.roughnessMap?m=e.roughnessMap:e.metalnessMap?m=e.metalnessMap:e.alphaMap?m=e.alphaMap:e.emissiveMap&&(m=e.emissiveMap),void 0!==m){m.isWebGLRenderTarget&&(m=m.texture);var g=m.offset,v=m.repeat;t.offsetRepeat.value.set(g.x,g.y,v.x,v.y)}t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap&&e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio}function S(t,e){t.roughness.value=e.roughness,t.opacity.value=e.opacity,t.envMapIntensity.value=e.envMapIntensity}function _(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity}function A(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}function D(t,e){if(t.diffuse.value=e.color,t.opacity.value=e.opacity,t.size.value=e.size*Vt,t.scale.value=.5*Bt,t.map.value=e.map,null!==e.map){var r=e.map.offset,n=e.map.repeat;t.offsetRepeat.value.set(r.x,r.y,n.x,n.y)}}function N(t,e){t.fogColor.value=e.color,e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}function I(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}function L(t,e){t.specular.value=e.specular,t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function C(t,e){L(t,e),e.gradientMap&&(t.gradientMap.value=e.gradientMap)}function O(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}function R(t,e){t.falloffDiffuse.value=e.falloffColor,e.falloffMap&&(t.falloffMap.value=e.falloffMap),t.falloffOpacity.value=e.falloffOpacity,e.falloffAlphaMap&&(t.falloffAlphaMap.value=e.falloffAlphaMap),t.clearCoat.value=e.clearCoat,t.clearCoatRoughness.value=e.clearCoatRoughness,O(t,e)}function z(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function j(t,e){t.ambientLightColor.needsUpdate=e,t.directionalLights.needsUpdate=e,t.pointLights.needsUpdate=e,t.spotLights.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}function P(t){for(var e=0,r=0,n=t.length;r<n;r++){var i=t[r];i.castShadow&&(te.shadows[e++]=i)}te.shadows.length=e}function U(t,e){var r,n,i,a,o,s,u,c=0,h=0,f=0,d=e.matrixWorldInverse,p=0,m=0,g=0,v=0,y=0;for(r=0,n=t.length;r<n;r++)if(i=t[r],a=i.color,o=i.intensity,s=i.distance,u=i.shadow&&i.shadow.map?i.shadow.map.texture:null,i.isAmbientLight)c+=a.r*o,h+=a.g*o,f+=a.b*o;else if(i.isDirectionalLight){var M=Me.get(i);M.color.copy(i.color).multiplyScalar(i.intensity),M.direction.setFromMatrixPosition(i.matrixWorld),Zt.setFromMatrixPosition(i.target.matrixWorld),M.direction.sub(Zt),M.direction.transformDirection(d),M.shadow=i.castShadow,i.castShadow&&(M.shadowBias=i.shadow.bias,M.spreadAngle=i.shadow.spreadAngle,M.shadowMapSize=i.shadow.mapSize,M.shadowCameraParams.x=Math.abs(i.shadow.camera.right-i.shadow.camera.left),M.shadowCameraParams.y=i.shadow.camera.near,M.shadowCameraParams.z=i.shadow.camera.far),te.directionalShadowMap[p]=u,te.directionalShadowMatrix[p]=i.shadow.matrix,te.directional[p++]=M}else if(i.isSpotLight){var M=Me.get(i);M.position.setFromMatrixPosition(i.matrixWorld),M.position.applyMatrix4(d),M.color.copy(a).multiplyScalar(o),M.distance=s,M.direction.setFromMatrixPosition(i.matrixWorld),Zt.setFromMatrixPosition(i.target.matrixWorld),M.direction.sub(Zt),M.direction.transformDirection(d),M.coneCos=Math.cos(i.angle),M.penumbraCos=Math.cos(i.angle*(1-i.penumbra)),M.decay=0===i.distance?0:i.decay,M.shadow=i.castShadow,i.castShadow&&(M.shadowBias=i.shadow.bias,M.shadowRadius=i.shadow.radius,M.shadowMapSize=i.shadow.mapSize,M.shadowCameraParams.x=ns.DEG2RAD*i.shadow.camera.fov,M.shadowCameraParams.y=i.shadow.camera.near,M.shadowCameraParams.z=i.shadow.camera.far),te.spotShadowMap[g]=u,te.spotShadowMatrix[g]=i.shadow.matrix,te.spot[g++]=M}else if(i.isRectAreaLight){var M=Me.get(i);M.color.copy(a).multiplyScalar(o/(i.width*i.height)),M.position.setFromMatrixPosition(i.matrixWorld),M.position.applyMatrix4(d),Jt.identity(),Kt.copy(i.matrixWorld),Kt.premultiply(d),Jt.extractRotation(Kt),M.halfWidth.set(.5*i.width,0,0),M.halfHeight.set(0,.5*i.height,0),M.halfWidth.applyMatrix4(Jt),M.halfHeight.applyMatrix4(Jt),te.rectArea[v++]=M}else if(i.isPointLight){var M=Me.get(i);M.position.setFromMatrixPosition(i.matrixWorld),M.position.applyMatrix4(d),M.color.copy(i.color).multiplyScalar(i.intensity),M.distance=i.distance,M.decay=0===i.distance?0:i.decay,M.shadow=i.castShadow,i.castShadow&&(M.shadowBias=i.shadow.bias,M.shadowRadius=i.shadow.radius,M.shadowMapSize=i.shadow.mapSize),te.pointShadowMap[m]=u,void 0===te.pointShadowMatrix[m]&&(te.pointShadowMatrix[m]=new l),Zt.setFromMatrixPosition(i.matrixWorld).negate(),te.pointShadowMatrix[m].identity().setPosition(Zt),te.point[m++]=M}else if(i.isHemisphereLight){var M=Me.get(i);M.direction.setFromMatrixPosition(i.matrixWorld),M.direction.transformDirection(d),M.direction.normalize(),M.skyColor.copy(i.color).multiplyScalar(o),M.groundColor.copy(i.groundColor).multiplyScalar(o),te.hemi[y++]=M}te.ambient[0]=c,te.ambient[1]=h,te.ambient[2]=f,te.directional.length=p,te.spot.length=g,te.rectArea.length=v,te.point.length=m,te.hemi.length=y,te.hash=p+","+m+","+g+","+v+","+y+","+te.shadows.length}function B(){var t=St;return t>=de.maxTextures&&console.warn("WebGLRenderer: trying to use "+t+" texture units while this GPU supports only "+de.maxTextures),St+=1,t}function V(t){var e;if(t===io)return ce.REPEAT;if(t===ao)return ce.CLAMP_TO_EDGE;if(t===oo)return ce.MIRRORED_REPEAT;if(t===so)return ce.NEAREST;if(t===uo)return ce.NEAREST_MIPMAP_NEAREST;if(t===lo)return ce.NEAREST_MIPMAP_LINEAR;if(t===co)return ce.LINEAR;if(t===ho)return ce.LINEAR_MIPMAP_NEAREST;if(t===fo)return ce.LINEAR_MIPMAP_LINEAR;if(t===po)return ce.UNSIGNED_BYTE;if(t===bo)return ce.UNSIGNED_SHORT_4_4_4_4;if(t===To)return ce.UNSIGNED_SHORT_5_5_5_1;if(t===Eo)return ce.UNSIGNED_SHORT_5_6_5;if(t===mo)return ce.BYTE;if(t===go)return ce.SHORT;if(t===vo)return ce.UNSIGNED_SHORT;if(t===yo)return ce.INT;if(t===Mo)return ce.UNSIGNED_INT;if(t===wo)return ce.FLOAT;if(t===xo&&null!==(e=fe.get("OES_texture_half_float")))return e.HALF_FLOAT_OES;if(t===_o)return ce.ALPHA;if(t===Ao)return ce.RGB;if(t===Do)return ce.RGBA;if(t===No)return ce.LUMINANCE;if(t===Io)return ce.LUMINANCE_ALPHA;if(t===Co)return ce.DEPTH_COMPONENT;if(t===Oo)return ce.DEPTH_STENCIL;if(t===Ma)return ce.FUNC_ADD;if(t===wa)return ce.FUNC_SUBTRACT;if(t===xa)return ce.FUNC_REVERSE_SUBTRACT;if(t===Ea)return ce.ZERO;if(t===Sa)return ce.ONE;if(t===_a)return ce.SRC_COLOR;if(t===Aa)return ce.ONE_MINUS_SRC_COLOR;if(t===Da)return ce.SRC_ALPHA;if(t===Na)return ce.ONE_MINUS_SRC_ALPHA;if(t===Ia)return ce.DST_ALPHA;if(t===La)return ce.ONE_MINUS_DST_ALPHA;if(t===Ca)return ce.DST_COLOR;if(t===Oa)return ce.ONE_MINUS_DST_COLOR;if(t===Ra)return ce.SRC_ALPHA_SATURATE;if((t===Ro||t===zo||t===jo||t===Po)&&null!==(e=fe.get("WEBGL_compressed_texture_s3tc"))){if(t===Ro)return e.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===zo)return e.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===jo)return e.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===Po)return e.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((t===Uo||t===Bo||t===Vo||t===Fo)&&null!==(e=fe.get("WEBGL_compressed_texture_pvrtc"))){if(t===Uo)return e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===Bo)return e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===Vo)return e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===Fo)return e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t===ko&&null!==(e=fe.get("WEBGL_compressed_texture_etc1")))return e.COMPRESSED_RGB_ETC1_WEBGL;if((t===ba||t===Ta)&&null!==(e=fe.get("EXT_blend_minmax"))){if(t===ba)return e.MIN_EXT;if(t===Ta)return e.MAX_EXT}return t===So&&null!==(e=fe.get("WEBGL_depth_texture"))?e.UNSIGNED_INT_24_8_WEBGL:0}console.log("THREE.WebGLRenderer",Zi),t=t||{};var F=void 0!==t.canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),k=void 0!==t.context?t.context:null,G=void 0!==t.alpha&&t.alpha,Q=void 0===t.depth||t.depth,W=void 0===t.stencil||t.stencil,Z=void 0!==t.antialias&&t.antialias,J=void 0===t.premultipliedAlpha||t.premultipliedAlpha,$=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,et=[],rt=[],at=-1,ot=[],st=-1,ut=new Float32Array(8),lt=[],ct=[],ht=null,dt=null,pt=null;this.domElement=F,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=Wa,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4,this.autoScaleCubemaps=!0,this.autoResizeTextures=!1;var mt=this,gt=null,vt=null,yt=null,Mt=-1,wt="",xt=null,bt=new i,Tt=null,Et=new i,St=0,Lt=new H(0),Pt=0,Ut=F.width,Bt=F.height,Vt=1,Ft=new i(0,0,Ut,Bt),kt=!1,Gt=new i(0,0,Ut,Bt),Yt=new nt,Ht=new se,Qt=!1,Wt=!1,Xt=new tt,qt=new l,Zt=new u,Kt=new l,Jt=new l,te={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},le={calls:0,vertices:0,faces:0,points:0};this.info={render:le,memory:{geometries:0,textures:0},programs:null};var ce;try{var he={alpha:G,depth:Q,stencil:W,antialias:Z,premultipliedAlpha:J,preserveDrawingBuffer:$};if(null===(ce=k||F.getContext("webgl",he)||F.getContext("experimental-webgl",he)))throw null!==F.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";void 0===ce.getShaderPrecisionFormat&&(ce.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),F.addEventListener("webglcontextlost",a,!1)}catch(t){console.error("THREE.WebGLRenderer: "+t)}var fe=new oe(ce);fe.get("WEBGL_depth_texture"),fe.get("OES_texture_float"),fe.get("OES_texture_float_linear"),fe.get("OES_texture_half_float"),fe.get("OES_texture_half_float_linear"),fe.get("OES_standard_derivatives"),fe.get("ANGLE_instanced_arrays"),fe.get("OES_element_index_uint")&&(_t.MaxIndex=4294967296);var de=new ae(ce,fe,t),pe=new ie(ce,fe,V),me=new ne,ge=new re(ce,fe,pe,me,de,V,this.info),ve=new ee(ce,me,this.info),ye=new $t(this,de),Me=new jt;this.info.programs=ye.programs;var we=new zt(ce,fe,le),xe=new Rt(ce,fe,le),be=new Ot(-1,1,1,-1,0,1),Te=new Ct,Ee=new At(new Nt(2,2),new ft({depthTest:!1,depthWrite:!1,fog:!1})),Se=ps.cube,_e=new At(new Dt(5,5,5),new K({uniforms:Se.uniforms,vertexShader:Se.vertexShader,fragmentShader:Se.fragmentShader,side:oa,depthTest:!1,depthWrite:!1,fog:!1}));r(),this.context=ce,this.capabilities=de,this.extensions=fe,this.properties=me,this.state=pe;var Ae=new it(this,te,ve,de);this.shadowMap=Ae;var De=new q(this,lt),Ne=new X(this,ct);this.getContext=function(){return ce},this.getContextAttributes=function(){return ce.getContextAttributes()},this.forceContextLoss=function(){fe.get("WEBGL_lose_context").loseContext()},this.getMaxAnisotropy=function(){return de.getMaxAnisotropy()},this.getPrecision=function(){return de.precision},this.getPixelRatio=function(){return Vt},this.setPixelRatio=function(t){void 0!==t&&(Vt=t,this.setSize(Gt.z,Gt.w,!1))},this.getSize=function(){return{width:Ut,height:Bt}},this.setSize=function(t,e,r){Ut=t,Bt=e,F.width=t*Vt,F.height=e*Vt,!1!==r&&(F.style.width=t+"px",F.style.height=e+"px"),this.setViewport(0,0,t,e)},this.setViewport=function(t,e,r,n){pe.viewport(Gt.set(t,e,r,n))},this.setScissor=function(t,e,r,n){pe.scissor(Ft.set(t,e,r,n))},this.setScissorTest=function(t){pe.setScissorTest(kt=t)},this.getClearColor=function(){return Lt},this.setClearColor=function(t,e){Lt.set(t),Pt=void 0!==e?e:1,pe.buffers.color.setClear(Lt.r,Lt.g,Lt.b,Pt,J)},this.getClearAlpha=function(){return Pt},this.setClearAlpha=function(t){Pt=t,pe.buffers.color.setClear(Lt.r,Lt.g,Lt.b,Pt,J)},this.clear=function(t,e,r){var n=0;(void 0===t||t)&&(n|=ce.COLOR_BUFFER_BIT),(void 0===e||e)&&(n|=ce.DEPTH_BUFFER_BIT),(void 0===r||r)&&(n|=ce.STENCIL_BUFFER_BIT),ce.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(t,e,r,n){this.setRenderTarget(t),this.clear(e,r,n)},this.resetGLState=n,this.dispose=function(){ot=[],st=-1,rt=[],at=-1,F.removeEventListener("webglcontextlost",a,!1)},this.renderBufferImmediate=function(t,e,r){pe.initAttributes();var n=me.get(t);t.hasPositions&&!n.position&&(n.position=ce.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=ce.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=ce.createBuffer()),t.hasColors&&!n.color&&(n.color=ce.createBuffer());var i=e.getAttributes();if(t.hasPositions&&(ce.bindBuffer(ce.ARRAY_BUFFER,n.position),ce.bufferData(ce.ARRAY_BUFFER,t.positionArray,ce.DYNAMIC_DRAW),pe.enableAttribute(i.position),ce.vertexAttribPointer(i.position,3,ce.FLOAT,!1,0,0)),t.hasNormals){if(ce.bindBuffer(ce.ARRAY_BUFFER,n.normal),!r.isMeshPhongMaterial&&!r.isMeshStandardMaterial&&!r.isMeshNormalMaterial&&r.shading===ua)for(var a=0,o=3*t.count;a<o;a+=9){var s=t.normalArray,u=(s[a+0]+s[a+3]+s[a+6])/3,l=(s[a+1]+s[a+4]+s[a+7])/3,c=(s[a+2]+s[a+5]+s[a+8])/3;s[a+0]=u,s[a+1]=l,s[a+2]=c,s[a+3]=u,s[a+4]=l,s[a+5]=c,s[a+6]=u,s[a+7]=l,s[a+8]=c}ce.bufferData(ce.ARRAY_BUFFER,t.normalArray,ce.DYNAMIC_DRAW),pe.enableAttribute(i.normal),ce.vertexAttribPointer(i.normal,3,ce.FLOAT,!1,0,0)}t.hasUvs&&r.map&&(ce.bindBuffer(ce.ARRAY_BUFFER,n.uv),ce.bufferData(ce.ARRAY_BUFFER,t.uvArray,ce.DYNAMIC_DRAW),pe.enableAttribute(i.uv),ce.vertexAttribPointer(i.uv,2,ce.FLOAT,!1,0,0)),t.hasColors&&r.vertexColors!==ca&&(ce.bindBuffer(ce.ARRAY_BUFFER,n.color),ce.bufferData(ce.ARRAY_BUFFER,t.colorArray,ce.DYNAMIC_DRAW),pe.enableAttribute(i.color),ce.vertexAttribPointer(i.color,3,ce.FLOAT,!1,0,0)),pe.disableUnusedAttributes(),ce.drawArrays(ce.TRIANGLES,0,t.count),t.count=0},this.renderBufferDirect=function(t,r,n,i,a,o){b(i);var s=T(t,r,i,a),u=!1,l=n.id+"_"+s.id+"_"+i.wireframe;l!==wt&&(wt=l,u=!0);var c=a.morphTargetInfluences;if(void 0!==c){for(var d=[],p=0,m=c.length;p<m;p++){var g=c[p];d.push([g,p])}d.sort(f),d.length>8&&(d.length=8);for(var v=n.morphAttributes,p=0,m=d.length;p<m;p++){var g=d[p];if(ut[p]=g[0],0!==g[0]){var y=g[1];!0===i.morphTargets&&v.position&&n.addAttribute("morphTarget"+p,v.position[y]),!0===i.morphNormals&&v.normal&&n.addAttribute("morphNormal"+p,v.normal[y])}else!0===i.morphTargets&&n.removeAttribute("morphTarget"+p),!0===i.morphNormals&&n.removeAttribute("morphNormal"+p)}for(var p=d.length,M=ut.length;p<M;p++)ut[p]=0;s.getUniforms().setValue(ce,"morphTargetInfluences",ut),u=!0}var y=n.index,w=n.attributes.position,x=1;!0===i.wireframe&&(y=ve.getWireframeAttribute(n),x=2);var E;null!==y?(E=xe,E.setIndex(y)):E=we,u&&(h(i,s,n),null!==y&&ce.bindBuffer(ce.ELEMENT_ARRAY_BUFFER,ve.getAttributeBuffer(y)));var S=0;null!==y?S=y.count:void 0!==w&&(S=w.count);var _=n.drawRange.start*x,A=n.drawRange.count*x,D=null!==o?o.start*x:0,N=null!==o?o.count*x:1/0,I=Math.max(_,D),L=Math.min(S,_+A,D+N)-1,C=Math.max(0,L-I+1);if(0!==C){if(a.isMesh)if(!0===i.wireframe)pe.setLineWidth(i.wireframeLinewidth*e()),E.setMode(ce.LINES);else switch(a.drawMode){case Ho:E.setMode(ce.TRIANGLES);break;case Qo:E.setMode(ce.TRIANGLE_STRIP);break;case Wo:E.setMode(ce.TRIANGLE_FAN)}else if(a.isLine){var O=i.linewidth;void 0===O&&(O=1),pe.setLineWidth(O*e()),a.isLineSegments?E.setMode(ce.LINES):E.setMode(ce.LINE_STRIP)}else a.isPoints&&E.setMode(ce.POINTS);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&E.renderInstances(n,I,C):E.render(I,C)}},this.renderOverride=function(t,e,r,n,i){e.overrideMaterial=t,this.render(e,r,n,i),e.overrideMaterial=null},this.renderPass=function(t,e,r){null===ht&&(dt=new Ot(-1,1,1,-1,0,1),pt=new At(new Nt(2,2),null),ht=new ue,ht.add(pt)),pt.material=t,this.render(ht,dt,e,r),pt.material=null},this.render=function(t,e,r,n){if(void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");wt="",Mt=-1,xt=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),e.matrixWorldInverse.getInverse(e.matrixWorld),qt.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),Yt.setFromMatrix(qt),et.length=0,at=-1,st=-1,lt.length=0,ct.length=0,Wt=this.localClippingEnabled,Qt=Ht.init(this.clippingPlanes,Wt,e),M(t,e),rt.length=at+1,ot.length=st+1,!0===mt.sortObjects&&(rt.sort(d),ot.sort(p)),Qt&&Ht.beginShadows(),P(et),Ae.render(t,e),U(et,e),Qt&&Ht.endShadows(),le.calls=0,le.vertices=0,le.faces=0,le.points=0,void 0===r&&(r=null),this.setRenderTarget(r);var i=t.background;if(i=null,null===i?pe.buffers.color.setClear(Lt.r,Lt.g,Lt.b,Pt,J):i&&i.isColor&&(pe.buffers.color.setClear(i.r,i.g,i.b,1,J),n=!0),(this.autoClear||n)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),i&&i.isCubeTexture?(Te.projectionMatrix.copy(e.projectionMatrix),Te.matrixWorld.extractRotation(e.matrixWorld),Te.matrixWorldInverse.getInverse(Te.matrixWorld),_e.material.uniforms.tCube.value=i,_e.modelViewMatrix.multiplyMatrices(Te.matrixWorldInverse,_e.matrixWorld),ve.update(_e),mt.renderBufferDirect(Te,null,_e.geometry,_e.material,_e,null)):i&&i.isTexture&&(Ee.material.map=i,ve.update(Ee),mt.renderBufferDirect(be,null,Ee.geometry,Ee.material,Ee,null)),t.overrideMaterial){var a=t.overrideMaterial;w(rt,t,e,a),w(ot,t,e,a)}else pe.setBlending(da),w(rt,t,e),w(ot,t,e);De.render(t,e),Ne.render(t,e,Et),r&&ge.updateRenderTargetMipmap(r),pe.setDepthTest(!0),pe.setDepthWrite(!0),pe.setColorWrite(!0)};var Ie={texelScale:0,texelOffset:0};this.setFaceCulling=function(t,e){pe.setCullFace(t),pe.setFlipSided(e===ea)},this.allocTextureUnit=B,this.setTexture2D=function(){var t=!1;return function(e,r){e&&e.isWebGLRenderTarget&&(t||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead.",e),t=!0),e=e.texture),ge.setTexture2D(e,r)}}(),this.setTexture=function(){var t=!1;return function(e,r){t||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),t=!0),ge.setTexture2D(e,r)}}(),this.setTextureCube=function(){var t=!1;return function(e,r){e&&e.isWebGLRenderTargetCube&&(t||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead.",e),t=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?ge.setTextureCube(e,r):ge.setTextureCubeDynamic(e,r)}}(),this.getCurrentRenderTarget=function(){return vt},this.setRenderTarget=function(t){vt=t,t&&void 0===me.get(t).__webglFramebuffer&&ge.setupRenderTarget(t);var e,r=t&&t.isWebGLRenderTargetCube;if(t){var n=me.get(t);e=r?n.__webglFramebuffer[t.activeCubeFace]:n.__webglFramebuffer,bt.copy(t.scissor),Tt=t.scissorTest,Et.copy(t.viewport)}else e=null,bt.copy(Ft).multiplyScalar(Vt),Tt=kt,Et.copy(Gt).multiplyScalar(Vt);if(yt!==e&&(ce.bindFramebuffer(ce.FRAMEBUFFER,e),yt=e),pe.scissor(bt),pe.setScissorTest(Tt),pe.viewport(Et),r){var i=me.get(t.texture);ce.framebufferTexture2D(ce.FRAMEBUFFER,ce.COLOR_ATTACHMENT0,ce.TEXTURE_CUBE_MAP_POSITIVE_X+t.activeCubeFace,i.__webglTexture,t.activeMipMapLevel)}},this.readRenderTargetPixels=function(t,e,r,n,i,a){if(!1===(t&&t.isWebGLRenderTarget))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var o=me.get(t).__webglFramebuffer;if(o){var s=!1;o!==yt&&(ce.bindFramebuffer(ce.FRAMEBUFFER,o),s=!0);try{var u=t.texture,l=u.format,c=u.type;if(l!==Do&&V(l)!==ce.getParameter(ce.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(c===po||V(c)===ce.getParameter(ce.IMPLEMENTATION_COLOR_READ_TYPE)||c===wo&&(fe.get("OES_texture_float")||fe.get("WEBGL_color_buffer_float"))||c===xo&&fe.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");ce.checkFramebufferStatus(ce.FRAMEBUFFER)===ce.FRAMEBUFFER_COMPLETE?e>=0&&e<=t.width-n&&r>=0&&r<=t.height-i&&ce.readPixels(e,r,n,i,V(l),V(c),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&ce.bindFramebuffer(ce.FRAMEBUFFER,yt)}}}}function ce(t,e){this.name="",this.color=new H(t),this.density=void 0!==e?e:25e-5}function he(t,e,r){this.name="",this.color=new H(t),this.near=void 0!==e?e:1,this.far=void 0!==r?r:1e3}function fe(t,e,r,n,i){ut.call(this),this.lensFlares=[],this.positionScreen=new u,this.customUpdateCallback=void 0,void 0!==t&&this.add(t,e,r,n,i)}function de(t){Z.call(this),this.type="SpriteMaterial",this.color=new H(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(t)}function pe(t){ut.call(this),this.type="Sprite",this.material=void 0!==t?t:new de}function me(){ut.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function ge(t,e,r){if(this.useVertexTexture=void 0===r||r,this.identityMatrix=new l,t=t||[],this.bones=t.slice(0),this.useVertexTexture){var n=Math.sqrt(4*this.bones.length);n=ns.nextPowerOfTwo(Math.ceil(n)),n=Math.max(n,4),this.boneTextureWidth=n,this.boneTextureHeight=n,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new Q(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,Do,wo)}else this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[];for(var i=0,a=this.bones.length;i<a;i++)this.boneInverses.push(new l)}}function ve(){ut.call(this),this.type="Bone"}function ye(t,e,r){At.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new l,this.bindMatrixInverse=new l;var n=[];if(this.geometry&&void 0!==this.geometry.bones){for(var i,a,o=0,s=this.geometry.bones.length;o<s;++o)a=this.geometry.bones[o],i=new ve,n.push(i),i.name=a.name,i.position.fromArray(a.pos),i.quaternion.fromArray(a.rotq),void 0!==a.scl&&i.scale.fromArray(a.scl);for(var o=0,s=this.geometry.bones.length;o<s;++o)a=this.geometry.bones[o],-1!==a.parent&&null!==a.parent&&void 0!==n[a.parent]?n[a.parent].add(n[o]):this.add(n[o])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new ge(n,void 0,r),this.matrixWorld)}function Me(t){Z.call(this),this.type="LineBasicMaterial",this.color=new H(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(t)}function we(t,e,r){if(1===r)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new xe(t,e);ut.call(this),this.type="Line",this.geometry=void 0!==t?t:new _t,this.material=void 0!==e?e:new Me({color:16777215*Math.random()})}function xe(t,e){we.call(this,t,e),this.type="LineSegments"}function be(t){Z.call(this),this.type="PointsMaterial",this.color=new H(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(t)}function Te(t,e){ut.call(this),this.type="Points",this.geometry=void 0!==t?t:new _t,this.material=void 0!==e?e:new be({color:16777215*Math.random()})}function Ee(){ut.call(this),this.type="Group"}function Se(t,e,r,i,a,o,s,u,l){function c(){requestAnimationFrame(c),t.readyState>=t.HAVE_CURRENT_DATA&&(h.needsUpdate=!0)}n.call(this,t,e,r,i,a,o,s,u,l),this.generateMipmaps=!1;var h=this;c()}function _e(t,e,r,i,a,o,s,u,l,c,h,f){n.call(this,null,o,s,u,l,c,i,a,h,f),this.image={width:e,height:r},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function Ae(t,e,r,i,a,o,s,u,l){n.call(this,t,e,r,i,a,o,s,u,l),this.needsUpdate=!0}function De(t,e,r,i,a,o,s,u,l,c){if((c=void 0!==c?c:Co)!==Co&&c!==Oo)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===r&&c===Co&&(r=vo),void 0===r&&c===Oo&&(r=So),n.call(this,null,i,a,o,s,u,c,r,l),this.image={width:t,height:e},this.magFilter=void 0!==s?s:so,this.minFilter=void 0!==u?u:so,this.flipY=!1,this.generateMipmaps=!1}function Ne(t){function e(t,e){return t-e}_t.call(this);var r=[0,0],n={},i=["a","b","c"];if(t&&t.isGeometry){for(var a=t.vertices,o=t.faces,s=0,u=new Uint32Array(6*o.length),l=0,c=o.length;l<c;l++)for(var h=o[l],f=0;f<3;f++){r[0]=h[i[f]],r[1]=h[i[(f+1)%3]],r.sort(e);var d=r.toString();void 0===n[d]&&(u[2*s]=r[0],u[2*s+1]=r[1],n[d]=!0,s++)}for(var p=new Float32Array(2*s*3),l=0,c=s;l<c;l++)for(var f=0;f<2;f++){var m=a[u[2*l+f]],g=6*l+3*f;p[g+0]=m.x,p[g+1]=m.y,p[g+2]=m.z}this.addAttribute("position",new dt(p,3))}else if(t&&t.isBufferGeometry)if(null!==t.index){var v=t.index.array,a=t.attributes.position,y=t.groups,s=0;0===y.length&&t.addGroup(0,v.length);for(var u=new Uint32Array(2*v.length),M=0,w=y.length;M<w;++M)for(var x=y[M],b=x.start,T=x.count,l=b,E=b+T;l<E;l+=3)for(var f=0;f<3;f++){r[0]=v[l+f],r[1]=v[l+(f+1)%3],r.sort(e);var d=r.toString();void 0===n[d]&&(u[2*s]=r[0],u[2*s+1]=r[1],n[d]=!0,s++)}for(var p=new Float32Array(2*s*3),l=0,c=s;l<c;l++)for(var f=0;f<2;f++){var g=6*l+3*f,S=u[2*l+f];p[g+0]=a.getX(S),p[g+1]=a.getY(S),p[g+2]=a.getZ(S)}this.addAttribute("position",new dt(p,3))}else{for(var a=t.attributes.position.array,s=a.length/3,_=s/3,p=new Float32Array(2*s*3),l=0,c=_;l<c;l++)for(var f=0;f<3;f++){var g=18*l+6*f,A=9*l+3*f;p[g+0]=a[A],p[g+1]=a[A+1],p[g+2]=a[A+2];var S=9*l+(f+1)%3*3;p[g+3]=a[S],p[g+4]=a[S+1],p[g+5]=a[S+2]}this.addAttribute("position",new dt(p,3))}}function Ie(t,e,r){_t.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:r};var n,i,a,o,s,u=[],l=[],c=e+1;for(n=0;n<=r;n++)for(s=n/r,i=0;i<=e;i++)o=i/e,a=t(o,s),u.push(a.x,a.y,a.z),l.push(o,s);var h,f,d,p,m=[];for(n=0;n<r;n++)for(i=0;i<e;i++)h=n*c+i,f=n*c+i+1,d=(n+1)*c+i+1,p=(n+1)*c+i,m.push(h,f,p),m.push(f,d,p);this.setIndex(new(m.length>65535?wt:yt)(m,1)),this.addAttribute("position",new xt(u,3)),this.addAttribute("uv",new xt(l,2)),this.computeVertexNormals()}function Le(t,e,r){St.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:r},this.fromBufferGeometry(new Ie(t,e,r)),this.mergeVertices()}function Ce(t,e,n,i){function a(t,e,r,n){var i,a,o=Math.pow(2,n),u=[];for(i=0;i<=o;i++){u[i]=[];var l=t.clone().lerp(r,i/o),c=e.clone().lerp(r,i/o),h=o-i;for(a=0;a<=h;a++)u[i][a]=0===a&&i===o?l:l.clone().lerp(c,a/h)}for(i=0;i<o;i++)for(a=0;a<2*(o-i)-1;a++){var f=Math.floor(a/2);a%2==0?(s(u[i][f+1]),s(u[i+1][f]),s(u[i][f])):(s(u[i][f+1]),s(u[i+1][f+1]),s(u[i+1][f]))}}function o(){for(var t=0;t<m.length;t+=6){var e=m[t+0],r=m[t+2],n=m[t+4],i=Math.max(e,r,n),a=Math.min(e,r,n);i>.9&&a<.1&&(e<.2&&(m[t+0]+=1),r<.2&&(m[t+2]+=1),n<.2&&(m[t+4]+=1))}}function s(t){p.push(t.x,t.y,t.z)}function l(e,r){var n=3*e;r.x=t[n+0],r.y=t[n+1],r.z=t[n+2]}function c(){for(var t=new u,e=new u,n=new u,i=new u,a=new r,o=new r,s=new r,l=0,c=0;l<p.length;l+=9,c+=6){t.set(p[l+0],p[l+1],p[l+2]),e.set(p[l+3],p[l+4],p[l+5]),n.set(p[l+6],p[l+7],p[l+8]),a.set(m[c+0],m[c+1]),o.set(m[c+2],m[c+3]),s.set(m[c+4],m[c+5]),i.copy(t).add(e).add(n).divideScalar(3);var d=f(i);h(a,c+0,t,d),h(o,c+2,e,d),h(s,c+4,n,d)}}function h(t,e,r,n){n<0&&1===t.x&&(m[e]=t.x-1),0===r.x&&0===r.z&&(m[e]=n/2/Math.PI+.5)}function f(t){return Math.atan2(t.z,-t.x)}function d(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}_t.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i},n=n||1,i=i||0;var p=[],m=[];!function(t){for(var r=new u,n=new u,i=new u,o=0;o<e.length;o+=3)l(e[o+0],r),l(e[o+1],n),l(e[o+2],i),a(r,n,i,t)}(i),function(t){for(var e=new u,r=0;r<p.length;r+=3)e.x=p[r+0],e.y=p[r+1],e.z=p[r+2],e.normalize().multiplyScalar(t),p[r+0]=e.x,p[r+1]=e.y,p[r+2]=e.z}(n),function(){for(var t=new u,e=0;e<p.length;e+=3){t.x=p[e+0],t.y=p[e+1],t.z=p[e+2];var r=f(t)/2/Math.PI+.5,n=d(t)/Math.PI+.5;m.push(r,1-n)}c(),o()}(),this.addAttribute("position",new xt(p,3)),this.addAttribute("normal",new xt(p.slice(),3)),this.addAttribute("uv",new xt(m,2)),this.normalizeNormals(),this.boundingSphere=new tt(new u,n)}function Oe(t,e){var r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],n=[2,1,0,0,3,2,1,3,0,2,3,1];Ce.call(this,r,n,t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Re(t,e){St.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Oe(t,e)),this.mergeVertices()}function ze(t,e){var r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],n=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];Ce.call(this,r,n,t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function je(t,e){St.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new ze(t,e)),this.mergeVertices()}function Pe(t,e){var r=(1+Math.sqrt(5))/2,n=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],i=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];Ce.call(this,n,i,t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Ue(t,e){St.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Pe(t,e)),this.mergeVertices()}function Be(t,e){var r=(1+Math.sqrt(5))/2,n=1/r,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-r,0,-n,r,0,n,-r,0,n,r,-n,-r,0,-n,r,0,n,-r,0,n,r,0,-r,0,-n,r,0,-n,-r,0,n,r,0,n],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];Ce.call(this,i,a,t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Ve(t,e){St.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Be(t,e)),this.mergeVertices()}function Fe(t,e,r,n){St.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:r,detail:n},this.fromBufferGeometry(new Ce(t,e,r,n)),this.mergeVertices()}function ke(t,e,n,i,a){function o(r){var a=t.getPointAt(r/e),o=c.normals[r],s=c.binormals[r];for(f=0;f<=i;f++){var u=f/i*Math.PI*2,l=Math.sin(u),h=-Math.cos(u);p.x=h*o.x+l*s.x,p.y=h*o.y+l*s.y,p.z=h*o.z+l*s.z,p.normalize(),v.push(p.x,p.y,p.z),d.x=a.x+n*p.x,d.y=a.y+n*p.y,d.z=a.z+n*p.z,g.push(d.x,d.y,d.z)}}function s(){for(f=1;f<=e;f++)for(h=1;h<=i;h++){var t=(i+1)*(f-1)+(h-1),r=(i+1)*f+(h-1),n=(i+1)*f+h,a=(i+1)*(f-1)+h;M.push(t,r,a),M.push(r,n,a)}}function l(){for(h=0;h<=e;h++)for(f=0;f<=i;f++)m.x=h/e,m.y=f/i,y.push(m.x,m.y)}_t.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:a},e=e||64,n=n||1,i=i||8,a=a||!1;var c=t.computeFrenetFrames(e,a);this.tangents=c.tangents,this.normals=c.normals,this.binormals=c.binormals;var h,f,d=new u,p=new u,m=new r,g=[],v=[],y=[],M=[];!function(){for(h=0;h<e;h++)o(h);o(!1===a?e:0),l(),s()}(),this.setIndex(new(M.length>65535?wt:yt)(M,1)),this.addAttribute("position",new xt(g,3)),this.addAttribute("normal",new xt(v,3)),this.addAttribute("uv",new xt(y,2))}function Ge(t,e,r,n,i,a){St.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:r,radialSegments:n,closed:i},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed.");var o=new ke(t,e,r,n,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals,this.fromBufferGeometry(o),this.mergeVertices()}function Ye(t,e,n,i,a,o){function s(t,e,r,n,i){var a=Math.cos(t),o=Math.sin(t),s=r/e*t,u=Math.cos(s);i.x=n*(2+u)*.5*a,i.y=n*(2+u)*o*.5,i.z=n*Math.sin(s)*.5}_t.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:a,q:o},t=t||100,e=e||40,n=Math.floor(n)||64,i=Math.floor(i)||8,a=a||2,o=o||3;var l,c,h=(i+1)*(n+1),f=i*n*2*3,d=new dt(new(f>65535?Uint32Array:Uint16Array)(f),1),p=new dt(new Float32Array(3*h),3),m=new dt(new Float32Array(3*h),3),g=new dt(new Float32Array(2*h),2),v=0,y=0,M=new u,w=new u,x=new r,b=new u,T=new u,E=new u,S=new u,_=new u;for(l=0;l<=n;++l){var A=l/n*a*Math.PI*2;for(s(A,a,o,t,b),s(A+.01,a,o,t,T),S.subVectors(T,b),_.addVectors(T,b),E.crossVectors(S,_),_.crossVectors(E,S),E.normalize(),_.normalize(),c=0;c<=i;++c){var D=c/i*Math.PI*2,N=-e*Math.cos(D),I=e*Math.sin(D);M.x=b.x+(N*_.x+I*E.x),M.y=b.y+(N*_.y+I*E.y),M.z=b.z+(N*_.z+I*E.z),p.setXYZ(v,M.x,M.y,M.z),w.subVectors(M,b).normalize(),m.setXYZ(v,w.x,w.y,w.z),x.x=l/n,x.y=c/i,g.setXY(v,x.x,x.y),v++}}for(c=1;c<=n;c++)for(l=1;l<=i;l++){var L=(i+1)*(c-1)+(l-1),C=(i+1)*c+(l-1),O=(i+1)*c+l,R=(i+1)*(c-1)+l;d.setX(y,L),y++,d.setX(y,C),y++,d.setX(y,R),y++,d.setX(y,C),y++,d.setX(y,O),y++,d.setX(y,R),y++}this.setIndex(d),this.addAttribute("position",p),this.addAttribute("normal",m),this.addAttribute("uv",g)}function He(t,e,r,n,i,a,o){St.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:r,radialSegments:n,p:i,q:a},void 0!==o&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Ye(t,e,r,n,i,a)),this.mergeVertices()}function Qe(t,e,r,n,i){_t.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:r,tubularSegments:n,arc:i},t=t||100,e=e||40,r=Math.floor(r)||8,n=Math.floor(n)||6,i=i||2*Math.PI;var a,o,s=(r+1)*(n+1),l=r*n*2*3,c=new(l>65535?Uint32Array:Uint16Array)(l),h=new Float32Array(3*s),f=new Float32Array(3*s),d=new Float32Array(2*s),p=0,m=0,g=0,v=new u,y=new u,M=new u;for(a=0;a<=r;a++)for(o=0;o<=n;o++){var w=o/n*i,x=a/r*Math.PI*2;y.x=(t+e*Math.cos(x))*Math.cos(w),y.y=(t+e*Math.cos(x))*Math.sin(w),y.z=e*Math.sin(x),h[p]=y.x,h[p+1]=y.y,h[p+2]=y.z,v.x=t*Math.cos(w),v.y=t*Math.sin(w),M.subVectors(y,v).normalize(),f[p]=M.x,f[p+1]=M.y,f[p+2]=M.z,d[m]=o/n,d[m+1]=a/r,p+=3,m+=2}for(a=1;a<=r;a++)for(o=1;o<=n;o++){var b=(n+1)*a+o-1,T=(n+1)*(a-1)+o-1,E=(n+1)*(a-1)+o,S=(n+1)*a+o;c[g]=b,c[g+1]=T,c[g+2]=S,c[g+3]=T,c[g+4]=E,c[g+5]=S,g+=6}this.setIndex(new dt(c,1)),this.addAttribute("position",new dt(h,3)),this.addAttribute("normal",new dt(f,3)),this.addAttribute("uv",new dt(d,2))}function We(t,e,r,n,i){St.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:r,tubularSegments:n,arc:i},this.fromBufferGeometry(new Qe(t,e,r,n,i))}function Xe(t,e){if(void 0===t)return void(t=[]);St.call(this),this.type="ExtrudeGeometry",t=Array.isArray(t)?t:[t],this.addShapeList(t,e),this.computeFaceNormals()}function qe(t,e){e=e||{};var r=e.font;if(!1===(r&&r.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new St;var n=r.generateShapes(t,e.size,e.curveSegments);e.amount=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),Xe.call(this,n,e),this.type="TextGeometry"}function Ze(t,e,r,n,i,a,o){_t.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:r,phiStart:n,phiLength:i,thetaStart:a,thetaLength:o},t=t||50,e=Math.max(3,Math.floor(e)||8),r=Math.max(2,Math.floor(r)||6),n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI,a=void 0!==a?a:0,o=void 0!==o?o:Math.PI;for(var s=a+o,l=(e+1)*(r+1),c=new dt(new Float32Array(3*l),3),h=new dt(new Float32Array(3*l),3),f=new dt(new Float32Array(2*l),2),d=0,p=[],m=new u,g=0;g<=r;g++){for(var v=[],y=g/r,M=0;M<=e;M++){var w=M/e,x=-t*Math.cos(n+w*i)*Math.sin(a+y*o),b=t*Math.cos(a+y*o),T=t*Math.sin(n+w*i)*Math.sin(a+y*o);m.set(x,b,T).normalize(),c.setXYZ(d,x,b,T),h.setXYZ(d,m.x,m.y,m.z),f.setXY(d,w,1-y),v.push(d),d++}p.push(v)}for(var E=[],g=0;g<r;g++)for(var M=0;M<e;M++){var S=p[g][M+1],_=p[g][M],A=p[g+1][M],D=p[g+1][M+1];(0!==g||a>0)&&E.push(S,_,D),(g!==r-1||s<Math.PI)&&E.push(_,A,D)}this.setIndex(new(c.count>65535?wt:yt)(E,1)),this.addAttribute("position",c),this.addAttribute("normal",h),this.addAttribute("uv",f),this.boundingSphere=new tt(new u,t)}function Ke(t,e,r,n,i,a,o){St.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:r,phiStart:n,phiLength:i,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new Ze(t,e,r,n,i,a,o))}function Je(t,e,n,i,a,o){_t.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:a,thetaLength:o},t=t||20,e=e||50,a=void 0!==a?a:0,o=void 0!==o?o:2*Math.PI,n=void 0!==n?Math.max(3,n):8,i=void 0!==i?Math.max(1,i):1;var s,l,c,h=(n+1)*(i+1),f=n*i*2*3,d=new dt(new(f>65535?Uint32Array:Uint16Array)(f),1),p=new dt(new Float32Array(3*h),3),m=new dt(new Float32Array(3*h),3),g=new dt(new Float32Array(2*h),2),v=0,y=0,M=t,w=(e-t)/i,x=new u,b=new r;for(l=0;l<=i;l++){for(c=0;c<=n;c++)s=a+c/n*o,x.x=M*Math.cos(s),x.y=M*Math.sin(s),p.setXYZ(v,x.x,x.y,x.z),m.setXYZ(v,0,0,1),b.x=(x.x/e+1)/2,b.y=(x.y/e+1)/2,g.setXY(v,b.x,b.y),v++;M+=w}for(l=0;l<i;l++){var T=l*(n+1);for(c=0;c<n;c++){s=c+T;var E=s,S=s+n+1,_=s+n+2,A=s+1;d.setX(y,E),y++,d.setX(y,S),y++,d.setX(y,_),y++,d.setX(y,E),y++,d.setX(y,_),y++,d.setX(y,A),y++}}this.setIndex(d),this.addAttribute("position",p),this.addAttribute("normal",m),this.addAttribute("uv",g)}function $e(t,e,r,n,i,a){St.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:r,phiSegments:n,thetaStart:i,thetaLength:a},this.fromBufferGeometry(new Je(t,e,r,n,i,a))}function tr(t,e,r,n){St.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:r,heightSegments:n},this.fromBufferGeometry(new Nt(t,e,r,n))}function er(t,e,n,i){_t.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},e=Math.floor(e)||12,n=n||0,i=i||2*Math.PI,i=ns.clamp(i,0,2*Math.PI);var a,o,s,l=(e+1)*t.length,c=e*t.length*2*3,h=new dt(new(c>65535?Uint32Array:Uint16Array)(c),1),f=new dt(new Float32Array(3*l),3),d=new dt(new Float32Array(2*l),2),p=0,m=0,g=1/e,v=new u,y=new r;for(o=0;o<=e;o++){var M=n+o*g*i,w=Math.sin(M),x=Math.cos(M);for(s=0;s<=t.length-1;s++)v.x=t[s].x*w,v.y=t[s].y,v.z=t[s].x*x,f.setXYZ(p,v.x,v.y,v.z),y.x=o/e,y.y=s/(t.length-1),d.setXY(p,y.x,y.y),p++}for(o=0;o<e;o++)for(s=0;s<t.length-1;s++){a=s+o*t.length;var b=a,T=a+t.length,E=a+t.length+1,S=a+1;h.setX(m,b),m++,h.setX(m,T),m++,h.setX(m,S),m++,h.setX(m,T),m++,h.setX(m,E),m++,h.setX(m,S),m++}if(this.setIndex(h),this.addAttribute("position",f),this.addAttribute("uv",d),this.computeVertexNormals(),i===2*Math.PI){var _=this.attributes.normal.array,A=new u,D=new u,N=new u;for(a=e*t.length*3,o=0,s=0;o<t.length;o++,s+=3)A.x=_[s+0],A.y=_[s+1],A.z=_[s+2],D.x=_[a+s+0],D.y=_[a+s+1],D.z=_[a+s+2],N.addVectors(A,D).normalize(),_[s+0]=_[a+s+0]=N.x,_[s+1]=_[a+s+1]=N.y,_[s+2]=_[a+s+2]=N.z}}function rr(t,e,r,n){St.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:r,phiLength:n},this.fromBufferGeometry(new er(t,e,r,n)),this.mergeVertices()}function nr(t,e){function r(t){var r,s,l,c=n.length/3,h=t.extractPoints(e),f=h.shape,d=h.holes;if(!1===xs.isClockWise(f))for(f=f.reverse(),r=0,s=d.length;r<s;r++)l=d[r],!0===xs.isClockWise(l)&&(d[r]=l.reverse());var p=xs.triangulateShape(f,d);for(r=0,s=d.length;r<s;r++)l=d[r],f=f.concat(l);for(r=0,s=f.length;r<s;r++){var m=f[r];n.push(m.x,m.y,0),i.push(0,0,1),a.push(m.x,m.y)}for(r=0,s=p.length;r<s;r++){var g=p[r],v=g[0]+c,y=g[1]+c,M=g[2]+c;o.push(v,y,M),u+=3}}_t.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var n=[],i=[],a=[],o=[],s=0,u=0;if(!1===Array.isArray(t))r(t);else for(var l=0;l<t.length;l++)r(t[l]),this.addGroup(s,u,l),s+=u,u=0;this.setIndex(new(o.length>65535?wt:yt)(o,1)),this.addAttribute("position",new xt(n,3)),this.addAttribute("normal",new xt(i,3)),this.addAttribute("uv",new xt(a,2))}function ir(t,e){St.call(this),this.type="ShapeGeometry","object"==typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new nr(t,e)),this.mergeVertices()}function ar(t,e){function r(t,e){return t-e}_t.call(this),e=void 0!==e?e:1;var n,i=Math.cos(ns.DEG2RAD*e),a=[0,0],o={},s=["a","b","c"];t.isBufferGeometry?(n=new St,n.fromBufferGeometry(t)):n=t.clone(),n.mergeVertices(),n.computeFaceNormals();for(var u=n.vertices,l=n.faces,c=0,h=l.length;c<h;c++)for(var f=l[c],d=0;d<3;d++){a[0]=f[s[d]],a[1]=f[s[(d+1)%3]],a.sort(r);var p=a.toString();void 0===o[p]?o[p]={vert1:a[0],vert2:a[1],face1:c,face2:void 0}:o[p].face2=c}var m=[];for(var p in o){var g=o[p];if(void 0===g.face2||l[g.face1].normal.dot(l[g.face2].normal)<=i){var v=u[g.vert1];m.push(v.x),m.push(v.y),m.push(v.z),v=u[g.vert2],m.push(v.x),m.push(v.y),m.push(v.z)}}this.addAttribute("position",new xt(m,3))}function or(t,e,n,i,a,o,s,l){function c(n){var a,o,c,f=new r,d=new u,p=0,x=!0===n?t:e,E=!0===n?1:-1;for(o=M,a=1;a<=i;a++)g.setXYZ(M,0,b*E,0),v.setXYZ(M,0,E,0),f.x=.5,f.y=.5,y.setXY(M,f.x,f.y),M++;for(c=M,a=0;a<=i;a++){var S=a/i,_=S*l+s,A=Math.cos(_),D=Math.sin(_);d.x=x*D,d.y=b*E,d.z=x*A,g.setXYZ(M,d.x,d.y,d.z),v.setXYZ(M,0,E,0),f.x=.5*A+.5,f.y=.5*D*E+.5,y.setXY(M,f.x,f.y),M++}for(a=0;a<i;a++){var N=o+a,I=c+a;!0===n?(m.setX(w,I),w++,m.setX(w,I+1),w++,m.setX(w,N),w++):(m.setX(w,I+1),w++,m.setX(w,I),w++,m.setX(w,N),w++),p+=3}h.addGroup(T,p,!0===n?1:2),T+=p}_t.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:a,openEnded:o,thetaStart:s,thetaLength:l};var h=this;t=void 0!==t?t:20,e=void 0!==e?e:20,n=void 0!==n?n:100,i=Math.floor(i)||8,a=Math.floor(a)||1,o=void 0!==o&&o,s=void 0!==s?s:0,l=void 0!==l?l:2*Math.PI;var f=0;!1===o&&(t>0&&f++,e>0&&f++);var d=function(){var t=(i+1)*(a+1);return!1===o&&(t+=(i+1)*f+i*f),t}(),p=function(){var t=i*a*2*3;return!1===o&&(t+=i*f*3),t}(),m=new dt(new(p>65535?Uint32Array:Uint16Array)(p),1),g=new dt(new Float32Array(3*d),3),v=new dt(new Float32Array(3*d),3),y=new dt(new Float32Array(2*d),2),M=0,w=0,x=[],b=n/2,T=0;!function(){var r,o,c=new u,f=new u,d=0,p=(e-t)/n;for(o=0;o<=a;o++){var E=[],S=o/a,_=S*(e-t)+t;for(r=0;r<=i;r++){var A=r/i,D=A*l+s,N=Math.sin(D),I=Math.cos(D);f.x=_*N,f.y=-S*n+b,f.z=_*I,g.setXYZ(M,f.x,f.y,f.z),c.set(N,p,I).normalize(),v.setXYZ(M,c.x,c.y,c.z),y.setXY(M,A,1-S),E.push(M),M++}x.push(E)}for(r=0;r<i;r++)for(o=0;o<a;o++){var L=x[o][r],C=x[o+1][r],O=x[o+1][r+1],R=x[o][r+1];m.setX(w,L),w++,m.setX(w,C),w++,m.setX(w,R),w++,m.setX(w,C),w++,m.setX(w,O),w++,m.setX(w,R),w++,d+=6}h.addGroup(T,d,0),T+=d}(),!1===o&&(t>0&&c(!0),e>0&&c(!1)),this.setIndex(m),this.addAttribute("position",g),this.addAttribute("normal",v),this.addAttribute("uv",y)}function sr(t,e,r,n,i,a,o,s){St.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:r,radialSegments:n,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new or(t,e,r,n,i,a,o,s)),this.mergeVertices()}function ur(t,e,r,n,i,a,o){sr.call(this,0,t,e,r,n,i,a,o),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:r,heightSegments:n,openEnded:i,thetaStart:a,thetaLength:o}}function lr(t,e,r,n,i,a,o){or.call(this,0,t,e,r,n,i,a,o),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:r,heightSegments:n,openEnded:i,thetaStart:a,thetaLength:o}}function cr(t,e,r,n){_t.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:r,thetaLength:n},t=t||50,e=void 0!==e?Math.max(3,e):8,r=void 0!==r?r:0,n=void 0!==n?n:2*Math.PI;var i=e+2,a=new Float32Array(3*i),o=new Float32Array(3*i),s=new Float32Array(2*i);o[2]=1,s[0]=.5,s[1]=.5;for(var l=0,c=3,h=2;l<=e;l++,c+=3,h+=2){var f=r+l/e*n;a[c]=t*Math.cos(f),a[c+1]=t*Math.sin(f),o[c+2]=1,s[h]=(a[c]/t+1)/2,s[h+1]=(a[c+1]/t+1)/2}for(var d=[],c=1;c<=e;c++)d.push(c,c+1,0);this.setIndex(new dt(new Uint16Array(d),1)),this.addAttribute("position",new dt(a,3)),this.addAttribute("normal",new dt(o,3)),this.addAttribute("uv",new dt(s,2)),this.boundingSphere=new tt(new u,t)}function hr(t,e,r,n){St.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:r,thetaLength:n},this.fromBufferGeometry(new cr(t,e,r,n))}function fr(t,e,r,n,i,a){St.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:r,widthSegments:n,heightSegments:i,depthSegments:a},this.fromBufferGeometry(new Dt(t,e,r,n,i,a)),this.mergeVertices()}function dr(){K.call(this,{uniforms:cs.merge([ds.lights,{opacity:{value:1}}]),vertexShader:hs.shadow_vert,fragmentShader:hs.shadow_frag}),this.lights=!0,this.transparent=!0,Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}}})}function pr(t){K.call(this,t),this.type="RawShaderMaterial"}function mr(t){this.uuid=ns.generateUUID(),this.type="MultiMaterial",this.materials=Array.isArray(t)?t:[],this.visible=!0}function gr(t){Z.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new H(16777215),this.mapSlot=new It("map",0,!1,!1),this.reflectivity=.5,this.roughness=.5,this.roughnessMapSlot=new It("roughnessMap",0,!1,!1),this.metalness=.5,this.metalnessMapSlot=new It("metalnessMap",0,!1,!1),this.emissive=new H(0),this.emissiveIntensity=1,this.emissiveMapSlot=new It("emissiveMap",0,!1,!1),this.bumpMapSlot=new It("bumpMap",0,!1,!0),this.normalScale=new r(1,1),this.normalMapSlot=new It("normalMap",0,!1,!1),this.displacementMapSlot=new It("displacementMap",0,!1,!0),this.lightMapSlot=new It("lightMap",1,!1,!0),this.aoMapIntensity=1,this.aoMapSlot=new It("aoMap",1,!1,!0),this.alphaMapSlot=new It("alphaMap",0,!1,!1),this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function vr(t){gr.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.falloff=!1,this.falloffColor=new H(16777215),this.falloffMapSlot=new It("falloffMap",0,!1,!1),this.falloffOpacity=1,this.falloffAlphaMapSlot=new It("falloffAlphaMap",0,!1,!1),this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(t)}function yr(t){Z.call(this),this.type="MeshPhongMaterial",this.color=new H(16777215),this.specular=new H(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new H(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new r(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ga,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Mr(t){yr.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(t)}function wr(t){Z.call(this,t),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new r(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.clearColor=new H(.5,.5,1),this.clearAlpha=1,this.setValues(t)}function xr(t){Z.call(this),this.type="MeshLambertMaterial",this.color=new H(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new H(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ga,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function br(t){Z.call(this),this.type="MeshCubeMaterial",this.envMap=null,this.envMapIntensity=1,this.roughness=0,this.depthTest=!1,this.depthWrite=!1,this.side=oa,this.lights=!1,this.setValues(t)}function Tr(t){Z.call(this),this.type="LineDashedMaterial",this.color=new H(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.lights=!1,this.setValues(t)}function Er(t,e,r){var n=this,i=!1,a=0,o=0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=r,this.itemStart=function(t){o++,!1===i&&void 0!==n.onStart&&n.onStart(t,a,o),i=!0},this.itemEnd=function(t){a++,void 0!==n.onProgress&&n.onProgress(t,a,o),a===o&&(i=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(t){void 0!==n.onError&&n.onError(t)}}function Sr(t){this.manager=void 0!==t?t:Ss}function _r(t){this.manager=void 0!==t?t:Ss,this._parser=null}function Ar(t){this.manager=void 0!==t?t:Ss,this._parser=null}function Dr(t){this.manager=void 0!==t?t:Ss}function Nr(t){this.manager=void 0!==t?t:Ss}function Ir(t){this.manager=void 0!==t?t:Ss}function Lr(t,e){ut.call(this),this.type="Light",this.color=new H(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function Cr(t,e,r){Lr.call(this,t,r),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(ut.DefaultUp),this.updateMatrix(),this.groundColor=new H(e)}function Or(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new r(512,512),this.map=null,this.matrix=new l}function Rr(){Or.call(this,new Ct)}function zr(t,e,r,n,i,a){Lr.call(this,t,e),this.type="SpotLight",this.position.copy(ut.DefaultUp),this.updateMatrix(),this.target=new ut,this.autoShadow=!1,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==r?r:0,this.angle=void 0!==n?n:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==a?a:1,this.shadow=new Rr}function jr(t,e,r,n){Lr.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==r?r:0,this.decay=void 0!==n?n:1,this.shadow=new Or(new Ct(90,1,.5,500))}function Pr(){Or.call(this,new Ot),this.spreadAngle=0}function Ur(t,e){Lr.call(this,t,e),this.type="DirectionalLight",this.position.copy(ut.DefaultUp),this.updateMatrix(),this.target=new ut,this.autoShadow=!1,this.shadow=new Pr}function Br(t,e){Lr.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function Vr(t,e,r,n){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new e.constructor(r),this.sampleValues=e,this.valueSize=r}function Fr(t,e,r,n){Vr.call(this,t,e,r,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function kr(t,e,r,n){Vr.call(this,t,e,r,n)}function Gr(t,e,r,n){Vr.call(this,t,e,r,n)}function Yr(t,e,r,n){if(void 0===t)throw new Error("track name is undefined");if(void 0===e||0===e.length)throw new Error("no keyframes in track named "+t);this.name=t,this.times=_s.convertArray(e,this.TimeBufferType),this.values=_s.convertArray(r,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation),this.validate(),this.optimize()}function Hr(t,e,r,n){Yr.call(this,t,e,r,n)}function Qr(t,e,r,n){Vr.call(this,t,e,r,n)}function Wr(t,e,r,n){Yr.call(this,t,e,r,n)}function Xr(t,e,r,n){Yr.call(this,t,e,r,n)}function qr(t,e,r,n){Yr.call(this,t,e,r,n)}function Zr(t,e,r){Yr.call(this,t,e,r)}function Kr(t,e,r,n){Yr.call(this,t,e,r,n)}function Jr(t,e,r,n){Yr.apply(this,arguments)}function $r(t,e,r){this.name=t,this.tracks=r,this.duration=void 0!==e?e:-1,this.uuid=ns.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function tn(t){this.manager=void 0!==t?t:Ss,this.textures={}}function en(t){this.manager=void 0!==t?t:Ss}function rn(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function nn(t){"boolean"==typeof t&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),t=void 0),this.manager=void 0!==t?t:Ss,this.withCredentials=!1}function an(t){this.manager=void 0!==t?t:Ss,this.texturePath=""}function on(t,e,r,n,i){var a=.5*(n-e),o=.5*(i-r),s=t*t;return(2*r-2*n+a+o)*(t*s)+(-3*r+3*n-2*a-o)*s+a*t+r}function sn(t,e){var r=1-t;return r*r*e}function un(t,e){return 2*(1-t)*t*e}function ln(t,e){return t*t*e}function cn(t,e,r,n){return sn(t,e)+un(t,r)+ln(t,n)}function hn(t,e){var r=1-t;return r*r*r*e}function fn(t,e){var r=1-t;return 3*r*r*t*e}function dn(t,e){return 3*(1-t)*t*t*e}function pn(t,e){return t*t*t*e}function mn(t,e,r,n,i){return hn(t,e)+fn(t,r)+dn(t,n)+pn(t,i)}function gn(){}function vn(t,e){this.v1=t,this.v2=e}function yn(){this.curves=[],this.autoClose=!1}function Mn(t,e,r,n,i,a,o,s){this.aX=t,this.aY=e,this.xRadius=r,this.yRadius=n,this.aStartAngle=i,this.aEndAngle=a,this.aClockwise=o,this.aRotation=s||0}function wn(t){this.points=void 0===t?[]:t}function xn(t,e,r,n){this.v0=t,this.v1=e,this.v2=r,this.v3=n}function bn(t,e,r){this.v0=t,this.v1=e,this.v2=r}function Tn(t){yn.call(this),this.currentPoint=new r,t&&this.fromPoints(t)}function En(){Tn.apply(this,arguments),this.holes=[]}function Sn(){this.subPaths=[],this.currentPath=null}function _n(t){this.data=t}function An(t){this.manager=void 0!==t?t:Ss}function Dn(t){this.manager=void 0!==t?t:Ss}function Nn(t,e,r,n){Lr.call(this,t,e),this.type="RectAreaLight",this.position.set(0,1,0),this.updateMatrix(),this.width=void 0!==r?r:10,this.height=void 0!==n?n:10}function In(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ct,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ct,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Ln(t,e,r){ut.call(this),this.type="CubeCamera";var n=new Ct(90,1,t,e);n.up.set(0,-1,0),n.lookAt(new u(1,0,0)),this.add(n);var i=new Ct(90,1,t,e);i.up.set(0,-1,0),i.lookAt(new u(-1,0,0)),this.add(i);var a=new Ct(90,1,t,e);a.up.set(0,0,1),a.lookAt(new u(0,1,0)),this.add(a);var s=new Ct(90,1,t,e);s.up.set(0,0,-1),s.lookAt(new u(0,-1,0)),this.add(s);var l=new Ct(90,1,t,e);l.up.set(0,-1,0),l.lookAt(new u(0,0,1)),this.add(l);var c=new Ct(90,1,t,e);c.up.set(0,-1,0),c.lookAt(new u(0,0,-1)),this.add(c);var h={format:Ao,magFilter:co,minFilter:co,name:"cubeCamera"};this.renderTarget=new o(r,r,h),this.updateCubeMap=function(t,e){null===this.parent&&this.updateMatrixWorld();var r=this.renderTarget,o=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,r.activeCubeFace=0,t.render(e,n,r),r.activeCubeFace=1,t.render(e,i,r),r.activeCubeFace=2,t.render(e,a,r),r.activeCubeFace=3,t.render(e,s,r),r.activeCubeFace=4,t.render(e,l,r),r.texture.generateMipmaps=o,r.activeCubeFace=5,t.render(e,c,r),t.setRenderTarget(null)}}function Cn(){ut.call(this),this.type="AudioListener",this.context=Is.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function On(t){ut.call(this),this.type="Audio",this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Rn(t){On.call(this,t),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function zn(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function jn(t,e,r){this.binding=t,this.valueSize=r;var n,i=Float64Array;switch(e){case"quaternion":n=this._slerp;break;case"string":case"bool":i=Array,n=this._select;break;default:n=this._lerp}this.buffer=new i(4*r),this._mixBufferRegion=n,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function Pn(t,e,r){this.path=e,this.parsedPath=r||Pn.parseTrackName(e),this.node=Pn.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function Un(t){this.uuid=ns.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var r=0,n=arguments.length;r!==n;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}function Bn(t,e,r){this._mixer=t,this._clip=e,this._localRoot=r||null;for(var n=e.tracks,i=n.length,a=new Array(i),o={endingStart:Yo,endingEnd:Yo},s=0;s!==i;++s){var u=n[s].createInterpolant(null);a[s]=u,u.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Go,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Vn(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Fn(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}function kn(){_t.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Gn(t,e,r,n){this.uuid=ns.generateUUID(),this.data=t,this.itemSize=e,this.offset=r,this.normalized=!0===n}function Yn(t,e){this.uuid=ns.generateUUID(),this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function Hn(t,e,r){Yn.call(this,t,e),this.meshPerAttribute=r||1}function Qn(t,e,r){dt.call(this,t,e),this.meshPerAttribute=r||1}function Wn(t,e,r,n){this.ray=new at(t,e),this.near=r||0,this.far=n||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Xn(t,e){return t.distance-e.distance}function qn(t,e,r,n){if(!1!==t.visible&&(t.raycast(e,r),!0===n))for(var i=t.children,a=0,o=i.length;a<o;a++)qn(i[a],e,r,!0)}function Zn(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Kn(t,e,r){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==r?r:0,this}function Jn(t,e,r){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==r?r:0,this}function $n(t,e){At.call(this,t,e),this.animationsMap={},this.animationsList=[];var r=this.geometry.morphTargets.length,n=r-1,i=r/1;this.createAnimation("__default",0,n,i),this.setAnimationWeight("__default",1)}function ti(t){ut.call(this),this.material=t,this.render=function(t){}}function ei(t,e,r,n){this.object=t,this.size=void 0!==e?e:1;var i=void 0!==r?r:16711680,a=void 0!==n?n:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=3*s.faces.length:s&&s.isBufferGeometry&&(o=s.attributes.normal.count);var u=new _t,l=new xt(2*o*3,3);u.addAttribute("position",l),xe.call(this,u,new Me({color:i,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}function ri(t){ut.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1;for(var e=new _t,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],n=0,i=1;n<32;n++,i++){var a=n/32*Math.PI*2,o=i/32*Math.PI*2;r.push(Math.cos(a),Math.sin(a),1,Math.cos(o),Math.sin(o),1)}e.addAttribute("position",new xt(r,3));var s=new Me({fog:!1});this.cone=new xe(e,s),this.add(this.cone),this.update()}function ni(t){this.bones=this.getBoneList(t);for(var e=new _t,r=[],n=[],i=new H(0,0,1),a=new H(0,1,0),o=0;o<this.bones.length;o++){var s=this.bones[o];s.parent&&s.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),n.push(i.r,i.g,i.b),n.push(a.r,a.g,a.b))}e.addAttribute("position",new xt(r,3)),e.addAttribute("color",new xt(n,3));var u=new Me({vertexColors:fa,depthTest:!1,depthWrite:!1,transparent:!0});xe.call(this,e,u),this.root=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function ii(t,e){this.light=t,this.light.updateMatrixWorld();var r=new Ze(e,4,2),n=new ft({wireframe:!0,fog:!1});n.color.copy(this.light.color).multiplyScalar(this.light.intensity),At.call(this,r,n),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1}function ai(t){ut.call(this),this.light=t,this.light.updateMatrixWorld();var e=new ft({color:t.color,fog:!1}),r=new ft({color:t.color,fog:!1,wireframe:!0}),n=new _t;n.addAttribute("position",new dt(new Float32Array(18),3)),this.add(new At(n,e)),this.add(new At(n,r)),this.update()}function oi(t,e){ut.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1;var r=new ze(e);r.rotateY(.5*Math.PI);var n=new ft({vertexColors:fa,wireframe:!0}),i=r.getAttribute("position"),a=new Float32Array(3*i.count);r.addAttribute("color",new dt(a,3)),this.add(new At(r,n)),this.update()}function si(t,e,r,n){t=t||10,e=e||10,r=new H(void 0!==r?r:4473924),n=new H(void 0!==n?n:8947848);for(var i=e/2,a=2*t/e,o=[],s=[],u=0,l=0,c=-t;u<=e;u++,c+=a){o.push(-t,0,c,t,0,c),o.push(c,0,-t,c,0,t);var h=u===i?r:n;h.toArray(s,l),l+=3,h.toArray(s,l),l+=3,h.toArray(s,l),l+=3,h.toArray(s,l),l+=3}var f=new _t;f.addAttribute("position",new xt(o,3)),f.addAttribute("color",new xt(s,3));var d=new Me({vertexColors:fa});xe.call(this,f,d)}function ui(t,e,r,n,i,a){t=t||10,e=e||16,r=r||8,n=n||64,i=new H(void 0!==i?i:4473924),a=new H(void 0!==a?a:8947848);var o,s,u,l,c,h,f,d=[],p=[];for(l=0;l<=e;l++)u=l/e*(2*Math.PI),o=Math.sin(u)*t,s=Math.cos(u)*t,d.push(0,0,0),d.push(o,0,s),f=1&l?i:a,p.push(f.r,f.g,f.b),p.push(f.r,f.g,f.b);for(l=0;l<=r;l++)for(f=1&l?i:a,h=t-t/r*l,c=0;c<n;c++)u=c/n*(2*Math.PI),o=Math.sin(u)*h,s=Math.cos(u)*h,d.push(o,0,s),p.push(f.r,f.g,f.b),u=(c+1)/n*(2*Math.PI),o=Math.sin(u)*h,s=Math.cos(u)*h,d.push(o,0,s),p.push(f.r,f.g,f.b);var m=new _t;m.addAttribute("position",new xt(d,3)),m.addAttribute("color",new xt(p,3));var g=new Me({vertexColors:fa});xe.call(this,m,g)}function li(t,e,r,n){this.object=t,this.size=void 0!==e?e:1;var i=void 0!==r?r:16776960,a=void 0!==n?n:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var u=new _t,l=new xt(2*o*3,3);u.addAttribute("position",l),xe.call(this,u,new Me({color:i,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}function ci(t,e){ut.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,void 0===e&&(e=1);var r=new _t;r.addAttribute("position",new xt([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var n=new Me({fog:!1});this.add(new we(r,n)),r=new _t,r.addAttribute("position",new xt([0,0,0,0,0,1],3)),this.add(new we(r,n)),this.update()}function hi(t){function e(t,e,n){r(t,n),r(e,n)}function r(t,e){a.push(0,0,0),o.push(e.r,e.g,e.b),void 0===s[t]&&(s[t]=[]),s[t].push(a.length/3-1)}var n=new _t,i=new Me({color:16777215,vertexColors:ha}),a=[],o=[],s={},u=new H(16755200),l=new H(16711680),c=new H(43775),h=new H(16777215),f=new H(3355443);e("n1","n2",u),e("n2","n4",u),e("n4","n3",u),e("n3","n1",u),e("f1","f2",u),e("f2","f4",u),e("f4","f3",u),e("f3","f1",u),e("n1","f1",u),e("n2","f2",u),e("n3","f3",u),e("n4","f4",u),e("p","n1",l),e("p","n2",l),e("p","n3",l),e("p","n4",l),e("u1","u2",c),e("u2","u3",c),e("u3","u1",c),e("c","t",h),e("p","c",f),e("cn1","cn2",f),e("cn3","cn4",f),e("cf1","cf2",f),e("cf3","cf4",f),n.addAttribute("position",new xt(a,3)),n.addAttribute("color",new xt(o,3)),xe.call(this,n,i),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}function fi(t,e){void 0===e&&(e=16776960);var r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24),i=new _t;i.setIndex(new dt(r,1)),i.addAttribute("position",new dt(n,3)),xe.call(this,i,new Me({color:e})),void 0!==t&&this.update(t)}function di(t,e,r,n,i,a){ut.call(this),void 0===n&&(n=16776960),void 0===r&&(r=1),void 0===i&&(i=.2*r),void 0===a&&(a=.2*i),this.position.copy(e),this.line=new we(Ls,new Me({color:n})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new At(Cs,new ft({color:n})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(r,i,a)}function pi(t){t=t||1;var e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],n=new _t;n.addAttribute("position",new xt(e,3)),n.addAttribute("color",new xt(r,3));var i=new Me({vertexColors:fa});xe.call(this,n,i)}function mi(){function t(t,a,o,s){e=t,r=o,n=-3*t+3*a-2*o-s,i=2*t-2*a+o+s}var e=0,r=0,n=0,i=0;return{initCatmullRom:function(e,r,n,i,a){t(r,n,a*(n-e),a*(i-r))},initNonuniformCatmullRom:function(e,r,n,i,a,o,s){var u=(r-e)/a-(n-e)/(a+o)+(n-r)/o,l=(n-r)/o-(i-r)/(o+s)+(i-n)/s;u*=o,l*=o,t(r,n,u,l)},calc:function(t){var a=t*t;return e+r*t+n*a+i*(a*t)}}}function gi(t){this.points=t||[],this.closed=!1}function vi(t,e,r,n){this.v0=t,this.v1=e,this.v2=r,this.v3=n}function yi(t,e,r){this.v0=t,this.v1=e,this.v2=r}function Mi(t,e){this.v1=t,this.v2=e}function wi(t,e,r,n,i,a){Mn.call(this,t,e,r,r,n,i,a)}function xi(t,e,r,n,i,a,o){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new ht(t,e,r,i,a,o)}function bi(t){return console.warn("THREE.MeshFaceMaterial has been renamed to THREE.MultiMaterial."),new mr(t)}function Ti(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Te(t,e)}function Ei(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new pe(t)}function Si(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Te(t,e)}function _i(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new be(t)}function Ai(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new be(t)}function Di(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new be(t)}function Ni(t,e,r){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new u(t,e,r)}function Ii(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new dt(t,e).setDynamic(!0)}function Li(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new pt(t,e)}function Ci(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new mt(t,e)}function Oi(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new gt(t,e)}function Ri(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new vt(t,e)}function zi(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new yt(t,e)}function ji(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Mt(t,e)}function Pi(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new wt(t,e)}function Ui(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new xt(t,e)}function Bi(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new bt(t,e)}function Vi(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),gi.call(this,t),this.type="catmullrom",this.closed=!0}function Fi(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),gi.call(this,t),this.type="catmullrom"}function ki(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),gi.call(this,t),this.type="catmullrom"}function Gi(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new fi(t,e)}function Yi(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new xe(new ar(t.geometry),new Me({color:void 0!==e?e:16777215}))}function Hi(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new xe(new Ne(t.geometry),new Me({color:void 0!==e?e:16777215}))}function Qi(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Sr(t)}function Wi(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Ar(t)}function Xi(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(t,e){console.warn("THREE.Projector: .projectVector() is now vector.project()."),t.project(e)},this.unprojectVector=function(t,e){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),t.unproject(e)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function qi(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&function(){Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),r=1;r<arguments.length;r++){var n=arguments[r];if(void 0!==n&&null!==n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}}(),e.prototype={addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var r=this._listeners;void 0===r[t]&&(r[t]=[]),-1===r[t].indexOf(e)&&r[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var r=this._listeners;return void 0!==r[t]&&-1!==r[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var r=this._listeners,n=r[t];if(void 0!==n){var i=n.indexOf(e);-1!==i&&n.splice(i,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners,r=e[t.type];if(void 0!==r){t.target=this;var n=[],i=0,a=r.length;for(i=0;i<a;i++)n[i]=r[i];for(i=0;i<a;i++)n[i].call(this,t)}}}};var Zi="84dev",Ki={LEFT:0,MIDDLE:1,RIGHT:2},Ji=0,$i=1,ta=2,ea=0,ra=1,na=2,ia=3,aa=0,oa=1,sa=2,ua=1,la=2,ca=0,ha=1,fa=2,da=0,pa=1,ma=2,ga=3,va=4,ya=5,Ma=100,wa=101,xa=102,ba=103,Ta=104,Ea=200,Sa=201,_a=202,Aa=203,Da=204,Na=205,Ia=206,La=207,Ca=208,Oa=209,Ra=210,za=0,ja=1,Pa=2,Ua=3,Ba=4,Va=5,Fa=6,ka=7,Ga=0,Ya=1,Ha=2,Qa=0,Wa=1,Xa=2,qa=3,Za=4,Ka=301,Ja=302,$a=303,to=304,eo=305,ro=306,no=307,io=1e3,ao=1001,oo=1002,so=1003,uo=1004,lo=1005,co=1006,ho=1007,fo=1008,po=1009,mo=1010,go=1011,vo=1012,yo=1013,Mo=1014,wo=1015,xo=1016,bo=1017,To=1018,Eo=1019,So=1020,_o=1021,Ao=1022,Do=1023,No=1024,Io=1025,Lo=Do,Co=1026,Oo=1027,Ro=2001,zo=2002,jo=2003,Po=2004,Uo=2100,Bo=2101,Vo=2102,Fo=2103,ko=2151,Go=2201,Yo=2400,Ho=0,Qo=1,Wo=2,Xo=3e3,qo=3001,Zo=3007,Ko=3002,Jo=3004,$o=3005,ts=3006,es=3200,rs=3201,ns={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=new Array(36),n=0;return function(){for(var i=0;i<36;i++)8===i||13===i||18===i||23===i?r[i]="-":14===i?r[i]="4":(n<=2&&(n=33554432+16777216*Math.random()|0),t=15&n,n>>=4,r[i]=e[19===i?3&t|8:t]);return r.join("")}}(),clamp:function(t,e,r){return Math.max(e,Math.min(r,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,r,n,i){return n+(t-e)*(i-n)/(r-e)},lerp:function(t,e,r){return(1-r)*t+r*e},smoothstep:function(t,e,r){return t<=e?0:t>=r?1:(t=(t-e)/(r-e))*t*(3-2*t)},smootherstep:function(t,e,r){return t<=e?0:t>=r?1:(t=(t-e)/(r-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*ns.DEG2RAD},radToDeg:function(t){return t*ns.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},nearestPowerOfTwo:function(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))},nextPowerOfTwo:function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}};r.prototype={constructor:r,isVector2:!0,get width(){return this.x},set width(t){this.x=t},get height(){return this.y},set height(t){this.y=t},set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(){var t,e;return function(n,i){return void 0===t&&(t=new r,e=new r),t.set(n,n),e.set(i,i),this.clamp(t,e)}}(),clampLength:function(t,e){var r=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,r))/r)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,r=this.y-t.y;return e*e+r*r},distanceToManhattan:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,r){return this.subVectors(e,t).multiplyScalar(r).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,r){return void 0!==r&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var r=Math.cos(e),n=Math.sin(e),i=this.x-t.x,a=this.y-t.y;return this.x=i*r-a*n+t.x,this.y=i*n+a*r+t.y,this}};var is=0;n.DEFAULT_IMAGE=void 0,n.DEFAULT_MAPPING=300,n.prototype={constructor:n,isTexture:!0,set needsUpdate(t){!0===t&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name+" (Copy)",this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){if(void 0!==t.textures[this.uuid])return t.textures[this.uuid];var e={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var r=this.image;void 0===r.uuid&&(r.uuid=ns.generateUUID()),void 0===t.images[r.uuid]&&(t.images[r.uuid]={uuid:r.uuid,url:function(t){var e;return void 0!==t.toDataURL?e=t:(e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0,t.width,t.height)),e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}(r)}),e.image=r.uuid}return t.textures[this.uuid]=e,e},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(300===this.mapping){if(t.multiply(this.repeat),t.add(this.offset),t.x<0||t.x>1)switch(this.wrapS){case io:t.x=t.x-Math.floor(t.x);break;case ao:t.x=t.x<0?0:1;break;case oo:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case io:t.y=t.y-Math.floor(t.y);break;case ao:t.y=t.y<0?0:1;break;case oo:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}this.flipY&&(t.y=1-t.y)}}},Object.assign(n.prototype,e.prototype),i.prototype={constructor:i,isVector4:!0,set:function(t,e,r,n){return this.x=t,this.y=e,this.z=r,this.w=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t,this.w*=t):(this.x=0,this.y=0,this.z=0,this.w=0),this},applyMatrix4:function(t){var e=this.x,r=this.y,n=this.z,i=this.w,a=t.elements;return this.x=a[0]*e+a[4]*r+a[8]*n+a[12]*i,this.y=a[1]*e+a[5]*r+a[9]*n+a[13]*i,this.z=a[2]*e+a[6]*r+a[10]*n+a[14]*i,this.w=a[3]*e+a[7]*r+a[11]*n+a[15]*i,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,r,n,i,a=t.elements,o=a[0],s=a[4],u=a[8],l=a[1],c=a[5],h=a[9],f=a[2],d=a[6],p=a[10];if(Math.abs(s-l)<.01&&Math.abs(u-f)<.01&&Math.abs(h-d)<.01){if(Math.abs(s+l)<.1&&Math.abs(u+f)<.1&&Math.abs(h+d)<.1&&Math.abs(o+c+p-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var m=(o+1)/2,g=(c+1)/2,v=(p+1)/2,y=(s+l)/4,M=(u+f)/4,w=(h+d)/4;return m>g&&m>v?m<.01?(r=0,n=.707106781,i=.707106781):(r=Math.sqrt(m),n=y/r,i=M/r):g>v?g<.01?(r=.707106781,n=0,i=.707106781):(n=Math.sqrt(g),r=y/n,i=w/n):v<.01?(r=.707106781,n=.707106781,i=0):(i=Math.sqrt(v),r=M/i,n=w/i),this.set(r,n,i,e),this}var x=Math.sqrt((d-h)*(d-h)+(u-f)*(u-f)+(l-s)*(l-s));return Math.abs(x)<.001&&(x=1),this.x=(d-h)/x,this.y=(u-f)/x,this.z=(l-s)/x,this.w=Math.acos((o+c+p-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(){var t,e;return function(r,n){return void 0===t&&(t=new i,e=new i),t.set(r,r,r,r),e.set(n,n,n,n),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,r){return this.subVectors(e,t).multiplyScalar(r).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,r){return void 0!==r&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}},a.prototype={constructor:a,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(a.prototype,e.prototype),o.prototype=Object.create(a.prototype),o.prototype.constructor=o,o.prototype.isWebGLRenderTargetCube=!0,s.prototype={constructor:s,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get w(){return this._w},set w(t){this._w=t,this.onChangeCallback()},set:function(t,e,r,n){return this._x=t,this._y=e,this._z=r,this._w=n,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(!1===(t&&t.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var r=Math.cos(t._x/2),n=Math.cos(t._y/2),i=Math.cos(t._z/2),a=Math.sin(t._x/2),o=Math.sin(t._y/2),s=Math.sin(t._z/2),u=t.order;return"XYZ"===u?(this._x=a*n*i+r*o*s,this._y=r*o*i-a*n*s,this._z=r*n*s+a*o*i,this._w=r*n*i-a*o*s):"YXZ"===u?(this._x=a*n*i+r*o*s,this._y=r*o*i-a*n*s,this._z=r*n*s-a*o*i,this._w=r*n*i+a*o*s):"ZXY"===u?(this._x=a*n*i-r*o*s,this._y=r*o*i+a*n*s,this._z=r*n*s+a*o*i,this._w=r*n*i-a*o*s):"ZYX"===u?(this._x=a*n*i-r*o*s,this._y=r*o*i+a*n*s,this._z=r*n*s-a*o*i,this._w=r*n*i+a*o*s):"YZX"===u?(this._x=a*n*i+r*o*s,this._y=r*o*i+a*n*s,this._z=r*n*s-a*o*i,this._w=r*n*i-a*o*s):"XZY"===u&&(this._x=a*n*i-r*o*s,this._y=r*o*i-a*n*s,this._z=r*n*s+a*o*i,this._w=r*n*i+a*o*s),!1!==e&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var r=e/2,n=Math.sin(r);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(r),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e,r=t.elements,n=r[0],i=r[4],a=r[8],o=r[1],s=r[5],u=r[9],l=r[2],c=r[6],h=r[10],f=n+s+h;return f>0?(e=.5/Math.sqrt(f+1),this._w=.25/e,this._x=(c-u)*e,this._y=(a-l)*e,this._z=(o-i)*e):n>s&&n>h?(e=2*Math.sqrt(1+n-s-h),this._w=(c-u)/e,this._x=.25*e,this._y=(i+o)/e,this._z=(a+l)/e):s>h?(e=2*Math.sqrt(1+s-n-h),this._w=(a-l)/e,this._x=(i+o)/e,this._y=.25*e,this._z=(u+c)/e):(e=2*Math.sqrt(1+h-n-s),this._w=(o-i)/e,this._x=(a+l)/e,this._y=(u+c)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,e;return function(r,n){return void 0===t&&(t=new u),e=r.dot(n)+1,e<1e-6?(e=0,Math.abs(r.x)>Math.abs(r.z)?t.set(-r.y,r.x,0):t.set(0,-r.z,r.y)):t.crossVectors(r,n),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var r=t._x,n=t._y,i=t._z,a=t._w,o=e._x,s=e._y,u=e._z,l=e._w;return this._x=r*l+a*o+n*u-i*s,this._y=n*l+a*s+i*o-r*u,this._z=i*l+a*u+r*s-n*o,this._w=a*l-r*o-n*s-i*u,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var r=this._x,n=this._y,i=this._z,a=this._w,o=a*t._w+r*t._x+n*t._y+i*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=a,this._x=r,this._y=n,this._z=i,this;var s=Math.sqrt(1-o*o);if(Math.abs(s)<.001)return this._w=.5*(a+this._w),this._x=.5*(r+this._x),this._y=.5*(n+this._y),this._z=.5*(i+this._z),this;var u=Math.atan2(s,o),l=Math.sin((1-e)*u)/s,c=Math.sin(e*u)/s;return this._w=a*l+this._w*c,this._x=r*l+this._x*c,this._y=n*l+this._y*c,this._z=i*l+this._z*c,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}},Object.assign(s,{slerp:function(t,e,r,n){return r.copy(t).slerp(e,n)},slerpFlat:function(t,e,r,n,i,a,o){var s=r[n+0],u=r[n+1],l=r[n+2],c=r[n+3],h=i[a+0],f=i[a+1],d=i[a+2],p=i[a+3];if(c!==p||s!==h||u!==f||l!==d){var m=1-o,g=s*h+u*f+l*d+c*p,v=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){var M=Math.sqrt(y),w=Math.atan2(M,g*v);m=Math.sin(m*w)/M,o=Math.sin(o*w)/M}var x=o*v;if(s=s*m+h*x,u=u*m+f*x,l=l*m+d*x,c=c*m+p*x,m===1-o){var b=1/Math.sqrt(s*s+u*u+l*l+c*c);s*=b,u*=b,l*=b,c*=b}}t[e]=s,t[e+1]=u,t[e+2]=l,t[e+3]=c}}),u.prototype={constructor:u,isVector3:!0,set:function(t,e,r){return this.x=t,this.y=e,this.z=r,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(){var t;return function(e){return!1===(e&&e.isEuler)&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),void 0===t&&(t=new s),this.applyQuaternion(t.setFromEuler(e))}}(),applyAxisAngle:function(){var t;return function(e,r){return void 0===t&&(t=new s),this.applyQuaternion(t.setFromAxisAngle(e,r))}}(),applyMatrix3:function(t){var e=this.x,r=this.y,n=this.z,i=t.elements;return this.x=i[0]*e+i[3]*r+i[6]*n,this.y=i[1]*e+i[4]*r+i[7]*n,this.z=i[2]*e+i[5]*r+i[8]*n,this},applyMatrix4:function(t){var e=this.x,r=this.y,n=this.z,i=t.elements;this.x=i[0]*e+i[4]*r+i[8]*n+i[12],this.y=i[1]*e+i[5]*r+i[9]*n+i[13],this.z=i[2]*e+i[6]*r+i[10]*n+i[14];var a=i[3]*e+i[7]*r+i[11]*n+i[15];return this.divideScalar(a)},applyQuaternion:function(t){var e=this.x,r=this.y,n=this.z,i=t.x,a=t.y,o=t.z,s=t.w,u=s*e+a*n-o*r,l=s*r+o*e-i*n,c=s*n+i*r-a*e,h=-i*e-a*r-o*n;return this.x=u*s+h*-i+l*-o-c*-a,this.y=l*s+h*-a+c*-i-u*-o,this.z=c*s+h*-o+u*-a-l*-i,this},project:function(){var t;return function(e){return void 0===t&&(t=new l),t.multiplyMatrices(e.projectionMatrix,t.getInverse(e.matrixWorld)),this.applyMatrix4(t)}}(),unproject:function(){var t;return function(e){return void 0===t&&(t=new l),t.multiplyMatrices(e.matrixWorld,t.getInverse(e.projectionMatrix)),this.applyMatrix4(t)}}(),transformDirection:function(t){var e=this.x,r=this.y,n=this.z,i=t.elements;return this.x=i[0]*e+i[4]*r+i[8]*n,this.y=i[1]*e+i[5]*r+i[9]*n,this.z=i[2]*e+i[6]*r+i[10]*n,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(){var t,e;return function(r,n){return void 0===t&&(t=new u,e=new u),t.set(r,r,r),e.set(n,n,n),this.clamp(t,e)}}(),clampLength:function(t,e){var r=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,r))/r)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,r){return this.subVectors(e,t).multiplyScalar(r).add(t)},cross:function(t,e){if(void 0!==e)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e);var r=this.x,n=this.y,i=this.z;return this.x=n*t.z-i*t.y,this.y=i*t.x-r*t.z,this.z=r*t.y-n*t.x,this},crossVectors:function(t,e){var r=t.x,n=t.y,i=t.z,a=e.x,o=e.y,s=e.z;return this.x=n*s-i*o,this.y=i*a-r*s,this.z=r*o-n*a,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(){var t;return function(e){return void 0===t&&(t=new u),t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t;return function(e){return void 0===t&&(t=new u),this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(ns.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,r=this.y-t.y,n=this.z-t.z;return e*e+r*r+n*n},distanceToManhattan:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){var e=Math.sin(t.phi)*t.radius;return this.x=e*Math.sin(t.theta),this.y=Math.cos(t.phi)*t.radius,this.z=e*Math.cos(t.theta),this},setFromCylindrical:function(t){return this.x=t.radius*Math.sin(t.theta),this.y=t.y,this.z=t.radius*Math.cos(t.theta),this},setFromMatrixPosition:function(t){return this.setFromMatrixColumn(t,3)},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),r=this.setFromMatrixColumn(t,1).length(),n=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=r,this.z=n,this},setFromMatrixColumn:function(t,e){if("number"==typeof t){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var r=t;t=e,e=r}return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,r){return void 0!==r&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}},l.prototype={constructor:l,isMatrix4:!0,set:function(t,e,r,n,i,a,o,s,u,l,c,h,f,d,p,m){var g=this.elements;return g[0]=t,g[4]=e,g[8]=r,g[12]=n,g[1]=i,g[5]=a,g[9]=o,g[13]=s,g[2]=u,g[6]=l,g[10]=c,g[14]=h,g[3]=f,g[7]=d,g[11]=p,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new l).fromArray(this.elements)},copy:function(t){return this.elements.set(t.elements),this},copyPosition:function(t){var e=this.elements,r=t.elements;return e[12]=r[12],e[13]=r[13],e[14]=r[14],this},extractBasis:function(t,e,r){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,r){return this.set(t.x,e.x,r.x,0,t.y,e.y,r.y,0,t.z,e.z,r.z,0,0,0,0,1),this},extractRotation:function(){var t;return function(e){void 0===t&&(t=new u);var r=this.elements,n=e.elements,i=1/t.setFromMatrixColumn(e,0).length(),a=1/t.setFromMatrixColumn(e,1).length(),o=1/t.setFromMatrixColumn(e,2).length();return r[0]=n[0]*i,r[1]=n[1]*i,r[2]=n[2]*i,r[4]=n[4]*a,r[5]=n[5]*a,r[6]=n[6]*a,r[8]=n[8]*o,r[9]=n[9]*o,r[10]=n[10]*o,this}}(),makeRotationFromEuler:function(t){!1===(t&&t.isEuler)&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,r=t.x,n=t.y,i=t.z,a=Math.cos(r),o=Math.sin(r),s=Math.cos(n),u=Math.sin(n),l=Math.cos(i),c=Math.sin(i);if("XYZ"===t.order){var h=a*l,f=a*c,d=o*l,p=o*c;e[0]=s*l,e[4]=-s*c,e[8]=u,e[1]=f+d*u,e[5]=h-p*u,e[9]=-o*s,e[2]=p-h*u,e[6]=d+f*u,e[10]=a*s}else if("YXZ"===t.order){var m=s*l,g=s*c,v=u*l,y=u*c;e[0]=m+y*o,e[4]=v*o-g,e[8]=a*u,e[1]=a*c,e[5]=a*l,e[9]=-o,e[2]=g*o-v,e[6]=y+m*o,e[10]=a*s}else if("ZXY"===t.order){var m=s*l,g=s*c,v=u*l,y=u*c;e[0]=m-y*o,e[4]=-a*c,e[8]=v+g*o,e[1]=g+v*o,e[5]=a*l,e[9]=y-m*o,e[2]=-a*u,e[6]=o,e[10]=a*s}else if("ZYX"===t.order){var h=a*l,f=a*c,d=o*l,p=o*c;e[0]=s*l,e[4]=d*u-f,e[8]=h*u+p,e[1]=s*c,e[5]=p*u+h,e[9]=f*u-d,e[2]=-u,e[6]=o*s,e[10]=a*s}else if("YZX"===t.order){var M=a*s,w=a*u,x=o*s,b=o*u;e[0]=s*l,e[4]=b-M*c,e[8]=x*c+w,e[1]=c,e[5]=a*l,e[9]=-o*l,e[2]=-u*l,e[6]=w*c+x,e[10]=M-b*c}else if("XZY"===t.order){var M=a*s,w=a*u,x=o*s,b=o*u;e[0]=s*l,e[4]=-c,e[8]=u*l,e[1]=M*c+b,e[5]=a*l,e[9]=w*c-x,e[2]=x*c-w,e[6]=o*l,e[10]=b*c+M}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){var e=this.elements,r=t.x,n=t.y,i=t.z,a=t.w,o=r+r,s=n+n,u=i+i,l=r*o,c=r*s,h=r*u,f=n*s,d=n*u,p=i*u,m=a*o,g=a*s,v=a*u;return e[0]=1-(f+p),e[4]=c-v,e[8]=h+g,e[1]=c+v,e[5]=1-(l+p),e[9]=d-m,e[2]=h-g,e[6]=d+m,e[10]=1-(l+f),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},lookAt:function(){var t,e,r;return function(n,i,a){void 0===t&&(t=new u,e=new u,r=new u);var o=this.elements;return r.subVectors(n,i).normalize(),0===r.lengthSq()&&(r.z=1),t.crossVectors(a,r).normalize(),0===t.lengthSq()&&(r.z+=1e-4,t.crossVectors(a,r).normalize()),e.crossVectors(r,t),o[0]=t.x,o[4]=e.x,o[8]=r.x,o[1]=t.y,o[5]=e.y,o[9]=r.y,o[2]=t.z,o[6]=e.z,o[10]=r.z,this}}(),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var r=t.elements,n=e.elements,i=this.elements,a=r[0],o=r[4],s=r[8],u=r[12],l=r[1],c=r[5],h=r[9],f=r[13],d=r[2],p=r[6],m=r[10],g=r[14],v=r[3],y=r[7],M=r[11],w=r[15],x=n[0],b=n[4],T=n[8],E=n[12],S=n[1],_=n[5],A=n[9],D=n[13],N=n[2],I=n[6],L=n[10],C=n[14],O=n[3],R=n[7],z=n[11],j=n[15];return i[0]=a*x+o*S+s*N+u*O,i[4]=a*b+o*_+s*I+u*R,i[8]=a*T+o*A+s*L+u*z,i[12]=a*E+o*D+s*C+u*j,i[1]=l*x+c*S+h*N+f*O,i[5]=l*b+c*_+h*I+f*R,i[9]=l*T+c*A+h*L+f*z,i[13]=l*E+c*D+h*C+f*j,i[2]=d*x+p*S+m*N+g*O,i[6]=d*b+p*_+m*I+g*R,i[10]=d*T+p*A+m*L+g*z,i[14]=d*E+p*D+m*C+g*j,i[3]=v*x+y*S+M*N+w*O,i[7]=v*b+y*_+M*I+w*R,i[11]=v*T+y*A+M*L+w*z,i[15]=v*E+y*D+M*C+w*j,this},multiplyToArray:function(t,e,r){var n=this.elements;return this.multiplyMatrices(t,e),r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(){var t;return function(e){void 0===t&&(t=new u);for(var r=0,n=e.count;r<n;r++)t.x=e.getX(r),t.y=e.getY(r),t.z=e.getZ(r),t.applyMatrix4(this),e.setXYZ(r,t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],r=t[4],n=t[8],i=t[12],a=t[1],o=t[5],s=t[9],u=t[13],l=t[2],c=t[6],h=t[10],f=t[14];return t[3]*(+i*s*c-n*u*c-i*o*h+r*u*h+n*o*f-r*s*f)+t[7]*(+e*s*f-e*u*h+i*a*h-n*a*f+n*u*l-i*s*l)+t[11]*(+e*u*c-e*o*f-i*a*c+r*a*f+i*o*l-r*u*l)+t[15]*(-n*o*l-e*s*c+e*o*h+n*a*c-r*a*h+r*s*l)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var r=this.elements,n=t.elements,i=n[0],a=n[1],o=n[2],s=n[3],u=n[4],l=n[5],c=n[6],h=n[7],f=n[8],d=n[9],p=n[10],m=n[11],g=n[12],v=n[13],y=n[14],M=n[15],w=d*y*h-v*p*h+v*c*m-l*y*m-d*c*M+l*p*M,x=g*p*h-f*y*h-g*c*m+u*y*m+f*c*M-u*p*M,b=f*v*h-g*d*h+g*l*m-u*v*m-f*l*M+u*d*M,T=g*d*c-f*v*c-g*l*p+u*v*p+f*l*y-u*d*y,E=i*w+a*x+o*b+s*T;if(0===E){var S="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(!0===e)throw new Error(S);return console.warn(S),this.identity()}var _=1/E;return r[0]=w*_,r[1]=(v*p*s-d*y*s-v*o*m+a*y*m+d*o*M-a*p*M)*_,r[2]=(l*y*s-v*c*s+v*o*h-a*y*h-l*o*M+a*c*M)*_,r[3]=(d*c*s-l*p*s-d*o*h+a*p*h+l*o*m-a*c*m)*_,r[4]=x*_,r[5]=(f*y*s-g*p*s+g*o*m-i*y*m-f*o*M+i*p*M)*_,r[6]=(g*c*s-u*y*s-g*o*h+i*y*h+u*o*M-i*c*M)*_,r[7]=(u*p*s-f*c*s+f*o*h-i*p*h-u*o*m+i*c*m)*_,r[8]=b*_,r[9]=(g*d*s-f*v*s-g*a*m+i*v*m+f*a*M-i*d*M)*_,r[10]=(u*v*s-g*l*s+g*a*h-i*v*h-u*a*M+i*l*M)*_,r[11]=(f*l*s-u*d*s-f*a*h+i*d*h+u*a*m-i*l*m)*_,r[12]=T*_,r[13]=(f*v*o-g*d*o+g*a*p-i*v*p-f*a*y+i*d*y)*_,r[14]=(g*l*o-u*v*o-g*a*c+i*v*c+u*a*y-i*l*y)*_,r[15]=(u*d*o-f*l*o+f*a*c-i*d*c-u*a*p+i*l*p)*_,this},scale:function(t){var e=this.elements,r=t.x,n=t.y,i=t.z;return e[0]*=r,e[4]*=n,e[8]*=i,e[1]*=r,e[5]*=n,e[9]*=i,e[2]*=r,e[6]*=n,e[10]*=i,e[3]*=r,e[7]*=n,e[11]*=i,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],r=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],n=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,r,n))},makeTranslation:function(t,e,r){return this.set(1,0,0,t,0,1,0,e,0,0,1,r,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),r=Math.sin(t);return this.set(1,0,0,0,0,e,-r,0,0,r,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),r=Math.sin(t);return this.set(e,0,r,0,0,1,0,0,-r,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),r=Math.sin(t);return this.set(e,-r,0,0,r,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var r=Math.cos(e),n=Math.sin(e),i=1-r,a=t.x,o=t.y,s=t.z,u=i*a,l=i*o;return this.set(u*a+r,u*o-n*s,u*s+n*o,0,u*o+n*s,l*o+r,l*s-n*a,0,u*s-n*o,l*s+n*a,i*s*s+r,0,0,0,0,1),this},makeScale:function(t,e,r){return this.set(t,0,0,0,0,e,0,0,0,0,r,0,0,0,0,1),this},makeShear:function(t,e,r){return this.set(1,e,r,0,t,1,r,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,r){return this.makeRotationFromQuaternion(e),this.scale(r),this.setPosition(t),this},decompose:function(){var t,e;return function(r,n,i){void 0===t&&(t=new u,e=new l);var a=this.elements,o=t.set(a[0],a[1],a[2]).length(),s=t.set(a[4],a[5],a[6]).length(),c=t.set(a[8],a[9],a[10]).length();this.determinant()<0&&(o=-o),r.x=a[12],r.y=a[13],r.z=a[14],e.elements.set(this.elements);var h=1/o,f=1/s,d=1/c;return e.elements[0]*=h,e.elements[1]*=h,e.elements[2]*=h,e.elements[4]*=f,e.elements[5]*=f,e.elements[6]*=f,e.elements[8]*=d,e.elements[9]*=d,e.elements[10]*=d,n.setFromRotationMatrix(e),i.x=o,i.y=s,i.z=c,this}}(),makePerspective:function(t,e,r,n,i,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*i/(e-t),u=2*i/(r-n),l=(e+t)/(e-t),c=(r+n)/(r-n),h=-(a+i)/(a-i),f=-2*a*i/(a-i);return o[0]=s,o[4]=0,o[8]=l,o[12]=0,o[1]=0,o[5]=u,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=f,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(t,e,r,n,i,a){var o=this.elements,s=1/(e-t),u=1/(r-n),l=1/(a-i),c=(e+t)*s,h=(r+n)*u,f=(a+i)*l;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*u,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*l,o[14]=-f,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(t){for(var e=this.elements,r=t.elements,n=0;n<16;n++)if(e[n]!==r[n])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var r=0;r<16;r++)this.elements[r]=t[r+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var r=this.elements;return t[e]=r[0],t[e+1]=r[1],t[e+2]=r[2],t[e+3]=r[3],t[e+4]=r[4],t[e+5]=r[5],t[e+6]=r[6],t[e+7]=r[7],t[e+8]=r[8],t[e+9]=r[9],t[e+10]=r[10],t[e+11]=r[11],t[e+12]=r[12],t[e+13]=r[13],t[e+14]=r[14],t[e+15]=r[15],t}},c.prototype=Object.create(n.prototype),c.prototype.constructor=c,c.prototype.isCubeTexture=!0,Object.defineProperty(c.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}});var as=new n,os=new c,ss=[],us=[];F.prototype.setValue=function(t,e){for(var r=this.seq,n=0,i=r.length;n!==i;++n){var a=r[n];a.setValue(t,e[a.id])}};var ls=/([\w\d_]+)(\])?(\[|\.)?/g;Y.prototype.setValue=function(t,e,r){var n=this.map[e];void 0!==n&&n.setValue(t,r,this.renderer)},Y.prototype.set=function(t,e,r){var n=this.map[r];void 0!==n&&n.setValue(t,e[r],this.renderer)},Y.prototype.setOptional=function(t,e,r){var n=e[r];void 0!==n&&this.setValue(t,r,n)},Y.upload=function(t,e,r,n){for(var i=0,a=e.length;i!==a;++i){var o=e[i],s=r[o.id];!1!==s.needsUpdate&&o.setValue(t,s.value,n)}},Y.seqWithValue=function(t,e){for(var r=[],n=0,i=t.length;n!==i;++n){var a=t[n];a.id in e&&r.push(a)}return r};var cs={merge:function(t){for(var e={},r=0;r<t.length;r++){var n=this.clone(t[r]);for(var i in n)e[i]=n[i]}return e},clone:function(t){var e={};for(var r in t)e[r]=cs.cloneParameters(t[r]);return e},cloneParameters:function(t){var e={};for(var r in t)e[r]=cs.cloneParameter(t[r]);return e},cloneParameter:function(t){return t&&(t.isColor||t.isMatrix3||t.isMatrix4||t.isVector2||t.isVector3||t.isVector4||t.isTexture)?t.clone():Array.isArray(t)?t.slice():t}},hs={alphamap_fragment:"#ifdef USE_ALPHAMAP\n#if defined( TEXTURE_SLOTS )\n\tvec2 alphaUv = alphaMapUV();\n#else\n\tvec2 alphaUv = vUv;\n#endif\n\tdiffuseColor.a *= alphaMapTexelTransform( texture2D( alphaMap, alphaUv ) ).g;\n#endif\n",alphamap_pars_fragment:"#if ! defined( TEXTURE_SLOTS )\n\t#ifdef USE_ALPHAMAP\n\t\tuniform sampler2D alphaMap;\n\t#endif\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n#if defined( TEXTURE_SLOTS )\n\tvec2 aoUv = aoMapUV();\n#else\n\tvec2 aoUv = vUv2;\n#endif\n\tfloat ambientOcclusion = ( aoMapTexelTransform( texture2D( aoMap, aoUv ) ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n#if ! defined( TEXTURE_SLOTS )\n\tuniform sampler2D aoMap;\n#endif\n\tuniform float aoMapIntensity;\n#endif\n",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif ( decayExponent > 0.0 && cutoffDistance > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\telse if ( decayExponent < 0.0 ) {\n\t\tfloat maxDistanceCutoffFactor = 0.0;\n\t\tif ( lightDistance > 0.0 ) {\n\t\t\tmaxDistanceCutoffFactor = 1.0;\n\t\t\tif( cutoffDistance > 0.0 ) {\n\t\t\t\tmaxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t\t}\n\t\t\tfloat distanceFalloff = 1.0 / ( pow2( lightDistance ) );\n\t\t\tmaxDistanceCutoffFactor * distanceFalloff;\n\t\t}\n\t\treturn maxDistanceCutoffFactor;\n\t}\n\telse {\n\t\treturn 1.0;\n\t}\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nfloat F_Schlick( const in float specular, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specular ) * fresnel + specular;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * pow2( alpha / denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = clamp( dot( geometry.normal, incidentLight.direction ), EPSILON, 1.0 );\tfloat dotNV = clamp( dot( geometry.normal, geometry.viewDir ), EPSILON, 1.0 );\tfloat dotNH = clamp( dot( geometry.normal, halfDir ), EPSILON, 1.0 );\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nfloat BRDF_ClearCoat_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in float specular, const in float roughness, out float layerAttenuation ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = clamp( dot( geometry.normal, incidentLight.direction ), EPSILON, 1.0 );\tfloat dotNV = clamp( dot( geometry.normal, geometry.viewDir ), EPSILON, 1.0 );\tfloat dotNH = clamp( dot( geometry.normal, halfDir ), EPSILON, 1.0 );\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tfloat F = F_Schlick( specular, dotLH );\n\tlayerAttenuation = F;\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 ltcTextureCoords( const in GeometricContext geometry, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = (LUT_SIZE - 1.0)/LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5/LUT_SIZE;\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\tfloat theta = acos( dot( N, V ) );\n\tvec2 uv = vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nvoid clipQuadToHorizon( inout vec3 L[5], out int n ) {\n\tint config = 0;\n\tif ( L[0].z > 0.0 ) config += 1;\n\tif ( L[1].z > 0.0 ) config += 2;\n\tif ( L[2].z > 0.0 ) config += 4;\n\tif ( L[3].z > 0.0 ) config += 8;\n\tn = 0;\n\tif ( config == 0 ) {\n\t} else if ( config == 1 ) {\n\t\tn = 3;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[3].z * L[0] + L[0].z * L[3];\n\t} else if ( config == 2 ) {\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t} else if ( config == 3 ) {\n\t\tn = 4;\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t\tL[3] = -L[3].z * L[0] + L[0].z * L[3];\n\t} else if ( config == 4 ) {\n\t\tn = 3;\n\t\tL[0] = -L[3].z * L[2] + L[2].z * L[3];\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\t} else if ( config == 5 ) {\n\t\tn = 0;\n\t} else if ( config == 6 ) {\n\t\tn = 4;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\t} else if ( config == 7 ) {\n\t\tn = 5;\n\t\tL[4] = -L[3].z * L[0] + L[0].z * L[3];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\t} else if ( config == 8 ) {\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[1] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] =  L[3];\n\t} else if ( config == 9 ) {\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[2].z * L[3] + L[3].z * L[2];\n\t} else if ( config == 10 ) {\n\t\tn = 0;\n\t} else if ( config == 11 ) {\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t} else if ( config == 12 ) {\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\t} else if ( config == 13 ) {\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = L[2];\n\t\tL[2] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t} else if ( config == 14 ) {\n\t\tn = 5;\n\t\tL[4] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t} else if ( config == 15 ) {\n\t\tn = 4;\n\t}\n\tif ( n == 3 )\n\t\tL[3] = L[0];\n\tif ( n == 4 )\n\t\tL[4] = L[0];\n}\nfloat integrateLtcBrdfOverRectEdge( vec3 v1, vec3 v2 ) {\n\tfloat cosTheta = dot( v1, v2 );\n\tfloat theta = acos( cosTheta );\n\tfloat res = cross( v1, v2 ).z * ( ( theta > 0.001 ) ? theta / sin( theta ) : 1.0 );\n\treturn res;\n}\nvoid initRectPoints( const in vec3 pos, const in vec3 halfWidth, const in vec3 halfHeight, out vec3 rectPoints[4] ) {\n\trectPoints[0] = pos - halfWidth - halfHeight;\n\trectPoints[1] = pos + halfWidth - halfHeight;\n\trectPoints[2] = pos + halfWidth + halfHeight;\n\trectPoints[3] = pos - halfWidth + halfHeight;\n}\nvec3 integrateLtcBrdfOverRect( const in GeometricContext geometry, const in mat3 brdfMat, const in vec3 rectPoints[4] ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\tvec3 T1, T2;\n\tT1 = normalize(V - N * dot( V, N ));\n\tT2 = - cross( N, T1 );\n\tmat3 brdfWrtSurface = brdfMat * transpose( mat3( T1, T2, N ) );\n\tvec3 clippedRect[5];\n\tclippedRect[0] = brdfWrtSurface * ( rectPoints[0] - P );\n\tclippedRect[1] = brdfWrtSurface * ( rectPoints[1] - P );\n\tclippedRect[2] = brdfWrtSurface * ( rectPoints[2] - P );\n\tclippedRect[3] = brdfWrtSurface * ( rectPoints[3] - P );\n\tint n;\n\tclipQuadToHorizon(clippedRect, n);\n\tif ( n == 0 )\n\t\treturn vec3( 0, 0, 0 );\n\tclippedRect[0] = normalize( clippedRect[0] );\n\tclippedRect[1] = normalize( clippedRect[1] );\n\tclippedRect[2] = normalize( clippedRect[2] );\n\tclippedRect[3] = normalize( clippedRect[3] );\n\tclippedRect[4] = normalize( clippedRect[4] );\n\tfloat sum = 0.0;\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[0], clippedRect[1] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[1], clippedRect[2] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[2], clippedRect[3] );\n\tif (n >= 4)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[3], clippedRect[4] );\n\tif (n == 5)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[4], clippedRect[0] );\n\tsum = max( 0.0, sum );\n\tvec3 Lo_i = vec3( sum, sum, sum );\n\treturn Lo_i;\n}\nvec3 Rect_Area_Light_Specular_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight,\n\t\tconst in float roughness,\n\t\tconst in sampler2D ltcMat, const in sampler2D ltcMag ) {\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\tvec2 uv = ltcTextureCoords( geometry, roughness );\n\tvec4 brdfLtcApproxParams, t;\n\tbrdfLtcApproxParams = texture2D( ltcMat, uv );\n\tt = texture2D( ltcMat, uv );\n\tfloat brdfLtcScalar = texture2D( ltcMag, uv ).a;\n\tmat3 brdfLtcApproxMat = mat3(\n\t\tvec3(   1,   0, t.y ),\n\t\tvec3(   0, t.z,   0 ),\n\t\tvec3( t.w,   0, t.x )\n\t);\n\tvec3 specularReflectance = integrateLtcBrdfOverRect( geometry, brdfLtcApproxMat, rectPoints );\n\tspecularReflectance *= brdfLtcScalar;\n\treturn specularReflectance;\n}\nvec3 Rect_Area_Light_Diffuse_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight ) {\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\tmat3 diffuseBrdfMat = mat3(1);\n\tvec3 diffuseReflectance = integrateLtcBrdfOverRect( geometry, diffuseBrdfMat, rectPoints );\n\treturn diffuseReflectance;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat BRDF_ClearCoat_GGX_Environment( const in GeometricContext geometry, const in float specular, const in float roughness, out float layerAttention ) {\n\tvec3 incidentLightDirection = reflect( geometry.viewDir, geometry.normal );\n\tvec3 halfDir = normalize( incidentLightDirection + geometry.viewDir );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotLH = saturate( dot( incidentLightDirection, halfDir ) );\n\tlayerAttention = F_Schlick( specular, dotLH );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specular * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n#if ! defined( TEXTURE_SLOTS )\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n#endif\n\tvec2 dHdxy_fwd() {\n#if defined( TEXTURE_SLOTS )\n\t\tvec2 bumpUv = bumpMapUV();\n#else\n\t\tvec2 bumpUv = vUv;\n#endif\n\t\tvec2 dSTdx = dFdx( bumpUv );\n\t\tvec2 dSTdy = dFdy( bumpUv );\n\t\tfloat Hll = bumpMapTexelTransform( texture2D( bumpMap, bumpUv ) ).x;\n\t\tfloat dBx = bumpMapTexelTransform( texture2D( bumpMap, bumpUv + dSTdx ) ).x - Hll;\n\t\tfloat dBy = bumpMapTexelTransform( texture2D( bumpMap, bumpUv + dSTdy ) ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( VARYING_VVIEWPOSITION )\n\t\tvarying vec3 vViewPosition;\n\t\t#define VARYING_VVIEWPOSITION 1\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\t#if ! defined( VARYING_VVIEWPOSITION )\n    \tvarying vec3 vViewPosition;\n    \t#define VARYING_VVIEWPOSITION 1\n    #endif\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif\n",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif\n",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand_OLD( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nhighp float rand_NEW( const in vec2 p ) {\n\tvec2 p2  = fract(p * vec2(5.3987, 5.4421));\n\tp2 += dot(p2.yx, p2.xy + vec2(21.5351, 14.3137));\n\tfloat pxy = p2.x * p2.y;\n\treturn ( fract(pxy * 95.4307) + fract(pxy * 75.04961) ) * 0.5;\n}\n#define rand rand_NEW\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transpose( const in mat3 v ) {\n\tmat3 tmp;\n\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\n\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\n\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\n\treturn tmp;\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, vec3 normal, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tvec3 dx = dFdx( vec ) * 128.0;\n\tvec3 dy = dFdy( vec ) * 128.0;\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = pow( d, 0.5);\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, vec3 normal, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, normal, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = 0.0;\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tr1 += mipInfo.x;\n\tr2 = r1 + 1.0;\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, s);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"#ifdef FLIP_SIDED\n\tobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n#if defined( TEXTURE_SLOTS )\n\tvec2 emissiveUv = emissiveMapUV();\n#else\n\tvec2 emissiveUv = vUv;\n#endif\n\tvec4 emissiveColor = texture2D( emissiveMap, emissiveUv );\n\temissiveColor.rgb = emissiveMapTexelTransform( emissiveMapTexelToLinear( emissiveColor ) ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#if ! defined( TEXTURE_SLOTS )\n\t#ifdef USE_EMISSIVEMAP\n\t\tuniform sampler2D emissiveMap;\n\t#endif\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n  return value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n  return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n  return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n  float maxComponent = max( max( value.r, value.g ), value.b );\n  float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n  return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n  return vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n  float maxRGB = max( value.x, max( value.g, value.b ) );\n  float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n  M            = ceil( M * 255.0 ) / 255.0;\n  return vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n    return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n    float maxRGB = max( value.x, max( value.g, value.b ) );\n    float D      = max( maxRange / maxRGB, 1.0 );\n    D            = min( floor( D ) / 255.0, 1.0 );\n    return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n  vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n  Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n  vec4 vResult;\n  vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n  float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n  vResult.w = fract(Le);\n  vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n  return vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n  float Le = value.z * 255.0 + value.w;\n  vec3 Xp_Y_XYZp;\n  Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n  Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n  Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n  vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n  return vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",falloff_fragment:"#ifdef FALLOFF\nfloat falloffModulator = abs( dot( normal, normalize( vViewPosition ) ) );\nfalloffModulator = ( falloffModulator * falloffModulator * ( 3.0 - 2.0 * falloffModulator ) );\ndiffuseColor = mix( falloffDiffuseColor, diffuseColor, falloffModulator );\n#endif",falloffalphamap_fragment:"#ifdef USE_FALLOFFALPHAMAP\n#if defined( TEXTURE_SLOTS )\n\tvec2 falloffAlphaUv = falloffAlphaMapUV();\n#else\n\tvec2 falloffAlphaUv = vUv;\n#endif\n\tfalloffDiffuseColor.a *= falloffAlphaMapTexelTransform( texture2D( falloffAlphaMap, falloffAlphaUv ) ).g;\n#endif\n",falloffmap_fragment:"#ifdef USE_FALLOFFMAP\n#if defined( TEXTURE_SLOTS )\n\tvec2 falloffMapUv = falloffMapUV();\n#else\n\tvec2 falloffMapUv = vUv;\n#endif\n\tvec4 falloffTexelColor = texture2D( falloffMap, falloffMapUv );\n\tfalloffTexelColor = falloffMapTexelTransform( falloffMapTexelToLinear( falloffTexelColor ) );\n\tfalloffDiffuseColor *= falloffTexelColor;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n#if defined( TEXTURE_SLOTS )\n\tvec2 lightUv = lightMapUV();\n#else\n\tvec2 lightUv = vUv2;\n#endif\n\treflectedLight.indirectDiffuse += PI * emissiveMapTexelTransform( texture2D( lightMap, lightUv ) ).xyz;\n#endif\n",lightmap_pars_fragment:"#if ! defined( TEXTURE_SLOTS )\n\t#ifdef USE_LIGHTMAP\n\t\tuniform sampler2D lightMap;\n\t\tuniform float lightMapIntensity;\n\t#endif\n#endif\n",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat spreadAngle;\n\t\tvec2 shadowMapSize;\n\t\tvec3 shadowCameraParams;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.direction = lVector / lightDistance;\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tvec3 shadowCameraParams;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.direction = lVector / lightDistance;\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, worldNormal, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"#if ! defined( VARYING_VVIEWPOSITION )\n    varying vec3 vViewPosition;\n    #define VARYING_VVIEWPOSITION 1\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\n#if NUM_RECT_AREA_LIGHTS > 0\n    void RE_Direct_RectArea_BlinnPhong( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n        vec3 matDiffColor = material.diffuseColor;\n        vec3 matSpecColor = material.specularColor;\n        vec3 lightColor   = rectAreaLight.color;\n        float roughness = BlinnExponentToGGXRoughness( material.specularShininess );\n        vec3 spec = Rect_Area_Light_Specular_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n                roughness,\n                ltcMat, ltcMag );\n        vec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n        reflectedLight.directSpecular += lightColor * matSpecColor * spec / PI2;\n        reflectedLight.directDiffuse  += lightColor * matDiffColor * diff / PI2;\n    }\n#endif\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\n\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n    void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n        vec3 matDiffColor = material.diffuseColor;\n        vec3 matSpecColor = material.specularColor;\n        vec3 lightColor   = rectAreaLight.color;\n        float roughness = material.specularRoughness;\n        vec3 spec = Rect_Area_Light_Specular_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n                roughness,\n                ltcMat, ltcMag );\n        vec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n        reflectedLight.directSpecular += lightColor * matSpecColor * spec;\n        reflectedLight.directDiffuse  += lightColor * matDiffColor * diff;\n    }\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\tvec3 specularRadiance = irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\tvec3 diffuseRadiance = irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\tfloat layerAttention;\n\t\tvec3 clearCoatSpecularRadiance = irradiance * BRDF_ClearCoat_GGX( directLight, geometry, material.clearCoat, material.clearCoatRoughness, layerAttention );\n\t\tspecularRadiance = mix( specularRadiance, clearCoatSpecularRadiance, material.clearCoat );\n\t\tdiffuseRadiance = mix( diffuseRadiance, vec3( 0.0 ), material.clearCoat );\n\t#endif\n\treflectedLight.directSpecular += specularRadiance;\n\treflectedLight.directDiffuse += diffuseRadiance;\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 diffuseRadiance = irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\tdiffuseRadiance = mix( diffuseRadiance, vec3( 0.0 ), material.clearCoat );\n\t#endif\n\treflectedLight.indirectDiffuse += diffuseRadiance;\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 specularRadiance = radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\tfloat layerAttention;\n\t\tvec3 clearCoatSpecularRadiance = clearCoatRadiance * BRDF_ClearCoat_GGX_Environment( geometry, material.clearCoat, material.clearCoatRoughness, layerAttention );\n\t\tspecularRadiance = mix( specularRadiance, clearCoatSpecularRadiance, material.clearCoat );\n\t#endif\n\treflectedLight.indirectSpecular += specularRadiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_template:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#ifdef USE_SHADOWMAP\n\tinitShadows();\n#endif\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, 0.0, spotLight.shadowCameraParams, vSpotShadowCoord[ i ], 1 ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, 0.0, directionalLight.spreadAngle, directionalLight.shadowCameraParams, vDirectionalShadowCoord[ i ], 0 ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\t#if defined( TEXTURE_SLOTS )\n\t\t\tvec2 lightUv = lightMapUV();\n\t\t\tvec3 lightMapIrradiance = lightMapTexelTransform( texture2D( lightMap, vUv2 ) ).xyz;\n\t\t#else\n\t\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#endif\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t \tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif\n",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif\n",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n#if defined( TEXTURE_SLOTS )\n\tvec2 mapUv = mapUV();\n#else\n\tvec2 mapUv = vUv;\n#endif\n\tvec4 texelColor = texture2D( map, mapUv );\n\ttexelColor = mapTexelTransform( mapTexelToLinear( texelColor ) );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#if ! defined( TEXTURE_SLOTS )\n\t#ifdef USE_MAP\n\t\tuniform sampler2D map;\n\t#endif\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\t#if defined( TEXTURE_SLOTS )\n\t\tvec2 metalnessUv = metalnessMapUV();\n\t#else\n\t\tvec2 metalnessUv = vUv;\n\t#endif\n\tvec4 texelMetalness = metalnessMapTexelTransform( texture2D( metalnessMap, metalnessUv ) );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#if ! defined( TEXTURE_SLOTS )\n\t#ifdef USE_METALNESSMAP\n\t\tuniform sampler2D metalnessMap;\n\t#endif\n#endif\n",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif\n",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_flip:"#ifdef DOUBLE_SIDED\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n\tfloat flipNormal = 1.0;\n#endif\n",normal_fragment:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\t#if ! defined( TEXTURE_SLOTS )\n\t\tuniform sampler2D normalMap;\n\t#endif\n\t\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t#if defined( TEXTURE_SLOTS )\n\t\t\tvec2 normalUv = normalMapUV();\n\t\t#else\n\t\t\tvec2 normalUv = vUv;\n\t\t#endif\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( normalUv.st );\n\t\tvec2 st1 = dFdy( normalUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\t\t\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 NfromST = cross( S, T );\n\t\tif( dot( NfromST, N ) < 0.0 ) {\n\t\t\tS *= -1.0;\n\t\t\tT *= -1.0;\n\t\t}\n\t\tvec3 mapN = texture2D( normalMap, normalUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n  return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n  return 1.0 - 2.0 * rgb.xyz;\n}\nvec4 packDepthToRGBA( const in highp float v ) {\n  const highp vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\n  const highp vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\n  highp vec4 res = mod( v * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );  res -= res.xxyz * bit_mask;\n  return res;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n  const highp vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n\treturn dot( v, bit_shift );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n  return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n  return linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n  return (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n  return ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"#ifdef USE_SKINNING\n\tvec4 mvPosition = modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\t#if defined( TEXTURE_SLOTS )\n\t\tvec2 roughnessUv = roughnessMapUV();\n\t#else\n\t\tvec2 roughnessUv = vUv;\n\t#endif\n\tvec4 texelRoughness = roughnessMapTexelTransform( texture2D( roughnessMap, roughnessUv ) );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#if ! defined( TEXTURE_SLOTS )\n\t#ifdef USE_ROUGHNESSMAP\n\t\tuniform sampler2D roughnessMap;\n\t#endif\n#endif\n",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\t#if defined( SHADOWMAP_TYPE_PCSS )\n\t\t#define PCSS_QUALITY_LEVEL 5\n\t\t#define PCSS_NUM_POISSON_SAMPLES 16\n\t\t#define PCSS_ROTATE_POISSON_SAMPLES 1\n\t\tvec2 poissonDisk[PCSS_NUM_POISSON_SAMPLES];\n\t\tvoid initPercentCloserSoftShadow( const in vec2 randomSeed )\t{\n\t\t\tpoissonDisk[0] = vec2(-0.94201624, -0.39906216 );\n\t\t\tpoissonDisk[1] = vec2( 0.94558609, -0.76890725 );\n\t\t\tpoissonDisk[2] = vec2( -0.094184101, -0.92938870 );\n\t\t\tpoissonDisk[3] = vec2( 0.34495938, 0.29387760 );\n\t\t\tpoissonDisk[4] = vec2( -0.91588581, 0.45771432 );\n\t\t\tpoissonDisk[5] = vec2( -0.81544232, -0.87912464 );\n\t\t\tpoissonDisk[6] = vec2( -0.38277543, 0.27676845 );\n\t\t\tpoissonDisk[7] = vec2( 0.97484398, 0.75648379 );\n\t\t\tpoissonDisk[8] = vec2( 0.44323325, -0.97511554 );\n\t\t\tpoissonDisk[9] = vec2( 0.53742981, -0.47373420 );\n\t\t\tpoissonDisk[10] = vec2( -0.26496911, -0.41893023 );\n\t\t\tpoissonDisk[11] = vec2( 0.79197514, 0.19090188 );\n\t\t\tpoissonDisk[12] = vec2( -0.24188840, 0.99706507 );\n\t\t\tpoissonDisk[13] = vec2( -0.81409955, 0.91437590 );\n\t\t\tpoissonDisk[14] = vec2( 0.19984126, 0.78641367 );\n\t\t\tpoissonDisk[15] = vec2( 0.14383161, -0.14100790 );\n\t\t}\n\t\tmat2 createRotationMatrix( const in vec2 randomSeed ) {\n\t\t\tfloat angle = rand( randomSeed + cameraPosition.x + cameraPosition.y + cameraPosition.z ) * PI2;\n\t\t\tfloat c = cos( angle ), s = sin( angle );\n\t\t\treturn mat2( c, s, -s, c );\n\t\t}\n\t\tfloat penumbraSize( const in float zReceiverLightSpace, const in float zBlockerLightSpace ) {\t\t\treturn (zReceiverLightSpace - zBlockerLightSpace) / zBlockerLightSpace;\n\t\t}\n\t\tfloat findBlockerLightZ( sampler2D shadowMap, const in vec2 uv, const in float zReceiverClipSpace, const in float zReceiverLightSpace, const in float shadowRadius, const in float spreadAngle, const in vec3 shadowCameraParams, const in vec2 randomSeed, const int lightType ) {\n\t\t\tfloat lightFrustrumWidth = 2.0 * shadowCameraParams.y * tan(shadowCameraParams.x * 0.5);\n\t\t\tfloat searchRadius = 0.0;\n\t\t\tsearchRadius = ( lightType == 0) ? zReceiverLightSpace * spreadAngle/shadowCameraParams.x : ( shadowRadius / lightFrustrumWidth ) * ( zReceiverLightSpace - shadowCameraParams.y ) / zReceiverLightSpace;\n\t\t\tfloat blockerLightZSum = 0.0;\n\t\t\tint numBlockers = 0;\n\t\t\tfloat angle = rand( randomSeed ) * PI2;\n\t\t\tfloat s = sin(angle);\n\t\t\tfloat c = cos(angle);\n\t\t\tfor( int i = 0; i < PCSS_NUM_POISSON_SAMPLES; i++ ) {\n\t\t\t#if PCSS_ROTATE_POISSON_SAMPLES == 1\n\t\t\t\tvec2 poissonSample = vec2(poissonDisk[i].y * c + poissonDisk[i].x * s, poissonDisk[i].y * -s + poissonDisk[i].x * c);\n\t\t\t#else\n\t\t\t\tvec2 poissonSample = poissonDisk[i];\n\t\t\t#endif\n\t\t\t\tfloat shadowMapDepth = unpackRGBAToDepth( texture2D( shadowMap, uv + poissonSample * searchRadius ) );\n\t\t\t\tif ( shadowMapDepth < zReceiverClipSpace ) {\n\t\t\t\t\tblockerLightZSum += shadowMapDepth;\n\t\t\t\t\tnumBlockers ++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif( numBlockers == 0 ) return -1.0;\n\t\t\treturn blockerLightZSum / float( numBlockers );\n\t\t}\n\t\tfloat percentCloserFilter( sampler2D shadowMap, vec2 uv, float receiverClipZ, float filterRadius, const in vec2 randomSeed ) {\n\t\t\tint numBlockers = 0;\n\t\t\tfloat angle = rand( randomSeed ) * PI2;\n\t\t\tfloat s = sin(angle);\n\t\t\tfloat c = cos(angle);\n\t\t\tfor( int i = 0; i < PCSS_NUM_POISSON_SAMPLES; i ++ ) {\n\t\t\t#if PCSS_ROTATE_POISSON_SAMPLES == 1\n\t\t\t\tvec2 poissonSample = vec2(poissonDisk[i].y * c + poissonDisk[i].x * s, poissonDisk[i].y * -s + poissonDisk[i].x * c);\n\t\t\t#else\n\t\t\t\tvec2 poissonSample = poissonDisk[i];\n\t\t\t#endif\n\t\t\t\tvec2 uvOffset = poissonSample * filterRadius;\n\t\t\t\tfloat blockerClipZ = unpackRGBAToDepth( texture2D( shadowMap, uv + uvOffset ) );\n\t\t\t\tif( receiverClipZ <= blockerClipZ ) numBlockers ++;\n\t\t\t\tblockerClipZ = unpackRGBAToDepth( texture2D( shadowMap, uv - uvOffset ) );\n\t\t\t\tif( receiverClipZ <= blockerClipZ ) numBlockers ++;\n\t\t\t}\n\t\t\treturn float( numBlockers ) / ( 2.0 * float( PCSS_NUM_POISSON_SAMPLES ) );\n\t\t}\n\t\tfloat percentCloserSoftShadow( sampler2D shadowMap, const in float shadowRadius, const in float spreadAngle, const in vec3 shadowCameraParams, const in vec4 coords, const int lightType ) {\n\t\t\tvec2 uv = coords.xy;\n\t\t\tfloat receiverLightZ = coords.z;\n\t\t\tfloat cameraNear = shadowCameraParams.y, cameraFar = shadowCameraParams.z;\n\t\t\tfloat zReceiverLightSpace;\n\t\t\tif(lightType == 0)\n\t\t\t\tzReceiverLightSpace = -orthographicDepthToViewZ( receiverLightZ, cameraNear, cameraFar );\n\t\t\telse\n\t\t\t\tzReceiverLightSpace = -perspectiveDepthToViewZ( receiverLightZ, cameraNear, cameraFar );\n\t\t\tfloat blockerLightZ = findBlockerLightZ( shadowMap, uv, receiverLightZ, zReceiverLightSpace, shadowRadius, spreadAngle, shadowCameraParams, uv, lightType );\n\t\t\tif( blockerLightZ == -1.0 ) return 1.0;\n\t\t\tfloat avgBlockerDepthLightSpace;\n\t\t\tfloat filterRadius = 0.0;\n\t\t\tif(lightType == 0) {\n\t\t\t\tavgBlockerDepthLightSpace = -orthographicDepthToViewZ( blockerLightZ, cameraNear, cameraFar );\n\t\t\t\tfilterRadius = (zReceiverLightSpace - avgBlockerDepthLightSpace) * spreadAngle/shadowCameraParams.x;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tavgBlockerDepthLightSpace = -perspectiveDepthToViewZ( blockerLightZ, cameraNear, cameraFar );\n\t\t\t\tfloat penumbraRatio = penumbraSize( zReceiverLightSpace, avgBlockerDepthLightSpace );\n\t\t\t\tfloat lightFrustrumWidth = 2.0 * cameraNear * tan(shadowCameraParams.x * 0.5);\n\t\t\t\tfilterRadius = penumbraRatio * ( shadowRadius/lightFrustrumWidth ) * cameraNear / zReceiverLightSpace;\n\t\t\t}\n\t\t\t\n\t\t\treturn  percentCloserFilter( shadowMap, uv, receiverLightZ, filterRadius, uv );\n\t\t}\n\t#endif\n    #if NUM_RECT_AREA_LIGHTS > 0\n    #endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tvoid initShadows() {\n\t\t#if defined( SHADOWMAP_TYPE_PCSS )\n\t\t  initPercentCloserSoftShadow( vViewPosition.xy );\n\t\t#endif\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, float spreadAngle, vec3 shadowCameraParams, vec4 shadowCoord, const int lightType ) {\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCSS )\n\t\t  return percentCloserSoftShadow( shadowMap, shadowRadius, spreadAngle, shadowCameraParams, shadowCoord, lightType );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn 1.0;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n    #if NUM_RECT_AREA_LIGHTS > 0\n    #endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n    #if NUM_RECT_AREA_LIGHTS > 0\n    #endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, 0.0, directionalLight.spreadAngle, directionalLight.shadowCameraParams, vDirectionalShadowCoord[ i ], 0 ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, 0.0, spotLight.shadowCameraParams, vSpotShadowCoord[ i ], 1 ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif\n",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",slot_texel_transform_template:"uniform vec2 $SLOT_NAME$TexelTransformParams;\nvec4 $SLOT_NAME$TexelTransform( vec4 value ) {\n    value.rgb *= $SLOT_NAME$TexelTransformParams.x;\n    value.rgb += vec3( $SLOT_NAME$TexelTransformParams.y );\n    return value;\n}\n",slot_uv_transform_template:"uniform vec4 $SLOT_NAME$UVTransformParams;\nvec2 $SLOT_NAME$UV() {\n  vec2 value = $UV_VAR_NAME$;\n  value.xy *= $SLOT_NAME$UVTransformParams.xy;\n  value.xy += $SLOT_NAME$UVTransformParams.zw;\n  return value;\n}\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\t#if defined( TEXTURE_SLOTS )\n\t\tvec2 specularUv = specularMapUV();\n\t#else\n\t\tvec2 specularUv = vUv;\n\t#endif\n\tvec4 texelSpecular = specularMapTexelTransform( texture2D( specularMap, specularUv ) );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif\n",specularmap_pars_fragment:"#if ! defined( TEXTURE_SLOTS )\n\t#ifdef USE_SPECULARMAP\n\t\tuniform sampler2D specularMap;\n\t#endif\n#endif\n",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n  return toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  color = max( vec3( 0.0 ), color - 0.004 );\n  return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if ! defined( TEXTURE_SLOTS )\n\t#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP ) || defined( USE_FALLOFFMAP ) || defined( USE_FALLOFFALPHAMAP )\n\t\tvarying vec2 vUv;\n\t#endif\n#endif\n",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )  || defined( USE_FALLOFFMAP ) || defined( USE_FALLOFFALPHAMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP ) || defined( USE_FALLOFFMAP ) || defined( USE_FALLOFFALPHAMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif\n",uv2_pars_fragment:"#if ! defined( TEXTURE_SLOTS )\n\t#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\t\tvarying vec2 vUv2;\n\t#endif\n#endif\n",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif\n",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif\n",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",cubeEnv_frag:"uniform float tFlip;\nuniform float opacity;\nuniform float roughness;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 queryReflectVec = vec3( tFlip * vWorldPosition.x, vWorldPosition.yz );\n\tvec4 envMapColor = vec4( 0.0 );\n\t#if defined( ENVMAP_TYPE_CUBE )\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\tenvMapColor = textureCubeLodEXT( envMap, queryReflectVec, roughness * 8.0 );\n\t\t#else\n\t\t\tenvMapColor = textureCube( envMap, queryReflectVec, roughness * 8.0 );\n\t\t#endif\n\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\tenvMapColor.rgb *= envMapIntensity;\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tenvMapColor = textureCubeUV( queryReflectVec, queryReflectVec, roughness );\n\t\tenvMapColor.rgb *= envMapIntensity;\n\t#endif\n\tgl_FragColor = envMapColor;\n\tgl_FragColor.a = opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <logdepthbuf_fragment>\n}\n",cubeEnv_vert:"varying vec3 vWorldPosition;\n#include <common>\n#include <clipping_planes_pars_vertex>\n#if NUM_CLIPPING_PLANES == 0\n\t#if ! defined( VARYING_VVIEWPOSITION )\n   \t\tvarying vec3 vViewPosition;\n   \t\t#define VARYING_VVIEWPOSITION 1\n   #endif\n#endif\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}\n",depth_frag:"precision highp float;\n#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n",distanceRGBA_vert:"varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <fog_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <fog_fragment>\n}\n",meshphong_vert:"#define PHONG\n#if ! defined( VARYING_VVIEWPOSITION )\n\tvarying vec3 vViewPosition;\n\t#define VARYING_VVIEWPOSITION 1\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n}\n",meshphysical_frag:"precision highp float;\n#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n\t#ifdef FALLOFF\n\t\tuniform vec3 falloffDiffuse;\n\t\tuniform float falloffOpacity;\n\t#endif\n#endif\n#if ! defined( VARYING_VVIEWPOSITION )\n\tvarying vec3 vViewPosition;\n\t#define VARYING_VVIEWPOSITION 1\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef FALLOFF\n\t\tvec4 falloffDiffuseColor = vec4( falloffDiffuse, falloffOpacity );\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <falloffmap_fragment>\n\t#include <falloffalphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <falloff_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <fog_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\n#if ! defined( VARYING_VVIEWPOSITION )\n\tvarying vec3 vViewPosition;\n\t#define VARYING_VVIEWPOSITION 1\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED  ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\t#if ! defined( VARYING_VVIEWPOSITION )\n\t\tvarying vec3 vViewPosition;\n\t\t#define VARYING_VVIEWPOSITION 1\n\t#endif\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n   \tgl_FragColor = vec4( packNormalToRGB( vNormal * flipNormal ), opacity );\n\t#include <logdepthbuf_fragment>\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED  ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\t#if ! defined( VARYING_VVIEWPOSITION )\n   \t\tvarying vec3 vViewPosition;\n   \t\t#define VARYING_VVIEWPOSITION 1\n   #endif\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\t\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED  ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",shadow_frag:"uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0  - getShadowMask() ) );\n}\n",shadow_vert:"#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n"};H.prototype={constructor:H,isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,r){return this.r=t,this.g=e,this.b=r,this},setHSL:function(){function t(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+6*(e-t)*(2/3-r):t}return function(e,r,n){if(e=ns.euclideanModulo(e,1),r=ns.clamp(r,0,1),n=ns.clamp(n,0,1),0===r)this.r=this.g=this.b=n;else{var i=n<=.5?n*(1+r):n+r-n*r,a=2*n-i;this.r=t(a,i,e+1/3),this.g=t(a,i,e),this.b=t(a,i,e-1/3)}return this}}(),setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var r;if(r=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var n,i=r[1],a=r[2];switch(i){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,e(n[5]),this;if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,e(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var o=parseFloat(n[1])/360,s=parseInt(n[2],10)/100,u=parseInt(n[3],10)/100;return e(n[5]),this.setHSL(o,s,u)}}}else if(r=/^\#([A-Fa-f0-9]+)$/.exec(t)){var l=r[1],c=l.length;if(3===c)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}if(t&&t.length>0){var l=fs[t];void 0!==l?this.setHex(l):console.warn("THREE.Color: Unknown color "+t)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var r=e>0?1/e:1;return this.r=Math.pow(t.r,r),this.g=Math.pow(t.g,r),this.b=Math.pow(t.b,r),this},convertGammaToLinear:function(){var t=this.r,e=this.g,r=this.b;return this.r=t*t,this.g=e*e,this.b=r*r,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){var e,r,n=t||{h:0,s:0,l:0},i=this.r,a=this.g,o=this.b,s=Math.max(i,a,o),u=Math.min(i,a,o),l=(u+s)/2;if(u===s)e=0,r=0;else{var c=s-u;switch(r=l<=.5?c/(s+u):c/(2-s-u),s){case i:e=(a-o)/c+(a<o?6:0);break;case a:e=(o-i)/c+2;break;case o:e=(i-a)/c+4}e/=6}return n.h=e,n.s=r,n.l=l,n},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,r){var n=this.getHSL();return n.h+=t,n.s+=e,n.l+=r,this.setHSL(n.h,n.s,n.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}};var fs={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Q.prototype=Object.create(n.prototype),Q.prototype.constructor=Q,Q.prototype.isDataTexture=!0;var ds={common:{diffuse:{value:new H(15658734)},opacity:{value:1},map:{value:null},mapUVTransformParams:{value:new i(0,0,1,1)},mapTexelTransformParams:{value:new r(1,0)},offsetRepeat:{value:new i(0,0,1,1)},specularMap:{value:null},specularMapUVTransformParams:{value:new i(0,0,1,1)},specularMapTexelTransformParams:{value:new r(1,0)},alphaMap:{value:null},alphaMapUVTransformParams:{value:new i(0,0,1,1)},alphaMapTexelTransformParams:{value:new r(1,0)},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapUVTransformParams:{value:new i(0,0,1,1)},aoMapTexelTransformParams:{value:new r(1,0)},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapUVTransformParams:{value:new i(0,0,1,1)},lightMapTexelTransformParams:{value:new r(1,0)},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null},emissiveMapUVTransformParams:{value:new i(0,0,1,1)},emissiveMapTexelTransformParams:{value:new r(1,0)}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1},bumpMapUVTransformParams:{value:new i(0,0,1,1)},bumpMapTexelTransformParams:{value:new r(1,0)}},normalmap:{normalMap:{value:null},normalScale:{value:new r(1,1)},normalMapUVTransformParams:{value:new i(0,0,1,1)},normalMapTexelTransformParams:{value:new r(1,0)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0},displacementMapUVTransformParams:{value:new i(0,0,1,1)},displacementMapTexelTransformParams:{value:new r(1,0)}},falloffmap:{falloffMap:{value:null},falloffMapUVTransformParams:{value:new i(0,0,1,1)},falloffMapTexelTransformParams:{value:new r(1,0)}},falloffalphamap:{falloffAlphaMap:{value:null},falloffAlphaMapUVTransformParams:{value:new i(0,0,1,1)},falloffAlphaMapTexelTransformParams:{value:new r(1,0)}},roughnessmap:{roughnessMap:{value:null},roughnessMapUVTransformParams:{value:new i(0,0,1,1)},roughnessMapTexelTransformParams:{value:new r(1,0)}},metalnessmap:{metalnessMap:{value:null},metalnessMapUVTransformParams:{value:new i(0,0,1,1)},metalnessMapTexelTransformParams:{value:new r(1,0)}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new H(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowSpreadAngle:{},shadowCameraParams:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraParams:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new H(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new i(0,0,1,1)}}},ps={basic:{uniforms:cs.merge([ds.common,ds.aomap,ds.lightmap,ds.fog]),vertexShader:hs.meshbasic_vert,fragmentShader:hs.meshbasic_frag},lambert:{uniforms:cs.merge([ds.common,ds.aomap,ds.lightmap,ds.emissivemap,ds.fog,ds.lights,{emissive:{value:new H(0)}}]),vertexShader:hs.meshlambert_vert,fragmentShader:hs.meshlambert_frag},phong:{uniforms:cs.merge([ds.common,ds.aomap,ds.lightmap,ds.emissivemap,ds.bumpmap,ds.normalmap,ds.displacementmap,ds.gradientmap,ds.fog,ds.lights,{emissive:{value:new H(0)},specular:{value:new H(1118481)},shininess:{value:30}}]),vertexShader:hs.meshphong_vert,fragmentShader:hs.meshphong_frag},standard:{uniforms:cs.merge([ds.common,ds.aomap,ds.lightmap,ds.emissivemap,ds.bumpmap,ds.normalmap,ds.displacementmap,ds.roughnessmap,ds.metalnessmap,ds.fog,ds.lights,{emissive:{value:new H(0)},roughness:{value:.5},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:hs.meshphysical_vert,fragmentShader:hs.meshphysical_frag},points:{uniforms:cs.merge([ds.points,ds.fog]),vertexShader:hs.points_vert,fragmentShader:hs.points_frag},dashed:{uniforms:cs.merge([ds.common,ds.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:hs.linedashed_vert,fragmentShader:hs.linedashed_frag},depth:{uniforms:cs.merge([ds.common,ds.displacementmap]),vertexShader:hs.depth_vert,fragmentShader:hs.depth_frag},normal:{uniforms:cs.merge([ds.common,ds.bumpmap,ds.normalmap,ds.displacementmap,{opacity:{value:1}}]),vertexShader:hs.normal_vert,fragmentShader:hs.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:hs.cube_vert,fragmentShader:hs.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:hs.equirect_vert,fragmentShader:hs.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new u}},vertexShader:hs.distanceRGBA_vert,fragmentShader:hs.distanceRGBA_frag}};ps.cubeEnv={uniforms:cs.merge([ds.common,ps.standard.uniforms,{envMap:{value:null},envMapIntensity:{value:1},tFlip:{value:-1},opacity:{value:1},roughness:{value:0}}]),vertexShader:hs.cubeEnv_vert,fragmentShader:hs.cubeEnv_frag},ps.physical={uniforms:cs.merge([ps.standard.uniforms,ds.falloffmap,ds.falloffalphamap,{falloffDiffuse:{value:new H(16777215)},falloffOpacity:{value:0},clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:hs.meshphysical_vert,fragmentShader:hs.meshphysical_frag},W.prototype={constructor:W,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,r=t.length;e<r;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new r;return function(e,r){var n=t.copy(r).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){var e=t||new r;return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){var e=t||new r;return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return(e||new r).set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return(e||new r).copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new r;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}};var ms=0;Z.prototype={constructor:Z,isMaterial:!0,get needsUpdate(){return this._needsUpdate},set needsUpdate(t){!0===t&&this.update(),this._needsUpdate=t,this.version++},setValues:function(t){if(void 0!==t)for(var e in t){var r=t[e];if(void 0!==r){var n=this[e];void 0!==n?n&&n.isColor?n.set(r):n&&n.isVector3&&r&&r.isVector3?n.copy(r):this[e]="overdraw"===e?Number(r):r:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}},toJSON:function(t){function e(t){var e=[];for(var r in t){var n=t[r];delete n.metadata,e.push(n)}return e}var r=void 0===t;r&&(t={textures:{},images:{}});var n={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==pa&&(n.blending=this.blending),this.shading!==la&&(n.shading=this.shading),this.side!==aa&&(n.side=this.side),this.vertexColors!==ca&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),n.skinning=this.skinning,n.morphTargets=this.morphTargets,r){var i=e(t.textures),a=e(t.images);i.length>0&&(n.textures=i),a.length>0&&(n.images=a)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.shading=t.shading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.overdraw=t.overdraw,this.visible=t.visible,this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var e=t.clippingPlanes,r=null;if(null!==e){var n=e.length;r=new Array(n);for(var i=0;i!==n;++i)r[i]=e[i].clone()}return this.clippingPlanes=r,this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(Z.prototype,e.prototype),K.prototype=Object.create(Z.prototype),K.prototype.constructor=K,K.prototype.isShaderMaterial=!0,K.prototype.copy=function(t){return Z.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=cs.clone(t.uniforms),this.defines=t.defines,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},K.prototype.toJSON=function(t){var e=Z.prototype.toJSON.call(this,t);return e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e},J.prototype=Object.create(Z.prototype),J.prototype.constructor=J,J.prototype.isMeshDepthMaterial=!0,J.prototype.copy=function(t){return Z.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.clearColor=t.clearColor,this.clearAlpha=t.clearAlpha,this},$.prototype={constructor:$,isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,r=1/0,n=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,u=t.length;s<u;s+=3){var l=t[s],c=t[s+1],h=t[s+2];l<e&&(e=l),c<r&&(r=c),h<n&&(n=h),l>i&&(i=l),c>a&&(a=c),h>o&&(o=h)}this.min.set(e,r,n),this.max.set(i,a,o)},setFromBufferAttribute:function(t){for(var e=1/0,r=1/0,n=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,u=t.count;s<u;s++){var l=t.getX(s),c=t.getY(s),h=t.getZ(s);l<e&&(e=l),c<r&&(r=c),h<n&&(n=h),l>i&&(i=l),c>a&&(a=c),h>o&&(o=h)}this.min.set(e,r,n),this.max.set(i,a,o)},setFromPoints:function(t){this.makeEmpty();for(var e=0,r=t.length;e<r;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new u;return function(e,r){var n=t.copy(r).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}}(),setFromObject:function(){var t=new u;return function(e){var r=this;return e.updateMatrixWorld(!0),this.makeEmpty(),e.traverse(function(e){var n,i,a=e.geometry;if(void 0!==a)if(a.isGeometry){var o=a.vertices;for(n=0,i=o.length;n<i;n++)t.copy(o[n]),t.applyMatrix4(e.matrixWorld),r.expandByPoint(t)}else if(a.isBufferGeometry){var s=a.attributes.position;if(void 0!==s)for(n=0,i=s.count;n<i;n++)t.fromBufferAttribute(s,n).applyMatrix4(e.matrixWorld),r.expandByPoint(t)}}),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){var e=t||new u;return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){var e=t||new u;return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return(e||new u).set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(){var t;return function(e){return void 0===t&&(t=new u),this.clampPoint(e.center,t),t.distanceToSquared(e.center)<=e.radius*e.radius}}(),intersectsPlane:function(t){var e,r;return t.normal.x>0?(e=t.normal.x*this.min.x,r=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,r=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,r+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,r+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,r+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,r+=t.normal.z*this.min.z),e<=t.constant&&r>=t.constant},clampPoint:function(t,e){return(e||new u).copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new u;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),getBoundingSphere:function(){var t=new u;return function(e){var r=e||new tt;return this.getCenter(r.center),r.radius=.5*this.getSize(t).length(),r}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var t=[new u,new u,new u,new u,new u,new u,new u,new u];return function(e){return this.isEmpty()?this:(t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(t),this)}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},tt.prototype={constructor:tt,set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(){var t=new $;return function(e,r){var n=this.center;void 0!==r?n.copy(r):t.setFromPoints(e).getCenter(n);for(var i=0,a=0,o=e.length;a<o;a++)i=Math.max(i,n.distanceToSquared(e[a]));return this.radius=Math.sqrt(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(this.center.dot(t.normal)-t.constant)<=this.radius},clampPoint:function(t,e){var r=this.center.distanceToSquared(t),n=e||new u;return n.copy(t),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n},getBoundingBox:function(t){var e=t||new $;return e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}},et.prototype={constructor:et,isMatrix3:!0,set:function(t,e,r,n,i,a,o,s,u){var l=this.elements;return l[0]=t,l[1]=n,l[2]=o,l[3]=e,l[4]=i,l[5]=s,l[6]=r,l[7]=a,l[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=t.elements;return this.set(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]),this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(){var t;return function(e){void 0===t&&(t=new u);for(var r=0,n=e.count;r<n;r++)t.x=e.getX(r),t.y=e.getY(r),t.z=e.getZ(r),t.applyMatrix3(this),e.setXYZ(r,t.x,t.y,t.z);return e}}(),multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],o=t[5],s=t[6],u=t[7],l=t[8];return e*a*l-e*o*u-r*i*l+r*o*s+n*i*u-n*a*s},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var r=t.elements,n=this.elements,i=r[0],a=r[1],o=r[2],s=r[3],u=r[4],l=r[5],c=r[6],h=r[7],f=r[8],d=f*u-l*h,p=l*c-f*s,m=h*s-u*c,g=i*d+a*p+o*m;if(0===g){var v="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(!0===e)throw new Error(v);return console.warn(v),this.identity()}var y=1/g;return n[0]=d*y,n[1]=(o*h-f*a)*y,n[2]=(l*a-o*u)*y,n[3]=p*y,n[4]=(f*i-o*c)*y,n[5]=(o*s-l*i)*y,n[6]=m*y,n[7]=(a*c-h*i)*y,n[8]=(u*i-a*s)*y,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},fromArray:function(t,e){void 0===e&&(e=0);for(var r=0;r<9;r++)this.elements[r]=t[r+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var r=this.elements;return t[e]=r[0],t[e+1]=r[1],t[e+2]=r[2],t[e+3]=r[3],t[e+4]=r[4],t[e+5]=r[5],t[e+6]=r[6],t[e+7]=r[7],t[e+8]=r[8],t}},rt.prototype={constructor:rt,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,r,n){return this.normal.set(t,e,r),this.constant=n,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new u,e=new u;return function(r,n,i){var a=t.subVectors(i,n).cross(e.subVectors(r,n)).normalize();return this.setFromNormalAndCoplanarPoint(a,r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return this.orthoPoint(t,e).sub(t).negate()},orthoPoint:function(t,e){var r=this.distanceToPoint(t);return(e||new u).copy(this.normal).multiplyScalar(r)},intersectLine:function(){var t=new u;return function(e,r){var n=r||new u,i=e.delta(t),a=this.normal.dot(i);if(0!==a){var o=-(e.start.dot(this.normal)+this.constant)/a;if(!(o<0||o>1))return n.copy(i).multiplyScalar(o).add(e.start)}else if(0===this.distanceToPoint(e.start))return n.copy(e.start)}}(),intersectsLine:function(t){var e=this.distanceToPoint(t.start),r=this.distanceToPoint(t.end);return e<0&&r>0||r<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return(t||new u).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new u,e=new et;return function(r,n){var i=this.coplanarPoint(t).applyMatrix4(r),a=n||e.getNormalMatrix(r),o=this.normal.applyMatrix3(a).normalize();return this.constant=-i.dot(o),this}}(),translate:function(t){return this.constant=this.constant-t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}},nt.prototype={constructor:nt,set:function(t,e,r,n,i,a){var o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(r),o[3].copy(n),o[4].copy(i),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,r=0;r<6;r++)e[r].copy(t.planes[r]);return this},setFromMatrix:function(t){var e=this.planes,r=t.elements,n=r[0],i=r[1],a=r[2],o=r[3],s=r[4],u=r[5],l=r[6],c=r[7],h=r[8],f=r[9],d=r[10],p=r[11],m=r[12],g=r[13],v=r[14],y=r[15];return e[0].setComponents(o-n,c-s,p-h,y-m).normalize(),e[1].setComponents(o+n,c+s,p+h,y+m).normalize(),e[2].setComponents(o+i,c+u,p+f,y+g).normalize(),e[3].setComponents(o-i,c-u,p-f,y-g).normalize(),e[4].setComponents(o-a,c-l,p-d,y-v).normalize(),e[5].setComponents(o+a,c+l,p+d,y+v).normalize(),this},intersectsObject:function(){var t=new tt;return function(e){var r=e.geometry;return null===r.boundingSphere&&r.computeBoundingSphere(),t.copy(r.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSprite:function(){var t=new tt;return function(e){return t.center.set(0,0,0),t.radius=.7071067811865476,t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){for(var e=this.planes,r=t.center,n=-t.radius,i=0;i<6;i++){if(e[i].distanceToPoint(r)<n)return!1}return!0},intersectsBox:function(){var t=new u,e=new u;return function(r){for(var n=this.planes,i=0;i<6;i++){var a=n[i];t.x=a.normal.x>0?r.min.x:r.max.x,e.x=a.normal.x>0?r.max.x:r.min.x,t.y=a.normal.y>0?r.min.y:r.max.y,e.y=a.normal.y>0?r.max.y:r.min.y,t.z=a.normal.z>0?r.min.z:r.max.z,e.z=a.normal.z>0?r.max.z:r.min.z;var o=a.distanceToPoint(t),s=a.distanceToPoint(e);if(o<0&&s<0)return!1}return!0}}(),containsPoint:function(t){for(var e=this.planes,r=0;r<6;r++)if(e[r].distanceToPoint(t)<0)return!1;return!0}},at.prototype={constructor:at,set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return(e||new u).copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(){var t=new u;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(t,e){var r=e||new u;r.subVectors(t,this.origin);var n=r.dot(this.direction);return n<0?r.copy(this.origin):r.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(){var t=new u;return function(e){var r=t.subVectors(e,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(e):(t.copy(this.direction).multiplyScalar(r).add(this.origin),t.distanceToSquared(e))}}(),distanceSqToSegment:function(){var t=new u,e=new u,r=new u;return function(n,i,a,o){t.copy(n).add(i).multiplyScalar(.5),e.copy(i).sub(n).normalize(),r.copy(this.origin).sub(t);var s,u,l,c,h=.5*n.distanceTo(i),f=-this.direction.dot(e),d=r.dot(this.direction),p=-r.dot(e),m=r.lengthSq(),g=Math.abs(1-f*f);if(g>0)if(s=f*p-d,u=f*d-p,c=h*g,s>=0)if(u>=-c)if(u<=c){var v=1/g;s*=v,u*=v,l=s*(s+f*u+2*d)+u*(f*s+u+2*p)+m}else u=h,s=Math.max(0,-(f*u+d)),l=-s*s+u*(u+2*p)+m;else u=-h,s=Math.max(0,-(f*u+d)),l=-s*s+u*(u+2*p)+m;else u<=-c?(s=Math.max(0,-(-f*h+d)),u=s>0?-h:Math.min(Math.max(-h,-p),h),l=-s*s+u*(u+2*p)+m):u<=c?(s=0,u=Math.min(Math.max(-h,-p),h),l=u*(u+2*p)+m):(s=Math.max(0,-(f*h+d)),u=s>0?h:Math.min(Math.max(-h,-p),h),l=-s*s+u*(u+2*p)+m);else u=f>0?-h:h,s=Math.max(0,-(f*u+d)),l=-s*s+u*(u+2*p)+m;return a&&a.copy(this.direction).multiplyScalar(s).add(this.origin),o&&o.copy(e).multiplyScalar(u).add(t),l}}(),intersectSphere:function(){var t=new u;return function(e,r){t.subVectors(e.center,this.origin);var n=t.dot(this.direction),i=t.dot(t)-n*n,a=e.radius*e.radius;if(i>a)return null;var o=Math.sqrt(a-i),s=n-o,u=n+o;return s<0&&u<0?null:s<0?this.at(u,r):this.at(s,r)}}(),intersectsSphere:function(t){return this.distanceToPoint(t.center)<=t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var r=-(this.origin.dot(t.normal)+t.constant)/e;return r>=0?r:null},intersectPlane:function(t,e){var r=this.distanceToPlane(t);return null===r?null:this.at(r,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0},intersectBox:function(t,e){var r,n,i,a,o,s,u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,h=this.origin;return u>=0?(r=(t.min.x-h.x)*u,n=(t.max.x-h.x)*u):(r=(t.max.x-h.x)*u,n=(t.min.x-h.x)*u),l>=0?(i=(t.min.y-h.y)*l,a=(t.max.y-h.y)*l):(i=(t.max.y-h.y)*l,a=(t.min.y-h.y)*l),r>a||i>n?null:((i>r||r!==r)&&(r=i),(a<n||n!==n)&&(n=a),c>=0?(o=(t.min.z-h.z)*c,s=(t.max.z-h.z)*c):(o=(t.max.z-h.z)*c,s=(t.min.z-h.z)*c),r>s||o>n?null:((o>r||r!==r)&&(r=o),(s<n||n!==n)&&(n=s),n<0?null:this.at(r>=0?r:n,e)))},intersectsBox:function(){var t=new u;return function(e){return null!==this.intersectBox(e,t)}}(),intersectTriangle:function(){var t=new u,e=new u,r=new u,n=new u;return function(i,a,o,s,u){e.subVectors(a,i),r.subVectors(o,i),n.crossVectors(e,r);var l,c=this.direction.dot(n);if(c>0){if(s)return null;l=1}else{if(!(c<0))return null;l=-1,c=-c}t.subVectors(this.origin,i);var h=l*this.direction.dot(r.crossVectors(t,r));if(h<0)return null;var f=l*this.direction.dot(e.cross(t));if(f<0)return null;if(h+f>c)return null;var d=-l*t.dot(n);return d<0?null:this.at(d/c,u)}}(),applyMatrix4:function(t){return this.direction.add(this.origin).applyMatrix4(t),this.origin.applyMatrix4(t),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}},ot.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],ot.DefaultOrder="XYZ",ot.prototype={constructor:ot,isEuler:!0,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get order(){return this._order},set order(t){this._order=t,this.onChangeCallback()},set:function(t,e,r,n){return this._x=t,this._y=e,this._z=r,this._order=n||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,r){var n=ns.clamp,i=t.elements,a=i[0],o=i[4],s=i[8],u=i[1],l=i[5],c=i[9],h=i[2],f=i[6],d=i[10];return e=e||this._order,"XYZ"===e?(this._y=Math.asin(n(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(f,l),this._z=0)):"YXZ"===e?(this._x=Math.asin(-n(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(s,d),this._z=Math.atan2(u,l)):(this._y=Math.atan2(-h,a),this._z=0)):"ZXY"===e?(this._x=Math.asin(n(f,-1,1)),Math.abs(f)<.99999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(u,a))):"ZYX"===e?(this._y=Math.asin(-n(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(f,d),this._z=Math.atan2(u,a)):(this._x=0,this._z=Math.atan2(-o,l))):"YZX"===e?(this._z=Math.asin(n(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-h,a)):(this._x=0,this._y=Math.atan2(s,d))):"XZY"===e?(this._z=Math.asin(-n(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(f,l),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-c,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==r&&this.onChangeCallback(),this},setFromQuaternion:function(){var t;return function(e,r,n){return void 0===t&&(t=new l),t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,r,n)}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(){var t=new s;return function(e){return t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new u(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}},st.prototype={constructor:st,set:function(t){this.mask=1<<t},enable:function(t){this.mask|=1<<t},toggle:function(t){this.mask^=1<<t},disable:function(t){this.mask&=~(1<<t)},test:function(t){return 0!=(this.mask&t.mask)}};var gs=0;ut.DefaultUp=new u(0,1,0),ut.DefaultMatrixAutoUpdate=!0,ut.prototype={constructor:ut,isObject3D:!0,applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new s;return function(e,r){return t.setFromAxisAngle(e,r),this.quaternion.multiply(t),this}}(),rotateX:function(){var t=new u(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new u(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new u(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new u;return function(e,r){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(r)),this}}(),translateX:function(){var t=new u(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new u(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new u(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new l;return function(e){return e.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new l;return function(e){t.lookAt(e,this.position,this.up),this.quaternion.setFromRotationMatrix(t)}}(),add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1)for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);var r=this.children.indexOf(t);-1!==r&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(r,1))},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var r=0,n=this.children.length;r<n;r++){var i=this.children[r],a=i.getObjectByProperty(t,e);if(void 0!==a)return a}},getWorldPosition:function(t){var e=t||new u;return this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var t=new u,e=new u;return function(r){var n=r||new s;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,n,e),n}}(),getWorldRotation:function(){var t=new s;return function(e){var r=e||new ot;return this.getWorldQuaternion(t),r.setFromQuaternion(t,this.rotation.order,!1)}}(),getWorldScale:function(){var t=new u,e=new s;return function(r){var n=r||new u;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,n),n}}(),getWorldDirection:function(){var t=new s;return function(e){var r=e||new u;return this.getWorldQuaternion(t),r.set(0,0,1).applyQuaternion(t)}}(),raycast:function(){},traverse:function(t){t(this);for(var e=this.children,r=0,n=e.length;r<n;r++)e[r].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,r=0,n=e.length;r<n;r++)e[r].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){!0===this.matrixAutoUpdate&&this.updateMatrix(),!0!==this.matrixWorldNeedsUpdate&&!0!==t||(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,r=0,n=e.length;r<n;r++)e[r].updateMatrixWorld(t)},toJSON:function(t){function e(t){var e=[];for(var r in t){var n=t[r];delete n.metadata,e.push(n)}return e}var r=void 0===t||""===t,n={};r&&(t={geometries:{},materials:{},textures:{},images:{}},n.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var i={};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),i.matrix=this.matrix.toArray(),void 0!==this.geometry&&(void 0===t.geometries[this.geometry.uuid]&&(t.geometries[this.geometry.uuid]=this.geometry.toJSON(t)),i.geometry=this.geometry.uuid),void 0!==this.material&&(void 0===t.materials[this.material.uuid]&&(t.materials[this.material.uuid]=this.material.toJSON(t)),i.material=this.material.uuid),this.children.length>0){i.children=[];for(var a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(t).object)}if(r){var o=e(t.geometries),s=e(t.materials),u=e(t.textures),l=e(t.images);o.length>0&&(n.geometries=o),s.length>0&&(n.materials=s),u.length>0&&(n.textures=u),l.length>0&&(n.images=l)}return n.object=i,n},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var r=0;r<t.children.length;r++){var n=t.children[r];this.add(n.clone())}return this}},Object.assign(ut.prototype,e.prototype),lt.prototype={constructor:lt,set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return(t||new u).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return(t||new u).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){var r=e||new u;return this.delta(r).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(){var t=new u,e=new u;return function(r,n){t.subVectors(r,this.start),e.subVectors(this.end,this.start);var i=e.dot(e),a=e.dot(t),o=a/i;return n&&(o=ns.clamp(o,0,1)),o}}(),closestPointToPoint:function(t,e,r){var n=this.closestPointToPointParameter(t,e),i=r||new u;return this.delta(i).multiplyScalar(n).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}},ct.normal=function(){var t=new u;return function(e,r,n,i){var a=i||new u;a.subVectors(n,r),t.subVectors(e,r),a.cross(t);var o=a.lengthSq();return o>0?a.multiplyScalar(1/Math.sqrt(o)):a.set(0,0,0)}}(),ct.barycoordFromPoint=function(){var t=new u,e=new u,r=new u;return function(n,i,a,o,s){t.subVectors(o,i),e.subVectors(a,i),r.subVectors(n,i);var l=t.dot(t),c=t.dot(e),h=t.dot(r),f=e.dot(e),d=e.dot(r),p=l*f-c*c,m=s||new u;if(0===p)return m.set(-2,-1,-1);var g=1/p,v=(f*h-c*d)*g,y=(l*d-c*h)*g;return m.set(1-v-y,y,v)}}(),ct.containsPoint=function(){var t=new u;return function(e,r,n,i){var a=ct.barycoordFromPoint(e,r,n,i,t);return a.x>=0&&a.y>=0&&a.x+a.y<=1}}(),ct.prototype={constructor:ct,set:function(t,e,r){return this.a.copy(t),this.b.copy(e),this.c.copy(r),this},setFromPointsAndIndices:function(t,e,r,n){return this.a.copy(t[e]),this.b.copy(t[r]),this.c.copy(t[n]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},area:function(){var t=new u,e=new u;return function(){return t.subVectors(this.c,this.b),e.subVectors(this.a,this.b),.5*t.cross(e).length()}}(),midpoint:function(t){return(t||new u).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(t){return ct.normal(this.a,this.b,this.c,t)},plane:function(t){return(t||new rt).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(t,e){return ct.barycoordFromPoint(t,this.a,this.b,this.c,e)},containsPoint:function(t){return ct.containsPoint(t,this.a,this.b,this.c)},closestPointToPoint:function(){var t,e,r,n;return function(i,a){void 0===t&&(t=new rt,e=[new lt,new lt,new lt],r=new u,n=new u);var o=a||new u,s=1/0;if(t.setFromCoplanarPoints(this.a,this.b,this.c),t.projectPoint(i,r),!0===this.containsPoint(r))o.copy(r);else{e[0].set(this.a,this.b),e[1].set(this.b,this.c),e[2].set(this.c,this.a);for(var l=0;l<e.length;l++){e[l].closestPointToPoint(r,!0,n);var c=r.distanceToSquared(n);c<s&&(s=c,o.copy(n))}}return o}}(),equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}},ht.prototype={constructor:ht,clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,r=t.vertexNormals.length;e<r;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(var e=0,r=t.vertexColors.length;e<r;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}},ft.prototype=Object.create(Z.prototype),ft.prototype.constructor=ft,ft.prototype.isMeshBasicMaterial=!0,ft.prototype.copy=function(t){return Z.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},dt.prototype={constructor:dt,isBufferAttribute:!0,set needsUpdate(t){!0===t&&this.version++},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==t?t.length/this.itemSize:0,this.array=t},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,r){t*=this.itemSize,r*=e.itemSize;for(var n=0,i=this.itemSize;n<i;n++)this.array[t+n]=e.array[r+n];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,r=0,n=0,i=t.length;n<i;n++){var a=t[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),a=new H),e[r++]=a.r,e[r++]=a.g,e[r++]=a.b}return this},copyIndicesArray:function(t){for(var e=this.array,r=0,n=0,i=t.length;n<i;n++){var a=t[n];e[r++]=a.a,e[r++]=a.b,e[r++]=a.c}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,i=0,a=t.length;i<a;i++){var o=t[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),o=new r),e[n++]=o.x,e[n++]=o.y}return this},copyVector3sArray:function(t){for(var e=this.array,r=0,n=0,i=t.length;n<i;n++){var a=t[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),a=new u),e[r++]=a.x,e[r++]=a.y,e[r++]=a.z}return this},copyVector4sArray:function(t){for(var e=this.array,r=0,n=0,a=t.length;n<a;n++){var o=t[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),o=new i),e[r++]=o.x,e[r++]=o.y,e[r++]=o.z,e[r++]=o.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=r,this},setXYZ:function(t,e,r,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=r,this.array[t+2]=n,this},setXYZW:function(t,e,r,n,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=r,this.array[t+2]=n,this.array[t+3]=i,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return(new this.constructor).copy(this)}},pt.prototype=Object.create(dt.prototype),pt.prototype.constructor=pt,mt.prototype=Object.create(dt.prototype),mt.prototype.constructor=mt,gt.prototype=Object.create(dt.prototype),gt.prototype.constructor=gt,vt.prototype=Object.create(dt.prototype),vt.prototype.constructor=vt,yt.prototype=Object.create(dt.prototype),yt.prototype.constructor=yt,Mt.prototype=Object.create(dt.prototype),Mt.prototype.constructor=Mt,wt.prototype=Object.create(dt.prototype),wt.prototype.constructor=wt,xt.prototype=Object.create(dt.prototype),xt.prototype.constructor=xt,bt.prototype=Object.create(dt.prototype),bt.prototype.constructor=bt,Object.assign(Tt.prototype,{computeGroups:function(t){for(var e,r=[],n=void 0,i=t.faces,a=0;a<i.length;a++){var o=i[a];o.materialIndex!==n&&(n=o.materialIndex,void 0!==e&&(e.count=3*a-e.start,r.push(e)),e={start:3*a,materialIndex:n})}void 0!==e&&(e.count=3*a-e.start,r.push(e)),this.groups=r},fromGeometry:function(t){var e,n=t.faces,i=t.vertices,a=t.faceVertexUvs,o=a[0]&&a[0].length>0,s=a[1]&&a[1].length>0,u=t.morphTargets,l=u.length;if(l>0){e=[];for(var c=0;c<l;c++)e[c]=[];this.morphTargets.position=e}var h,f=t.morphNormals,d=f.length;if(d>0){h=[];for(var c=0;c<d;c++)h[c]=[];this.morphTargets.normal=h}for(var p=t.skinIndices,m=t.skinWeights,g=p.length===i.length,v=m.length===i.length,c=0;c<n.length;c++){var y=n[c];this.vertices.push(i[y.a],i[y.b],i[y.c]);var M=y.vertexNormals;if(3===M.length)this.normals.push(M[0],M[1],M[2]);else{var w=y.normal;this.normals.push(w,w,w)}var x=y.vertexColors;if(3===x.length)this.colors.push(x[0],x[1],x[2]);else{var b=y.color;this.colors.push(b,b,b)}if(!0===o){var T=a[0][c];void 0!==T?this.uvs.push(T[0],T[1],T[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new r,new r,new r))}if(!0===s){var T=a[1][c];void 0!==T?this.uvs2.push(T[0],T[1],T[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new r,new r,new r))}for(var E=0;E<l;E++){var S=u[E].vertices;e[E].push(S[y.a],S[y.b],S[y.c])}for(var E=0;E<d;E++){var _=f[E].vertexNormals[c];h[E].push(_.a,_.b,_.c)}g&&this.skinIndices.push(p[y.a],p[y.b],p[y.c]),v&&this.skinWeights.push(m[y.a],m[y.b],m[y.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this}});var vs=0;St.prototype={constructor:St,isGeometry:!0,applyMatrix:function(t){for(var e=(new et).getNormalMatrix(t),r=0,n=this.vertices.length;r<n;r++){this.vertices[r].applyMatrix4(t)}for(var r=0,n=this.faces.length;r<n;r++){var i=this.faces[r];i.normal.applyMatrix3(e).normalize();for(var a=0,o=i.vertexNormals.length;a<o;a++)i.vertexNormals[a].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var t;return function(e){return void 0===t&&(t=new l),t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t;return function(e){return void 0===t&&(t=new l),t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t;return function(e){return void 0===t&&(t=new l),t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t;return function(e,r,n){return void 0===t&&(t=new l),t.makeTranslation(e,r,n),this.applyMatrix(t),this}}(),scale:function(){var t;return function(e,r,n){return void 0===t&&(t=new l),t.makeScale(e,r,n),this.applyMatrix(t),this}}(),lookAt:function(){var t;return function(e){void 0===t&&(t=new ut),t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),fromBufferGeometry:function(t){function e(t,e,r,i){var a=void 0!==s?[f[t].clone(),f[e].clone(),f[r].clone()]:[],o=void 0!==l?[n.colors[t].clone(),n.colors[e].clone(),n.colors[r].clone()]:[],u=new ht(t,e,r,a,o,i);n.faces.push(u),void 0!==c&&n.faceVertexUvs[0].push([d[t].clone(),d[e].clone(),d[r].clone()]),void 0!==h&&n.faceVertexUvs[1].push([p[t].clone(),p[e].clone(),p[r].clone()])}var n=this,i=null!==t.index?t.index.array:void 0,a=t.attributes,o=a.position.array,s=void 0!==a.normal?a.normal.array:void 0,l=void 0!==a.color?a.color.array:void 0,c=void 0!==a.uv?a.uv.array:void 0,h=void 0!==a.uv2?a.uv2.array:void 0;void 0!==h&&(this.faceVertexUvs[1]=[]);for(var f=[],d=[],p=[],m=0,g=0;m<o.length;m+=3,g+=2)n.vertices.push(new u(o[m],o[m+1],o[m+2])),void 0!==s&&f.push(new u(s[m],s[m+1],s[m+2])),void 0!==l&&n.colors.push(new H(l[m],l[m+1],l[m+2])),void 0!==c&&d.push(new r(c[g],c[g+1])),void 0!==h&&p.push(new r(h[g],h[g+1]));if(void 0!==i){var v=t.groups;if(v.length>0)for(var m=0;m<v.length;m++)for(var y=v[m],M=y.start,w=y.count,g=M,x=M+w;g<x;g+=3)e(i[g],i[g+1],i[g+2],y.materialIndex);else for(var m=0;m<i.length;m+=3)e(i[m],i[m+1],i[m+2])}else for(var m=0;m<o.length/3;m+=3)e(m,m+1,m+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var t=this.boundingBox.getCenter().negate();return this.translate(t.x,t.y,t.z),t},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,r=0===e?1:1/e,n=new l;return n.set(r,0,0,-r*t.x,0,r,0,-r*t.y,0,0,r,-r*t.z,0,0,0,1),this.applyMatrix(n),this},computeFaceNormals:function(){for(var t=new u,e=new u,r=0,n=this.faces.length;r<n;r++){var i=this.faces[r],a=this.vertices[i.a],o=this.vertices[i.b],s=this.vertices[i.c];t.subVectors(s,o),e.subVectors(a,o),t.cross(e),t.normalize(),i.normal.copy(t)}},computeVertexNormals:function(t){void 0===t&&(t=!0);var e,r,n,i,a,o;for(o=new Array(this.vertices.length),e=0,r=this.vertices.length;e<r;e++)o[e]=new u;if(t){var s,l,c,h=new u,f=new u;for(n=0,i=this.faces.length;n<i;n++)a=this.faces[n],s=this.vertices[a.a],l=this.vertices[a.b],c=this.vertices[a.c],h.subVectors(c,l),f.subVectors(s,l),h.cross(f),o[a.a].add(h),o[a.b].add(h),o[a.c].add(h)}else for(this.computeFaceNormals(),n=0,i=this.faces.length;n<i;n++)a=this.faces[n],o[a.a].add(a.normal),o[a.b].add(a.normal),o[a.c].add(a.normal);for(e=0,r=this.vertices.length;e<r;e++)o[e].normalize();for(n=0,i=this.faces.length;n<i;n++){a=this.faces[n];var d=a.vertexNormals;3===d.length?(d[0].copy(o[a.a]),d[1].copy(o[a.b]),d[2].copy(o[a.c])):(d[0]=o[a.a].clone(),d[1]=o[a.b].clone(),d[2]=o[a.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,e,r;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){r=this.faces[t];var n=r.vertexNormals;3===n.length?(n[0].copy(r.normal),n[1].copy(r.normal),n[2].copy(r.normal)):(n[0]=r.normal.clone(),n[1]=r.normal.clone(),n[2]=r.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,r,n,i;for(r=0,n=this.faces.length;r<n;r++)for(i=this.faces[r],i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),t=0,e=i.vertexNormals.length;t<e;t++)i.__originalVertexNormals[t]?i.__originalVertexNormals[t].copy(i.vertexNormals[t]):i.__originalVertexNormals[t]=i.vertexNormals[t].clone();var a=new St;for(a.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var o,s,l=this.morphNormals[t].faceNormals,c=this.morphNormals[t].vertexNormals;for(r=0,n=this.faces.length;r<n;r++)o=new u,s={a:new u,b:new u,c:new u},l.push(o),c.push(s)}var h=this.morphNormals[t];a.vertices=this.morphTargets[t].vertices,a.computeFaceNormals(),a.computeVertexNormals();var o,s;for(r=0,n=this.faces.length;r<n;r++)i=this.faces[r],o=h.faceNormals[r],s=h.vertexNormals[r],o.copy(i.normal),s.a.copy(i.vertexNormals[0]),s.b.copy(i.vertexNormals[1]),s.c.copy(i.vertexNormals[2])}for(r=0,n=this.faces.length;r<n;r++)i=this.faces[r],i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeLineDistances:function(){for(var t=0,e=this.vertices,r=0,n=e.length;r<n;r++)r>0&&(t+=e[r].distanceTo(e[r-1])),this.lineDistances[r]=t},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new $),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new tt),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,r){if(!1===(t&&t.isGeometry))return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);var n,i=this.vertices.length,a=this.vertices,o=t.vertices,s=this.faces,u=t.faces,l=this.faceVertexUvs[0],c=t.faceVertexUvs[0],h=this.colors,f=t.colors;void 0===r&&(r=0),void 0!==e&&(n=(new et).getNormalMatrix(e));for(var d=0,p=o.length;d<p;d++){var m=o[d],g=m.clone();void 0!==e&&g.applyMatrix4(e),a.push(g)}for(var d=0,p=f.length;d<p;d++)h.push(f[d].clone());for(d=0,p=u.length;d<p;d++){var v,y,M,w=u[d],x=w.vertexNormals,b=w.vertexColors;v=new ht(w.a+i,w.b+i,w.c+i),v.normal.copy(w.normal),void 0!==n&&v.normal.applyMatrix3(n).normalize();for(var T=0,E=x.length;T<E;T++)y=x[T].clone(),void 0!==n&&y.applyMatrix3(n).normalize(),v.vertexNormals.push(y);v.color.copy(w.color);for(var T=0,E=b.length;T<E;T++)M=b[T],v.vertexColors.push(M.clone());v.materialIndex=w.materialIndex+r,s.push(v)}for(d=0,p=c.length;d<p;d++){var S=c[d],_=[];if(void 0!==S){for(var T=0,E=S.length;T<E;T++)_.push(S[T].clone());l.push(_)}}},mergeMesh:function(t){if(!1===(t&&t.isMesh))return void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t);t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)},mergeVertices:function(){var t,e,r,n,i,a,o,s,u={},l=[],c=[],h=Math.pow(10,4);for(r=0,n=this.vertices.length;r<n;r++)t=this.vertices[r],e=Math.round(t.x*h)+"_"+Math.round(t.y*h)+"_"+Math.round(t.z*h),void 0===u[e]?(u[e]=r,l.push(this.vertices[r]),c[r]=l.length-1):c[r]=c[u[e]];var f=[];for(r=0,n=this.faces.length;r<n;r++){i=this.faces[r],i.a=c[i.a],i.b=c[i.b],i.c=c[i.c],a=[i.a,i.b,i.c];for(var d=0;d<3;d++)if(a[d]===a[(d+1)%3]){f.push(r);break}}for(r=f.length-1;r>=0;r--){var p=f[r];for(this.faces.splice(p,1),o=0,s=this.faceVertexUvs.length;o<s;o++)this.faceVertexUvs[o].splice(p,1)}var m=this.vertices.length-l.length;return this.vertices=l,m},sortFacesByMaterialIndex:function(){function t(t,e){return t.materialIndex-e.materialIndex}for(var e=this.faces,r=e.length,n=0;n<r;n++)e[n]._id=n;e.sort(t);var i,a,o=this.faceVertexUvs[0],s=this.faceVertexUvs[1];o&&o.length===r&&(i=[]),s&&s.length===r&&(a=[]);for(var n=0;n<r;n++){var u=e[n]._id;i&&i.push(o[u]),a&&a.push(s[u])}i&&(this.faceVertexUvs[0]=i),a&&(this.faceVertexUvs[1]=a)},toJSON:function(){function t(t,e,r){return r?t|1<<e:t&~(1<<e)}function e(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==f[e]?f[e]:(f[e]=h.length/3,h.push(t.x,t.y,t.z),f[e])}function r(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==p[e]?p[e]:(p[e]=d.length,d.push(t.getHex()),p[e])}function n(t){var e=t.x.toString()+t.y.toString();return void 0!==g[e]?g[e]:(g[e]=m.length/2,m.push(t.x,t.y),g[e])}var i={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),void 0!==this.parameters){var a=this.parameters;for(var o in a)void 0!==a[o]&&(i[o]=a[o]);return i}for(var s=[],u=0;u<this.vertices.length;u++){var l=this.vertices[u];s.push(l.x,l.y,l.z)}for(var c=[],h=[],f={},d=[],p={},m=[],g={},u=0;u<this.faces.length;u++){var v=this.faces[u],y=void 0!==this.faceVertexUvs[0][u],M=v.normal.length()>0,w=v.vertexNormals.length>0,x=1!==v.color.r||1!==v.color.g||1!==v.color.b,b=v.vertexColors.length>0,T=0;if(T=t(T,0,0),T=t(T,1,!0),T=t(T,2,!1),T=t(T,3,y),T=t(T,4,M),T=t(T,5,w),T=t(T,6,x),T=t(T,7,b),c.push(T),c.push(v.a,v.b,v.c),c.push(v.materialIndex),y){var E=this.faceVertexUvs[0][u];c.push(n(E[0]),n(E[1]),n(E[2]))}if(M&&c.push(e(v.normal)),w){var S=v.vertexNormals;c.push(e(S[0]),e(S[1]),e(S[2]))}if(x&&c.push(r(v.color)),b){var _=v.vertexColors;c.push(r(_[0]),r(_[1]),r(_[2]))}}return i.data={},i.data.vertices=s,i.data.normals=h,d.length>0&&(i.data.colors=d),m.length>0&&(i.data.uvs=[m]),i.data.faces=c,i},clone:function(){return(new St).copy(this)},copy:function(t){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]],this.colors=[];for(var e=t.vertices,r=0,n=e.length;r<n;r++)this.vertices.push(e[r].clone());for(var i=t.colors,r=0,n=i.length;r<n;r++)this.colors.push(i[r].clone());for(var a=t.faces,r=0,n=a.length;r<n;r++)this.faces.push(a[r].clone());for(var r=0,n=t.faceVertexUvs.length;r<n;r++){var o=t.faceVertexUvs[r];void 0===this.faceVertexUvs[r]&&(this.faceVertexUvs[r]=[]);for(var s=0,u=o.length;s<u;s++){for(var l=o[s],c=[],h=0,f=l.length;h<f;h++){var d=l[h];c.push(d.clone())}this.faceVertexUvs[r].push(c)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(St.prototype,e.prototype),_t.prototype={constructor:_t,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){this.index=t},addAttribute:function(t,e){return!1===(e&&e.isBufferAttribute)&&!1===(e&&e.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(t,new dt(arguments[1],arguments[2]))):"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(e)):(this.attributes[t]=e,this)},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,r){this.groups.push({start:t,count:e,materialIndex:void 0!==r?r:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0);var r=this.attributes.normal;if(void 0!==r){(new et).getNormalMatrix(t).applyToBufferAttribute(r),r.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var t;return function(e){return void 0===t&&(t=new l),t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t;return function(e){return void 0===t&&(t=new l),t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t;return function(e){return void 0===t&&(t=new l),t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t;return function(e,r,n){return void 0===t&&(t=new l),t.makeTranslation(e,r,n),this.applyMatrix(t),this}}(),scale:function(){var t;return function(e,r,n){return void 0===t&&(t=new l),t.makeScale(e,r,n),this.applyMatrix(t),this}}(),lookAt:function(){var t;return function(e){void 0===t&&(t=new ut),t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),center:function(){this.computeBoundingBox();var t=this.boundingBox.getCenter().negate();return this.translate(t.x,t.y,t.z),t},setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var r=new xt(3*e.vertices.length,3),n=new xt(3*e.colors.length,3);if(this.addAttribute("position",r.copyVector3sArray(e.vertices)),this.addAttribute("color",n.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var i=new xt(e.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},updateFromObject:function(t){var e=t.geometry;if(t.isMesh){var r=e.__directGeometry;if(!0===e.elementsNeedUpdate&&(r=void 0,e.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(e);r.verticesNeedUpdate=e.verticesNeedUpdate,r.normalsNeedUpdate=e.normalsNeedUpdate,r.colorsNeedUpdate=e.colorsNeedUpdate,r.uvsNeedUpdate=e.uvsNeedUpdate,r.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=r}var n;return!0===e.verticesNeedUpdate&&(n=this.attributes.position,void 0!==n&&(n.copyVector3sArray(e.vertices),n.needsUpdate=!0),e.verticesNeedUpdate=!1),!0===e.normalsNeedUpdate&&(n=this.attributes.normal,void 0!==n&&(n.copyVector3sArray(e.normals),n.needsUpdate=!0),e.normalsNeedUpdate=!1),!0===e.colorsNeedUpdate&&(n=this.attributes.color,void 0!==n&&(n.copyColorsArray(e.colors),n.needsUpdate=!0),e.colorsNeedUpdate=!1),e.uvsNeedUpdate&&(n=this.attributes.uv,void 0!==n&&(n.copyVector2sArray(e.uvs),n.needsUpdate=!0),e.uvsNeedUpdate=!1),e.lineDistancesNeedUpdate&&(n=this.attributes.lineDistance,void 0!==n&&(n.copyArray(e.lineDistances),n.needsUpdate=!0),e.lineDistancesNeedUpdate=!1),e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new Tt).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new dt(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var r=new Float32Array(3*t.normals.length);this.addAttribute("normal",new dt(r,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var n=new Float32Array(3*t.colors.length);this.addAttribute("color",new dt(n,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var i=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new dt(i,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var a=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new dt(a,2).copyVector2sArray(t.uvs2))}if(t.indices.length>0){var o=t.vertices.length>65535?Uint32Array:Uint16Array,s=new o(3*t.indices.length);this.setIndex(new dt(s,1).copyIndicesArray(t.indices))}this.groups=t.groups;for(var u in t.morphTargets){for(var l=[],c=t.morphTargets[u],h=0,f=c.length;h<f;h++){var d=c[h],p=new xt(3*d.length,3);l.push(p.copyVector3sArray(d))}this.morphAttributes[u]=l}if(t.skinIndices.length>0){var m=new xt(4*t.skinIndices.length,4);this.addAttribute("skinIndex",m.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var g=new xt(4*t.skinWeights.length,4);this.addAttribute("skinWeight",g.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new $);var t=this.attributes.position;void 0!==t?this.boundingBox.setFromBufferAttribute(t):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var t=new $,e=new u;return function(){null===this.boundingSphere&&(this.boundingSphere=new tt);var r=this.attributes.position;if(r){var n=this.boundingSphere.center;t.setFromBufferAttribute(r),t.getCenter(n);for(var i=0,a=0,o=r.count;a<o;a++)e.x=r.getX(a),e.y=r.getY(a),e.z=r.getZ(a),i=Math.max(i,n.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes,r=this.groups;if(e.position){var n=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new dt(new Float32Array(n.length),3));else for(var i=e.normal.array,a=0,o=i.length;a<o;a++)i[a]=0;var s,l,c,h=e.normal.array,f=new u,d=new u,p=new u,m=new u,g=new u;if(t){var v=t.array;0===r.length&&this.addGroup(0,v.length);for(var y=0,M=r.length;y<M;++y)for(var w=r[y],x=w.start,b=w.count,a=x,o=x+b;a<o;a+=3)s=3*v[a+0],l=3*v[a+1],c=3*v[a+2],f.fromArray(n,s),d.fromArray(n,l),p.fromArray(n,c),m.subVectors(p,d),g.subVectors(f,d),m.cross(g),h[s]+=m.x,h[s+1]+=m.y,h[s+2]+=m.z,h[l]+=m.x,h[l+1]+=m.y,h[l+2]+=m.z,h[c]+=m.x,h[c+1]+=m.y,h[c+2]+=m.z}else for(var a=0,o=n.length;a<o;a+=9)f.fromArray(n,a),d.fromArray(n,a+3),p.fromArray(n,a+6),m.subVectors(p,d),g.subVectors(f,d),m.cross(g),h[a]=m.x,h[a+1]=m.y,h[a+2]=m.z,h[a+3]=m.x,h[a+4]=m.y,h[a+5]=m.z,h[a+6]=m.x,h[a+7]=m.y,h[a+8]=m.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(!1===(t&&t.isBufferGeometry))return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0);var r=this.attributes;for(var n in r)if(void 0!==t.attributes[n])for(var i=r[n],a=i.array,o=t.attributes[n],s=o.array,u=o.itemSize,l=0,c=u*e;l<s.length;l++,c++)a[c]=s[l];return this},normalizeNormals:function(){for(var t,e,r,n,i=this.attributes.normal.array,a=0,o=i.length;a<o;a+=3)t=i[a],e=i[a+1],r=i[a+2],n=1/Math.sqrt(t*t+e*e+r*r),i[a]*=n,i[a+1]*=n,i[a+2]*=n},toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new _t,e=this.index.array,r=this.attributes;for(var n in r){for(var i=r[n],a=i.array,o=i.itemSize,s=new a.constructor(e.length*o),u=0,l=0,c=0,h=e.length;c<h;c++){u=e[c]*o;for(var f=0;f<o;f++)s[l++]=a[u++]}t.addAttribute(n,new dt(s,o))}return t},toJSON:function(){var t={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var r in e)void 0!==e[r]&&(t[r]=e[r]);return t}t.data={attributes:{}};var n=this.index;if(null!==n){var i=Array.prototype.slice.call(n.array);t.data.index={type:n.array.constructor.name,array:i}}var a=this.attributes;for(var r in a){var o=a[r],i=Array.prototype.slice.call(o.array);t.data.attributes[r]={itemSize:o.itemSize,type:o.array.constructor.name,array:i,normalized:o.normalized}}var s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));var u=this.boundingSphere;return null!==u&&(t.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),t},clone:function(){return(new _t).copy(this)},copy:function(t){var e,r,n;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var i=t.index;null!==i&&this.setIndex(i.clone());var a=t.attributes;for(e in a){var o=a[e];this.addAttribute(e,o.clone())}var s=t.morphAttributes;for(e in s){var u=[],l=s[e];for(r=0,n=l.length;r<n;r++)u.push(l[r].clone());this.morphAttributes[e]=u}var c=t.groups;for(r=0,n=c.length;r<n;r++){var h=c[r];this.addGroup(h.start,h.count,h.materialIndex)}var f=t.boundingBox;null!==f&&(this.boundingBox=f.clone());var d=t.boundingSphere;return null!==d&&(this.boundingSphere=d.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},_t.MaxIndex=65535,Object.assign(_t.prototype,e.prototype),At.prototype=Object.assign(Object.create(ut.prototype),{constructor:At,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return ut.prototype.copy.call(this,t),this.drawMode=t.drawMode,this},updateMorphTargets:function(){var t=this.geometry.morphTargets;if(void 0!==t&&t.length>0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var e=0,r=t.length;e<r;e++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[t[e].name]=e}},raycast:function(){function t(t,e,r,n,i,a,o){return ct.barycoordFromPoint(t,e,r,n,y),i.multiplyScalar(y.x),a.multiplyScalar(y.y),o.multiplyScalar(y.z),i.add(a).add(o),i.clone()}function e(t,e,r,n,i,a,o){var s=t.material;if(null===(s.side===oa?r.intersectTriangle(a,i,n,!0,o):r.intersectTriangle(n,i,a,s.side!==sa,o)))return null;w.copy(o),w.applyMatrix4(t.matrixWorld);var u=e.ray.origin.distanceTo(w);return u<e.near||u>e.far?null:{distance:u,point:w.clone(),object:t}}function n(r,n,i,a,o,u,l,f){s.fromBufferAttribute(a,u),c.fromBufferAttribute(a,l),h.fromBufferAttribute(a,f);var d=e(r,n,i,s,c,h,M);return d&&(o&&(m.fromBufferAttribute(o,u),g.fromBufferAttribute(o,l),v.fromBufferAttribute(o,f),d.uv=t(M,s,c,h,m,g,v)),d.face=new ht(u,l,f,ct.normal(s,c,h)),d.faceIndex=u),d}var i=new l,a=new at,o=new tt,s=new u,c=new u,h=new u,f=new u,d=new u,p=new u,m=new r,g=new r,v=new r,y=new u,M=new u,w=new u;return function(r,u){var l=this.geometry,y=this.material,w=this.matrixWorld;if(void 0!==y&&(null===l.boundingSphere&&l.computeBoundingSphere(),o.copy(l.boundingSphere),o.applyMatrix4(w),!1!==r.ray.intersectsSphere(o)&&(i.getInverse(w),a.copy(r.ray).applyMatrix4(i),null===l.boundingBox||!1!==a.intersectsBox(l.boundingBox)))){var x;if(l.isBufferGeometry){var b,T,E,S,_,A=l.index,D=l.attributes.position,N=l.attributes.uv;if(null!==A)for(S=0,_=A.count;S<_;S+=3)b=A.getX(S),T=A.getX(S+1),E=A.getX(S+2),(x=n(this,r,a,D,N,b,T,E))&&(x.faceIndex=Math.floor(S/3),u.push(x));else for(S=0,_=D.count;S<_;S+=3)b=S,T=S+1,E=S+2,(x=n(this,r,a,D,N,b,T,E))&&(x.index=b,u.push(x))}else if(l.isGeometry){var I,L,C,O,R=y&&y.isMultiMaterial,z=!0===R?y.materials:null,j=l.vertices,P=l.faces,U=l.faceVertexUvs[0];U.length>0&&(O=U);for(var B=0,V=P.length;B<V;B++){var F=P[B],k=!0===R?z[F.materialIndex]:y;if(void 0!==k){if(I=j[F.a],L=j[F.b],C=j[F.c],!0===k.morphTargets){var G=l.morphTargets,Y=this.morphTargetInfluences;s.set(0,0,0),c.set(0,0,0),h.set(0,0,0);for(var H=0,Q=G.length;H<Q;H++){var W=Y[H];if(0!==W){var X=G[H].vertices;s.addScaledVector(f.subVectors(X[F.a],I),W),c.addScaledVector(d.subVectors(X[F.b],L),W),h.addScaledVector(p.subVectors(X[F.c],C),W)}}s.add(I),c.add(L),h.add(C),I=s,L=c,C=h}if(x=e(this,r,a,I,L,C,M)){if(O){var q=O[B];m.copy(q[0]),g.copy(q[1]),v.copy(q[2]),x.uv=t(M,I,L,C,m,g,v)}x.face=F,x.faceIndex=B,u.push(x)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Dt.prototype=Object.create(_t.prototype),Dt.prototype.constructor=Dt,Nt.prototype=Object.create(_t.prototype),Nt.prototype.constructor=Nt,It.prototype={constructor:It,copy:function(t){return this.name=t.name,this.texture=t.texture,this.uvChannel=t.uvChannel,this.uvTransform=t.uvTransform,this.uvOffset=t.uvOffset,this.uvRepeat=t.uvRepeat,this.texelTransform=t.texelTransform,this.texelScale=t.texelScale,this.texelOffset=t.texelOffset,this.texelInvert=t.texelInvert,this},getFlattenedTexelTransform:function(t){var e=t||{};return this.texelInvert?(e.texelScale=-this.texelScale,e.texelOffset=this.texelScale+this.texelOffset):(e.texelScale=this.texelScale,e.texelOffset=this.texelOffset),e}},It.SupportedMapNames=["map","lightMap","aoMap","emissiveMap","specularMap","bumpMap","normalMap","roughnessMap","metalnessMap","alphaMap","displacementMap","falloffMap","falloffAlphaMap"],It.SupportedMapSlotNames=[],It.SupportedMapUVNames=[],It.SupportedMapTexelNames=[];for(var ys=0;ys<It.SupportedMapNames.length;ys++){var Ms=It.SupportedMapNames[ys];It.SupportedMapSlotNames.push(Ms+"Slot"),It.SupportedMapUVNames.push(Ms+"UVTransformParams"),It.SupportedMapTexelNames.push(Ms+"TexelTransformParams")}Lt.prototype=Object.create(ut.prototype),Lt.prototype.constructor=Lt,Lt.prototype.isCamera=!0,Lt.prototype.getWorldDirection=function(){var t=new s;return function(e){var r=e||new u;return this.getWorldQuaternion(t),r.set(0,0,-1).applyQuaternion(t)}}(),Lt.prototype.lookAt=function(){var t=new l;return function(e){t.lookAt(this.position,e,this.up),this.quaternion.setFromRotationMatrix(t)}}(),Lt.prototype.clone=function(){return(new this.constructor).copy(this)},Lt.prototype.copy=function(t){return ut.prototype.copy.call(this,t),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this},Ct.prototype=Object.assign(Object.create(Lt.prototype),{constructor:Ct,isPerspectiveCamera:!0,copy:function(t){return Lt.prototype.copy.call(this,t),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*ns.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*ns.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*ns.RAD2DEG*Math.atan(Math.tan(.5*ns.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,r,n,i,a){if(!t)return void(this.view=null);this.aspect=t/e,this.view={fullWidth:t,fullHeight:e,offsetX:r,offsetY:n,width:i,height:a},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*ns.DEG2RAD*this.fov)/this.zoom,r=2*e,n=this.aspect*r,i=-.5*n,a=this.view;if(null!==a){var o=a.fullWidth,s=a.fullHeight;i+=a.offsetX*n/o,e-=a.offsetY*r/s,n*=a.width/o,r*=a.height/s}var u=this.filmOffset;0!==u&&(i+=t*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+n,e,e-r,t,this.far)},toJSON:function(t){var e=ut.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}),Ot.prototype=Object.assign(Object.create(Lt.prototype),{constructor:Ot,isOrthographicCamera:!0,copy:function(t){return Lt.prototype.copy.call(this,t),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,r,n,i,a){this.view={fullWidth:t,fullHeight:e,offsetX:r,offsetY:n,width:i,height:a},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,n=(this.top+this.bottom)/2,i=r-t,a=r+t,o=n+e,s=n-e;if(null!==this.view){var u=this.zoom/(this.view.width/this.view.fullWidth),l=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;i+=c*(this.view.offsetX/u),a=i+c*(this.view.width/u),o-=h*(this.view.offsetY/l),s=o-h*(this.view.height/l)}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far)},toJSON:function(t){var e=ut.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}});var ws=0;ue.prototype=Object.create(ut.prototype),ue.prototype.constructor=ue,ue.prototype.copy=function(t,e){return ut.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},ue.prototype.toJSON=function(t){var e=ut.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e},ce.prototype.isFogExp2=!0,ce.prototype.clone=function(){return new ce(this.color.getHex(),this.density)},ce.prototype.toJSON=function(t){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},he.prototype.isFog=!0,he.prototype.clone=function(){return new he(this.color.getHex(),this.near,this.far)},he.prototype.toJSON=function(t){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},fe.prototype=Object.assign(Object.create(ut.prototype),{constructor:fe,isLensFlare:!0,copy:function(t){ut.prototype.copy.call(this,t),this.positionScreen.copy(t.positionScreen),this.customUpdateCallback=t.customUpdateCallback;for(var e=0,r=t.lensFlares.length;e<r;e++)this.lensFlares.push(t.lensFlares[e]);return this},add:function(t,e,r,n,i,a){void 0===e&&(e=-1),void 0===r&&(r=0),void 0===a&&(a=1),void 0===i&&(i=new H(16777215)),void 0===n&&(n=pa),r=Math.min(r,Math.max(0,r)),this.lensFlares.push({texture:t,size:e,distance:r,x:0,y:0,z:0,scale:1,rotation:0,opacity:a,color:i,blending:n})},updateLensFlares:function(){var t,e,r=this.lensFlares.length,n=2*-this.positionScreen.x,i=2*-this.positionScreen.y;for(t=0;t<r;t++)e=this.lensFlares[t],e.x=this.positionScreen.x+n*e.distance,e.y=this.positionScreen.y+i*e.distance,e.wantedRotation=e.x*Math.PI*.25,e.rotation+=.25*(e.wantedRotation-e.rotation)}}),de.prototype=Object.create(Z.prototype),de.prototype.constructor=de,de.prototype.copy=function(t){return Z.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this},pe.prototype=Object.assign(Object.create(ut.prototype),{constructor:pe,isSprite:!0,raycast:function(){var t=new u;return function(e,r){t.setFromMatrixPosition(this.matrixWorld);var n=e.ray.distanceSqToPoint(t);n>this.scale.x*this.scale.y/4||r.push({distance:Math.sqrt(n),point:this.position,face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)}}),me.prototype=Object.assign(Object.create(ut.prototype),{constructor:me,copy:function(t){ut.prototype.copy.call(this,t,!1);for(var e=t.levels,r=0,n=e.length;r<n;r++){var i=e[r];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var r=this.levels,n=0;n<r.length&&!(e<r[n].distance);n++);r.splice(n,0,{distance:e,object:t}),this.add(t)},getObjectForDistance:function(t){for(var e=this.levels,r=1,n=e.length;r<n&&!(t<e[r].distance);r++);return e[r-1].object},raycast:function(){var t=new u;return function(e,r){t.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(t);this.getObjectForDistance(n).raycast(e,r)}}(),update:function(){var t=new u,e=new u;return function(r){var n=this.levels;if(n.length>1){t.setFromMatrixPosition(r.matrixWorld),e.setFromMatrixPosition(this.matrixWorld);var i=t.distanceTo(e);n[0].object.visible=!0;for(var a=1,o=n.length;a<o&&i>=n[a].distance;a++)n[a-1].object.visible=!1,n[a].object.visible=!0;for(;a<o;a++)n[a].object.visible=!1}}}(),toJSON:function(t){var e=ut.prototype.toJSON.call(this,t);e.object.levels=[];for(var r=this.levels,n=0,i=r.length;n<i;n++){var a=r[n];e.object.levels.push({object:a.object.uuid,distance:a.distance})}return e}}),Object.assign(ge.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var r=new l;this.bones[t]&&r.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(r)}},pose:function(){for(var t,e=0,r=this.bones.length;e<r;e++)(t=this.bones[e])&&t.matrixWorld.getInverse(this.boneInverses[e]);for(var e=0,r=this.bones.length;e<r;e++)(t=this.bones[e])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){var t=new l;return function(){for(var e=0,r=this.bones.length;e<r;e++){var n=this.bones[e]?this.bones[e].matrixWorld:this.identityMatrix;t.multiplyMatrices(n,this.boneInverses[e]),t.toArray(this.boneMatrices,16*e)}this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),clone:function(){return new ge(this.bones,this.boneInverses,this.useVertexTexture)}}),ve.prototype=Object.assign(Object.create(ut.prototype),{constructor:ve,isBone:!0}),ye.prototype=Object.assign(Object.create(At.prototype),{constructor:ye,isSkinnedMesh:!0,bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){if(this.geometry&&this.geometry.isGeometry)for(var t=0;t<this.geometry.skinWeights.length;t++){var e=this.geometry.skinWeights[t],r=1/e.lengthManhattan();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry)for(var n=new i,a=this.geometry.attributes.skinWeight,t=0;t<a.count;t++){n.x=a.getX(t),n.y=a.getY(t),n.z=a.getZ(t),n.w=a.getW(t);var r=1/n.lengthManhattan();r!==1/0?n.multiplyScalar(r):n.set(1,0,0,0),a.setXYZW(t,n.x,n.y,n.z,n.w)}},updateMatrixWorld:function(t){At.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material,this.skeleton.useVertexTexture).copy(this)}}),Me.prototype=Object.create(Z.prototype),Me.prototype.constructor=Me,Me.prototype.isLineBasicMaterial=!0,Me.prototype.copy=function(t){return Z.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this},we.prototype=Object.assign(Object.create(ut.prototype),{constructor:we,isLine:!0,raycast:function(){var t=new l,e=new at,r=new tt;return function(n,i){var a=n.linePrecision,o=a*a,s=this.geometry,l=this.matrixWorld;if(null===s.boundingSphere&&s.computeBoundingSphere(),r.copy(s.boundingSphere),r.applyMatrix4(l),!1!==n.ray.intersectsSphere(r)){t.getInverse(l),e.copy(n.ray).applyMatrix4(t);var c=new u,h=new u,f=new u,d=new u,p=this&&this.isLineSegments?2:1;if(s.isBufferGeometry){var m=s.index,g=s.attributes,v=g.position.array;if(null!==m)for(var y=m.array,M=0,w=y.length-1;M<w;M+=p){var x=y[M],b=y[M+1];c.fromArray(v,3*x),h.fromArray(v,3*b);var T=e.distanceSqToSegment(c,h,d,f);if(!(T>o)){d.applyMatrix4(this.matrixWorld);var E=n.ray.origin.distanceTo(d);E<n.near||E>n.far||i.push({distance:E,point:f.clone().applyMatrix4(this.matrixWorld),index:M,face:null,faceIndex:null,object:this})}}else for(var M=0,w=v.length/3-1;M<w;M+=p){c.fromArray(v,3*M),h.fromArray(v,3*M+3);var T=e.distanceSqToSegment(c,h,d,f);if(!(T>o)){d.applyMatrix4(this.matrixWorld);var E=n.ray.origin.distanceTo(d);E<n.near||E>n.far||i.push({distance:E,point:f.clone().applyMatrix4(this.matrixWorld),index:M,face:null,faceIndex:null,object:this})}}}else if(s.isGeometry)for(var S=s.vertices,_=S.length,M=0;M<_-1;M+=p){var T=e.distanceSqToSegment(S[M],S[M+1],d,f);if(!(T>o)){d.applyMatrix4(this.matrixWorld);var E=n.ray.origin.distanceTo(d);E<n.near||E>n.far||i.push({distance:E,point:f.clone().applyMatrix4(this.matrixWorld),index:M,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),xe.prototype=Object.assign(Object.create(we.prototype),{constructor:xe,isLineSegments:!0}),be.prototype=Object.create(Z.prototype),be.prototype.constructor=be,be.prototype.isPointsMaterial=!0,be.prototype.copy=function(t){return Z.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this},Te.prototype=Object.assign(Object.create(ut.prototype),{constructor:Te,isPoints:!0,raycast:function(){var t=new l,e=new at,r=new tt;return function(n,i){function a(t,r){var a=e.distanceSqToPoint(t);if(a<f){var s=e.closestPointToPoint(t);s.applyMatrix4(l);var u=n.ray.origin.distanceTo(s);if(u<n.near||u>n.far)return;i.push({distance:u,distanceToRay:Math.sqrt(a),point:s.clone(),index:r,face:null,object:o})}}var o=this,s=this.geometry,l=this.matrixWorld,c=n.params.Points.threshold;if(null===s.boundingSphere&&s.computeBoundingSphere(),r.copy(s.boundingSphere),r.applyMatrix4(l),!1!==n.ray.intersectsSphere(r)){t.getInverse(l),e.copy(n.ray).applyMatrix4(t);var h=c/((this.scale.x+this.scale.y+this.scale.z)/3),f=h*h,d=new u;if(s.isBufferGeometry){var p=s.index,m=s.attributes,g=m.position.array;if(null!==p)for(var v=p.array,y=0,M=v.length;y<M;y++){var w=v[y];d.fromArray(g,3*w),a(d,w)}else for(var y=0,x=g.length/3;y<x;y++)d.fromArray(g,3*y),a(d,y)}else for(var b=s.vertices,y=0,x=b.length;y<x;y++)a(b[y],y)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ee.prototype=Object.assign(Object.create(ut.prototype),{constructor:Ee}),Se.prototype=Object.create(n.prototype),Se.prototype.constructor=Se,_e.prototype=Object.create(n.prototype),_e.prototype.constructor=_e,_e.prototype.isCompressedTexture=!0,Ae.prototype=Object.create(n.prototype),Ae.prototype.constructor=Ae,De.prototype=Object.create(n.prototype),De.prototype.constructor=De,De.prototype.isDepthTexture=!0,Ne.prototype=Object.create(_t.prototype),Ne.prototype.constructor=Ne,Ie.prototype=Object.create(_t.prototype),Ie.prototype.constructor=Ie,Le.prototype=Object.create(St.prototype),Le.prototype.constructor=Le,Ce.prototype=Object.create(_t.prototype),Ce.prototype.constructor=Ce,Oe.prototype=Object.create(Ce.prototype),Oe.prototype.constructor=Oe,Re.prototype=Object.create(St.prototype),Re.prototype.constructor=Re,ze.prototype=Object.create(Ce.prototype),ze.prototype.constructor=ze,je.prototype=Object.create(St.prototype),je.prototype.constructor=je,Pe.prototype=Object.create(Ce.prototype),Pe.prototype.constructor=Pe,Ue.prototype=Object.create(St.prototype),Ue.prototype.constructor=Ue,Be.prototype=Object.create(Ce.prototype),Be.prototype.constructor=Be,Ve.prototype=Object.create(St.prototype),Ve.prototype.constructor=Ve,Fe.prototype=Object.create(St.prototype),Fe.prototype.constructor=Fe,ke.prototype=Object.create(_t.prototype),ke.prototype.constructor=ke,Ge.prototype=Object.create(St.prototype),Ge.prototype.constructor=Ge,Ye.prototype=Object.create(_t.prototype),Ye.prototype.constructor=Ye,He.prototype=Object.create(St.prototype),He.prototype.constructor=He,Qe.prototype=Object.create(_t.prototype),Qe.prototype.constructor=Qe,We.prototype=Object.create(St.prototype),We.prototype.constructor=We;var xs={area:function(t){for(var e=t.length,r=0,n=e-1,i=0;i<e;n=i++)r+=t[n].x*t[i].y-t[i].x*t[n].y;return.5*r},triangulate:function(){function t(t,e,r,n,i,a){var o,s,u,l,c,h,f,d,p;if(s=t[a[e]].x,u=t[a[e]].y,l=t[a[r]].x,c=t[a[r]].y,h=t[a[n]].x,f=t[a[n]].y,(l-s)*(f-u)-(c-u)*(h-s)<=0)return!1;var m,g,v,y,M,w,x,b,T,E,S,_,A,D,N;for(m=h-l,g=f-c,v=s-h,y=u-f,M=l-s,w=c-u,o=0;o<i;o++)if(d=t[a[o]].x,p=t[a[o]].y,!(d===s&&p===u||d===l&&p===c||d===h&&p===f)&&(x=d-s,b=p-u,T=d-l,E=p-c,S=d-h,_=p-f,N=m*E-g*T,A=M*b-w*x,D=v*_-y*S,N>=-Number.EPSILON&&D>=-Number.EPSILON&&A>=-Number.EPSILON))return!1;return!0}return function(e,r){var n=e.length;if(n<3)return null;var i,a,o,s=[],u=[],l=[];if(xs.area(e)>0)for(a=0;a<n;a++)u[a]=a;else for(a=0;a<n;a++)u[a]=n-1-a;var c=n,h=2*c;for(a=c-1;c>2;){if(h--<=0)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),r?l:s;if(i=a,c<=i&&(i=0),a=i+1,c<=a&&(a=0),o=a+1,c<=o&&(o=0),t(e,i,a,o,c,u)){var f,d,p,m,g;for(f=u[i],d=u[a],p=u[o],s.push([e[f],e[d],e[p]]),l.push([u[i],u[a],u[o]]),m=a,g=a+1;g<c;m++,g++)u[m]=u[g];c--,h=2*c}}return r?l:s}}(),triangulateShape:function(t,e){function r(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function n(t,e,r){return t.x!==e.x?t.x<e.x?t.x<=r.x&&r.x<=e.x:e.x<=r.x&&r.x<=t.x:t.y<e.y?t.y<=r.y&&r.y<=e.y:e.y<=r.y&&r.y<=t.y}function i(t,e,r,i,a){var o=e.x-t.x,s=e.y-t.y,u=i.x-r.x,l=i.y-r.y,c=t.x-r.x,h=t.y-r.y,f=s*u-o*l,d=s*c-o*h;if(Math.abs(f)>Number.EPSILON){var p;if(f>0){if(d<0||d>f)return[];if((p=l*c-u*h)<0||p>f)return[]}else{if(d>0||d<f)return[];if((p=l*c-u*h)>0||p<f)return[]}if(0===p)return!a||0!==d&&d!==f?[t]:[];if(p===f)return!a||0!==d&&d!==f?[e]:[];if(0===d)return[r];if(d===f)return[i];var m=p/f;return[{x:t.x+m*o,y:t.y+m*s}]}if(0!==d||l*c!=u*h)return[];var g=0===o&&0===s,v=0===u&&0===l;if(g&&v)return t.x!==r.x||t.y!==r.y?[]:[t];if(g)return n(r,i,t)?[t]:[];if(v)return n(t,e,r)?[r]:[];var y,M,w,x,b,T,E,S;return 0!==o?(t.x<e.x?(y=t,w=t.x,M=e,x=e.x):(y=e,w=e.x,M=t,x=t.x),r.x<i.x?(b=r,E=r.x,T=i,S=i.x):(b=i,E=i.x,T=r,S=r.x)):(t.y<e.y?(y=t,w=t.y,M=e,x=e.y):(y=e,w=e.y,M=t,x=t.y),r.y<i.y?(b=r,E=r.y,T=i,S=i.y):(b=i,E=i.y,T=r,S=r.y)),w<=E?x<E?[]:x===E?a?[]:[b]:x<=S?[b,M]:[b,T]:w>S?[]:w===S?a?[]:[y]:x<=S?[y,M]:[y,T]}function a(t,e,r,n){var i=e.x-t.x,a=e.y-t.y,o=r.x-t.x,s=r.y-t.y,u=n.x-t.x,l=n.y-t.y,c=i*s-a*o,h=i*l-a*u;if(Math.abs(c)>Number.EPSILON){var f=u*s-l*o;return c>0?h>=0&&f>=0:h>=0||f>=0}return h>0}r(t),e.forEach(r);for(var o,s,u,l,c,h,f={},d=t.concat(),p=0,m=e.length;p<m;p++)Array.prototype.push.apply(d,e[p]);for(o=0,s=d.length;o<s;o++)c=d[o].x+":"+d[o].y,void 0!==f[c]&&console.warn("THREE.ShapeUtils: Duplicate point",c,o),f[c]=o;var g=function(t,e){for(var r,n,o,s,u,l,c,h,f,d,p,m=t.concat(),g=[],v=[],y=0,M=e.length;y<M;y++)g.push(y);for(var w=0,x=2*g.length;g.length>0;){if(--x<0){console.log("Infinite Loop! Holes left:"+g.length+", Probably Hole outside Shape!");break}for(o=w;o<m.length;o++){s=m[o],n=-1;for(var y=0;y<g.length;y++)if(l=g[y],c=s.x+":"+s.y+":"+l,void 0===v[c]){r=e[l];for(var b=0;b<r.length;b++)if(u=r[b],function(t,e){var n=m.length-1,i=t-1;i<0&&(i=n);var o=t+1;o>n&&(o=0);var s=a(m[t],m[i],m[o],r[e]);if(!s)return!1;var u=r.length-1,l=e-1;l<0&&(l=u);var c=e+1;return c>u&&(c=0),!!(s=a(r[e],r[l],r[c],m[t]))}(o,b)&&!function(t,e){var r,n,a;for(r=0;r<m.length;r++)if(n=r+1,n%=m.length,a=i(t,e,m[r],m[n],!0),a.length>0)return!0;return!1}(s,u)&&!function(t,r){var n,a,o,s,u;for(n=0;n<g.length;n++)for(a=e[g[n]],o=0;o<a.length;o++)if(s=o+1,s%=a.length,u=i(t,r,a[o],a[s],!0),u.length>0)return!0;return!1}(s,u)){n=b,g.splice(y,1),h=m.slice(0,o+1),f=m.slice(o),d=r.slice(n),p=r.slice(0,n+1),m=h.concat(d).concat(p).concat(f),w=o;break}if(n>=0)break;v[c]=!0}if(n>=0)break}}return m}(t,e),v=xs.triangulate(g,!1);for(o=0,s=v.length;o<s;o++)for(l=v[o],u=0;u<3;u++)c=l[u].x+":"+l[u].y,void 0!==(h=f[c])&&(l[u]=h);return v.concat()},isClockWise:function(t){return xs.area(t)<0}};Xe.prototype=Object.create(St.prototype),Xe.prototype.constructor=Xe,Xe.prototype.addShapeList=function(t,e){for(var r=t.length,n=0;n<r;n++){var i=t[n];this.addShape(i,e)}},Xe.prototype.addShape=function(t,e){function n(t,e,r){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(r).add(t)}function i(t,e,n){var i,a,o=1,s=t.x-e.x,u=t.y-e.y,l=n.x-t.x,c=n.y-t.y,h=s*s+u*u,f=s*c-u*l;if(Math.abs(f)>Number.EPSILON){var d=Math.sqrt(h),p=Math.sqrt(l*l+c*c),m=e.x-u/d,g=e.y+s/d,v=n.x-c/p,y=n.y+l/p,M=((v-m)*c-(y-g)*l)/(s*c-u*l);i=m+s*M-t.x,a=g+u*M-t.y;var w=i*i+a*a;if(w<=2)return new r(i,a);o=Math.sqrt(w/2)}else{var x=!1;s>Number.EPSILON?l>Number.EPSILON&&(x=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(x=!0):Math.sign(u)===Math.sign(c)&&(x=!0),x?(i=-u,a=s,o=Math.sqrt(h)):(i=s,a=u,o=Math.sqrt(h/2))}return new r(i/o,a/o)}function a(t,e){var r,n;for(H=t.length;--H>=0;){r=H,n=H-1,n<0&&(n=t.length-1);var i=0,a=x+2*y;for(i=0;i<a;i++){var o=k*i,s=k*(i+1);l(e+r+o,e+n+o,e+n+s,e+r+s,t,i,a,r,n)}}}function o(t,e,r){D.vertices.push(new u(t,e,r))}function s(t,e,r){t+=N,e+=N,r+=N,D.faces.push(new ht(t,e,r,null,null,0));var n=E.generateTopUV(D,t,e,r);D.faceVertexUvs[0].push(n)}function l(t,e,r,n,i,a,o,s,u){t+=N,e+=N,r+=N,n+=N,D.faces.push(new ht(t,e,n,null,null,1)),D.faces.push(new ht(e,r,n,null,null,1));var l=E.generateSideWallUV(D,t,e,r,n);D.faceVertexUvs[0].push([l[0],l[1],l[3]]),D.faceVertexUvs[0].push([l[1],l[2],l[3]])}var c,h,f,d,p,m=void 0!==e.amount?e.amount:100,g=void 0!==e.bevelThickness?e.bevelThickness:6,v=void 0!==e.bevelSize?e.bevelSize:g-2,y=void 0!==e.bevelSegments?e.bevelSegments:3,M=void 0===e.bevelEnabled||e.bevelEnabled,w=void 0!==e.curveSegments?e.curveSegments:12,x=void 0!==e.steps?e.steps:1,b=e.extrudePath,T=!1,E=void 0!==e.UVGenerator?e.UVGenerator:Xe.WorldUVGenerator;b&&(c=b.getSpacedPoints(x),T=!0,M=!1,h=void 0!==e.frames?e.frames:b.computeFrenetFrames(x,!1),f=new u,d=new u,p=new u),M||(y=0,g=0,v=0);var S,_,A,D=this,N=this.vertices.length,I=t.extractPoints(w),L=I.shape,C=I.holes,O=!xs.isClockWise(L);if(O){for(L=L.reverse(),_=0,A=C.length;_<A;_++)S=C[_],xs.isClockWise(S)&&(C[_]=S.reverse());O=!1}var R=xs.triangulateShape(L,C),z=L;for(_=0,A=C.length;_<A;_++)S=C[_],L=L.concat(S);for(var j,P,U,B,V,F,k=L.length,G=R.length,Y=[],H=0,Q=z.length,W=Q-1,X=H+1;H<Q;H++,W++,X++)W===Q&&(W=0),X===Q&&(X=0),Y[H]=i(z[H],z[W],z[X]);var q,Z=[],K=Y.concat();for(_=0,A=C.length;_<A;_++){for(S=C[_],q=[],H=0,Q=S.length,W=Q-1,X=H+1;H<Q;H++,W++,X++)W===Q&&(W=0),X===Q&&(X=0),q[H]=i(S[H],S[W],S[X]);Z.push(q),K=K.concat(q)}for(j=0;j<y;j++){for(U=j/y,B=g*Math.cos(U*Math.PI/2),P=v*Math.sin(U*Math.PI/2),H=0,Q=z.length;H<Q;H++)V=n(z[H],Y[H],P),o(V.x,V.y,-B);for(_=0,A=C.length;_<A;_++)for(S=C[_],q=Z[_],H=0,Q=S.length;H<Q;H++)V=n(S[H],q[H],P),o(V.x,V.y,-B)}for(P=v,H=0;H<k;H++)V=M?n(L[H],K[H],P):L[H],T?(d.copy(h.normals[0]).multiplyScalar(V.x),f.copy(h.binormals[0]).multiplyScalar(V.y),p.copy(c[0]).add(d).add(f),o(p.x,p.y,p.z)):o(V.x,V.y,0);var J;for(J=1;J<=x;J++)for(H=0;H<k;H++)V=M?n(L[H],K[H],P):L[H],T?(d.copy(h.normals[J]).multiplyScalar(V.x),f.copy(h.binormals[J]).multiplyScalar(V.y),p.copy(c[J]).add(d).add(f),o(p.x,p.y,p.z)):o(V.x,V.y,m/x*J);for(j=y-1;j>=0;j--){for(U=j/y,B=g*Math.cos(U*Math.PI/2),P=v*Math.sin(U*Math.PI/2),H=0,Q=z.length;H<Q;H++)V=n(z[H],Y[H],P),o(V.x,V.y,m+B);for(_=0,A=C.length;_<A;_++)for(S=C[_],q=Z[_],H=0,Q=S.length;H<Q;H++)V=n(S[H],q[H],P),T?o(V.x,V.y+c[x-1].y,c[x-1].x+B):o(V.x,V.y,m+B)}!function(){if(M){var t=0,e=k*t;for(H=0;H<G;H++)F=R[H],s(F[2]+e,F[1]+e,F[0]+e);for(t=x+2*y,e=k*t,H=0;H<G;H++)F=R[H],s(F[0]+e,F[1]+e,F[2]+e)}else{for(H=0;H<G;H++)F=R[H],s(F[2],F[1],F[0]);for(H=0;H<G;H++)F=R[H],s(F[0]+k*x,F[1]+k*x,F[2]+k*x)}}(),function(){var t=0;for(a(z,t),t+=z.length,_=0,A=C.length;_<A;_++)S=C[_],a(S,t),t+=S.length}()},Xe.WorldUVGenerator={generateTopUV:function(t,e,n,i){var a=t.vertices,o=a[e],s=a[n],u=a[i];return[new r(o.x,o.y),new r(s.x,s.y),new r(u.x,u.y)]},generateSideWallUV:function(t,e,n,i,a){var o=t.vertices,s=o[e],u=o[n],l=o[i],c=o[a];return Math.abs(s.y-u.y)<.01?[new r(s.x,1-s.z),new r(u.x,1-u.z),new r(l.x,1-l.z),new r(c.x,1-c.z)]:[new r(s.y,1-s.z),new r(u.y,1-u.z),new r(l.y,1-l.z),new r(c.y,1-c.z)]}},qe.prototype=Object.create(Xe.prototype),qe.prototype.constructor=qe,Ze.prototype=Object.create(_t.prototype),Ze.prototype.constructor=Ze,Ke.prototype=Object.create(St.prototype),Ke.prototype.constructor=Ke,Je.prototype=Object.create(_t.prototype),Je.prototype.constructor=Je,$e.prototype=Object.create(St.prototype),$e.prototype.constructor=$e,tr.prototype=Object.create(St.prototype),tr.prototype.constructor=tr,er.prototype=Object.create(_t.prototype),er.prototype.constructor=er,rr.prototype=Object.create(St.prototype),rr.prototype.constructor=rr,nr.prototype=Object.create(_t.prototype),nr.prototype.constructor=nr,ir.prototype=Object.create(St.prototype),ir.prototype.constructor=ir,ar.prototype=Object.create(_t.prototype),ar.prototype.constructor=ar,or.prototype=Object.create(_t.prototype),or.prototype.constructor=or,sr.prototype=Object.create(St.prototype),sr.prototype.constructor=sr,ur.prototype=Object.create(sr.prototype),ur.prototype.constructor=ur,lr.prototype=Object.create(or.prototype),lr.prototype.constructor=lr,cr.prototype=Object.create(_t.prototype),cr.prototype.constructor=cr,hr.prototype=Object.create(St.prototype),hr.prototype.constructor=hr,fr.prototype=Object.create(St.prototype),fr.prototype.constructor=fr;var bs=Object.freeze({WireframeGeometry:Ne,ParametricGeometry:Le,ParametricBufferGeometry:Ie,TetrahedronGeometry:Re,TetrahedronBufferGeometry:Oe,OctahedronGeometry:je,OctahedronBufferGeometry:ze,IcosahedronGeometry:Ue,IcosahedronBufferGeometry:Pe,DodecahedronGeometry:Ve,DodecahedronBufferGeometry:Be,PolyhedronGeometry:Fe,PolyhedronBufferGeometry:Ce,TubeGeometry:Ge,TubeBufferGeometry:ke,TorusKnotGeometry:He,TorusKnotBufferGeometry:Ye,TorusGeometry:We,TorusBufferGeometry:Qe,TextGeometry:qe,SphereBufferGeometry:Ze,SphereGeometry:Ke,RingGeometry:$e,RingBufferGeometry:Je,PlaneBufferGeometry:Nt,PlaneGeometry:tr,LatheGeometry:rr,LatheBufferGeometry:er,ShapeGeometry:ir,ShapeBufferGeometry:nr,ExtrudeGeometry:Xe,EdgesGeometry:ar,ConeGeometry:ur,ConeBufferGeometry:lr,CylinderGeometry:sr,CylinderBufferGeometry:or,CircleBufferGeometry:cr,CircleGeometry:hr,BoxBufferGeometry:Dt,BoxGeometry:fr});dr.prototype=Object.create(K.prototype),dr.prototype.constructor=dr,dr.prototype.isShadowMaterial=!0,pr.prototype=Object.create(K.prototype),pr.prototype.constructor=pr,pr.prototype.isRawShaderMaterial=!0,mr.prototype={constructor:mr,isMultiMaterial:!0,toJSON:function(t){for(var e={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},r=this.materials,n=0,i=r.length;n<i;n++){var a=r[n].toJSON(t);delete a.metadata,e.materials.push(a)}return e.visible=this.visible,e},clone:function(){for(var t=new this.constructor,e=0;e<this.materials.length;e++)t.materials.push(this.materials[e].clone());return t.visible=this.visible,t}},gr.prototype=Object.create(Z.prototype),gr.prototype.constructor=gr,gr.prototype.isMeshStandardMaterial=!0;!function(){var t={map:{get:function(){return this.mapSlot.texture},set:function(t){this.mapSlot.texture=t}},lightMap:{get:function(){return this.lightMapSlot.texture},set:function(t){this.lightMapSlot.texture=t}},lightMapIntensity:{get:function(){return this.lightMapSlot.texelScale},set:function(t){this.lightMapSlot.texelTransform=!0,this.lightMapSlot.texelScale=t}},aoMap:{get:function(){return this.aoMapSlot.texture},set:function(t){this.aoMapSlot.texture=t}},emissiveMap:{get:function(){return this.emissiveMapSlot.texture},set:function(t){this.emissiveMapSlot.texture=t}},bumpMap:{get:function(){return this.bumpMapSlot.texture},set:function(t){this.bumpMapSlot.texture=t}},bumpScale:{get:function(){return this.bumpMapSlot.texelScale},set:function(t){this.bumpMapSlot.texelTransform=!0,this.bumpMapSlot.texelScale=t}},normalMap:{get:function(){return this.normalMapSlot.texture},set:function(t){this.normalMapSlot.texture=t}},displacementMap:{get:function(){return this.displacementMapSlot.texture},set:function(t){this.displacementMapSlot.texture=t}},displacementScale:{get:function(){return this.displacementMapSlot.texelScale},set:function(t){this.displacementMapSlot.texelTransform=!0,this.displacementMapSlot.texelScale=t}},displacementBias:{get:function(){return this.displacementMapSlot.texelOffset},set:function(t){this.displacementMapSlot.texelTransform=!0,this.displacementMapSlot.texelOffset=t}},roughnessMap:{get:function(){return this.roughnessMapSlot.texture},set:function(t){this.roughnessMapSlot.texture=t}},metalnessMap:{get:function(){return this.metalnessMapSlot.texture},set:function(t){this.metalnessMapSlot.texture=t}},alphaMap:{get:function(){return this.alphaMapSlot.texture},set:function(t){this.alphaMapSlot.texture=t}}};for(var e in t)Object.defineProperty(gr.prototype,e,t[e])}();gr.prototype.copy=function(t){return Z.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.mapSlot.copy(t.mapSlot),this.reflectivity=t.reflectivity,this.roughness=t.roughness,this.roughnessMapSlot.copy(t.roughnessMapSlot),this.metalness=t.metalness,this.metalnessMapSlot.copy(t.metalnessMapSlot),this.lightMapSlot.copy(t.lightMapSlot),this.aoMapIntensity=t.aoMapIntensity,this.aoMapSlot.copy(t.aoMapSlot),this.emissive.copy(t.emissive),this.emissiveIntensity=t.emissiveIntensity,this.emissiveMapSlot.copy(t.emissiveMapSlot),this.bumpMapSlot.copy(t.bumpMapSlot),this.normalScale.copy(t.normalScale),this.normalMapSlot.copy(t.normalMapSlot),this.displacementMapSlot.copy(t.displacementMapSlot),this.alphaMapSlot.copy(t.alphaMapSlot),this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},vr.prototype=Object.create(gr.prototype),vr.prototype.constructor=vr,vr.prototype.isMeshPhysicalMaterial=!0;!function(){var t={falloffMap:{get:function(){return this.falloffMapSlot.texture},set:function(t){this.falloffMapSlot.texture=t}},falloffAlphaMap:{get:function(){return this.falloffAlphaMapSlot.texture},set:function(t){this.falloffAlphaMapSlot.texture=t}}};for(var e in t)Object.defineProperty(vr.prototype,e,t[e])}();vr.prototype.copy=function(t){return gr.prototype.copy.call(this,t),this.defines={PHYSICAL:""},this.reflectivity=t.reflectivity,this.falloff=t.falloff,this.falloffColor.copy(t.falloffColor),this.falloffMapSlot.copy(t.falloffMapSlot),this.falloffOpacity=t.falloffOpacity,this.falloffAlphaMapSlot.copy(t.falloffAlphaMapSlot),this.clearCoat=t.clearCoat,this.clearCoatRoughness=t.clearCoatRoughness,this},yr.prototype=Object.create(Z.prototype),yr.prototype.constructor=yr,yr.prototype.isMeshPhongMaterial=!0,yr.prototype.copy=function(t){return Z.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Mr.prototype=Object.create(yr.prototype),Mr.prototype.constructor=Mr,Mr.prototype.isMeshToonMaterial=!0,Mr.prototype.copy=function(t){return yr.prototype.copy.call(this,t),this.gradientMap=t.gradientMap,this},wr.prototype=Object.create(Z.prototype),wr.prototype.constructor=wr,wr.prototype.isMeshNormalMaterial=!0,wr.prototype.copy=function(t){return Z.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.clearColor=t.clearColor,this.clearAlpha=t.clearAlpha,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},xr.prototype=Object.create(Z.prototype),xr.prototype.constructor=xr,xr.prototype.isMeshLambertMaterial=!0,xr.prototype.copy=function(t){return Z.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},br.prototype=Object.create(Z.prototype),br.prototype.constructor=br,br.prototype.isMeshCubeMaterial=!0,br.prototype.copy=function(t){return Z.prototype.copy.call(this,t),this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.roughness=t.roughness,this},Tr.prototype=Object.create(Z.prototype),Tr.prototype.constructor=Tr,Tr.prototype.isLineDashedMaterial=!0,Tr.prototype.copy=function(t){return Z.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var Ts=Object.freeze({ShadowMaterial:dr,SpriteMaterial:de,RawShaderMaterial:pr,ShaderMaterial:K,PointsMaterial:be,MultiMaterial:mr,MeshPhysicalMaterial:vr,MeshStandardMaterial:gr,MeshPhongMaterial:yr,MeshToonMaterial:Mr,MeshNormalMaterial:wr,MeshLambertMaterial:xr,MeshDepthMaterial:J,MeshBasicMaterial:ft,MeshCubeMaterial:br,LineDashedMaterial:Tr,LineBasicMaterial:Me,MaterialMap:It,Material:Z}),Es={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},Ss=new Er;Object.assign(Sr.prototype,{load:function(t,e,r,n){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t);var i=this,a=Es.get(t);if(void 0!==a)return i.manager.itemStart(t),setTimeout(function(){e&&e(a),i.manager.itemEnd(t)},0),a;var o=/^data:(.*?)(;base64)?,(.*)$/,s=t.match(o);if(s){var u=s[1],l=!!s[2],c=s[3];c=window.decodeURIComponent(c),l&&(c=window.atob(c));try{var h,f=(this.responseType||"").toLowerCase();switch(f){case"arraybuffer":case"blob":h=new ArrayBuffer(c.length);for(var d=new Uint8Array(h),p=0;p<c.length;p++)d[p]=c.charCodeAt(p);"blob"===f&&(h=new Blob([h],{type:u}));break;case"document":var m=new DOMParser;h=m.parseFromString(c,u);break;case"json":h=JSON.parse(c);break;default:h=c}window.setTimeout(function(){e&&e(h),i.manager.itemEnd(t)},0)}catch(e){window.setTimeout(function(){n&&n(e),i.manager.itemError(t)},0)}}else{var g=new XMLHttpRequest;g.open("GET",t,!0),g.addEventListener("load",function(r){var a=r.target.response;Es.add(t,a),200===this.status?(e&&e(a),i.manager.itemEnd(t)):0===this.status?(console.warn("THREE.FileLoader: HTTP Status 0 received."),e&&e(a),i.manager.itemEnd(t)):(n&&n(r),i.manager.itemError(t))},!1),void 0!==r&&g.addEventListener("progress",function(t){r(t)},!1),g.addEventListener("error",function(e){n&&n(e),i.manager.itemError(t)},!1),void 0!==this.responseType&&(g.responseType=this.responseType),void 0!==this.withCredentials&&(g.withCredentials=this.withCredentials),g.overrideMimeType&&g.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),g.send(null)}return i.manager.itemStart(t),g},setPath:function(t){return this.path=t,this},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this}}),Object.assign(_r.prototype,{load:function(t,e,r,n){var i=this,a=[],o=new _e;o.image=a;var s=new Sr(this.manager);if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(t))for(var u=0,l=0,c=t.length;l<c;++l)!function(l){s.load(t[l],function(t){var r=i._parser(t,!0);a[l]={width:r.width,height:r.height,format:r.format,mipmaps:r.mipmaps},6===(u+=1)&&(1===r.mipmapCount&&(o.minFilter=co),o.format=r.format,o.needsUpdate=!0,e&&e(o))},r,n)}(l);else s.load(t,function(t){var r=i._parser(t,!0);if(r.isCubemap)for(var n=r.mipmaps.length/r.mipmapCount,s=0;s<n;s++){a[s]={mipmaps:[]};for(var u=0;u<r.mipmapCount;u++)a[s].mipmaps.push(r.mipmaps[s*r.mipmapCount+u]),a[s].format=r.format,a[s].width=r.width,a[s].height=r.height}else o.image.width=r.width,o.image.height=r.height,o.mipmaps=r.mipmaps;1===r.mipmapCount&&(o.minFilter=co),o.format=r.format,o.needsUpdate=!0,e&&e(o)},r,n);return o},setPath:function(t){return this.path=t,this}}),Object.assign(Ar.prototype,{load:function(t,e,r,n){var i=this,a=new Q,o=new Sr(this.manager);return o.setResponseType("arraybuffer"),o.load(t,function(t){var r=i._parser(t);r&&(void 0!==r.image?a.image=r.image:void 0!==r.data&&(a.image.width=r.width,a.image.height=r.height,a.image.data=r.data),a.wrapS=void 0!==r.wrapS?r.wrapS:ao,a.wrapT=void 0!==r.wrapT?r.wrapT:ao,a.magFilter=void 0!==r.magFilter?r.magFilter:co,a.minFilter=void 0!==r.minFilter?r.minFilter:fo,a.anisotropy=void 0!==r.anisotropy?r.anisotropy:1,void 0!==r.format&&(a.format=r.format),void 0!==r.type&&(a.type=r.type),void 0!==r.mipmaps&&(a.mipmaps=r.mipmaps),1===r.mipmapCount&&(a.minFilter=co),a.needsUpdate=!0,e&&e(a,r))},r,n),a}}),Object.assign(Dr.prototype,{load:function(t,e,r,n){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t);var i=this,a=Es.get(t);if(void 0!==a)return i.manager.itemStart(t),setTimeout(function(){e&&e(a),i.manager.itemEnd(t)},0),a;var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");return o.addEventListener("load",function(){Es.add(t,this),e&&e(this),i.manager.itemEnd(t)},!1),o.addEventListener("error",function(e){n&&n(e),i.manager.itemError(t)},!1),void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(t),o.src=t,o},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Nr.prototype,{load:function(t,e,r,n){var i=new c,a=new Dr(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);for(var o=0,s=0;s<t.length;++s)!function(r){a.load(t[r],function(t){i.images[r]=t,6==++o&&(i.needsUpdate=!0,e&&e(i))},void 0,n)}(s);return i},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Ir.prototype,{load:function(t,e,r,i){var a=new n,o=new Dr(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(r){var n=t.search(/\.(jpg|jpeg)$/)>0||0===t.search(/^data\:image\/jpeg/);a.format=n?Ao:Do,a.image=r,a.needsUpdate=!0,void 0!==e&&e(a)},r,i),a},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Lr.prototype=Object.assign(Object.create(ut.prototype),{constructor:Lr,isLight:!0,copy:function(t){return ut.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=ut.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),Cr.prototype=Object.assign(Object.create(Lr.prototype),{constructor:Cr,isHemisphereLight:!0,copy:function(t){return Lr.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(Or.prototype,{copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),Rr.prototype=Object.assign(Object.create(Or.prototype),{constructor:Rr,isSpotLightShadow:!0,update:function(t){var e=2*ns.RAD2DEG*t.angle,r=this.mapSize.width/this.mapSize.height,n=t.distance||500,i=this.camera;i.fov=e,i.aspect=r,i.far=n,i.updateProjectionMatrix()}}),zr.prototype=Object.assign(Object.create(Lr.prototype),{constructor:zr,isSpotLight:!0,copy:function(t){return Lr.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),zr.prototype.updateShadow=function(){var t=new $,e=new $;return function(r){if(r){var n=this.getWorldPosition(),i=this.target.position;e.makeEmpty(),r.traverseVisible(function(r){if(r.isMesh){var n=r.geometry;null===n.boundingBox&&n.computeBoundingBox(),!1===n.boundingBox.isEmpty()&&(t.copy(n.boundingBox),r.matrix.compose(r.position,r.quaternion,r.scale),r.updateMatrixWorld(!0),t.applyMatrix4(r.matrixWorld),e.union(t))}});var a=e.getBoundingSphere(),o=(new u).subVectors(i,n),s=(new u).subVectors(a.center,n);this.children[0]&&this.children[0].uuid===this.target.uuid&&(o=new u(0,0,-1).applyQuaternion(this.getWorldQuaternion()));var l=o.angleTo(s),c=a.center.distanceTo(n),h=l>Math.PI/2?.1:c*Math.cos(l)+a.radius,f=h-2*a.radius<0?.01:h-2*a.radius;this.distance=h,this.shadow.camera.far=h,this.shadow.camera.near=f,this.shadow.camera.updateProjectionMatrix()}}}(),jr.prototype=Object.assign(Object.create(Lr.prototype),{constructor:jr,isPointLight:!0,copy:function(t){return Lr.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),Pr.prototype=Object.assign(Object.create(Or.prototype),{constructor:Pr,isDirectionalLightShadow:!0,copy:function(t){return Or.prototype.copy.call(this,t),this.spreadAngle=t.spreadAngle,this},update:function(t){this.camera.updateProjectionMatrix()}}),Ur.prototype=Object.assign(Object.create(Lr.prototype),{constructor:Ur,isDirectionalLight:!0,copy:function(t){return Lr.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Ur.prototype.updateShadowWithPosition=function(t){if(t){var e=this.getWorldPosition(),r=this.target.position,n=new $,i=new $;i.makeEmpty(),t.traverseVisible(function(t){if(t.isMesh){var e=t.geometry;null===e.boundingBox&&e.computeBoundingBox(),!1===e.boundingBox.isEmpty()&&(n.copy(e.boundingBox),t.matrix.compose(t.position,t.quaternion,t.scale),t.updateMatrixWorld(!0),n.applyMatrix4(t.matrixWorld),i.union(n))}});var a=i.getBoundingSphere(),o=(new u).subVectors(r,e),s=(new u).subVectors(a.center,e);this.children[0]&&this.children[0].uuid===this.target.uuid&&(o=new u(0,0,-1).applyQuaternion(this.getWorldQuaternion()));var l=o.angleTo(s),c=a.center.distanceTo(e),h=c*Math.sin(l)+a.radius,f=l>Math.PI/2?0:c*Math.cos(l)+a.radius,d=0===f||f-2*a.radius<0?.01:f-2*a.radius;this.shadow.camera.left=-h,this.shadow.camera.right=h,this.shadow.camera.top=h,this.shadow.camera.bottom=-h,this.shadow.camera.far=f,this.shadow.camera.near=d,this.shadow.camera.updateProjectionMatrix()}},Ur.prototype.updateShadow=function(t){if(t){var e=this.position,r=this.target.position,n=new $,i=new $;i.makeEmpty(),t.traverseVisible(function(t){if(t.isMesh){var e=t.geometry;null===e.boundingBox&&e.computeBoundingBox(),!1===e.boundingBox.isEmpty()&&(n.copy(e.boundingBox),t.matrix.compose(t.position,t.quaternion,t.scale),t.updateMatrixWorld(!0),n.applyMatrix4(t.matrixWorld),i.union(n))}});var a=i.getBoundingSphere(),o=(new u).subVectors(r,e).normalize();this.children[0]&&this.children[0].uuid===this.target.uuid&&(o=new u(0,0,-1).applyQuaternion(this.quaternion));var s=a.center.clone().sub(o.clone().multiplyScalar(a.radius)),l=a.radius,c=2*a.radius;this.shadow.virtualPosition=new u(s.x,s.y,s.z),this.shadow.camera.left=-l,this.shadow.camera.right=l,this.shadow.camera.top=l,this.shadow.camera.bottom=-l,this.shadow.camera.far=c,this.shadow.camera.near=0,this.shadow.camera.updateProjectionMatrix()}},Br.prototype=Object.assign(Object.create(Lr.prototype),{constructor:Br,isAmbientLight:!0});var _s={arraySlice:function(t,e,r){return _s.isTypedArray(t)?new t.constructor(t.subarray(e,r)):t.slice(e,r)},convertArray:function(t,e,r){return!t||!r&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){function e(e,r){return t[e]-t[r]}for(var r=t.length,n=new Array(r),i=0;i!==r;++i)n[i]=i;return n.sort(e),n},sortedArray:function(t,e,r){for(var n=t.length,i=new t.constructor(n),a=0,o=0;o!==n;++a)for(var s=r[a]*e,u=0;u!==e;++u)i[o++]=t[s+u];return i},flattenJSON:function(t,e,r,n){for(var i=1,a=t[0];void 0!==a&&void 0===a[n];)a=t[i++];if(void 0!==a){var o=a[n];if(void 0!==o)if(Array.isArray(o))do{o=a[n],void 0!==o&&(e.push(a.time),r.push.apply(r,o)),a=t[i++]}while(void 0!==a);else if(void 0!==o.toArray)do{o=a[n],void 0!==o&&(e.push(a.time),o.toArray(r,r.length)),a=t[i++]}while(void 0!==a);else do{o=a[n],void 0!==o&&(e.push(a.time),r.push(o)),a=t[i++]}while(void 0!==a)}}};Vr.prototype={constructor:Vr,evaluate:function(t){var e=this.parameterPositions,r=this._cachedIndex,n=e[r],i=e[r-1];t:{e:{var a;r:{n:if(!(t<n)){for(var o=r+2;;){if(void 0===n){if(t<i)break n;return r=e.length,this._cachedIndex=r,this.afterEnd_(r-1,t,i)}if(r===o)break;if(i=n,n=e[++r],t<n)break e}a=e.length;break r}{if(t>=i)break t;var s=e[1];t<s&&(r=2,i=s);for(var o=r-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,n);if(r===o)break;if(n=i,i=e[--r-1],t>=i)break e}a=r,r=0}}for(;r<a;){var u=r+a>>>1;t<e[u]?a=u:r=u+1}if(n=e[r],void 0===(i=e[r-1]))return this._cachedIndex=0,this.beforeStart_(0,t,n);if(void 0===n)return r=e.length,this._cachedIndex=r,this.afterEnd_(r-1,i,t)}this._cachedIndex=r,this.intervalChanged_(r,i,n)}return this.interpolate_(r,i,t,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,r=this.sampleValues,n=this.valueSize,i=t*n,a=0;a!==n;++a)e[a]=r[i+a];return e},interpolate_:function(t,e,r,n){throw new Error("call to abstract method")},intervalChanged_:function(t,e,r){}},Object.assign(Vr.prototype,{beforeStart_:Vr.prototype.copySampleValue_,afterEnd_:Vr.prototype.copySampleValue_}),Fr.prototype=Object.assign(Object.create(Vr.prototype),{constructor:Fr,DefaultSettings_:{endingStart:Yo,endingEnd:Yo},intervalChanged_:function(t,e,r){var n=this.parameterPositions,i=t-2,a=t+1,o=n[i],s=n[a];if(void 0===o)switch(this.getSettings_().endingStart){case 2401:i=t,o=2*e-r;break;case 2402:i=n.length-2,o=e+n[i]-n[i+1];break;default:i=t,o=r}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:a=t,s=2*r-e;break;case 2402:a=1,s=r+n[1]-n[0];break;default:a=t-1,s=e}var u=.5*(r-e),l=this.valueSize;this._weightPrev=u/(e-o),this._weightNext=u/(s-r),this._offsetPrev=i*l,this._offsetNext=a*l},interpolate_:function(t,e,r,n){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,u=s-o,l=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,f=this._weightNext,d=(r-e)/(n-e),p=d*d,m=p*d,g=-h*m+2*h*p-h*d,v=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*d+1,y=(-1-f)*m+(1.5+f)*p+.5*d,M=f*m-f*p,w=0;w!==o;++w)i[w]=g*a[l+w]+v*a[u+w]+y*a[s+w]+M*a[c+w];return i}}),kr.prototype=Object.assign(Object.create(Vr.prototype),{constructor:kr,interpolate_:function(t,e,r,n){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,u=s-o,l=(r-e)/(n-e),c=1-l,h=0;h!==o;++h)i[h]=a[u+h]*c+a[s+h]*l;return i}}),Gr.prototype=Object.assign(Object.create(Vr.prototype),{constructor:Gr,interpolate_:function(t,e,r,n){return this.copySampleValue_(t-1)}});var As;As={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(t){return new Gr(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new kr(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new Fr(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case 2300:e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(r);this.setInterpolation(this.DefaultInterpolation)}return void console.warn(r)}this.createInterpolant=e},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,r=0,n=e.length;r!==n;++r)e[r]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,r=0,n=e.length;r!==n;++r)e[r]*=t;return this},trim:function(t,e){for(var r=this.times,n=r.length,i=0,a=n-1;i!==n&&r[i]<t;)++i;for(;-1!==a&&r[a]>e;)--a;if(++a,0!==i||a!==n){i>=a&&(a=Math.max(a,1),i=a-1);var o=this.getValueSize();this.times=_s.arraySlice(r,i,a),this.values=_s.arraySlice(this.values,i*o,a*o)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("invalid value size in track",this),t=!1);var r=this.times,n=this.values,i=r.length;0===i&&(console.error("track is empty",this),t=!1);for(var a=null,o=0;o!==i;o++){var s=r[o];if("number"==typeof s&&isNaN(s)){console.error("time is not a valid number",this,o,s),t=!1;break}if(null!==a&&a>s){console.error("out of order keys",this,o,s,a),t=!1;break}a=s}if(void 0!==n&&_s.isTypedArray(n))for(var o=0,u=n.length;o!==u;++o){var l=n[o];if(isNaN(l)){console.error("value is not a valid number",this,o,l),t=!1;break}}return t},optimize:function(){for(var t=this.times,e=this.values,r=this.getValueSize(),n=2302===this.getInterpolation(),i=1,a=t.length-1,o=1;o<a;++o){var s=!1,u=t[o];if(u!==t[o+1]&&(1!==o||u!==u[0]))if(n)s=!0;else for(var l=o*r,c=l-r,h=l+r,f=0;f!==r;++f){var d=e[l+f];if(d!==e[c+f]||d!==e[h+f]){s=!0;break}}if(s){if(o!==i){t[i]=t[o];for(var p=o*r,m=i*r,f=0;f!==r;++f)e[m+f]=e[p+f]}++i}}if(a>0){t[i]=t[a];for(var p=a*r,m=i*r,f=0;f!==r;++f)e[m+f]=e[p+f];++i}return i!==t.length&&(this.times=_s.arraySlice(t,0,i),this.values=_s.arraySlice(e,0,i*r)),this}},Hr.prototype=Object.assign(Object.create(As),{constructor:Hr,ValueTypeName:"vector"}),Qr.prototype=Object.assign(Object.create(Vr.prototype),{constructor:Qr,interpolate_:function(t,e,r,n){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,u=t*o,l=(r-e)/(n-e),c=u+o;u!==c;u+=4)s.slerpFlat(i,0,a,u-o,a,u,l);return i}}),Wr.prototype=Object.assign(Object.create(As),{constructor:Wr,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(t){return new Qr(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),Xr.prototype=Object.assign(Object.create(As),{constructor:Xr,ValueTypeName:"number"}),qr.prototype=Object.assign(Object.create(As),{constructor:qr,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Zr.prototype=Object.assign(Object.create(As),{constructor:Zr,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Kr.prototype=Object.assign(Object.create(As),{constructor:Kr,ValueTypeName:"color"}),Jr.prototype=As,As.constructor=Jr,Object.assign(Jr,{parse:function(t){if(void 0===t.type)throw new Error("track type undefined, can not parse");var e=Jr._getTrackTypeForValueTypeName(t.type);if(void 0===t.times){var r=[],n=[];_s.flattenJSON(t.keys,r,n,"value"),t.times=r,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)},toJSON:function(t){var e,r=t.constructor;if(void 0!==r.toJSON)e=r.toJSON(t);else{e={name:t.name,times:_s.convertArray(t.times,Array),values:_s.convertArray(t.values,Array)};var n=t.getInterpolation();n!==t.DefaultInterpolation&&(e.interpolation=n)}return e.type=t.ValueTypeName,e},_getTrackTypeForValueTypeName:function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Xr;case"vector":case"vector2":case"vector3":case"vector4":return Hr;case"color":return Kr;case"quaternion":return Wr;case"bool":case"boolean":return Zr;case"string":return qr}throw new Error("Unsupported typeName: "+t)}}),$r.prototype={constructor:$r,resetDuration:function(){for(var t=this.tracks,e=0,r=0,n=t.length;r!==n;++r){var i=this.tracks[r];e=Math.max(e,i.times[i.times.length-1])}this.duration=e},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}},Object.assign($r,{parse:function(t){for(var e=[],r=t.tracks,n=1/(t.fps||1),i=0,a=r.length;i!==a;++i)e.push(Jr.parse(r[i]).scale(n));return new $r(t.name,t.duration,e)},toJSON:function(t){for(var e=[],r=t.tracks,n={name:t.name,duration:t.duration,tracks:e},i=0,a=r.length;i!==a;++i)e.push(Jr.toJSON(r[i]));return n},CreateFromMorphTargetSequence:function(t,e,r,n){for(var i=e.length,a=[],o=0;o<i;o++){var s=[],u=[];s.push((o+i-1)%i,o,(o+1)%i),u.push(0,1,0);var l=_s.getKeyframeOrder(s);s=_s.sortedArray(s,1,l),u=_s.sortedArray(u,1,l),n||0!==s[0]||(s.push(i),u.push(u[0])),a.push(new Xr(".morphTargetInfluences["+e[o].name+"]",s,u).scale(1/r))}return new $r(t,-1,a)},findByName:function(t,e){var r=t;if(!Array.isArray(t)){var n=t;r=n.geometry&&n.geometry.animations||n.animations}for(var i=0;i<r.length;i++)if(r[i].name===e)return r[i];return null},CreateClipsFromMorphTargetSequences:function(t,e,r){for(var n={},i=/^([\w-]*?)([\d]+)$/,a=0,o=t.length;a<o;a++){var s=t[a],u=s.name.match(i);if(u&&u.length>1){var l=u[1],c=n[l];c||(n[l]=c=[]),c.push(s)}}var h=[];for(var l in n)h.push($r.CreateFromMorphTargetSequence(l,n[l],e,r));return h},parseAnimation:function(t,e){if(!t)return console.error("  no animation in JSONLoader data"),null;for(var r=function(t,e,r,n,i){if(0!==r.length){var a=[],o=[];_s.flattenJSON(r,a,o,n),0!==a.length&&i.push(new t(e,a,o))}},n=[],i=t.name||"default",a=t.length||-1,o=t.fps||30,s=t.hierarchy||[],u=0;u<s.length;u++){var l=s[u].keys;if(l&&0!==l.length)if(l[0].morphTargets){for(var c={},h=0;h<l.length;h++)if(l[h].morphTargets)for(var f=0;f<l[h].morphTargets.length;f++)c[l[h].morphTargets[f]]=-1;for(var d in c){for(var p=[],m=[],f=0;f!==l[h].morphTargets.length;++f){var g=l[h];p.push(g.time),m.push(g.morphTarget===d?1:0)}n.push(new Xr(".morphTargetInfluence["+d+"]",p,m))}a=c.length*(o||1)}else{var v=".bones["+e[u].name+"]";r(Hr,v+".position",l,"pos",n),r(Wr,v+".quaternion",l,"rot",n),r(Hr,v+".scale",l,"scl",n)}}return 0===n.length?null:new $r(i,a,n)}}),Object.assign(tn.prototype,{load:function(t,e,r,n){var i=this;new Sr(i.manager).load(t,function(t){e(i.parse(JSON.parse(t)))},r,n)},setTextures:function(t){this.textures=t},parse:function(t){function e(t){return void 0===n[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),n[t]}var n=this.textures,i=new Ts[t.type];if(void 0!==t.uuid&&(i.uuid=t.uuid),void 0!==t.name&&(i.name=t.name),void 0!==t.color&&i.color.setHex(t.color),void 0!==t.roughness&&(i.roughness=t.roughness),void 0!==t.metalness&&(i.metalness=t.metalness),void 0!==t.emissive&&i.emissive.setHex(t.emissive),void 0!==t.specular&&i.specular.setHex(t.specular),void 0!==t.shininess&&(i.shininess=t.shininess),void 0!==t.clearCoat&&(i.clearCoat=t.clearCoat),void 0!==t.clearCoatRoughness&&(i.clearCoatRoughness=t.clearCoatRoughness),void 0!==t.uniforms&&(i.uniforms=t.uniforms),void 0!==t.vertexShader&&(i.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(i.fragmentShader=t.fragmentShader),void 0!==t.vertexColors&&(i.vertexColors=t.vertexColors),void 0!==t.fog&&(i.fog=t.fog),void 0!==t.shading&&(i.shading=t.shading),void 0!==t.blending&&(i.blending=t.blending),void 0!==t.side&&(i.side=t.side),void 0!==t.opacity&&(i.opacity=t.opacity),void 0!==t.transparent&&(i.transparent=t.transparent),void 0!==t.alphaTest&&(i.alphaTest=t.alphaTest),void 0!==t.depthTest&&(i.depthTest=t.depthTest),void 0!==t.depthWrite&&(i.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(i.colorWrite=t.colorWrite),void 0!==t.wireframe&&(i.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(i.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(i.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(i.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.skinning&&(i.skinning=t.skinning),void 0!==t.morphTargets&&(i.morphTargets=t.morphTargets),void 0!==t.size&&(i.size=t.size),void 0!==t.sizeAttenuation&&(i.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(i.map=e(t.map)),void 0!==t.alphaMap&&(i.alphaMap=e(t.alphaMap),i.transparent=!0),void 0!==t.bumpMap&&(i.bumpMap=e(t.bumpMap)),void 0!==t.bumpScale&&(i.bumpScale=t.bumpScale),void 0!==t.normalMap&&(i.normalMap=e(t.normalMap)),void 0!==t.normalScale){var a=t.normalScale;!1===Array.isArray(a)&&(a=[a,a]),i.normalScale=(new r).fromArray(a)}if(void 0!==t.displacementMap&&(i.displacementMap=e(t.displacementMap)),void 0!==t.displacementScale&&(i.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(i.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(i.roughnessMap=e(t.roughnessMap)),void 0!==t.metalnessMap&&(i.metalnessMap=e(t.metalnessMap)),void 0!==t.emissiveMap&&(i.emissiveMap=e(t.emissiveMap)),void 0!==t.emissiveIntensity&&(i.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(i.specularMap=e(t.specularMap)),void 0!==t.envMap&&(i.envMap=e(t.envMap)),void 0!==t.reflectivity&&(i.reflectivity=t.reflectivity),void 0!==t.lightMap&&(i.lightMap=e(t.lightMap)),void 0!==t.lightMapIntensity&&(i.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(i.aoMap=e(t.aoMap)),void 0!==t.aoMapIntensity&&(i.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(i.gradientMap=e(t.gradientMap)),void 0!==t.materials)for(var o=0,s=t.materials.length;o<s;o++)i.materials.push(this.parse(t.materials[o]));return i}}),Object.assign(en.prototype,{load:function(t,e,r,n){var i=this;new Sr(i.manager).load(t,function(t){e(i.parse(JSON.parse(t)))},r,n)},parse:function(t){var e=new _t,r=t.data.index,n={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};if(void 0!==r){var i=new n[r.type](r.array);e.setIndex(new dt(i,1))}var a=t.data.attributes;for(var o in a){var s=a[o],i=new n[s.type](s.array);e.addAttribute(o,new dt(i,s.itemSize,s.normalized))}var l=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==l)for(var c=0,h=l.length;c!==h;++c){var f=l[c];e.addGroup(f.start,f.count,f.materialIndex)}var d=t.data.boundingSphere;if(void 0!==d){var p=new u;void 0!==d.center&&p.fromArray(d.center),e.boundingSphere=new tt(p,d.radius)}return e}}),rn.prototype={constructor:rn,crossOrigin:void 0,extractUrlBase:function(t){var e=t.split("/");return 1===e.length?"./":(e.pop(),e.join("/")+"/")},initMaterials:function(t,e,r){for(var n=[],i=0;i<t.length;++i)n[i]=this.createMaterial(t[i],e,r);return n},createMaterial:function(){var t,e,r,n={NoBlending:da,NormalBlending:pa,AdditiveBlending:ma,SubtractiveBlending:ga,MultiplyBlending:va,CustomBlending:ya};return function(i,a,o){function s(t,r,n,i,s){var l,c=a+t,h=rn.Handlers.get(c);null!==h?l=h.load(c):(e.setCrossOrigin(o),l=e.load(c)),void 0!==r&&(l.repeat.fromArray(r),1!==r[0]&&(l.wrapS=io),1!==r[1]&&(l.wrapT=io)),void 0!==n&&l.offset.fromArray(n),void 0!==i&&("repeat"===i[0]&&(l.wrapS=io),"mirror"===i[0]&&(l.wrapS=oo),"repeat"===i[1]&&(l.wrapT=io),"mirror"===i[1]&&(l.wrapT=oo)),void 0!==s&&(l.anisotropy=s);var f=ns.generateUUID();return u[f]=l,f}void 0===t&&(t=new H),void 0===e&&(e=new Ir),void 0===r&&(r=new tn);var u={},l={uuid:ns.generateUUID(),type:"MeshLambertMaterial"};for(var c in i){var h=i[c];switch(c){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":l.name=h;break;case"blending":l.blending=n[h];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",c,"is no longer supported.");break;case"colorDiffuse":l.color=t.fromArray(h).getHex();break;case"colorSpecular":l.specular=t.fromArray(h).getHex();break;case"colorEmissive":l.emissive=t.fromArray(h).getHex();break;case"specularCoef":l.shininess=h;break;case"shading":"basic"===h.toLowerCase()&&(l.type="MeshBasicMaterial"),"phong"===h.toLowerCase()&&(l.type="MeshPhongMaterial"),"standard"===h.toLowerCase()&&(l.type="MeshStandardMaterial");break;case"mapDiffuse":l.map=s(h,i.mapDiffuseRepeat,i.mapDiffuseOffset,i.mapDiffuseWrap,i.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":l.emissiveMap=s(h,i.mapEmissiveRepeat,i.mapEmissiveOffset,i.mapEmissiveWrap,i.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":l.lightMap=s(h,i.mapLightRepeat,i.mapLightOffset,i.mapLightWrap,i.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":l.aoMap=s(h,i.mapAORepeat,i.mapAOOffset,i.mapAOWrap,i.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":l.bumpMap=s(h,i.mapBumpRepeat,i.mapBumpOffset,i.mapBumpWrap,i.mapBumpAnisotropy);break;case"mapBumpScale":l.bumpScale=h;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":l.normalMap=s(h,i.mapNormalRepeat,i.mapNormalOffset,i.mapNormalWrap,i.mapNormalAnisotropy);break;case"mapNormalFactor":l.normalScale=[h,h];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":l.specularMap=s(h,i.mapSpecularRepeat,i.mapSpecularOffset,i.mapSpecularWrap,i.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":l.metalnessMap=s(h,i.mapMetalnessRepeat,i.mapMetalnessOffset,i.mapMetalnessWrap,i.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":l.roughnessMap=s(h,i.mapRoughnessRepeat,i.mapRoughnessOffset,i.mapRoughnessWrap,i.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":l.alphaMap=s(h,i.mapAlphaRepeat,i.mapAlphaOffset,i.mapAlphaWrap,i.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":l.side=oa;break;case"doubleSided":l.side=sa;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),l.opacity=h;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":l[c]=h;break;case"vertexColors":!0===h&&(l.vertexColors=fa),"face"===h&&(l.vertexColors=ha);break;default:console.error("THREE.Loader.createMaterial: Unsupported",c,h)}}return"MeshBasicMaterial"===l.type&&delete l.emissive,"MeshPhongMaterial"!==l.type&&delete l.specular,l.opacity<1&&(l.transparent=!0),r.setTextures(u),r.parse(l)}}()},rn.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,r=0,n=e.length;r<n;r+=2){var i=e[r],a=e[r+1];if(i.test(t))return a}return null}},Object.assign(nn.prototype,{load:function(t,e,r,n){var i=this,a=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:rn.prototype.extractUrlBase(t),o=new Sr(this.manager);o.setWithCredentials(this.withCredentials),o.load(t,function(r){var n=JSON.parse(r),o=n.metadata;if(void 0!==o){var s=o.type;if(void 0!==s){if("object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.ObjectLoader instead.");if("scene"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.SceneLoader instead.")}}var u=i.parse(n,a);e(u.geometry,u.materials)},r,n)},setTexturePath:function(t){this.texturePath=t},parse:function(t,e){var n=new St,a=void 0!==t.scale?1/t.scale:1;if(function(e){function i(t,e){return t&1<<e}var a,o,s,l,c,h,f,d,p,m,g,v,y,M,w,x,b,T,E,S,_,A,D,N,I,L,C,O=t.faces,R=t.vertices,z=t.normals,j=t.colors,P=0;if(void 0!==t.uvs){for(a=0;a<t.uvs.length;a++)t.uvs[a].length&&P++;for(a=0;a<P;a++)n.faceVertexUvs[a]=[]}for(l=0,c=R.length;l<c;)T=new u,T.x=R[l++]*e,T.y=R[l++]*e,T.z=R[l++]*e,n.vertices.push(T);for(l=0,c=O.length;l<c;)if(m=O[l++],g=i(m,0),v=i(m,1),y=i(m,3),M=i(m,4),w=i(m,5),x=i(m,6),b=i(m,7),g){if(S=new ht,S.a=O[l],S.b=O[l+1],S.c=O[l+3],_=new ht,_.a=O[l+1],_.b=O[l+2],_.c=O[l+3],l+=4,v&&(p=O[l++],S.materialIndex=p,_.materialIndex=p),s=n.faces.length,y)for(a=0;a<P;a++)for(N=t.uvs[a],n.faceVertexUvs[a][s]=[],n.faceVertexUvs[a][s+1]=[],o=0;o<4;o++)d=O[l++],L=N[2*d],C=N[2*d+1],I=new r(L,C),2!==o&&n.faceVertexUvs[a][s].push(I),0!==o&&n.faceVertexUvs[a][s+1].push(I);if(M&&(f=3*O[l++],S.normal.set(z[f++],z[f++],z[f]),_.normal.copy(S.normal)),w)for(a=0;a<4;a++)f=3*O[l++],D=new u(z[f++],z[f++],z[f]),2!==a&&S.vertexNormals.push(D),0!==a&&_.vertexNormals.push(D);if(x&&(h=O[l++],A=j[h],S.color.setHex(A),_.color.setHex(A)),b)for(a=0;a<4;a++)h=O[l++],A=j[h],2!==a&&S.vertexColors.push(new H(A)),0!==a&&_.vertexColors.push(new H(A));n.faces.push(S),n.faces.push(_)}else{if(E=new ht,E.a=O[l++],E.b=O[l++],E.c=O[l++],v&&(p=O[l++],E.materialIndex=p),s=n.faces.length,y)for(a=0;a<P;a++)for(N=t.uvs[a],n.faceVertexUvs[a][s]=[],o=0;o<3;o++)d=O[l++],L=N[2*d],C=N[2*d+1],I=new r(L,C),n.faceVertexUvs[a][s].push(I);if(M&&(f=3*O[l++],E.normal.set(z[f++],z[f++],z[f])),w)for(a=0;a<3;a++)f=3*O[l++],D=new u(z[f++],z[f++],z[f]),E.vertexNormals.push(D);if(x&&(h=O[l++],E.color.setHex(j[h])),b)for(a=0;a<3;a++)h=O[l++],E.vertexColors.push(new H(j[h]));n.faces.push(E)}}(a),function(){var e=void 0!==t.influencesPerVertex?t.influencesPerVertex:2;if(t.skinWeights)for(var r=0,a=t.skinWeights.length;r<a;r+=e){var o=t.skinWeights[r],s=e>1?t.skinWeights[r+1]:0,u=e>2?t.skinWeights[r+2]:0,l=e>3?t.skinWeights[r+3]:0;n.skinWeights.push(new i(o,s,u,l))}if(t.skinIndices)for(var r=0,a=t.skinIndices.length;r<a;r+=e){var c=t.skinIndices[r],h=e>1?t.skinIndices[r+1]:0,f=e>2?t.skinIndices[r+2]:0,d=e>3?t.skinIndices[r+3]:0;n.skinIndices.push(new i(c,h,f,d))}n.bones=t.bones,n.bones&&n.bones.length>0&&(n.skinWeights.length!==n.skinIndices.length||n.skinIndices.length!==n.vertices.length)&&console.warn("When skinning, number of vertices ("+n.vertices.length+"), skinIndices ("+n.skinIndices.length+"), and skinWeights ("+n.skinWeights.length+") should match.")}(),function(e){if(void 0!==t.morphTargets)for(var r=0,i=t.morphTargets.length;r<i;r++){n.morphTargets[r]={},n.morphTargets[r].name=t.morphTargets[r].name,n.morphTargets[r].vertices=[];for(var a=n.morphTargets[r].vertices,o=t.morphTargets[r].vertices,s=0,l=o.length;s<l;s+=3){var c=new u;c.x=o[s]*e,c.y=o[s+1]*e,c.z=o[s+2]*e,a.push(c)}}if(void 0!==t.morphColors&&t.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');for(var h=n.faces,f=t.morphColors[0].colors,r=0,i=h.length;r<i;r++)h[r].color.fromArray(f,3*r)}}(a),function(){var e=[],r=[];void 0!==t.animation&&r.push(t.animation),void 0!==t.animations&&(t.animations.length?r=r.concat(t.animations):r.push(t.animations));for(var i=0;i<r.length;i++){var a=$r.parseAnimation(r[i],n.bones);a&&e.push(a)}if(n.morphTargets){var o=$r.CreateClipsFromMorphTargetSequences(n.morphTargets,10);e=e.concat(o)}e.length>0&&(n.animations=e)}(),n.computeFaceNormals(),n.computeBoundingSphere(),void 0===t.materials||0===t.materials.length)return{geometry:n};var o=rn.prototype.initMaterials(t.materials,e,this.crossOrigin);return{geometry:n,materials:o}}}),Object.assign(an.prototype,{load:function(t,e,r,n){""===this.texturePath&&(this.texturePath=t.substring(0,t.lastIndexOf("/")+1));var i=this;new Sr(i.manager).load(t,function(r){var n=null;try{n=JSON.parse(r)}catch(e){return void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}var a=n.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())return void console.error("THREE.ObjectLoader: Can't load "+t+". Use THREE.JSONLoader instead.");i.parse(n,e)},r,n)},setTexturePath:function(t){this.texturePath=t},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(t,e){var r=this.parseGeometries(t.geometries),n=this.parseImages(t.images,function(){void 0!==e&&e(o)}),i=this.parseTextures(t.textures,n),a=this.parseMaterials(t.materials,i),o=this.parseObject(t.object,r,a);return t.animations&&(o.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(o),o},parseGeometries:function(t){var e={};if(void 0!==t)for(var r=new nn,n=new en,i=0,a=t.length;i<a;i++){var o,s=t[i];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new bs[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":o=new bs[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":o=new bs[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":o=new bs[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":o=new bs[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":o=new bs[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":o=new bs[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":o=new bs[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":o=new bs[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":o=new bs[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"LatheGeometry":case"LatheBufferGeometry":o=new bs[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"BufferGeometry":o=n.parse(s);break;case"Geometry":o=r.parse(s.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),e[s.uuid]=o}return e},parseMaterials:function(t,e){var r={};if(void 0!==t){var n=new tn;n.setTextures(e);for(var i=0,a=t.length;i<a;i++){var o=n.parse(t[i]);r[o.uuid]=o}}return r},parseAnimations:function(t){for(var e=[],r=0;r<t.length;r++){var n=$r.parse(t[r]);e.push(n)}return e},parseImages:function(t,e){var r=this,n={};if(void 0!==t&&t.length>0){var i=new Er(e),a=new Dr(i);a.setCrossOrigin(this.crossOrigin);for(var o=0,s=t.length;o<s;o++){var u=t[o],l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u.url)?u.url:r.texturePath+u.url;n[u.uuid]=function(t){return r.manager.itemStart(t),a.load(t,function(){r.manager.itemEnd(t)},void 0,function(){r.manager.itemError(t)})}(l)}}return n},parseTextures:function(t,e){function r(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var i={UVMapping:300,CubeReflectionMapping:Ka,CubeRefractionMapping:Ja,EquirectangularReflectionMapping:$a,EquirectangularRefractionMapping:to,SphericalReflectionMapping:eo,CubeUVReflectionMapping:ro,CubeUVRefractionMapping:no},a={RepeatWrapping:io,ClampToEdgeWrapping:ao,MirroredRepeatWrapping:oo},o={NearestFilter:so,NearestMipMapNearestFilter:uo,NearestMipMapLinearFilter:lo,LinearFilter:co,LinearMipMapNearestFilter:ho,LinearMipMapLinearFilter:fo},s={};if(void 0!==t)for(var u=0,l=t.length;u<l;u++){var c=t[u];void 0===c.image&&console.warn('THREE.ObjectLoader: No "image" specified for',c.uuid),void 0===e[c.image]&&console.warn("THREE.ObjectLoader: Undefined image",c.image);var h=new n(e[c.image]);h.needsUpdate=!0,h.uuid=c.uuid,void 0!==c.name&&(h.name=c.name),void 0!==c.mapping&&(h.mapping=r(c.mapping,i)),void 0!==c.offset&&h.offset.fromArray(c.offset),void 0!==c.repeat&&h.repeat.fromArray(c.repeat),void 0!==c.wrap&&(h.wrapS=r(c.wrap[0],a),h.wrapT=r(c.wrap[1],a)),void 0!==c.minFilter&&(h.minFilter=r(c.minFilter,o)),void 0!==c.magFilter&&(h.magFilter=r(c.magFilter,o)),void 0!==c.anisotropy&&(h.anisotropy=c.anisotropy),void 0!==c.flipY&&(h.flipY=c.flipY),s[c.uuid]=h}return s},parseObject:function(){var t=new l;return function(e,r,n){function i(t){return void 0===r[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),r[t]}function a(t){if(void 0!==t)return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}var o;switch(e.type){case"Scene":o=new ue,void 0!==e.background&&Number.isInteger(e.background)&&(o.background=new H(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?o.fog=new he(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(o.fog=new ce(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":o=new Ct(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(o.focus=e.focus),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.filmGauge&&(o.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(o.filmOffset=e.filmOffset),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Ot(e.left,e.right,e.top,e.bottom,e.near,e.far);break;case"AmbientLight":o=new Br(e.color,e.intensity);break;case"DirectionalLight":o=new Ur(e.color,e.intensity);break;case"PointLight":o=new jr(e.color,e.intensity,e.distance,e.decay);break;case"SpotLight":o=new zr(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new Cr(e.color,e.groundColor,e.intensity);break;case"Mesh":var s=i(e.geometry),u=a(e.material);o=s.bones&&s.bones.length>0?new ye(s,u):new At(s,u);break;case"LOD":o=new me;break;case"Line":o=new we(i(e.geometry),a(e.material),e.mode);break;case"LineSegments":o=new xe(i(e.geometry),a(e.material));break;case"PointCloud":case"Points":o=new Te(i(e.geometry),a(e.material));break;case"Sprite":o=new pe(a(e.material));break;case"Group":o=new Ee;break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh type. Instantiates Object3D instead.");default:o=new ut}if(o.uuid=e.uuid,void 0!==e.name&&(o.name=e.name),void 0!==e.matrix?(t.fromArray(e.matrix),t.decompose(o.position,o.quaternion,o.scale)):(void 0!==e.position&&o.position.fromArray(e.position),void 0!==e.rotation&&o.rotation.fromArray(e.rotation),void 0!==e.quaternion&&o.quaternion.fromArray(e.quaternion),void 0!==e.scale&&o.scale.fromArray(e.scale)),void 0!==e.castShadow&&(o.castShadow=e.castShadow),void 0!==e.receiveShadow&&(o.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(o.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(o.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&o.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(o.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(o.visible=e.visible),void 0!==e.userData&&(o.userData=e.userData),void 0!==e.children)for(var l in e.children)o.add(this.parseObject(e.children[l],r,n));if("LOD"===e.type)for(var c=e.levels,h=0;h<c.length;h++){var f=c[h],l=o.getObjectByProperty("uuid",f.object);void 0!==l&&o.addLevel(l,f.distance)}return o}}()}),gn.prototype={constructor:gn,getPoint:function(t){return console.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},getPointAt:function(t){var e=this.getUtoTmapping(t);return this.getPoint(e)},getPoints:function(t){t||(t=5);for(var e=[],r=0;r<=t;r++)e.push(this.getPoint(r/t));return e},getSpacedPoints:function(t){t||(t=5);for(var e=[],r=0;r<=t;r++)e.push(this.getPointAt(r/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(t||(t=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,r,n=[],i=this.getPoint(0),a=0;for(n.push(0),r=1;r<=t;r++)e=this.getPoint(r/t),a+=e.distanceTo(i),n.push(a),i=e;return this.cacheArcLengths=n,n},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var r,n=this.getLengths(),i=0,a=n.length;r=e||t*n[a-1];for(var o,s=0,u=a-1;s<=u;)if(i=Math.floor(s+(u-s)/2),(o=n[i]-r)<0)s=i+1;else{if(!(o>0)){u=i;break}u=i-1}if(i=u,n[i]===r){var l=i/(a-1);return l}var c=n[i],h=n[i+1],f=h-c,d=(r-c)/f,l=(i+d)/(a-1);return l},getTangent:function(t){var e=t-1e-4,r=t+1e-4;e<0&&(e=0),r>1&&(r=1);var n=this.getPoint(e);return this.getPoint(r).clone().sub(n).normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},computeFrenetFrames:function(t,e){var r,n,i,a=new u,o=[],s=[],c=[],h=new u,f=new l;for(r=0;r<=t;r++)n=r/t,o[r]=this.getTangentAt(n),o[r].normalize();s[0]=new u,c[0]=new u;var d=Number.MAX_VALUE,p=Math.abs(o[0].x),m=Math.abs(o[0].y),g=Math.abs(o[0].z);for(p<=d&&(d=p,a.set(1,0,0)),m<=d&&(d=m,a.set(0,1,0)),g<=d&&a.set(0,0,1),h.crossVectors(o[0],a).normalize(),s[0].crossVectors(o[0],h),c[0].crossVectors(o[0],s[0]),r=1;r<=t;r++)s[r]=s[r-1].clone(),c[r]=c[r-1].clone(),h.crossVectors(o[r-1],o[r]),h.length()>Number.EPSILON&&(h.normalize(),i=Math.acos(ns.clamp(o[r-1].dot(o[r]),-1,1)),s[r].applyMatrix4(f.makeRotationAxis(h,i))),c[r].crossVectors(o[r],s[r]);if(!0===e)for(i=Math.acos(ns.clamp(s[0].dot(s[t]),-1,1)),i/=t,o[0].dot(h.crossVectors(s[0],s[t]))>0&&(i=-i),r=1;r<=t;r++)s[r].applyMatrix4(f.makeRotationAxis(o[r],i*r)),c[r].crossVectors(o[r],s[r]);return{tangents:o,normals:s,binormals:c}}},vn.prototype=Object.create(gn.prototype),vn.prototype.constructor=vn,vn.prototype.isLineCurve=!0,vn.prototype.getPoint=function(t){if(1===t)return this.v2.clone();var e=this.v2.clone().sub(this.v1);return e.multiplyScalar(t).add(this.v1),e},vn.prototype.getPointAt=function(t){return this.getPoint(t)},vn.prototype.getTangent=function(t){return this.v2.clone().sub(this.v1).normalize()},yn.prototype=Object.assign(Object.create(gn.prototype),{constructor:yn,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new vn(e,t))},getPoint:function(t){for(var e=t*this.getLength(),r=this.getCurveLengths(),n=0;n<r.length;){if(r[n]>=e){var i=r[n]-e,a=this.curves[n],o=a.getLength(),s=0===o?0:1-i/o;return a.getPointAt(s)}n++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,r=0,n=this.curves.length;r<n;r++)e+=this.curves[r].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){t||(t=40);for(var e=[],r=0;r<=t;r++)e.push(this.getPoint(r/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,r=[],n=0,i=this.curves;n<i.length;n++)for(var a=i[n],o=a&&a.isEllipseCurve?2*t:a&&a.isLineCurve?1:a&&a.isSplineCurve?t*a.points.length:t,s=a.getPoints(o),u=0;u<s.length;u++){var l=s[u];e&&e.equals(l)||(r.push(l),e=l)}return this.autoClose&&r.length>1&&!r[r.length-1].equals(r[0])&&r.push(r[0]),r},createPointsGeometry:function(t){var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){for(var e=new St,r=0,n=t.length;r<n;r++){var i=t[r];e.vertices.push(new u(i.x,i.y,i.z||0))}return e}}),Mn.prototype=Object.create(gn.prototype),Mn.prototype.constructor=Mn,Mn.prototype.isEllipseCurve=!0,Mn.prototype.getPoint=function(t){for(var e=2*Math.PI,n=this.aEndAngle-this.aStartAngle,i=Math.abs(n)<Number.EPSILON;n<0;)n+=e;for(;n>e;)n-=e;n<Number.EPSILON&&(n=i?0:e),!0!==this.aClockwise||i||(n===e?n=-e:n-=e);var a=this.aStartAngle+t*n,o=this.aX+this.xRadius*Math.cos(a),s=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var u=Math.cos(this.aRotation),l=Math.sin(this.aRotation),c=o-this.aX,h=s-this.aY;o=c*u-h*l+this.aX,s=c*l+h*u+this.aY}return new r(o,s)},wn.prototype=Object.create(gn.prototype),wn.prototype.constructor=wn,wn.prototype.isSplineCurve=!0,wn.prototype.getPoint=function(t){var e=this.points,n=(e.length-1)*t,i=Math.floor(n),a=n-i,o=e[0===i?i:i-1],s=e[i],u=e[i>e.length-2?e.length-1:i+1],l=e[i>e.length-3?e.length-1:i+2];return new r(on(a,o.x,s.x,u.x,l.x),on(a,o.y,s.y,u.y,l.y))},xn.prototype=Object.create(gn.prototype),xn.prototype.constructor=xn,xn.prototype.getPoint=function(t){var e=this.v0,n=this.v1,i=this.v2,a=this.v3;return new r(mn(t,e.x,n.x,i.x,a.x),mn(t,e.y,n.y,i.y,a.y))},bn.prototype=Object.create(gn.prototype),bn.prototype.constructor=bn,bn.prototype.getPoint=function(t){var e=this.v0,n=this.v1,i=this.v2;return new r(cn(t,e.x,n.x,i.x),cn(t,e.y,n.y,i.y))};var Ds=Object.assign(Object.create(yn.prototype),{fromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,r=t.length;e<r;e++)this.lineTo(t[e].x,t[e].y)},moveTo:function(t,e){this.currentPoint.set(t,e)},lineTo:function(t,e){var n=new vn(this.currentPoint.clone(),new r(t,e));this.curves.push(n),this.currentPoint.set(t,e)},quadraticCurveTo:function(t,e,n,i){var a=new bn(this.currentPoint.clone(),new r(t,e),new r(n,i));this.curves.push(a),this.currentPoint.set(n,i)},bezierCurveTo:function(t,e,n,i,a,o){var s=new xn(this.currentPoint.clone(),new r(t,e),new r(n,i),new r(a,o));this.curves.push(s),this.currentPoint.set(a,o)},splineThru:function(t){var e=[this.currentPoint.clone()].concat(t),r=new wn(e);this.curves.push(r),this.currentPoint.copy(t[t.length-1])},arc:function(t,e,r,n,i,a){var o=this.currentPoint.x,s=this.currentPoint.y;this.absarc(t+o,e+s,r,n,i,a)},absarc:function(t,e,r,n,i,a){this.absellipse(t,e,r,r,n,i,a)},ellipse:function(t,e,r,n,i,a,o,s){var u=this.currentPoint.x,l=this.currentPoint.y;this.absellipse(t+u,e+l,r,n,i,a,o,s)},absellipse:function(t,e,r,n,i,a,o,s){var u=new Mn(t,e,r,n,i,a,o,s);if(this.curves.length>0){var l=u.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(u);var c=u.getPoint(1);this.currentPoint.copy(c)}});Tn.prototype=Ds,Ds.constructor=Tn,En.prototype=Object.assign(Object.create(Ds),{constructor:En,getPointsHoles:function(t){for(var e=[],r=0,n=this.holes.length;r<n;r++)e[r]=this.holes[r].getPoints(t);return e},extractAllPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},extractPoints:function(t){return this.extractAllPoints(t)}}),Sn.prototype={moveTo:function(t,e){this.currentPath=new Tn,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e)},lineTo:function(t,e){this.currentPath.lineTo(t,e)},quadraticCurveTo:function(t,e,r,n){this.currentPath.quadraticCurveTo(t,e,r,n)},bezierCurveTo:function(t,e,r,n,i,a){this.currentPath.bezierCurveTo(t,e,r,n,i,a)},splineThru:function(t){this.currentPath.splineThru(t)},toShapes:function(t,e){function r(t){for(var e=[],r=0,n=t.length;r<n;r++){var i=t[r],a=new En;a.curves=i.curves,e.push(a)}return e}var n=xs.isClockWise,i=this.subPaths;if(0===i.length)return[];if(!0===e)return r(i);var a,o,s,u=[];if(1===i.length)return o=i[0],s=new En,s.curves=o.curves,u.push(s),u;var l=!n(i[0].getPoints());l=t?!l:l;var c,h=[],f=[],d=[],p=0;f[p]=void 0,d[p]=[];for(var m=0,g=i.length;m<g;m++)o=i[m],c=o.getPoints(),a=n(c),a=t?!a:a,a?(!l&&f[p]&&p++,f[p]={s:new En,p:c},f[p].s.curves=o.curves,l&&p++,d[p]=[]):d[p].push({h:o,p:c[0]});if(!f[0])return r(i);if(f.length>1){for(var v=!1,y=[],M=0,w=f.length;M<w;M++)h[M]=[];for(var M=0,w=f.length;M<w;M++)for(var x=d[M],b=0;b<x.length;b++){for(var T=x[b],E=!0,S=0;S<f.length;S++)(function(t,e){for(var r=e.length,n=!1,i=r-1,a=0;a<r;i=a++){var o=e[i],s=e[a],u=s.x-o.x,l=s.y-o.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(o=e[a],u=-u,s=e[i],l=-l),t.y<o.y||t.y>s.y)continue;if(t.y===o.y){if(t.x===o.x)return!0}else{var c=l*(t.x-o.x)-u*(t.y-o.y);if(0===c)return!0;if(c<0)continue;n=!n}}else{if(t.y!==o.y)continue;if(s.x<=t.x&&t.x<=o.x||o.x<=t.x&&t.x<=s.x)return!0}}return n})(T.p,f[S].p)&&(M!==S&&y.push({froms:M,tos:S,hole:b}),E?(E=!1,h[S].push(T)):v=!0);E&&h[M].push(T)}y.length>0&&(v||(d=h))}for(var _,m=0,A=f.length;m<A;m++){s=f[m].s,u.push(s),_=d[m];for(var D=0,N=_.length;D<N;D++)s.holes.push(_[D].h)}return u}},Object.assign(_n.prototype,{isFont:!0,generateShapes:function(t,e,r){function n(t,e,n){var a=i.glyphs[t]||i.glyphs["?"];if(a){var o,s,u,l,c,h,f,d,p,m,g,v=new Sn,y=[];if(a.o)for(var M=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),w=0,x=M.length;w<x;){var b=M[w++];switch(b){case"m":o=M[w++]*e+n,s=M[w++]*e,v.moveTo(o,s);break;case"l":o=M[w++]*e+n,s=M[w++]*e,v.lineTo(o,s);break;case"q":if(u=M[w++]*e+n,l=M[w++]*e,f=M[w++]*e+n,d=M[w++]*e,v.quadraticCurveTo(f,d,u,l),g=y[y.length-1]){c=g.x,h=g.y;for(var T=1;T<=r;T++){var E=T/r;cn(E,c,f,u),cn(E,h,d,l)}}break;case"b":if(u=M[w++]*e+n,l=M[w++]*e,f=M[w++]*e+n,d=M[w++]*e,p=M[w++]*e+n,m=M[w++]*e,v.bezierCurveTo(f,d,p,m,u,l),g=y[y.length-1]){c=g.x,h=g.y;for(var T=1;T<=r;T++){var E=T/r;mn(E,c,f,p,u),mn(E,h,d,m,l)}}}}return{offset:a.ha*e,path:v}}}void 0===e&&(e=100),void 0===r&&(r=4);for(var i=this.data,a=function(t){for(var r=String(t).split(""),a=e/i.resolution,o=0,s=[],u=0;u<r.length;u++){var l=n(r[u],a,o);o+=l.offset,s.push(l.path)}return s}(t),o=[],s=0,u=a.length;s<u;s++)Array.prototype.push.apply(o,a[s].toShapes());return o}}),Object.assign(An.prototype,{load:function(t,e,r,n){var i=this;new Sr(this.manager).load(t,function(t){var r;try{r=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),r=JSON.parse(t.substring(65,t.length-2))}var n=i.parse(r);e&&e(n)},r,n)},parse:function(t){return new _n(t)}});var Ns,Is={getContext:function(){return void 0===Ns&&(Ns=new(window.AudioContext||window.webkitAudioContext)),Ns},setContext:function(t){Ns=t}};Object.assign(Dn.prototype,{load:function(t,e,r,n){var i=new Sr(this.manager);i.setResponseType("arraybuffer"),i.load(t,function(t){Is.getContext().decodeAudioData(t,function(t){e(t)})},r,n)}}),Nn.prototype=Object.assign(Object.create(Lr.prototype),{constructor:Nn,isRectAreaLight:!0,copy:function(t){return Lr.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this}}),Object.assign(In.prototype,{update:function(){var t,e,r,n,i,a,o,s=new l,u=new l;return function(l){if(t!==this||e!==l.focus||r!==l.fov||n!==l.aspect*this.aspect||i!==l.near||a!==l.far||o!==l.zoom){t=this,e=l.focus,r=l.fov,n=l.aspect*this.aspect,i=l.near,a=l.far,o=l.zoom;var c,h,f=l.projectionMatrix.clone(),d=this.eyeSep/2,p=d*i/e,m=i*Math.tan(ns.DEG2RAD*r*.5)/o;u.elements[12]=-d,s.elements[12]=d,c=-m*n+p,h=m*n+p,f.elements[0]=2*i/(h-c),f.elements[8]=(h+c)/(h-c),this.cameraL.projectionMatrix.copy(f),c=-m*n-p,h=m*n-p,f.elements[0]=2*i/(h-c),f.elements[8]=(h+c)/(h-c),this.cameraR.projectionMatrix.copy(f)}this.cameraL.matrixWorld.copy(l.matrixWorld).multiply(u),this.cameraR.matrixWorld.copy(l.matrixWorld).multiply(s)}}()}),Ln.prototype=Object.create(ut.prototype),Ln.prototype.constructor=Ln,Cn.prototype=Object.assign(Object.create(ut.prototype),{constructor:Cn,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(t){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){this.gain.gain.value=t},updateMatrixWorld:function(){var t=new u,e=new s,r=new u,n=new u;return function(i){ut.prototype.updateMatrixWorld.call(this,i);var a=this.context.listener,o=this.up;this.matrixWorld.decompose(t,e,r),n.set(0,0,-1).applyQuaternion(e),a.positionX?(a.positionX.setValueAtTime(t.x,this.context.currentTime),a.positionY.setValueAtTime(t.y,this.context.currentTime),a.positionZ.setValueAtTime(t.z,this.context.currentTime),a.forwardX.setValueAtTime(n.x,this.context.currentTime),a.forwardY.setValueAtTime(n.y,this.context.currentTime),a.forwardZ.setValueAtTime(n.z,this.context.currentTime),a.upX.setValueAtTime(o.x,this.context.currentTime),a.upY.setValueAtTime(o.y,this.context.currentTime),a.upZ.setValueAtTime(o.z,this.context.currentTime)):(a.setPosition(t.x,t.y,t.z),a.setOrientation(n.x,n.y,n.z,o.x,o.y,o.z))}}()}),On.prototype=Object.assign(Object.create(ut.prototype),{constructor:On,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.onended=this.onEnded.bind(this),t.playbackRate.setValueAtTime(this.playbackRate,this.startTime),t.start(0,this.startTime),this.isPlaying=!0,this.source=t,this.connect()},pause:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this)},stop:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=0,this.isPlaying=!1,this)},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this)},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this)},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.value=t,this}}),Rn.prototype=Object.assign(Object.create(On.prototype),{constructor:Rn,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){this.panner.refDistance=t},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){this.panner.rolloffFactor=t},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){this.panner.distanceModel=t},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){this.panner.maxDistance=t},updateMatrixWorld:function(){var t=new u;return function(e){ut.prototype.updateMatrixWorld.call(this,e),t.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(t.x,t.y,t.z)}}()}),Object.assign(zn.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),r=0;r<e.length;r++)t+=e[r];return t/e.length}}),jn.prototype={constructor:jn,accumulate:function(t,e){var r=this.buffer,n=this.valueSize,i=t*n+n,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==n;++o)r[i+o]=r[o];a=e}else{a+=e;var s=e/a;this._mixBufferRegion(r,i,0,s,n)}this.cumulativeWeight=a},apply:function(t){var e=this.valueSize,r=this.buffer,n=t*e+e,i=this.cumulativeWeight,a=this.binding;if(this.cumulativeWeight=0,i<1){var o=3*e;this._mixBufferRegion(r,n,o,1-i,e)}for(var s=e,u=e+e;s!==u;++s)if(r[s]!==r[s+e]){a.setValue(r,n);break}},saveOriginalState:function(){var t=this.binding,e=this.buffer,r=this.valueSize,n=3*r;t.getValue(e,n);for(var i=r,a=n;i!==a;++i)e[i]=e[n+i%r];this.cumulativeWeight=0},restoreOriginalState:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_select:function(t,e,r,n,i){if(n>=.5)for(var a=0;a!==i;++a)t[e+a]=t[r+a]},_slerp:function(t,e,r,n,i){s.slerpFlat(t,e,t,e,t,r,n)},_lerp:function(t,e,r,n,i){for(var a=1-n,o=0;o!==i;++o){var s=e+o;t[s]=t[s]*a+t[r+o]*n}}},Pn.prototype={constructor:Pn,getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,r=e.objectName,n=e.propertyName,i=e.propertyIndex;if(t||(t=Pn.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("  trying to update node for track: "+this.path+" but it wasn't found.");if(r){var a=e.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("  can not bind to material as node does not have a material",this);if(!t.material.materials)return void console.error("  can not bind to material.materials as node.material does not have a materials array",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("  can not bind to bones as node does not have a skeleton",this);t=t.skeleton.bones;for(var o=0;o<t.length;o++)if(t[o].name===a){a=o;break}break;default:if(void 0===t[r])return void console.error("  can not bind to objectName of node, undefined",this);t=t[r]}if(void 0!==a){if(void 0===t[a])return void console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,t);t=t[a]}}var s=t[n];if(void 0===s){var u=e.nodeName;return void console.error("  trying to update property for track: "+u+"."+n+" but it wasn't found.",t)}var l=this.Versioning.None;void 0!==t.needsUpdate?(l=this.Versioning.NeedsUpdate,this.targetObject=t):void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=t);var c=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===n){if(!t.geometry)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this);if(!t.geometry.morphTargets)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);for(var o=0;o<this.node.geometry.morphTargets.length;o++)if(t.geometry.morphTargets[o].name===i){i=o;break}}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):void 0!==s.length?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=n;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}},Object.assign(Pn.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},_getValue_unbound:Pn.prototype.getValue,_setValue_unbound:Pn.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)t[e++]=r[n]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.node[this.propertyName]=t[e]},function(t,e){this.node[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.node[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)r[n]=t[e++]},function(t,e){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)r[n]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)r[n]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]]}),Pn.Composite=function(t,e,r){var n=r||Pn.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,n)},Pn.Composite.prototype={constructor:Pn.Composite,getValue:function(t,e){this.bind();var r=this._targetGroup.nCachedObjects_,n=this._bindings[r];void 0!==n&&n.getValue(t,e)},setValue:function(t,e){for(var r=this._bindings,n=this._targetGroup.nCachedObjects_,i=r.length;n!==i;++n)r[n].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,r=t.length;e!==r;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,r=t.length;e!==r;++e)t[e].unbind()}},Pn.create=function(t,e,r){return t&&t.isAnimationObjectGroup?new Pn.Composite(t,e,r):new Pn(t,e,r)},Pn.parseTrackName=function(t){var e=/^((?:[\w-]+[\/:])*)([\w-]+)?(?:\.([\w-]+)(?:\[(.+)\])?)?\.([\w-]+)(?:\[(.+)\])?$/,r=e.exec(t);if(!r)throw new Error("cannot parse trackName at all: "+t);var n={nodeName:r[2],objectName:r[3],objectIndex:r[4],propertyName:r[5],propertyIndex:r[6]};if(null===n.propertyName||0===n.propertyName.length)throw new Error("can not parse propertyName from trackName: "+t);return n},Pn.findNode=function(t,e){if(!e||""===e||"root"===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var r=function(t){for(var r=0;r<t.bones.length;r++){var n=t.bones[r];if(n.name===e)return n}return null}(t.skeleton);if(r)return r}if(t.children){var n=function(t){for(var r=0;r<t.length;r++){var i=t[r];if(i.name===e||i.uuid===e)return i;var a=n(i.children);if(a)return a}return null},i=n(t.children);if(i)return i}return null},Un.prototype={constructor:Un,isAnimationObjectGroup:!0,add:function(t){for(var e=this._objects,r=e.length,n=this.nCachedObjects_,i=this._indicesByUUID,a=this._paths,o=this._parsedPaths,s=this._bindings,u=s.length,l=0,c=arguments.length;l!==c;++l){var h=arguments[l],f=h.uuid,d=i[f],p=void 0;if(void 0===d){d=r++,i[f]=d,e.push(h);for(var m=0,g=u;m!==g;++m)s[m].push(new Pn(h,a[m],o[m]))}else if(d<n){p=e[d];var v=--n,y=e[v];i[y.uuid]=d,e[d]=y,i[f]=v,e[v]=h;for(var m=0,g=u;m!==g;++m){var M=s[m],w=M[v],x=M[d];M[d]=w,void 0===x&&(x=new Pn(h,a[m],o[m])),M[v]=x}}else e[d]!==p&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")}this.nCachedObjects_=n},remove:function(t){for(var e=this._objects,r=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,a=i.length,o=0,s=arguments.length;o!==s;++o){var u=arguments[o],l=u.uuid,c=n[l];if(void 0!==c&&c>=r){var h=r++,f=e[h];n[f.uuid]=c,e[c]=f,n[l]=h,e[h]=u;for(var d=0,p=a;d!==p;++d){var m=i[d],g=m[h],v=m[c];m[c]=g,m[h]=v}}}this.nCachedObjects_=r},uncache:function(t){for(var e=this._objects,r=e.length,n=this.nCachedObjects_,i=this._indicesByUUID,a=this._bindings,o=a.length,s=0,u=arguments.length;s!==u;++s){var l=arguments[s],c=l.uuid,h=i[c];if(void 0!==h)if(delete i[c],h<n){var f=--n,d=e[f],p=--r,m=e[p];i[d.uuid]=h,e[h]=d,i[m.uuid]=f,e[f]=m,e.pop();for(var g=0,v=o;g!==v;++g){var y=a[g],M=y[f],w=y[p];y[h]=M,y[f]=w,y.pop()}}else{var p=--r,m=e[p];i[m.uuid]=h,e[h]=m,e.pop();for(var g=0,v=o;g!==v;++g){var y=a[g];y[h]=y[p],y.pop()}}}this.nCachedObjects_=n},subscribe_:function(t,e){var r=this._bindingsIndicesByPath,n=r[t],i=this._bindings;if(void 0!==n)return i[n];var a=this._paths,o=this._parsedPaths,s=this._objects,u=s.length,l=this.nCachedObjects_,c=new Array(u);n=i.length,r[t]=n,a.push(t),o.push(e),i.push(c);for(var h=l,f=s.length;h!==f;++h){var d=s[h];c[h]=new Pn(d,t,e)}return c},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,r=e[t];if(void 0!==r){var n=this._paths,i=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];e[t[o]]=r,a[r]=s,a.pop(),i[r]=i[o],i.pop(),n[r]=n[o],n.pop()}}},Bn.prototype={constructor:Bn,play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,r){if(t.fadeOut(e),this.fadeIn(e),r){var n=this._clip.duration,i=t._clip.duration,a=i/n,o=n/i;t.warp(1,a,e),this.warp(o,1,e)}return this},crossFadeTo:function(t,e,r){return t.crossFadeFrom(this,e,r)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,r){var n=this._mixer,i=n.time,a=this._timeScaleInterpolant,o=this.timeScale;null===a&&(a=n._lendControlInterpolant(),this._timeScaleInterpolant=a);var s=a.parameterPositions,u=a.sampleValues;return s[0]=i,s[1]=i+r,u[0]=t/o,u[1]=e/o,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,r,n){var i=this._startTime;if(null!==i){var a=(t-i)*r;if(a<0||0===r)return;this._startTime=null,e=r*a}e*=this._updateTimeScale(t);var o=this._updateTime(e),s=this._updateWeight(t);if(s>0)for(var u=this._interpolants,l=this._propertyBindings,c=0,h=u.length;c!==h;++c)u[c].evaluate(o),l[c].accumulate(n,s)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var r=this._weightInterpolant;if(null!==r){var n=r.evaluate(t)[0];e*=n,t>r.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=e,e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var r=this._timeScaleInterpolant;if(null!==r){e*=r.evaluate(t)[0],t>r.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e},_updateTime:function(t){var e=this.time+t;if(0===t)return e;var r=this._clip.duration,n=this.loop,i=this._loopCount;if(2200===n){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(e>=r)e=r;else{if(!(e<0))break t;e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{var a=2202===n;if(-1===i&&(t>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),e>=r||e<0){var o=Math.floor(e/r);e-=r*o,i+=Math.abs(o);var s=this.repetitions-i;if(s<0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=t>0?r:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(0===s){var u=t<0;this._setEndings(u,!u,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}if(a&&1==(1&i))return this.time=e,r-e}return this.time=e,e},_setEndings:function(t,e,r){var n=this._interpolantSettings;r?(n.endingStart=2401,n.endingEnd=2401):(n.endingStart=t?this.zeroSlopeAtStart?2401:Yo:2402,n.endingEnd=e?this.zeroSlopeAtEnd?2401:Yo:2402)},_scheduleFading:function(t,e,r){var n=this._mixer,i=n.time,a=this._weightInterpolant;null===a&&(a=n._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=i,s[0]=e,o[1]=i+t,s[1]=r,this}},Vn.prototype={constructor:Vn,clipAction:function(t,e){var r=e||this._root,n=r.uuid,i="string"==typeof t?$r.findByName(r,t):t,a=null!==i?i.uuid:t,o=this._actionsByClip[a],s=null;if(void 0!==o){var u=o.actionByRoot[n];if(void 0!==u)return u;s=o.knownActions[0],null===i&&(i=s._clip)}if(null===i)return null;var l=new Bn(this,i,e);return this._bindAction(l,s),this._addInactiveAction(l,a,n),l},existingAction:function(t,e){var r=e||this._root,n=r.uuid,i="string"==typeof t?$r.findByName(r,t):t,a=i?i.uuid:t,o=this._actionsByClip[a];return void 0!==o?o.actionByRoot[n]||null:null},stopAllAction:function(){var t=this._actions,e=this._nActiveActions,r=this._bindings,n=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==e;++i)t[i].reset();for(var i=0;i!==n;++i)r[i].useCount=0;return this},update:function(t){t*=this.timeScale;for(var e=this._actions,r=this._nActiveActions,n=this.time+=t,i=Math.sign(t),a=this._accuIndex^=1,o=0;o!==r;++o){var s=e[o];s.enabled&&s._update(n,t,i,a)}for(var u=this._bindings,l=this._nActiveBindings,o=0;o!==l;++o)u[o].apply(a);return this},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,r=t.uuid,n=this._actionsByClip,i=n[r];if(void 0!==i){for(var a=i.knownActions,o=0,s=a.length;o!==s;++o){var u=a[o];this._deactivateAction(u);var l=u._cacheIndex,c=e[e.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,c._cacheIndex=l,e[l]=c,e.pop(),this._removeInactiveBindingsForAction(u)}delete n[r]}},uncacheRoot:function(t){var e=t.uuid,r=this._actionsByClip;for(var n in r){var i=r[n].actionByRoot,a=i[e];void 0!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}var o=this._bindingsByRootAndName,s=o[e];if(void 0!==s)for(var u in s){var l=s[u];l.restoreOriginalState(),this._removeInactiveBinding(l)}},uncacheAction:function(t,e){var r=this.existingAction(t,e);null!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}},Object.assign(Vn.prototype,{_bindAction:function(t,e){var r=t._localRoot||this._root,n=t._clip.tracks,i=n.length,a=t._propertyBindings,o=t._interpolants,s=r.uuid,u=this._bindingsByRootAndName,l=u[s];void 0===l&&(l={},u[s]=l);for(var c=0;c!==i;++c){var h=n[c],f=h.name,d=l[f];if(void 0!==d)a[c]=d;else{if(void 0!==(d=a[c])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,f));continue}var p=e&&e._propertyBindings[c].binding.parsedPath;d=new jn(Pn.create(r,f,p),h.ValueTypeName,h.getValueSize()),++d.referenceCount,this._addInactiveBinding(d,s,f),a[c]=d}o[c].resultBuffer=d.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,r=t._clip.uuid,n=this._actionsByClip[r];this._bindAction(t,n&&n.knownActions[0]),this._addInactiveAction(t,r,e)}for(var i=t._propertyBindings,a=0,o=i.length;a!==o;++a){var s=i[a];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,r=0,n=e.length;r!==n;++r){var i=e[r];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,r){var n=this._actions,i=this._actionsByClip,a=i[e];if(void 0===a)a={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,i[e]=a;else{var o=a.knownActions;t._byClipCacheIndex=o.length,o.push(t)}t._cacheIndex=n.length,n.push(t),a.actionByRoot[r]=t},_removeInactiveAction:function(t){var e=this._actions,r=e[e.length-1],n=t._cacheIndex;r._cacheIndex=n,e[n]=r,e.pop(),t._cacheIndex=null;var i=t._clip.uuid,a=this._actionsByClip,o=a[i],s=o.knownActions,u=s[s.length-1],l=t._byClipCacheIndex;u._byClipCacheIndex=l,s[l]=u,s.pop(),t._byClipCacheIndex=null,delete o.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete a[i],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,r=0,n=e.length;r!==n;++r){var i=e[r];0==--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(t){var e=this._actions,r=t._cacheIndex,n=this._nActiveActions++,i=e[n];t._cacheIndex=n,e[n]=t,i._cacheIndex=r,e[r]=i},_takeBackAction:function(t){var e=this._actions,r=t._cacheIndex,n=--this._nActiveActions,i=e[n];t._cacheIndex=n,e[n]=t,i._cacheIndex=r,e[r]=i},_addInactiveBinding:function(t,e,r){var n=this._bindingsByRootAndName,i=n[e],a=this._bindings;void 0===i&&(i={},n[e]=i),i[r]=t,t._cacheIndex=a.length,a.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,r=t.binding,n=r.rootNode.uuid,i=r.path,a=this._bindingsByRootAndName,o=a[n],s=e[e.length-1],u=t._cacheIndex;s._cacheIndex=u,e[u]=s,e.pop(),delete o[i];t:{for(var l in o)break t;delete a[n]}},_lendBinding:function(t){var e=this._bindings,r=t._cacheIndex,n=this._nActiveBindings++,i=e[n];t._cacheIndex=n,e[n]=t,i._cacheIndex=r,e[r]=i},_takeBackBinding:function(t){var e=this._bindings,r=t._cacheIndex,n=--this._nActiveBindings,i=e[n];t._cacheIndex=n,e[n]=t,i._cacheIndex=r,e[r]=i},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,r=t[e];return void 0===r&&(r=new kr(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),r.__cacheIndex=e,t[e]=r),r},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,r=t.__cacheIndex,n=--this._nActiveControlInterpolants,i=e[n];t.__cacheIndex=n,e[n]=t,i.__cacheIndex=r,e[r]=i},_controlInterpolantsResultBuffer:new Float32Array(1)}),Object.assign(Vn.prototype,e.prototype),Fn.prototype.clone=function(){return new Fn(void 0===this.value.clone?this.value:this.value.clone())},kn.prototype=Object.create(_t.prototype),kn.prototype.constructor=kn,kn.prototype.isInstancedBufferGeometry=!0,kn.prototype.addGroup=function(t,e,r){this.groups.push({start:t,count:e,materialIndex:r})},kn.prototype.copy=function(t){var e=t.index;null!==e&&this.setIndex(e.clone());var r=t.attributes;for(var n in r){var i=r[n];this.addAttribute(n,i.clone())}for(var a=t.groups,o=0,s=a.length;o<s;o++){var u=a[o];this.addGroup(u.start,u.count,u.materialIndex)}return this},Gn.prototype={constructor:Gn,isInterleavedBufferAttribute:!0,get count(){return this.data.count},get array(){return this.data.array},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=r,this},setXYZ:function(t,e,r,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=r,this.data.array[t+2]=n,this},setXYZW:function(t,e,r,n,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=r,this.data.array[t+2]=n,this.data.array[t+3]=i,this}},Yn.prototype={constructor:Yn,isInterleavedBuffer:!0,set needsUpdate(t){!0===t&&this.version++},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==t?t.length/this.stride:0,this.array=t},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,e,r){t*=this.stride,r*=e.stride;for(var n=0,i=this.stride;n<i;n++)this.array[t+n]=e.array[r+n];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}},Hn.prototype=Object.create(Yn.prototype),Hn.prototype.constructor=Hn,Hn.prototype.isInstancedInterleavedBuffer=!0,Hn.prototype.copy=function(t){return Yn.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},Qn.prototype=Object.create(dt.prototype),Qn.prototype.constructor=Qn,Qn.prototype.isInstancedBufferAttribute=!0,Qn.prototype.copy=function(t){return dt.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},Wn.prototype={constructor:Wn,linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize()):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e){var r=[];return qn(t,this,r,e),r.sort(Xn),r},intersectObjects:function(t,e){var r=[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var n=0,i=t.length;n<i;n++)qn(t[n],this,r,e);return r.sort(Xn),r}},Zn.prototype={constructor:Zn,start:function(){this.startTime=(performance||Date).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running&&this.start(),this.running){var e=(performance||Date).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}},Kn.prototype={constructor:Kn,set:function(t,e,r){return this.radius=t,this.phi=e,this.theta=r,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(t){return this.radius=t.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t.x,t.z),this.phi=Math.acos(ns.clamp(t.y/this.radius,-1,1))),this}},Jn.prototype={constructor:Jn,set:function(t,e,r){return this.radius=t,this.theta=e,this.y=r,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.radius=Math.sqrt(t.x*t.x+t.z*t.z),this.theta=Math.atan2(t.x,t.z),this.y=t.y,this}},$n.prototype=Object.create(At.prototype),$n.prototype.constructor=$n,$n.prototype.createAnimation=function(t,e,r,n){var i={start:e,end:r,length:r-e+1,fps:n,duration:(r-e)/n,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[t]=i,this.animationsList.push(i)},$n.prototype.autoCreateAnimations=function(t){for(var e,r=/([a-z]+)_?(\d+)/i,n={},i=this.geometry,a=0,o=i.morphTargets.length;a<o;a++){var s=i.morphTargets[a],u=s.name.match(r);if(u&&u.length>1){var l=u[1];n[l]||(n[l]={start:1/0,end:-1/0});var c=n[l];a<c.start&&(c.start=a),a>c.end&&(c.end=a),e||(e=l)}}for(var l in n){var c=n[l];this.createAnimation(l,c.start,c.end,t)}this.firstAnimation=e},$n.prototype.setAnimationDirectionForward=function(t){var e=this.animationsMap[t];e&&(e.direction=1,e.directionBackwards=!1)},$n.prototype.setAnimationDirectionBackward=function(t){var e=this.animationsMap[t];e&&(e.direction=-1,e.directionBackwards=!0)},$n.prototype.setAnimationFPS=function(t,e){var r=this.animationsMap[t];r&&(r.fps=e,r.duration=(r.end-r.start)/r.fps)},$n.prototype.setAnimationDuration=function(t,e){var r=this.animationsMap[t];r&&(r.duration=e,r.fps=(r.end-r.start)/r.duration)},$n.prototype.setAnimationWeight=function(t,e){var r=this.animationsMap[t];r&&(r.weight=e)},$n.prototype.setAnimationTime=function(t,e){var r=this.animationsMap[t];r&&(r.time=e)},$n.prototype.getAnimationTime=function(t){var e=0,r=this.animationsMap[t];return r&&(e=r.time),e},$n.prototype.getAnimationDuration=function(t){var e=-1,r=this.animationsMap[t];return r&&(e=r.duration),e},$n.prototype.playAnimation=function(t){var e=this.animationsMap[t];e?(e.time=0,e.active=!0):console.warn("THREE.MorphBlendMesh: animation["+t+"] undefined in .playAnimation()")},$n.prototype.stopAnimation=function(t){var e=this.animationsMap[t];e&&(e.active=!1)},$n.prototype.update=function(t){for(var e=0,r=this.animationsList.length;e<r;e++){var n=this.animationsList[e];if(n.active){var i=n.duration/n.length;n.time+=n.direction*t,n.mirroredLoop?(n.time>n.duration||n.time<0)&&(n.direction*=-1,n.time>n.duration&&(n.time=n.duration,n.directionBackwards=!0),n.time<0&&(n.time=0,n.directionBackwards=!1)):(n.time=n.time%n.duration,n.time<0&&(n.time+=n.duration));var a=n.start+ns.clamp(Math.floor(n.time/i),0,n.length-1),o=n.weight;a!==n.currentFrame&&(this.morphTargetInfluences[n.lastFrame]=0,this.morphTargetInfluences[n.currentFrame]=1*o,this.morphTargetInfluences[a]=0,n.lastFrame=n.currentFrame,n.currentFrame=a);var s=n.time%i/i;n.directionBackwards&&(s=1-s),n.currentFrame!==n.lastFrame?(this.morphTargetInfluences[n.currentFrame]=s*o,this.morphTargetInfluences[n.lastFrame]=(1-s)*o):this.morphTargetInfluences[n.currentFrame]=o}}},ti.prototype=Object.create(ut.prototype),ti.prototype.constructor=ti,ti.prototype.isImmediateRenderObject=!0,ei.prototype=Object.create(xe.prototype),ei.prototype.constructor=ei,ei.prototype.update=function(){var t=new u,e=new u,r=new et;return function(){var n=["a","b","c"];this.object.updateMatrixWorld(!0),r.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,a=this.geometry.attributes.position,o=this.object.geometry;if(o&&o.isGeometry)for(var s=o.vertices,u=o.faces,l=0,c=0,h=u.length;c<h;c++)for(var f=u[c],d=0,p=f.vertexNormals.length;d<p;d++){var m=s[f[n[d]]],g=f.vertexNormals[d];t.copy(m).applyMatrix4(i),e.copy(g).applyMatrix3(r).normalize().multiplyScalar(this.size).add(t),a.setXYZ(l,t.x,t.y,t.z),l+=1,a.setXYZ(l,e.x,e.y,e.z),l+=1}else if(o&&o.isBufferGeometry)for(var v=o.attributes.position,y=o.attributes.normal,l=0,d=0,p=v.count;d<p;d++)t.set(v.getX(d),v.getY(d),v.getZ(d)).applyMatrix4(i),e.set(y.getX(d),y.getY(d),y.getZ(d)),e.applyMatrix3(r).normalize().multiplyScalar(this.size).add(t),a.setXYZ(l,t.x,t.y,t.z),l+=1,a.setXYZ(l,e.x,e.y,e.z),l+=1;return a.needsUpdate=!0,this}}(),ri.prototype=Object.create(ut.prototype),ri.prototype.constructor=ri,ri.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},ri.prototype.update=function(){var t=new u,e=new u;return function(){var r=this.light.distance?this.light.distance:1e3,n=r*Math.tan(this.light.angle);this.cone.scale.set(n,n,r),t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(e.sub(t)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),ni.prototype=Object.create(xe.prototype),ni.prototype.constructor=ni,ni.prototype.getBoneList=function(t){var e=[];t&&t.isBone&&e.push(t);for(var r=0;r<t.children.length;r++)e.push.apply(e,this.getBoneList(t.children[r]));return e},ni.prototype.update=function(){var t=new u,e=new l,r=new l;return function(){var n=this.geometry,i=n.getAttribute("position");r.getInverse(this.root.matrixWorld);for(var a=0,o=0;a<this.bones.length;a++){var s=this.bones[a];s.parent&&s.parent.isBone&&(e.multiplyMatrices(r,s.matrixWorld),t.setFromMatrixPosition(e),i.setXYZ(o,t.x,t.y,t.z),e.multiplyMatrices(r,s.parent.matrixWorld),t.setFromMatrixPosition(e),i.setXYZ(o+1,t.x,t.y,t.z),o+=2)}n.getAttribute("position").needsUpdate=!0}}(),ii.prototype=Object.create(At.prototype),ii.prototype.constructor=ii,ii.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},ii.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},ai.prototype=Object.create(ut.prototype),ai.prototype.constructor=ai,ai.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose(),this.children[1].geometry.dispose(),this.children[1].material.dispose()},ai.prototype.update=function(){var t=new u,e=new u;return function(){var r=this.children[0],n=this.children[1];if(this.light.target){t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld);var i=e.clone().sub(t);r.lookAt(i),n.lookAt(i)}r.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),n.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var a=.5*this.light.width,o=.5*this.light.height,s=r.geometry.getAttribute("position"),u=s.array;u[0]=a,u[1]=-o,u[2]=0,u[3]=a,u[4]=o,u[5]=0,u[6]=-a,u[7]=o,u[8]=0,u[9]=-a,u[10]=o,u[11]=0,u[12]=-a,u[13]=-o,u[14]=0,u[15]=a,u[16]=-o,u[17]=0,s.needsUpdate=!0}}(),oi.prototype=Object.create(ut.prototype),oi.prototype.constructor=oi,oi.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},oi.prototype.update=function(){var t=new u,e=new H,r=new H;return function(){var n=this.children[0],i=n.geometry.getAttribute("color");e.copy(this.light.color).multiplyScalar(this.light.intensity),r.copy(this.light.groundColor).multiplyScalar(this.light.intensity);for(var a=0,o=i.count;a<o;a++){var s=a<o/2?e:r;i.setXYZ(a,s.r,s.g,s.b)}n.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate()),i.needsUpdate=!0}}(),si.prototype=Object.create(xe.prototype),si.prototype.constructor=si,ui.prototype=Object.create(xe.prototype),ui.prototype.constructor=ui,li.prototype=Object.create(xe.prototype),li.prototype.constructor=li,li.prototype.update=function(){var t=new u,e=new u,r=new et;return function(){this.object.updateMatrixWorld(!0),r.getNormalMatrix(this.object.matrixWorld);for(var n=this.object.matrixWorld,i=this.geometry.attributes.position,a=this.object.geometry,o=a.vertices,s=a.faces,u=0,l=0,c=s.length;l<c;l++){var h=s[l],f=h.normal;t.copy(o[h.a]).add(o[h.b]).add(o[h.c]).divideScalar(3).applyMatrix4(n),e.copy(f).applyMatrix3(r).normalize().multiplyScalar(this.size).add(t),i.setXYZ(u,t.x,t.y,t.z),u+=1,i.setXYZ(u,e.x,e.y,e.z),u+=1}return i.needsUpdate=!0,this}}(),ci.prototype=Object.create(ut.prototype),ci.prototype.constructor=ci,ci.prototype.isDirectionalLightHeper=!0,ci.prototype.dispose=function(){var t=this.children[0],e=this.children[1];t.geometry.dispose(),t.material.dispose(),e.geometry.dispose(),e.material.dispose()},ci.prototype.update=function(){var t=new u,e=new u,r=new u;return function(){t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),r.subVectors(e,t);var n=this.children[0],i=this.children[1];n.lookAt(r),n.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),i.lookAt(r),i.scale.z=r.length()}}(),hi.prototype=Object.create(xe.prototype),hi.prototype.constructor=hi,hi.prototype.isCameraHelper=!0,hi.prototype.update=function(){function t(t,a,o,s){n.set(a,o,s).unproject(i);var u=r[t];if(void 0!==u)for(var l=e.getAttribute("position"),c=0,h=u.length;c<h;c++)l.setXYZ(u[c],n.x,n.y,n.z)}var e,r,n=new u,i=new Lt;return function(){e=this.geometry,r=this.pointMap;i.projectionMatrix.copy(this.camera.projectionMatrix),t("c",0,0,-1),t("t",0,0,1),t("n1",-1,-1,-1),t("n2",1,-1,-1),t("n3",-1,1,-1),t("n4",1,1,-1),t("f1",-1,-1,1),t("f2",1,-1,1),t("f3",-1,1,1),t("f4",1,1,1),t("u1",.7,1.1,-1),t("u2",-.7,1.1,-1),t("u3",0,2,-1),t("cf1",-1,0,1),t("cf2",1,0,1),t("cf3",0,-1,1),t("cf4",0,1,1),t("cn1",-1,0,-1),t("cn2",1,0,-1),t("cn3",0,-1,-1),t("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),fi.prototype=Object.create(xe.prototype),fi.prototype.constructor=fi,fi.prototype.update=function(){var t=new $;return function(e){if(e&&e.isBox3?t.copy(e):t.setFromObject(e),!t.isEmpty()){var r=t.min,n=t.max,i=this.geometry.attributes.position,a=i.array;a[0]=n.x,a[1]=n.y,a[2]=n.z,a[3]=r.x,a[4]=n.y,a[5]=n.z,a[6]=r.x,a[7]=r.y,a[8]=n.z,a[9]=n.x,a[10]=r.y,a[11]=n.z,a[12]=n.x,a[13]=n.y,a[14]=r.z,a[15]=r.x,a[16]=n.y,a[17]=r.z,a[18]=r.x,a[19]=r.y,a[20]=r.z,a[21]=n.x,a[22]=r.y,a[23]=r.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}();var Ls=new _t;Ls.addAttribute("position",new xt([0,0,0,0,1,0],3));var Cs=new or(0,.5,1,5,1);Cs.translate(0,-.5,0),di.prototype=Object.create(ut.prototype),di.prototype.constructor=di,di.prototype.setDirection=function(){var t,e=new u;return function(r){r.y>.99999?this.quaternion.set(0,0,0,1):r.y<-.99999?this.quaternion.set(1,0,0,0):(e.set(r.z,0,-r.x).normalize(),t=Math.acos(r.y),this.quaternion.setFromAxisAngle(e,t))}}(),di.prototype.setLength=function(t,e,r){void 0===e&&(e=.2*t),void 0===r&&(r=.2*e),this.line.scale.set(1,Math.max(0,t-e),1),this.line.updateMatrix(),this.cone.scale.set(r,e,r),this.cone.position.y=t,this.cone.updateMatrix()},di.prototype.setColor=function(t){this.line.material.color.copy(t),this.cone.material.color.copy(t)},pi.prototype=Object.create(xe.prototype),pi.prototype.constructor=pi;var Os=new u,Rs=new mi,zs=new mi,js=new mi;gi.prototype=Object.create(gn.prototype),gi.prototype.constructor=gi,gi.prototype.getPoint=function(t){var e=this.points,r=e.length;r<2&&console.log("duh, you need at least 2 points");var n=(r-(this.closed?0:1))*t,i=Math.floor(n),a=n-i;this.closed?i+=i>0?0:(Math.floor(Math.abs(i)/e.length)+1)*e.length:0===a&&i===r-1&&(i=r-2,a=1);var o,s,l,c;if(this.closed||i>0?o=e[(i-1)%r]:(Os.subVectors(e[0],e[1]).add(e[0]),o=Os),s=e[i%r],l=e[(i+1)%r],this.closed||i+2<r?c=e[(i+2)%r]:(Os.subVectors(e[r-1],e[r-2]).add(e[r-1]),c=Os),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var h="chordal"===this.type?.5:.25,f=Math.pow(o.distanceToSquared(s),h),d=Math.pow(s.distanceToSquared(l),h),p=Math.pow(l.distanceToSquared(c),h);d<1e-4&&(d=1),f<1e-4&&(f=d),p<1e-4&&(p=d),Rs.initNonuniformCatmullRom(o.x,s.x,l.x,c.x,f,d,p),zs.initNonuniformCatmullRom(o.y,s.y,l.y,c.y,f,d,p),js.initNonuniformCatmullRom(o.z,s.z,l.z,c.z,f,d,p)}else if("catmullrom"===this.type){var m=void 0!==this.tension?this.tension:.5;Rs.initCatmullRom(o.x,s.x,l.x,c.x,m),zs.initCatmullRom(o.y,s.y,l.y,c.y,m),js.initCatmullRom(o.z,s.z,l.z,c.z,m)}return new u(Rs.calc(a),zs.calc(a),js.calc(a))},vi.prototype=Object.create(gn.prototype),vi.prototype.constructor=vi,vi.prototype.getPoint=function(t){var e=this.v0,r=this.v1,n=this.v2,i=this.v3;return new u(mn(t,e.x,r.x,n.x,i.x),mn(t,e.y,r.y,n.y,i.y),mn(t,e.z,r.z,n.z,i.z))},yi.prototype=Object.create(gn.prototype),yi.prototype.constructor=yi,yi.prototype.getPoint=function(t){var e=this.v0,r=this.v1,n=this.v2;return new u(cn(t,e.x,r.x,n.x),cn(t,e.y,r.y,n.y),cn(t,e.z,r.z,n.z))},Mi.prototype=Object.create(gn.prototype),Mi.prototype.constructor=Mi,Mi.prototype.getPoint=function(t){if(1===t)return this.v2.clone();var e=new u;return e.subVectors(this.v2,this.v1),e.multiplyScalar(t),e.add(this.v1),e},wi.prototype=Object.create(Mn.prototype),wi.prototype.constructor=wi;var Ps={createMultiMaterialObject:function(t,e){for(var r=new Ee,n=0,i=e.length;n<i;n++)r.add(new At(t,e[n]));return r},detach:function(t,e,r){t.applyMatrix(e.matrixWorld),e.remove(t),r.add(t)},attach:function(t,e,r){var n=new l;n.getInverse(r.matrixWorld),t.applyMatrix(n),e.remove(t),r.add(t)}};gn.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(gn.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Vi.prototype=Object.create(gi.prototype),Fi.prototype=Object.create(gi.prototype),ki.prototype=Object.create(gi.prototype),Object.assign(ki.prototype,{initFromArray:function(t){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(t){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(t){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),si.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Object.assign(W.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign($.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),lt.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},ns.random16=function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},Object.assign(et.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(t){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(t)},applyToBuffer:function(t,e,r){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(t,e,r){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(l.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){var t;return function(){return void 0===t&&(t=new u),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),t.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(t){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(t)},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(t,e,r){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(t,e,r){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,r,n,i,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,n,r,i,a)}}),rt.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},s.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(at.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(En.prototype,{extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Xe(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ir(this,t)}}),Object.assign(r.prototype,{fromAttribute:function(t,e,r){return console.error("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,r)}}),Object.assign(u.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,r){return console.error("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,r)}}),Object.assign(i.prototype,{fromAttribute:function(t,e,r){return console.error("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,r)}}),St.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},Object.assign(ut.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)}}),Object.defineProperties(ut.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(me.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Ct.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(Lr.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(dt.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}}}),Object.assign(_t.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addDrawCall:function(t,e,r){void 0!==r&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(_t.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Fn.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(Z.prototype,{wrapAround:{get:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE."+this.type+": .wrapRGB has been removed."),new H}}}),Object.defineProperties(yr.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(K.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(le.prototype,{supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),Object.defineProperties(le.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=t}}}),Object.defineProperties(it.prototype,{cullFace:{get:function(){return this.renderReverseSided?ta:$i},set:function(t){var e=t!==$i;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+e+"."),this.renderReverseSided=e}}}),Object.defineProperties(a.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),On.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this;return(new Dn).load(t,function(t){e.setBuffer(t)}),this},zn.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};var Us={merge:function(t,e,r){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var n;e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),n=e.matrix,e=e.geometry),t.merge(e,n,r)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}},Bs={crossOrigin:void 0,loadTexture:function(t,e,r,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new Ir;i.setCrossOrigin(this.crossOrigin);var a=i.load(t,r,void 0,n);return e&&(a.mapping=e),a},loadTextureCube:function(t,e,r,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new Nr;i.setCrossOrigin(this.crossOrigin);var a=i.load(t,r,void 0,n);return e&&(a.mapping=e),a},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};r.InstanceScalarSize=2,u.InstanceScalarSize=3,i.InstanceScalarSize=4,H.InstanceScalarSize=3,s.InstanceScalarSize=4,et.InstanceScalarSize=9,l.InstanceScalarSize=16,t.WebGLRenderTargetCube=o,t.WebGLRenderTarget=a,t.WebGLRenderer=le,t.ShaderLib=ps,t.UniformsLib=ds,t.UniformsUtils=cs,t.ShaderChunk=hs,t.FogExp2=ce,t.Fog=he,t.Scene=ue,t.LensFlare=fe,t.Sprite=pe,t.LOD=me,t.SkinnedMesh=ye,t.Skeleton=ge,t.Bone=ve,t.Mesh=At,t.LineSegments=xe,t.Line=we,t.Points=Te,t.Group=Ee,t.VideoTexture=Se,t.DataTexture=Q,t.CompressedTexture=_e,t.CubeTexture=c,t.CanvasTexture=Ae,t.DepthTexture=De,t.Texture=n,t.CompressedTextureLoader=_r,t.DataTextureLoader=Ar,t.CubeTextureLoader=Nr,t.TextureLoader=Ir,t.ObjectLoader=an,t.MaterialLoader=tn,t.BufferGeometryLoader=en,t.DefaultLoadingManager=Ss,t.LoadingManager=Er,t.JSONLoader=nn,t.ImageLoader=Dr,t.FontLoader=An,t.FileLoader=Sr,t.Loader=rn,t.Cache=Es,t.AudioLoader=Dn,t.SpotLightShadow=Rr,t.SpotLight=zr,t.PointLight=jr,t.RectAreaLight=Nn,t.HemisphereLight=Cr,t.DirectionalLightShadow=Pr,t.DirectionalLight=Ur,t.AmbientLight=Br,t.LightShadow=Or,t.Light=Lr,t.StereoCamera=In,t.PerspectiveCamera=Ct,t.OrthographicCamera=Ot,t.CubeCamera=Ln,t.Camera=Lt,t.AudioListener=Cn,t.PositionalAudio=Rn,t.AudioContext=Is,t.AudioAnalyser=zn,t.Audio=On,t.VectorKeyframeTrack=Hr,t.StringKeyframeTrack=qr,t.QuaternionKeyframeTrack=Wr,t.NumberKeyframeTrack=Xr,t.ColorKeyframeTrack=Kr,t.BooleanKeyframeTrack=Zr,t.PropertyMixer=jn,t.PropertyBinding=Pn,t.KeyframeTrack=Jr,t.AnimationUtils=_s,t.AnimationObjectGroup=Un,t.AnimationMixer=Vn,t.AnimationClip=$r,t.Uniform=Fn,t.InstancedBufferGeometry=kn,t.BufferGeometry=_t,t.GeometryIdCount=Et,t.Geometry=St,t.InterleavedBufferAttribute=Gn,t.InstancedInterleavedBuffer=Hn,t.InterleavedBuffer=Yn,t.InstancedBufferAttribute=Qn,t.Face3=ht,t.Object3D=ut,t.Raycaster=Wn,t.Layers=st,t.EventDispatcher=e,t.Clock=Zn,t.QuaternionLinearInterpolant=Qr,t.LinearInterpolant=kr,t.DiscreteInterpolant=Gr,t.CubicInterpolant=Fr,t.Interpolant=Vr,t.Triangle=ct,t.Math=ns,t.Spherical=Kn,t.Cylindrical=Jn,t.Plane=rt,t.Frustum=nt,t.Sphere=tt,t.Ray=at,t.Matrix4=l,t.Matrix3=et,t.Box3=$,t.Box2=W,t.Line3=lt,t.Euler=ot,t.Vector4=i,t.Vector3=u,t.Vector2=r,t.Quaternion=s,t.Color=H,t.MorphBlendMesh=$n,t.ImmediateRenderObject=ti,t.VertexNormalsHelper=ei,t.SpotLightHelper=ri,t.SkeletonHelper=ni,t.PointLightHelper=ii,t.RectAreaLightHelper=ai,t.HemisphereLightHelper=oi,t.GridHelper=si,t.PolarGridHelper=ui,t.FaceNormalsHelper=li,t.DirectionalLightHelper=ci,t.CameraHelper=hi,t.BoxHelper=fi,t.ArrowHelper=di,t.AxisHelper=pi,t.CatmullRomCurve3=gi,t.CubicBezierCurve3=vi,t.QuadraticBezierCurve3=yi,t.LineCurve3=Mi,t.ArcCurve=wi,t.EllipseCurve=Mn,t.SplineCurve=wn,t.CubicBezierCurve=xn,t.QuadraticBezierCurve=bn,t.LineCurve=vn,t.Shape=En,t.Path=Tn,t.ShapePath=Sn,t.Font=_n,t.CurvePath=yn,t.Curve=gn,t.ShapeUtils=xs,t.SceneUtils=Ps,t.WireframeGeometry=Ne,t.ParametricGeometry=Le,t.ParametricBufferGeometry=Ie,t.TetrahedronGeometry=Re,t.TetrahedronBufferGeometry=Oe,t.OctahedronGeometry=je,t.OctahedronBufferGeometry=ze,t.IcosahedronGeometry=Ue,t.IcosahedronBufferGeometry=Pe,t.DodecahedronGeometry=Ve,t.DodecahedronBufferGeometry=Be,t.PolyhedronGeometry=Fe,t.PolyhedronBufferGeometry=Ce,t.TubeGeometry=Ge,t.TubeBufferGeometry=ke,t.TorusKnotGeometry=He,t.TorusKnotBufferGeometry=Ye,t.TorusGeometry=We,t.TorusBufferGeometry=Qe,t.TextGeometry=qe,t.SphereBufferGeometry=Ze,t.SphereGeometry=Ke,t.RingGeometry=$e,t.RingBufferGeometry=Je,t.PlaneBufferGeometry=Nt,t.PlaneGeometry=tr,t.LatheGeometry=rr,t.LatheBufferGeometry=er,t.ShapeGeometry=ir,t.ShapeBufferGeometry=nr,t.ExtrudeGeometry=Xe,t.EdgesGeometry=ar,t.ConeGeometry=ur,t.ConeBufferGeometry=lr,t.CylinderGeometry=sr,t.CylinderBufferGeometry=or,t.CircleBufferGeometry=cr,t.CircleGeometry=hr,t.BoxBufferGeometry=Dt,t.BoxGeometry=fr,t.ShadowMaterial=dr,t.SpriteMaterial=de,t.RawShaderMaterial=pr;t.ShaderMaterial=K,t.PointsMaterial=be,t.MultiMaterial=mr,t.MeshPhysicalMaterial=vr,t.MeshStandardMaterial=gr,t.MeshPhongMaterial=yr,t.MeshToonMaterial=Mr,t.MeshNormalMaterial=wr,t.MeshLambertMaterial=xr,t.MeshDepthMaterial=J,t.MeshBasicMaterial=ft,t.MeshCubeMaterial=br,t.LineDashedMaterial=Tr,t.LineBasicMaterial=Me,t.MaterialMap=It,t.Material=Z,t.Float64BufferAttribute=bt,t.Float32BufferAttribute=xt,t.Uint32BufferAttribute=wt,t.Int32BufferAttribute=Mt,t.Uint16BufferAttribute=yt,t.Int16BufferAttribute=vt,t.Uint8ClampedBufferAttribute=gt,t.Uint8BufferAttribute=mt,t.Int8BufferAttribute=pt,t.BufferAttribute=dt,t.REVISION=Zi,t.MOUSE=Ki,t.CullFaceNone=Ji,t.CullFaceBack=$i,t.CullFaceFront=ta,t.CullFaceFrontBack=3,t.FrontFaceDirectionCW=ea,t.FrontFaceDirectionCCW=1,t.BasicShadowMap=0,t.PCFShadowMap=ra,t.PCFSoftShadowMap=na,t.PCSSSoftShadowMap=ia,t.FrontSide=aa,t.BackSide=oa,t.DoubleSide=sa,t.FlatShading=ua,t.SmoothShading=la,t.NoColors=ca,t.FaceColors=ha,t.VertexColors=fa,t.NoBlending=da,t.NormalBlending=pa,t.AdditiveBlending=ma,t.SubtractiveBlending=ga,t.MultiplyBlending=va,t.CustomBlending=ya,t.AddEquation=Ma,t.SubtractEquation=wa,t.ReverseSubtractEquation=xa,t.MinEquation=ba,t.MaxEquation=Ta,t.ZeroFactor=Ea,t.OneFactor=Sa,t.SrcColorFactor=_a,t.OneMinusSrcColorFactor=Aa,t.SrcAlphaFactor=Da,t.OneMinusSrcAlphaFactor=Na,t.DstAlphaFactor=Ia,t.OneMinusDstAlphaFactor=La,t.DstColorFactor=Ca,t.OneMinusDstColorFactor=Oa,t.SrcAlphaSaturateFactor=Ra,t.NeverDepth=za,t.AlwaysDepth=ja,t.LessDepth=Pa,t.LessEqualDepth=Ua,t.EqualDepth=Ba,t.GreaterEqualDepth=Va,t.GreaterDepth=Fa,t.NotEqualDepth=ka,t.MultiplyOperation=Ga,t.MixOperation=Ya,t.AddOperation=Ha,t.NoToneMapping=Qa,t.LinearToneMapping=Wa,t.ReinhardToneMapping=Xa,t.Uncharted2ToneMapping=qa,t.CineonToneMapping=Za,t.UVMapping=300,t.CubeReflectionMapping=Ka,t.CubeRefractionMapping=Ja,t.EquirectangularReflectionMapping=$a,t.EquirectangularRefractionMapping=to,t.SphericalReflectionMapping=eo,t.CubeUVReflectionMapping=ro,t.CubeUVRefractionMapping=no,t.RepeatWrapping=io,t.ClampToEdgeWrapping=ao,t.MirroredRepeatWrapping=oo,t.NearestFilter=so,t.NearestMipMapNearestFilter=uo,t.NearestMipMapLinearFilter=lo,t.LinearFilter=co,t.LinearMipMapNearestFilter=ho,t.LinearMipMapLinearFilter=fo,t.UnsignedByteType=po,t.ByteType=mo,t.ShortType=go,t.UnsignedShortType=vo,t.IntType=yo,t.UnsignedIntType=Mo,t.FloatType=wo,t.HalfFloatType=xo,t.UnsignedShort4444Type=bo,t.UnsignedShort5551Type=To,t.UnsignedShort565Type=Eo,t.UnsignedInt248Type=So,t.AlphaFormat=_o,t.RGBFormat=Ao,t.RGBAFormat=Do,t.LuminanceFormat=No,t.LuminanceAlphaFormat=Io,t.RGBEFormat=Lo,t.DepthFormat=Co,t.DepthStencilFormat=Oo,t.RGB_S3TC_DXT1_Format=Ro,t.RGBA_S3TC_DXT1_Format=zo,t.RGBA_S3TC_DXT3_Format=jo,t.RGBA_S3TC_DXT5_Format=Po,t.RGB_PVRTC_4BPPV1_Format=Uo,t.RGB_PVRTC_2BPPV1_Format=Bo,t.RGBA_PVRTC_4BPPV1_Format=Vo,t.RGBA_PVRTC_2BPPV1_Format=Fo,t.RGB_ETC1_Format=ko,t.LoopOnce=2200,t.LoopRepeat=Go,t.LoopPingPong=2202,t.InterpolateDiscrete=2300,t.InterpolateLinear=2301,t.InterpolateSmooth=2302,t.ZeroCurvatureEnding=Yo,t.ZeroSlopeEnding=2401,t.WrapAroundEnding=2402,t.TrianglesDrawMode=Ho,t.TriangleStripDrawMode=Qo,t.TriangleFanDrawMode=Wo,t.LinearEncoding=Xo,t.sRGBEncoding=qo,t.GammaEncoding=Zo,t.RGBEEncoding=Ko,t.LogLuvEncoding=3003,t.RGBM7Encoding=Jo,t.RGBM16Encoding=$o,t.RGBDEncoding=ts,t.BasicDepthPacking=es,t.RGBADepthPacking=rs,t.CubeGeometry=fr,t.Face4=xi,t.LineStrip=0,t.LinePieces=1,t.MeshFaceMaterial=bi,t.PointCloud=Ti,t.Particle=Ei,t.ParticleSystem=Si,t.PointCloudMaterial=_i,t.ParticleBasicMaterial=Ai,t.ParticleSystemMaterial=Di,t.Vertex=Ni,t.DynamicBufferAttribute=Ii,t.Int8Attribute=Li,t.Uint8Attribute=Ci,t.Uint8ClampedAttribute=Oi,t.Int16Attribute=Ri,t.Uint16Attribute=zi,t.Int32Attribute=ji,t.Uint32Attribute=Pi,t.Float32Attribute=Ui,t.Float64Attribute=Bi,t.ClosedSplineCurve3=Vi,t.SplineCurve3=Fi,t.Spline=ki,t.BoundingBoxHelper=Gi,t.EdgesHelper=Yi,t.WireframeHelper=Hi,t.XHRLoader=Qi,t.BinaryTextureLoader=Wi,t.GeometryUtils=Us,t.ImageUtils=Bs,t.Projector=Xi,t.CanvasRenderer=qi,Object.defineProperty(t,"__esModule",{value:!0})})},function(t,e,r){"use strict";function n(t){var e=r.i(o.a)(t,{scene:!0,evalPlug:"Player"}),n=e&&e.autoRotateNode;if(!e||!e.autoRotate||!n)return!1;var i="+"===e.autoRotateDirection?360:-360,a=r.i(o.d)(t,{id:n,plug:"Transform",property:"rotation"}),u=r.i(o.a)(t,{id:n,plug:"Transform",property:"rotation"}),l=-1!==r.i(s.f)(t,"autoRotate");a&&u&&!l&&t.dispatch(r.i(s.a)({name:"autoRotate",autoplay:!0,iterations:1/0,easingDuration:3e3,tracks:[{path:a,start:0,duration:1e3*e.autoRotateSpeed,value:{x:u.x,y:u.y+i,z:u.z}}]}))}function i(t){t.dispatch(r.i(s.g)("autoRotate"))}function a(t){var e=void 0,r={start:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;e||(e=setTimeout(function(){n(t)},r))},stop:function(){i(t),clearTimeout(e),e=null},mousedown:function(){return r.stop()},mouseup:function(){return r.start()}};return{enabled:!0,tool:r}}e.a=a;var o=r(5),s=r(61)},function(t,e,r){"use strict";function n(t,e){var n=r.i(l.e)(t),i=e.position(t),o=i.position,s=i.normal,u=i.alpha;if(!o)return!1;var c=n.width*o.x,h=n.height*o.y,f=!(c<0||c>n.width-24||h<0||h>n.height-24)&&e.visible;return a()({},e.annotation,{id:e.id,alpha:u,normal:s,position:o,top:n.height-h,right:n.width-c,bottom:h,left:c,visible:f})}e.a=n;var i=r(84),a=r.n(i),o=r(31),s=r.n(o),u=r(24),l=(r.n(u),r(3)),c=r(104),h=(r.i(u.Map)({open:!1,pinned:!1}),"5px solid #333"),f="5px solid transparent",d={position:"absolute",display:"inline-block",borderTop:f,borderLeft:f,borderRight:f,borderBottom:f,height:0,width:0,top:"",bottom:"",right:"",left:""},p={tl:a()({},d,{borderRight:h,top:"12px",left:"-10px",marginTop:"-5px"}),bl:a()({},d,{borderRight:h,bottom:"8px",left:"-10px",marginTop:"-5px"}),tr:a()({},d,{borderLeft:h,top:"12px",right:"-10px",marginTop:"-5px"}),br:a()({},d,{borderLeft:h,bottom:"8px",right:"-10px",marginTop:"-5px"})},m={position:"absolute",textAlign:"left",left:"",top:"",bottom:"",right:"",transition:"opacity 0.3s ease-out",webkitTransition:"opacity 0.3s ease-out",fontFamily:"sans-serif",delayed:{opacity:1},remove:{opacity:0}},g={tl:a()({},m,{left:"30px",top:"0"}),bl:a()({},m,{left:"30px",bottom:"0"}),tr:a()({},m,{right:"30px",top:"0"}),br:a()({},m,{right:"30px",bottom:"0"})};e.b=function(t){r.i(l.e)(t);return function(e){function n(e){e.preventDefault(),t.dispatch(r.i(c.e)(o,{open:!w||!M,pinned:!w}))}function i(e){w||t.dispatch(r.i(c.e)(o,{open:!0}))}function a(e){w||t.dispatch(r.i(c.e)(o,{open:!1}))}var o=e.id,l=e.text,h=e.left,f=e.bottom,d=e.visible,m=e.position,v=(e.normal,e.alpha);if(void 0===m)return s()("span");var y=t.getIn(["annotations",o])||r.i(u.Map)({open:e.open,pinned:e.open}),M=y.get("open"),w=y.get("pinned"),x=m.y>.5?"t":"b",b=m.x<.6?"l":"r",T=[x,b].join(""),E=[s()("img",{style:{cursor:"pointer"},props:{width:24,height:24,src:"https://clara.io/img/annotation-"+(M?"open":"closed")+"-2.svg"}})];if(M){var S={fontSize:"12px",padding:"10px",color:"#fff",backgroundColor:"#000",borderRadius:"3px",opacity:"0.8",cursor:"pointer",lineHeight:1.3,width:l.length>10?l.length>50?"200px":"150px":"100px"};E.push(s()("div",{style:g[T]},["l"===b&&s()("div",{key:T,style:p[T]}),s()("div",{key:"text",style:S,on:{click:n}},l),"r"===b&&s()("div",{key:T,style:p[T]})].filter(function(t){return!!t})))}return s()("div",{key:o,style:{visibility:d?"visible":"hidden",opacity:v,position:"absolute",left:Math.round(h)+"px",bottom:Math.round(f)+"px"},on:{click:n,mouseover:i,mouseout:a}},E)}}},function(t,e,r){"use strict";function n(t){function e(){var e=t.getTranslator();e&&e.resize()}return function(t){return window.addEventListener("resize",e)}}function i(t){t.preventDefault()}function a(t){function e(t){u&&m.forEach(function(e){return u(e,t.elm)}),d&&d(t.elm)}var a=t.getTranslator(),o=r.i(h.l)(t);a&&a.update();var u=r.i(f.c)(t),d=r.i(f.d)(t),p=a?a.getAnnotations():{},m=s()(p).map(function(e){return r.i(c.a)(t,p[e])}).filter(function(t){return!!t}),g=u||d?[l()("div.annotations",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,pointerEvents:"none"},hook:{insert:e,update:e}})]:m.map(r.i(c.b)(t));return l()("div",{style:{position:"relative",display:o?"block":"none"},on:{contextmenu:i},hook:{update:function(t){return a&&a.attach(t.elm)},insert:n(t)}},g)}e.a=a;var o=r(6),s=r.n(o),u=r(31),l=r.n(u),c=r(266),h=r(17),f=r(104);r(8)},function(t,e,r){"use strict";function n(t){return a()("div",{key:"error",style:o.a.absoluteMaxCentered},[a()("div",{style:{flex:"0 0 100%"}},r.i(s.o)(t).map(function(t){return a()("h2",t)}).toArray())])}e.a=n;var i=r(31),a=r.n(i),o=r(132),s=r(17)},function(t,e,r){"use strict";function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=r.i(c.z)(t),i=d?"":"\n"+e+" ul.tools li:not(.active):hover svg path {\n  fill: "+n+";\n}\n";return u()("style",{props:{innerHTML:i}})}function i(t){function e(e){return function(n){t.dispatch(r.i(h.o)(e));var i=r.i(c.B)(t);i&&i.focus()}}var i=r.i(h.i)(t,"playerTools"),a=r.i(c.A)(t),s=[n(t,"div.claraplayer"),u()("ul.tools",{style:{position:"relative",bottom:0,left:0,listStyleType:"none",padding:"0 5px",margin:0,zIndex:r.i(c.j)(t)?2147483647:"inherit"}},[l.glowFilter()].concat(o()(i).map(function(r){var n=i[r],o=n.isActive?n.isActive(t):n.active,s=n.active&&n.activeLabel?n.activeLabel:n.label,c=l[n.options.icon||r],h=[];return"function"==typeof c?h.push(c({width:34,height:34,title:s},{active:o,activeColor:a})):h.push(u()("span",{style:{color:o?a:"#fff",textShadow:"1px 1px 1px #333",position:"relative",top:"10px"}},s)),u()("li"+(o?".active":""),{attrs:{title:s},on:{click:e(r)},style:{cursor:"pointer",float:"left",borderRadius:"5px",padding:"5px",boxSizing:"border-box",pointerEvents:"auto"}},h)})))],d=r.i(f.a)(t);return d&&s.push(d),u()("span",{style:{position:"absolute",left:"5px",right:"5px",bottom:"5px",display:"flex",flexWrap:"nowrap",height:"54px",pointerEvents:"none"}},s)}e.a=i;var a=r(6),o=r.n(a),s=r(31),u=r.n(s),l=r(131),c=r(3),h=r(43),f=r(273),d=!!("ontouchstart"in window)||window.navigator.msMaxTouchPoints>0},function(t,e,r){"use strict";function n(t,e,r,n){function i(t){t.stopPropagation()}var o={width:"0",height:"100%",position:"absolute",left:e+"%",top:"0",pointerEvents:"auto",cursor:"pointer"},s={boxSizing:"border-box",position:"absolute",zIndex:"1070",display:"block",visibility:"visible",fontSize:"12px",fontWeight:"normal",lineHeight:"1.4",top:"-32px",left:"-25px",width:"50px",height:"22px",marginTop:"-3px",padding:"5px 0",opacity:"1"};n||(s.opacity="0",s.transition="opacity 0.15s linear");var u={maxWidth:"200px",padding:"3px 8px",color:"#ffffff",textAlign:"center",textDecoration:"none",backgroundColor:"#000000",borderRadius:"4px",boxShadow:"#000 0 0 5px",margin:"0 auto",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none"},l={boxSizing:"border-box",position:"absolute",width:"0",height:"0",bottom:"-10px",left:"50%",marginLeft:"-5px",borderWidth:"5px 5px 0",borderTopColor:"#000000",borderRightColor:"transparent",borderBottomColor:"transparent",borderLeftColor:"transparent",borderStyle:"solid"};return a()("div.marker",{style:o,on:{mousedown:i,touchstart:i}},[a()("div.tooltip",{style:s},[a()("div.tooltip-arrow",{style:l}),a()("div.tooltip-inner",{style:u},(r*e/1e5).toFixed(1))])])}e.a=n;var i=r(31),a=r.n(i)},function(t,e,r){"use strict";function n(){return o?c.a.resolve(o):new c.a(function(t){r.e(0).then(function(e){o=r(608).default,t(o)}.bind(null,r)).catch(r.oe)})}function i(t,e){var i=e.isFlex,o=e.isRelative,s=e.hasWebGL,l=r.i(O.l)(t),c=r.i(R.e)(t),h=r.i(R.b)(t),f=t.getIn(["sceneIO","id"]),d=l||!f||!r.i(C.x)(t),m=[p()("style",{props:{innerHTML:"\n  div.claraplayer canvas {\n    box-sizing: content-box;\n    -webkit-box-sizing: content-box;\n  }\n  div.claraplayer canvas:focus {\n    outline: none;\n  }\n"}})],g=t.getIn(["player","fullscreenBackgroundColor"]),v=u()({},_.a.player,{backgroundImage:d?"":"url(https://clara.io/api/scenes/"+f+"/v2thumbnail)",backgroundRepeat:"no-repeat",backgroundSize:"auto 100%",backgroundPosition:"center",position:i||o?"absolute":"relative",boxSizing:"border-box",backgroundColor:r.i(C.o)(t)?g:"transparent",overflow:"hidden"});return r.i(O.m)(t)?m.push(r.i(A.a)(t)):(m.push(r.i(S.a)(t,"player")),l?(m.push(r.i(D.a)(t)),r.i(C.a)(t)?m.push(r.i(I.a)(t)):m.push(""),m.push(r.i(N.a)(t)),h&&(c?n().then(function(e){return e(t,c,h,!0)}):m.push(p()("div.configurator",{hook:{update:function(e){n().then(function(r){return r(t,e.elm,h,!1)})},insert:function(e){n().then(function(r){return r(t,e.elm,h,!1)})}}},"")))):s&&m.push(r.i(L.a)(t))),p()("div.claraplayer",{style:v,hook:{insert:a(t)}},m)}function a(t){return function(){[["webkitfullscreenchange","webkitIsFullScreen"],["mozfullscreenchange","mozFullScreen"],["MSFullscreenChange","msFullscreenElement"]].forEach(function(e){document.addEventListener(e[0],function(){t.dispatch(r.i(C.p)(!!document[e[1]]))})})}}e.a=i;var o,s=r(2),u=r.n(s),l=r(37),c=r.n(l),h=r(252),f=r.n(h),d=r(31),p=r.n(d),m=r(248),g=r.n(m),v=r(250),y=r.n(v),M=r(247),w=r.n(M),x=r(251),b=r.n(x),T=r(249),E=r.n(T),S=r(267),_=r(132),A=r(268),D=r(269),N=r(274),I=r(275),L=r(272),C=r(3),O=r(17),R=r(85);f.a.init([g.a,y.a,w.a,b.a,E.a])},function(t,e,r){"use strict";function n(t,e){var r=g*(1-e);return c()("div",{style:u()({},h.a.absoluteMaxCentered,{backgroundColor:"transparent",boxSizing:"border-box"})},[c()("div",{style:m},[c()("svg",{attrs:M},[c()("circle",{attrs:v}),c()("circle",{props:{id:"bar"},attrs:u()({},y,{"stroke-dashoffset":r})})])])])}function i(t,e){return c()("div",{style:{position:"absolute",left:0,right:0,bottom:0,height:"4px",backgroundColor:"transparent",boxSizing:"border-box"}},[c()("div",{style:{width:100*e+"%",backgroundImage:"linear-gradient(to bottom, #0b1a24 0%, #88b9d9 100%)",height:"100%"}},[])])}function a(t){return c()("div","")}function o(t){var e=r.i(f.n)(t),i=r.i(d.y)(t);return p(t,e),(w[i]||n)(t,e)}e.a=o;var s=r(84),u=r.n(s),l=r(31),c=r.n(l),h=r(132),f=r(17),d=r(3),p=function(){var t,e;return"undefined"==typeof performace?function(){}:function(r,n){t&&e||(t||(t=(new Date).getTime()-performance.timing.navigationStart),n<1||(e=(new Date).getTime()-performance.timing.navigationStart,console.log("Page loaded in "+t+"ms and rendered in "+e+"ms")))}}(),m={flex:"0 0 25%"},g=85*Math.PI*2,v={r:85,cx:100,cy:100,fill:"transparent","stroke-dasharray":g,"stroke-dashoffset":0,"stroke-width":"1em",stroke:"#eee"},y={r:85,cx:100,cy:100,fill:"transparent",stroke:"#646766",transition:"stroke-dashoffset 1s linear","stroke-width":"1em","stroke-dashoffset":g,"stroke-dasharray":g},M={height:"100%",width:"100%",viewport:"0 0 100 100",viewBox:"0 0 200 200"},w={default:n,circle:n,line:i,none:a}},function(t,e,r){"use strict";function n(t){function e(e,n){var i=e.width,a=e.left;return function(e){f=!0,h&&window.clearTimeout(h),h=window.setTimeout(function(){f=!1,t.dispatch({type:"POKE"})},2e3);var o=n?e.touches[0].pageX:e.pageX,s=Math.max(Math.min((o-a)/i,1),0),u=s*x+w;t.dispatch(r.i(l.j)(u))}}function n(n){f=!0,h&&window.clearTimeout(h),h=window.setTimeout(function(){f=!1,t.dispatch({type:"POKE"})},2e3),null!==c&&(window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",i),window.removeEventListener("touchmove",c),window.removeEventListener("touchend",i));var a=!!n.touches,o=a?n.touches[0].clientX:n.clientX,s="ruler"===n.target.className?n.target:n.target.parentNode,u=s.getBoundingClientRect(),d=(o-u.left)/u.width*x+w;t.dispatch(r.i(l.j)(d)),c=e(u,a),a?(window.addEventListener("touchmove",c),window.addEventListener("touchend",i)):(window.addEventListener("mousemove",c),window.addEventListener("mouseup",i))}function i(t){window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",i),window.removeEventListener("touchmove",c),window.removeEventListener("touchend",i),c=null}var d={flex:"1 1 auto",position:"relative",bottom:0,right:0,borderRadius:"5px",padding:"0 20px",pointerEvents:"auto"},p={boxSizing:"border-box",backgroundColor:"rgba(0, 0, 0, 0.2)",border:"1px solid #ccc",position:"relative",top:"17px",left:"56px",height:"10px",width:"calc(100% - 55px)",cursor:"pointer"},m=r.i(u.A)(t),g=r.i(u.z)(t),v={width:34,height:34,title:"play"},y={active:!1,activeColor:m},M=r.i(l.h)(t);if(!M)return null;var w=M.start,x=M.duration/Math.abs(M.playSpeed),b=100*Math.max(Math.min((r.i(l.i)(t)-w)/x,1),0),T={backgroundColor:m,width:"calc("+b+"% - 2px)",height:"6px",position:"absolute",left:"1px",top:"1px",cursor:"pointer"},E={position:"relative",display:"inline-block",verticalAlign:"middle",top:"-5px",cursor:"pointer"},S="\n    div.claraplayer div div svg:hover path {\n    fill: "+g+";\n  }",_=r.i(l.k)(t)?r.i(o.pause)(v,y):r.i(o.play)(v,y),A=r.i(l.k)(t)?function(){return t.dispatch(r.i(l.l)())}:function(){return t.dispatch(r.i(l.m)())};return a()("div",{style:d},[a()("style",{props:{innerHTML:S}}),a()("div.ruler",{style:p,on:{mousedown:n,touchstart:n}},[a()("div.played",{style:T}),r.i(s.a)(t,b,x,f)]),a()("div",{style:E,on:{click:A}},[_])])}e.a=n;var i=r(31),a=r.n(i),o=r(131),s=r(270),u=r(3),l=r(61),c=null,h=null,f=!1},function(t,e,r){"use strict";function n(t){var e=r.i(u.d)(t),n=r.i(u.k)(t);if(n)return d(t,n);for(var i=0;i<e.length;i++)for(var a=e[i].id,o=r.i(u.i)(t,a),l=0;l<o.fields.length;l++){var c=o.fields[l];if("Product Tour"===c.displayAs)return d(t,c.attribute)}return s()("div",{style:{pointerEvents:"none"}})}e.a=n;var i=r(84),a=r.n(i),o=r(31),s=r.n(o),u=r(85),l=0,c={position:"absolute",top:"50%",backgroundColor:"transparent",width:0,height:0,borderStyle:"solid",outline:"none",cursor:"pointer",margin:"8px",pointerEvents:"auto"},h={left:"10px",borderWidth:"12px 24px 12px 0",borderColor:"transparent black transparent transparent"},f={right:"10px",borderWidth:"12px 0 12px 24px",borderColor:"transparent transparent transparent black"},d=function(t,e){var n=function(){return t.dispatch(r.i(u.h)(e.name,e.values[l]))},i=function(t){return function(){l=(l+t)%e.values.length,l<0&&(l=e.values.length-1),n()}};return s()("div",{style:{height:"100%",width:"100%",pointerEvents:"none"},hook:{insert:n}},[s()("button",{style:a()({},c,h),on:{click:i(-1)}}),s()("button",{style:a()({},c,f),on:{click:i(1)}})])}},function(t,e,r){"use strict";function n(){return{userHeightFeet:null===S?5:Number(S),userHeightInches:null===_?11:Number(_)}}function i(t){S=t}function a(t){_=t}function o(t){var e=t.elm.getBoundingClientRect(),r=e.width,n=e.height;A=r,D=n}function s(t){function e(){t.dispatch(r.i(p.j)("vrMode",n())),t.dispatch(r.i(p.d)("vrMode")),t.dispatch(r.i(m.b)(!1))}function s(){t.dispatch(r.i(p.f)("vrSettings")),t.dispatch(r.i(m.b)(!1))}function u(t,e,r,n,i){for(var a=[],o=e;o<=r;o++)a.push(d()("option",{attrs:{selected:o===i},style:x},o+""));return d()("div",{style:{margin:"10px"}},[d()("select",{style:l()({},x,{width:"12vw",height:"42px",backgroundColor:"#d6d6d6"}),on:{change:t}},a),d()("p",{style:l()({},x,{display:"inline",marginLeft:"10px"})},n)])}var c=n(),h=1.1*D>A,f=!0;A&&D&&h&&(f=f&&A>N);var S=h?y:M;return d()("div",{style:v,hook:{insert:function(t){return o(t)},update:function(t,e){return o(e)}}},[d()("div",{style:l()({},S,{flex:2})},[d()("div",{style:y},[d()("p",{style:x},"Put on your headset."),d()("div",{style:{position:"relative",width:"24vw",paddingBottom:"24vw"}},[r.i(g.vrHeadSet)({},T)])]),f?d()("div",{style:y},[d()("p",{style:x},"Enter your height:"),d()("div",{style:{position:"relative",width:"38vw",paddingBottom:"24vw"}},[d()("div",{style:T},[d()("div",{style:l()({},y,{alignItems:"flex-start"})},[u(function(t){return i(Number(t.target.value))},4,9,"Feet",c.userHeightFeet),u(function(t){return a(Number(t.target.value))},0,11,"Inches",c.userHeightInches)])])])]):""]),d()("div",{style:w},[d()("div",{style:E},[d()("div",{style:l()({},b,{backgroundColor:"transparent",cursor:"none",display:"flex",alignItems:"flex-end"})},[d()("a",{style:{color:"black",bottom:0,marginLeft:"10px"},on:{click:s}},"Cancel")])]),d()("div",{style:E},[h?d()("div",{style:{flex:1}}):"",d()("button",{style:b,on:{click:e}},"Enter VR")]),d()("div",{style:E})])])}e.a=s;var u=r(84),l=r.n(u),c=r(402),h=r.n(c),f=r(31),d=r.n(f),p=r(43),m=r(3),g=r(131),v={position:"absolute",display:"flex",flexDirection:"column",left:0,top:0,height:"100%",width:"100%",backgroundColor:"#98989a",zIndex:h.a},y={display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",flex:1,width:"100%",height:"100%"},M={display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",flex:1,height:"100%"},w={flex:1,display:"flex",flexDirection:"row",alignItems:"center",height:"100%",position:"relative"},x={fontFamily:"sans-serif",color:"#000000",fontSize:"20px"},b=l()({},x,{color:"lightgray",flex:1,backgroundColor:"black",backgroundRepeat:"no-repeat",borderRadius:"8px",border:"none",cursor:"pointer",overflow:"hidden",outline:"none",width:"100%",height:"100%"}),T={position:"absolute",top:0,left:0,bottom:0,right:0,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"row"},E={height:"80%",width:"100%",display:"flex",flexDirection:"column",flex:1,alignContent:"center",justifyContent:"center"},S=null,_=null,A=0,D=0,N=350},function(t,e,r){"use strict";function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!t.fetchApi)throw new Error('Expect a "fetchApi" function');var e=t.fetchApi,n=t.subscribe,i=t.translator,o=t.modules,E=s()(o||{}).reduce(function(t,e){return t[e]=o[e].reducer,t},{}),S=r.i(x.a)(a()({},T,E),l.a);S.setApi(e);var _=r.i(b.a)(S,a()({animation:c.n,annotations:h.f,assets:f.k,commands:p.p,configuration:d.l,scene:M.k,sceneIO:y.p,sceneGraph:v.x,selection:w.f,player:m.C,plugins:g.a},o)),A=a()({},r.i(u.a)(),{_store:S,deps:{}},_);S.api=A,S.subscribe(function(t){t.length&&t.forEach(function(t){A.emit(t.type,t.args)}),n&&n(),A.emit("change")}),i&&S.setTranslator(i,S);var D=S.getTranslator();return A.version="2.3.7",S.dispatch(r.i(g.b)(A)),s()(t.commands||{}).forEach(function(e){var r=t.commands[e];A.commands.addCommand("function"==typeof r?r(S,D):r,e)}),A}e.a=n;var i=r(2),a=r.n(i),o=r(6),s=r.n(o),u=r(395),l=r(200),c=r(61),h=r(104),f=r(32),d=r(85),p=r(43),m=r(3),g=r(277),v=r(8),y=r(17),M=r(5),w=r(50),x=r(366),b=r(364),T={animation:c.n.reducer,annotations:h.f.reducer,assets:f.k.reducer,commands:p.p.reducer,configuration:d.l.reducer,sceneGraph:v.x.reducer,sceneIO:y.p.reducer,player:m.C.reducer,plugins:g.a.reducer,selection:w.f.reducer}},function(t,e,r){"use strict";function n(t,e,r){try{var n=function(e){return new Function("api",e||"")(t.getIn(["plugins","api"]))},i=r.content,a=r.loadFromServer,o=r.url;return a?(console.log("Load plugin from server",o),new x.a.Promise(function(r,i){t.callApi({types:[T,E,_],url:o,payload:e,queryKey:"PLUGINexternal"+e,contentType:"external"}).then(function(t){console.log("fetched external plugin",void 0===t?"undefined":p()(t),t&&t.length);try{var e=n(t);e||console.log("External plugin must be a function that returns an object"),r(e||{})}catch(t){console.log("Error building plugin",t),t.stack&&console.log(t.stack),r({})}}).catch(function(t){console.log("Error loading external plugin",t),r({})})})):g.a.resolve(n(i))}catch(t){console.log("error",t)}}function i(t){return function(e){var r=e.getIn(["sceneIO","id"]);if(!r)return g.a.reject("No scene attached");var i=e.getIn(["plugins","api"]);return i&&i[t]?g.a.resolve(i[t]):e.callApi({types:[T,E,_],url:"https://clara.io/api/scenes/"+r+"/plugins/"+t,payload:t,queryKey:"PLUGIN"+t}).then(function(r){return n(e,t,r).then(function(r){return e.dispatch({type:S,payload:{name:t,plugin:r}}),r})})}}function a(t,e){var r=t.getIn(["plugins","plugins",e]);return r?g.a.resolve(r):t.dispatch(i(e))}function o(t){return{type:b,payload:t}}function s(t,e,r){try{var n=function(t){return console.log(t),g.a.resolve(!0)},i=e.split("/"),o=f()(i,2),s=o[0],u=o[1],l="string"==typeof r?JSON.parse(r):r;return function(){return console.log("Get plugin",s,"for command",u),a(t,s).then(function(t){return console.log("Fetched plugin",!!t,"object"===(void 0===t?"undefined":p()(t))&&c()(t)),t?t[u]?"function"!=typeof t[u]?n("Command: "+u+" in plugin: "+s+" is not a function"):Array.isArray(l)?g.a.resolve(t[u].apply(t,l)):g.a.resolve(t[u](l)):n("Unknown command: "+u+" for plugin: "+s):n("Error getting plugin: "+s)})}}catch(t){return function(){console.error(t)}}}e.b=o;var u,l=r(6),c=r.n(l),h=r(41),f=r.n(h),d=r(40),p=r.n(d),m=r(37),g=r.n(m),v=r(19),y=r.n(v),M=r(24),w=(r.n(M),r(36)),x=r(183),b="SET_API",T="LOADING_PLUGIN",E="LOADED_PLUGIN",S="SET_PLUGIN",_="LOADING_PLUGIN_ERROR",A=r.i(M.Map)({api:null,plugins:r.i(M.Map)(),loading:r.i(M.Map)()}),D=r.i(w.a)(A,(u={},y()(u,b,function(t,e){return t.set("api",e)}),y()(u,T,function(t,e){return t.setIn(["loading",e],!0)}),y()(u,E,function(t,e,r){r.action;return t.setIn(["loading",e],!1)}),y()(u,S,function(t,e){var r=e.name,n=e.plugin;return t.setIn(["plugins",r],n)}),u)),N={reducer:D,actions:{loadPlugin:i},selectors:{get:a,getSetupCommand:s}};e.a=N},function(t,e,r){"use strict";function n(t,e,n){function i(t,e){if(t!==e){f[t]=l[t];var r=h(t),n=e&&h(e),i=!0,o=!1,u=void 0;try{for(var c,d=s()(a()(r));!(i=(c=d.next()).done);i=!0){var p=c.value,m=n&&n[p]||[],g=!0,v=!1,y=void 0;try{for(var M,w=s()(r[p]);!(g=(M=w.next()).done);g=!0){var x=M.value;-1===m.indexOf(x)&&(f[x]=l[x])}}catch(t){v=!0,y=t}finally{try{!g&&w.return&&w.return()}finally{if(v)throw y}}}}catch(t){o=!0,u=t}finally{try{!i&&d.return&&d.return()}finally{if(o)throw u}}}}function o(t,e,r){if(e!==r){f[e]=l[e];var n=h(e),a=r&&h(r),s=m[t]||[],u=g&&g[t]||[];i(n.plugs,a&&a.plugs),s.forEach(function(t,e){var r=u.indexOf(t);o(t,n.children[e],a&&a.children[r])})}}var l=t.objects,c=t.activeSceneId,h=r.i(u.a)(l),f={};if(n&&e.root===n.root)return f;f[e.root]=l[e.root];var d=h(e.root),p=n&&h(n.root);d.heirarchy!==p.heirarchy&&(f[d.heirarchy]=l[d.heirarchy]),d.references!==p.references&&(f[d.references]=l[d.references]);var m=h(d.heirarchy),g=p&&h(p.heirarchy);return o(c,d.content,p&&p.content),function(t,e){if(t!==e){f[t]=l[t];var r=h(t),n=e?h(e):{};a()(r).forEach(function(t){var e=r[t];n[t]!==e&&(f[e]=l[e])})}}(d.files,p&&p.files),f}e.a=n;var i=r(6),a=r.n(i),o=r(25),s=r.n(o),u=r(133)},function(t,e,r){"use strict";function n(t,e,n,i,o){var l=r.i(u.a)(t.objects),c=l(e.root),h=n&&l(n.root),f=i&&l(i.root),d=l(c.references),p=h?l(h.references):{},m=f?l(f.references):{},g=!0,v=!1,y=void 0;try{for(var M,w=s()(a()(d));!(g=(M=w.next()).done);g=!0){var x=M.value;o(JSON.parse(x),d[x])}}catch(t){v=!0,y=t}finally{try{!g&&w.return&&w.return()}finally{if(v)throw y}}var b=!0,T=!1,E=void 0;try{for(var S,_=s()(a()(m));!(b=(S=_.next()).done);b=!0){var x=S.value;m[x]!==d[x]&&o(JSON.parse(x),d[x])}}catch(t){T=!0,E=t}finally{try{!b&&_.return&&_.return()}finally{if(T)throw E}}var A=!0,D=!1,N=void 0;try{for(var I,L=s()(a()(p));!(A=(I=L.next()).done);A=!0){var x=I.value;d[x]||m[x]||o(JSON.parse(x),null)}}catch(t){D=!0,N=t}finally{try{!A&&L.return&&L.return()}finally{if(D)throw N}}}e.a=n;var i=r(6),a=r.n(i),o=r(25),s=r.n(o),u=r(133)},function(t,e,r){"use strict";function n(t,e){if(!t)throw new Error("assertion failure: "+e)}function i(t,e){for(var r=0;r<e.length;r++)if(!t(e[r],r))return!1;return!0}function a(t,e,a,o,u){function c(t,e,r,n){if(e.plugs===r.plugs){if(!n)return;if(n.plugs===e.plugs)return}var a=w(e.plugs),o=w(r.plugs),s=n&&w(n.plugs),u={},c=!0,f=!1,d=void 0;try{for(var m,g=h()(l()(a));!(c=(m=g.next()).done);c=!0){var v=m.value;!function(t){i(function(e,r){return o[t][r]===e},a[t])||(u[t]=a[t].map(w)),s&&i(function(e,r){return o[t][r]===e},a[t])&&(u[t]=s[t].map(w))}(v)}}catch(t){f=!0,d=t}finally{try{!c&&g.return&&g.return()}finally{if(f)throw d}}p({id:t,plugs:u})}function d(t,e,r,i,a){if(i===r){if(!a)return;if(a===r)return}var o=E[t]||[],s=S&&S[t]||[],u=_&&_[t]||[],f=w(r),p=i&&w(i),v=a&&w(a);n(f.children.length===o.length,"Expected heirarchy to match content: "+t),v&&n(v.children.length===u.length,"Expected heirarchy to match content: "+t),p&&n(p.children.length===s.length,"Expected heirarchy to match content: "+t);M[t];if(p)c(t,f,p,v);else{var y=w(f.plugs),x={},b=!0,T=!1,A=void 0;try{for(var D,N=h()(l()(y));!(b=(D=N.next()).done);b=!0){var I=D.value;x[I]=y[I].map(function(t){var e=w(t);return[e.type,e,e.name]})}}catch(t){T=!0,A=t}finally{try{!b&&N.return&&N.return()}finally{if(T)throw A}}m({id:t,parent:e,plugs:x,children:[],name:f.name,type:f.type})}o.forEach(function(e,r){var n=s.indexOf(e),i=u.indexOf(e);d(e,t,f.children[r],p&&p.children[n],v&&v.children[i])}),u.forEach(function(e,r){var n=o.indexOf(e),i=s.indexOf(e);-1===n&&d(e,t,v.children[r],p&&p.children[i])}),s.forEach(function(t,e){-1!==o.indexOf(t)||u&&-1!==u.indexOf(t)||g(t)})}var p=u.changeNode,m=u.addNode,g=u.deleteNode,v=u.addFile,y=(u.removeFile,t.activeSceneId),M=(t.objects,t.nodes),w=r.i(f.a)(t.objects),x=w(e.root),b=a&&w(a.root),T=o&&w(o.root),E=w(x.heirarchy),S=(w(x.references),b&&w(b.heirarchy)),_=(b&&w(b.references),T&&w(T.heirarchy));T&&w(T.references);d(y,null,x.content,b&&b.content,T&&T.content),function(t,e,r){var n=w(t),i=e?w(e):{},a=r?w(r):{};l()(n).forEach(function(t){if(i[t]){if(i[t]!==n[t])throw new Error("Update file")}else v(s()({id:t},w(n[t])))}),l()(a).forEach(function(t){if(i[t]){if(i[t]!==a[t])throw new Error("Update file")}else v(w(a[t]))})}(x.files,b&&b.files,T&&T.files)}e.a=a;var o=r(2),s=r.n(o),u=r(6),l=r.n(u),c=r(25),h=r.n(c),f=r(133)},function(t,e,r){"use strict";function n(t,e,r,n,i,a){var o=t.from,s=t.to,u=m()([e,r,n,i]),l=s[u];if(l){var c=!0,f=!1,p=void 0;try{for(var g,v=d()(l);!(c=(g=v.next()).done);c=!0){var y=g.value;-1===a.indexOf(y)&&(delete o[y][u],h()(o[y]).length||delete o[y])}}catch(t){f=!0,p=t}finally{try{!c&&v.return&&v.return()}finally{if(f)throw p}}}var M=!0,w=!1,x=void 0;try{for(var b,T=d()(a);!(M=(b=T.next()).done);M=!0){var E=b.value;o[E]||(o[E]={}),o[E][u]=!0}}catch(t){w=!0,x=t}finally{try{!M&&T.return&&T.return()}finally{if(w)throw x}}s[u]=a}function i(t,e,r,n,i,a,o,s){var u=e.from,l=e.to,c=o[a];c&&t&&!t.nodes[c]&&(console.warn("No reference to:",c,"from",r,n,i,a),o[a]=c=null);var f=m()([r,n,i,a]),d=l[f];d?d!==c&&(delete u[d][f],c?(u[c]||(u[c]={}),u[c][f]=s||!0,l[f]=c):(h()(u[d]).length||delete u[d],delete l[f])):c&&(u[c]||(u[c]={}),u[c][f]=s||!0,l[f]=c)}function a(t,e,a){function o(t,r){if(I[t]&&!L[t])throw console.error("Circular reference, updating",e.nodes[t].name),new Error("Circular reference: "+t);D[t]&&!I[t]&&f(t,D[t]);var n=L[t]||e.evaluatedNodes[t];return r&&(n=n&&n[r]),n}function u(t,r){if(A[t])return A[t];r&&(e.worldTransformReferences[t]=!0),D[t]&&!I[t]&&f(t,D[t]);var n=o(t,"Transform");if(!n)return null;var i=e.nodes[t],a=i&&i.parent,s=a&&u(a);return A[t]=s?(new g.Matrix4).copy(s).multiply(n.transform):(new g.Matrix4).copy(n.transform),A[t]}function c(n){return e.cameraReferences[n]=!0,u(r.i(y.g)(t))}function f(a,s){var f=e.nodes[a];if(f){var p=e.evaluatedNodes[a];if(!p){p=e.evaluatedNodes[a]={name:f.name,_ev:0,plugs:[]},f.plugs.Properties&&p.plugs.push("Properties"),f.plugs.Transform&&p.plugs.push("Transform");var m=!0,g=!1,v=void 0;try{for(var y,b=d()(h()(f.plugs));!(m=(y=b.next()).done);m=!0){var T=y.value;"Properties"!==T&&"Transform"!==T&&p.plugs.push(T)}}catch(t){g=!0,v=t}finally{try{!m&&b.return&&b.return()}finally{if(g)throw v}}}L[a]=p,I[a]=!0;var E=0,S=!0,_=!1,A=void 0;try{for(var N,C=d()(p.plugs);!(S=(N=C.next()).done);S=!0){var O=N.value;!0!==s&&s!==O||function(s){var m=this,g=f.plugs[s],v=p[s],y=v?v._v:0;p[s]=g.reduce(function(g,y,b){if(!1===y.active)return g;var T=r.i(M.a)(s,y.type,[]),E=!0,S=!1,_=void 0;try{for(var A,D=d()(T.fileReferenceKeys);!(E=(A=D.next()).done);E=!0){var N=A.value;i(null,e.fileReferences,a,s,b,N,y)}}catch(t){S=!0,_=t}finally{try{!E&&D.return&&D.return()}finally{if(S)throw _}}var I=!0,L=!1,C=void 0;try{for(var O,R=d()(T.nodeReferenceKeys);!(I=(O=R.next()).done);I=!0){var z=O.value;i(e,e.nodeReferences,a,s,b,z,y)}}catch(t){L=!0,C=t}finally{try{!I&&R.return&&R.return()}finally{if(L)throw C}}var j={},P=!0,U=!1,B=void 0;try{for(var V,F=d()(h()(T.plugReferences));!(P=(V=F.next()).done);P=!0){var k=V.value;i(e,e.nodeReferences,a,s,b,k,y,T.plugReferences[k]),y[k]&&!x&&(j[k]=o(y[k],T.plugReferences[k]))}}catch(t){U=!0,B=t}finally{try{!P&&F.return&&F.return()}finally{if(U)throw B}}var G=!0,Y=!1,H=void 0;try{for(var Q,W=d()(T.nodeReferenceListKeys);!(G=(Q=W.next()).done);G=!0){var X=Q.value;n(e.nodeReferences,a,s,b,X,y[X])}}catch(t){Y=!0,H=t}finally{try{!G&&W.return&&W.return()}finally{if(Y)throw H}}return T.environment&&(i(e,e.nodeReferences,a,s,b,"environment",{environment:w},"Environment"),x||(j.environment=o(w,"Environment"))),T.hierarchyVisible&&T.hierarchyVisible===f.type&&(i(e,e.nodeReferences,a,s,b,"hierarchyVisibility",{hierarchyVisibility:w},"Properties"),x||(j.sceneProperties=o(w,"Properties"))),x?g:T.update(l()({},y,j),g,{sceneId:w,node:f,store:t,properties:p.Properties,getWorldTransform:u,getCameraWorldTransform:c.bind(m,a),previousResult:v,loaded:e.loaded})},{}),p[s]._v=y+1}(O),E+=p[O]._v}}catch(t){_=!0,A=t}finally{try{!S&&C.return&&C.return()}finally{if(_)throw A}}p._v=f._v,p._ev=E,delete I[a],delete D[a]}}function p(t,r){r&&(D[r]?D[t]=!0:p(t,e.nodes[r].parent))}function m(t,e){if(S[t]){var r=!0,n=!1,i=void 0;try{for(var a,o=d()(h()(S[t]));!(r=(a=o.next()).done);r=!0){var u=a.value,l=S[t][u],c=JSON.parse(u),f=s()(c,4),p=f[0],g=f[1];f[2],f[3];e&&!0!==l&&l!==e||(D[p]?D[p]!==g&&(D[p]=!0,m(p,g)):(D[p]=g,m(p,g)))}}catch(t){n=!0,i=t}finally{try{!r&&o.return&&o.return()}finally{if(n)throw i}}}}var w=e.activeSceneId,x=(new Date,a.skipEvaluation),b=h()(e.nodes),T=h()(e.evaluatedNodes),E=e.nodeReferences,S=E.from,_=(E.to,!e.loaded&&r.i(v.b)(t));e.loaded||(e.loaded=_);var A={},D={},N={},I={},L={},C=!0,O=!1,R=void 0;try{for(var z,j=d()(b);!(C=(z=j.next()).done);C=!0){var P=z.value;e.evaluatedNodes[P]&&e.evaluatedNodes[P]._v===e.nodes[P]._v||(D[P]=!0)}}catch(t){O=!0,R=t}finally{try{!C&&j.return&&j.return()}finally{if(O)throw R}}var U=!0,B=!1,V=void 0;try{for(var F,k=d()(h()(e.worldTransformReferences));!(U=(F=k.next()).done);U=!0){var G=F.value;D[G]||p(G,e.nodes[G].parent)}}catch(t){B=!0,V=t}finally{try{!U&&k.return&&k.return()}finally{if(B)throw V}}if(D[r.i(y.g)(t)]){var Y=!0,H=!1,Q=void 0;try{for(var W,X=d()(h()(e.cameraReferences));!(Y=(W=X.next()).done);Y=!0){var q=W.value;D[q]=!0}}catch(t){H=!0,Q=t}finally{try{!Y&&X.return&&X.return()}finally{if(H)throw Q}}}var Z=!0,K=!1,J=void 0;try{for(var $,tt=d()(T);!(Z=($=tt.next()).done);Z=!0){var et=$.value;e.nodes[et]||(N[et]=!0)}}catch(t){K=!0,J=t}finally{try{!Z&&tt.return&&tt.return()}finally{if(K)throw J}}if(_){var rt=!0,nt=!1,it=void 0;try{for(var at,ot=d()(b);!(rt=(at=ot.next()).done);rt=!0){var st=at.value,ut=e.evaluatedNodes[st];ut&&ut.Properties&&ut.Properties.prefetch&&(D[st]=e.nodes[st].type)}}catch(t){nt=!0,it=t}finally{try{!rt&&ot.return&&ot.return()}finally{if(nt)throw it}}}var lt=!0,ct=!1,ht=void 0;try{for(var ft,dt=d()(h()(D));!(lt=(ft=dt.next()).done);lt=!0){var pt=ft.value;S[pt]&&m(pt)}}catch(t){ct=!0,ht=t}finally{try{!lt&&dt.return&&dt.return()}finally{if(ct)throw ht}}var mt=!0,gt=!1,vt=void 0;try{for(var yt,Mt=d()(h()(N));!(mt=(yt=Mt.next()).done);mt=!0){var wt=yt.value;delete e.evaluatedNodes[wt]}}catch(t){gt=!0,vt=t}finally{try{!mt&&Mt.return&&Mt.return()}finally{if(gt)throw vt}}var xt=!0,bt=!1,Tt=void 0;try{for(var Et,St=d()(h()(D));!(xt=(Et=St.next()).done);xt=!0){var _t=Et.value;D[_t]&&f(_t,D[_t])}}catch(t){bt=!0,Tt=t}finally{try{!xt&&St.return&&St.return()}finally{if(bt)throw Tt}}e._ev=e._v}e.a=a;var o=r(41),s=r.n(o),u=r(2),l=r.n(u),c=r(6),h=r.n(c),f=r(25),d=r.n(f),p=r(52),m=r.n(p),g=r(1),v=(r.n(g),r(17)),y=r(3),M=r(105)},function(t,e,r){"use strict";function n(t){var e=new Ammo.btDefaultCollisionConfiguration,n=new Ammo.btCollisionDispatcher(e),i=new Ammo.btDbvtBroadphase,a=new Ammo.btSequentialImpulseConstraintSolver,o=new Ammo.btDiscreteDynamicsWorld(n,i,a,e),s=r.i(p.a)(t,{plug:"Player",property:"gravity"});return s||(s=new f.Vector3(0,-9.8,0)),o.setGravity(new Ammo.btVector3(s.x,s.y,s.z)),o}function i(t){var e=t.getOrigin(),r=t.getRotation(),n=new f.Vector3(e.x(),e.y(),e.z()),i=new f.Quaternion(r.x(),r.y(),r.z(),r.w()),a=new f.Vector3(1,1,1),o=new f.Matrix4;return o.compose(n,i,a),o}function a(t){for(var e=new Ammo.btConvexHullShape,r=t.positions.values,n=new f.Vector3,i=0;i<r.length;i++){r.getAt(i,n);var a=new Ammo.btVector3(n.x,n.y,n.z);e.addPoint(a)}return e}function o(t,e,n){var i=e.getTranslator().getThreeObject(n),a=null;i&&i.userData&&i.userData.triangulation&&(a=i.userData.triangulation.mesh),a||(a=r.i(g.a)(t));for(var o=a.positions.values,s=a.positions.faceValueIndices,u=new Ammo.btTriangleMesh(!0,!0),l=new f.Vector3,c=new f.Vector3,h=new f.Vector3,d=0;d<s.length;d+=3){o.getAt(d,l),o.getAt(d+1,c),o.getAt(d+2,h);var p=new Ammo.btVector3(l.x,l.y,l.z),m=new Ammo.btVector3(c.x,c.y,c.z),v=new Ammo.btVector3(h.x,h.y,h.z);u.addTriangle(p,m,v,!1)}return new Ammo.btBvhTriangleMeshShape(u,!0,!0)}function s(t,e){var r=new Ammo.btVector3((e.max.x-e.min.x)/2,(e.max.y-e.min.y)/2,(e.max.z-e.min.z)/2);return new Ammo.btBoxShape(r)}function u(t){function e(e,n){var c=!1,h=!1;"Kinematic"===e.motionType&&(c=!0),"Static"===e.motionType&&(h=!0);var d=null,g=null,w=r.i(p.b)(t,n);w.decompose(v,y,M);var x=e.collisionShape;if("Mesh"===x){var b=r.i(p.a)(t,{id:n,evalPlug:"PolyMesh",property:"mesh"});b&&(d=o(b,t,n),d.setLocalScaling(new Ammo.btVector3(M.x,M.y,M.z)))}else if("Box"===x){var T=r.i(p.f)(t,n);d=s(n,T);var E=new f.Vector3((T.max.x+T.min.x)/2,(T.max.y+T.min.y)/2,(T.max.z+T.min.z)/2);g=(new f.Matrix4).getInverse(w,!0),g.multiply((new f.Matrix4).makeTranslation(E.x,E.y,E.z))}else{var S=r.i(p.a)(t,{id:n,evalPlug:"PolyMesh",property:"mesh"});S&&(d=a(S),d.setLocalScaling(new Ammo.btVector3(M.x,M.y,M.z)),d.setMargin(0))}if(!d){var _=r.i(p.a)(t,{id:n,property:"name"});console.warn("Could not create collision shape for '"+_+"', defaulting to a unit sphere"),d=new Ammo.btSphereShape(1)}g&&w.multiply(g),w.decompose(v,y,M);var A=new Ammo.btTransform;A.setIdentity(),A.setOrigin(new Ammo.btVector3(v.x,v.y,v.z)),A.setRotation(new Ammo.btQuaternion(y.x,y.y,y.z,y.w));var D=c||h?0:e.mass,N=0!==D,I=new Ammo.btVector3(0,0,0);N&&d.calculateLocalInertia(D,I);var L=new Ammo.btDefaultMotionState(A),C=new Ammo.btRigidBodyConstructionInfo(D,L,d,I);C.m_linearDamping=e.linearDamping,C.m_angularDamping=e.angularDamping,C.m_friction=e.friction,C.m_rollingFriction=e.rollingFriction,C.m_linearSleepingThreshold=e.linearSleepingThreshold,C.m_angularSleepingThreshold=e.angularSleepingThreshold,C.m_restitution=e.restitution;var O=new Ammo.btRigidBody(C);c&&(O.setCollisionFlags(O.getCollisionFlags()|m.a.BODYFLAG_KINEMATIC_OBJECT),O.setActivationState(m.a.BODYSTATE_DISABLE_DEACTIVATION)),l.addRigidBody(O),c?i[n]={body:O,shapeLocalTransform:g}:h||(u[n]={body:O,shapeLocalTransform:g})}var i={},u={},l=n(t),c=r.i(p.g)(t,{plug:"Properties",properties:{name:"RigidBodyProperties"}});return r.i(d.a)(e,c),{dynamicsWorld:l,kinematicBodies:i,dynamicBodies:u}}function l(t,e,n,a,o,s){a.stepSimulation(e/1e3,x,w);var u=new Ammo.btTransform,l=new Ammo.btQuaternion,c=new Ammo.btVector3,d=(new f.Quaternion,new f.Euler);h()(s).forEach(function(e){var n=s[e].body,i=r.i(p.b)(t,e),a=s[e].shapeLocalTransform;a&&i.premultiply(a),i.decompose(v,y,M);var o=n.getMotionState(),u=n.getWorldTransform();c.setX(v.x),c.setY(v.y),c.setZ(v.z),l.setX(y.x),l.setY(y.y),l.setZ(y.z),l.setW(y.w),u.setOrigin(c),u.setRotation(l),o.setWorldTransform(u)}),h()(o).forEach(function(e){o[e].body.getMotionState().getWorldTransform(u);var n=i(u),a=t.get("sceneGraph").nodes[e].parent,s=r.i(p.b)(t,a);s&&n.premultiply((new f.Matrix4).getInverse(s,!0));var l=o[e].shapeLocalTransform;l&&n.premultiply((new f.Matrix4).getInverse(l,!0)),n.decompose(v,y,M),t.dispatch(r.i(p.c)({id:e,plug:"Transform",property:"translation"},[v.x,v.y,v.z])),d.setFromQuaternion(y,"ZYX"),t.dispatch(r.i(p.c)({id:e,plug:"Transform",property:"rotation"},[f.Math.RAD2DEG*d.x,f.Math.RAD2DEG*d.y,f.Math.RAD2DEG*d.z]))})}e.b=u,e.a=l;var c=r(6),h=r.n(c),f=r(1),d=(r.n(f),r(90)),p=r(5),m=r(283),g=r(197),v=new f.Vector3,y=new f.Quaternion,M=new f.Vector3,w=1/60,x=4},function(t,e,r){"use strict";var n={BODYTYPE_STATIC:"Static",BODYTYPE_DYNAMIC:"Dynamic",BODYTYPE_KINEMATIC:"Kinematic",BODYFLAG_STATIC_OBJECT:1,BODYFLAG_KINEMATIC_OBJECT:2,BODYFLAG_NORESPONSE_OBJECT:4,BODYSTATE_ACTIVE_TAG:1,BODYSTATE_ISLAND_SLEEPING:2,BODYSTATE_WANTS_DEACTIVATION:3,BODYSTATE_DISABLE_DEACTIVATION:4,BODYSTATE_DISABLE_SIMULATION:5,BODYGROUP_NONE:0,BODYGROUP_DEFAULT:1,BODYGROUP_DYNAMIC:1,BODYGROUP_STATIC:2,BODYGROUP_KINEMATIC:4,BODYGROUP_ENGINE_1:8,BODYGROUP_TRIGGER:16,BODYGROUP_ENGINE_2:32,BODYGROUP_ENGINE_3:64,BODYGROUP_USER_1:128,BODYGROUP_USER_2:256,BODYGROUP_USER_3:512,BODYGROUP_USER_4:1024,BODYGROUP_USER_5:2048,BODYGROUP_USER_6:4096,BODYGROUP_USER_7:8192,BODYGROUP_USER_8:16384,BODYMASK_NONE:0,BODYMASK_ALL:65535,BODYMASK_STATIC:2,BODYMASK_NOT_STATIC:65533,BODYMASK_NOT_STATIC_KINEMATIC:65529};e.a=n},function(t,e,r){"use strict";function n(t){function e(t){var e=s()(t),r=m.digest(e);return u[r]||(h[r]=e),r}function n(t){var o=i.nodes[t];if(o){g[t]=o.children;var s=o.children.map(n),u={children:s,name:o.name,type:o.type},c={},h=!0,f=!1,d=void 0;try{for(var m,v=a()(l()(o.plugs));!(h=(m=v.next()).done);h=!0){var y=m.value;!function(t){c[t]=o.plugs[t].map(function(n){return e(r.i(p.a)(t,n.type,[]).contentExport(n))})}(y)}}catch(t){f=!0,d=t}finally{try{!h&&v.return&&v.return()}finally{if(f)throw d}}u.plugs=e(c);var M=e(u);return o._hash=M,o._sv=o._v,M}}var i=t.get("sceneGraph"),o=i.refs.HEAD,u=i.objects,c=(i.history,i.syncedNodes,i.activeSceneId),h=(l()(i.nodes),l()(i.evaluatedNodes),{}),g={},v=n(c),y=e(g),M={},w=l()(i.nodeReferences.to);w.sort();var x=!0,b=!1,T=void 0;try{for(var E,S=a()(w);!(x=(E=S.next()).done);x=!0){var _=E.value,A=JSON.parse(_);d.k[A[0]]||"Material"===A[1]&&"environment"===A[3]||(M[_]=i.nodeReferences.to[_])}}catch(t){b=!0,T=t}finally{try{!x&&S.return&&S.return()}finally{if(b)throw T}}var D=l()(i.fileReferences.to);D.sort();var N={};D.forEach(function(n){var a=i.fileReferences.to[n];M[n]=a;var o=r.i(f.b)(t,a),s=o.name,u=o.hash,l=o.type,c=o.suffix;u&&(N[a]=e({name:s,hash:u,type:l,suffix:c}))});var I=e(M),L=e(N),C=e({heirarchy:y,references:I,content:v,files:L}),O={root:C,parents:o?[o]:[],createdAt:new Date,author:"wvl",message:"Version: "+i._v};return{commit:O,commitHash:e(O),objects:h}}e.a=n;var i=r(25),a=r.n(i),o=r(52),s=r.n(o),u=r(6),l=r.n(u),c=r(579),h=r.n(c),f=r(32),d=r(8),p=r(105),m=new h.a},function(t,e,r){"use strict";var n={linear:function(t,e,r,n){return(r-e)*t/n+e},easeInQuad:function(t,e,r,n){return(r-e)*(t/=n)*t+e},easeOutQuad:function(t,e,r,n){return-(r-e)*(t/=n)*(t-2)+e},easeInOutQuad:function(t,e,r,n){var i=r-e;return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,r,n){return(r-e)*(t/=n)*t*t+e},easeOutCubic:function(t,e,r,n){return(r-e)*((t=t/n-1)*t*t+1)+e},easeInOutCubic:function(t,e,r,n){var i=r-e;return(t/=n/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,r,n){return(r-e)*(t/=n)*t*t*t+e},easeOutQuart:function(t,e,r,n){return-(r-e)*((t=t/n-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,r,n){var i=r-e;return(t/=n/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,r,n){return(r-e)*(t/=n)*t*t*t*t+e},easeOutQuint:function(t,e,r,n){return(r-e)*((t=t/n-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,r,n){var i=r-e;return(t/=n/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,r,n){var i=r-e;return-i*Math.cos(t/n*(Math.PI/2))+i+e},easeOutSine:function(t,e,r,n){return(r-e)*Math.sin(t/n*(Math.PI/2))+e},easeInOutSine:function(t,e,r,n){return-(r-e)/2*(Math.cos(Math.PI*t/n)-1)+e},easeInExpo:function(t,e,r,n){var i,a=r-e;return null!==(i=0===t)?i:{b:a*Math.pow(2,10*(t/n-1))+e}},easeOutExpo:function(t,e,r,n){var i,a=r-e;return null!==(i=t===n)?i:e+{c:a*(1-Math.pow(2,-10*t/n))+e}},easeInOutExpo:function(t,e,r,n){var i=r-e;return(t/=n/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,r,n){return-(r-e)*(Math.sqrt(1-(t/=n)*t)-1)+e},easeOutCirc:function(t,e,r,n){return(r-e)*Math.sqrt(1-(t=t/n-1)*t)+e},easeInOutCirc:function(t,e,r,n){var i=r-e;return(t/=n/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,r,n){var i,a,o,s=r-e;return o=1.70158,a=0,i=s,0===t||(t/=n),a||(a=.3*n),i<Math.abs(s)?(i=s,o=a/4):o=a/(2*Math.PI)*Math.asin(s/i),-i*Math.pow(2,10*(t-=1))*Math.sin((t*n-o)*(2*Math.PI)/a)+e},easeOutElastic:function(t,e,r,n){var i,a,o,s=r-e;return o=1.70158,a=0,i=s,0===t||(t/=n),a||(a=.3*n),i<Math.abs(s)?(i=s,o=a/4):o=a/(2*Math.PI)*Math.asin(s/i),i*Math.pow(2,-10*t)*Math.sin((t*n-o)*(2*Math.PI)/a)+s+e},easeInOutElastic:function(t,e,r,n){var i,a,o,s=r-e;return o=1.70158,a=0,i=s,0===t||(t/=n/2),a||(a=n*(.3*1.5)),i<Math.abs(s)?(i=s,o=a/4):o=a/(2*Math.PI)*Math.asin(s/i),t<1?i*Math.pow(2,10*(t-=1))*Math.sin((t*n-o)*(2*Math.PI)/a)*-.5+e:i*Math.pow(2,-10*(t-=1))*Math.sin((t*n-o)*(2*Math.PI)/a)*.5+s+e},easeInBack:function(t,e,r,n,i){var a=r-e;return void 0===i&&(i=1.70158),a*(t/=n)*t*((i+1)*t-i)+e},easeOutBack:function(t,e,r,n,i){var a=r-e;return void 0===i&&(i=1.70158),a*((t=t/n-1)*t*((i+1)*t+i)+1)+e},easeInOutBack:function(t,e,r,n,i){var a=r-e;return void 0===i&&(i=1.70158),(t/=n/2)<1?a/2*(t*t*((1+(i*=1.525))*t-i))+e:a/2*((t-=2)*t*((1+(i*=1.525))*t+i)+2)+e},easeInBounce:function(t,e,r,i){var a,o=r-e;return a=n.easeOutBounce(i-t,0,o,i),o-a+e},easeOutBounce:function(t,e,r,n){var i=r-e;return(t/=n)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,r,i){var a=r-e;return t<i/2?.5*n.easeInBounce(2*t,0,a,i)+e:.5*n.easeOutBounce(2*t-i,0,a,i)+.5*a+e}};e.a=n},function(t,e,r){"use strict";var n=r(2),i=r.n(n),a={schema:{useText:{type:"Boolean",label:"Use Custom Text",defaultValue:!1,animatable:!1},text:{type:"String",label:"Custom Text",defaultValue:"Annotation Text",animatable:!1},open:{type:"Boolean",label:"Open by default",defaultValue:!1,animatable:!1},limitVisilibility:{type:"Boolean",label:"Limit Visibility",defaultValue:!1,animatable:!1},visibilityAngle:{type:"Number",label:"Visibility Angle",defaultValue:180,step:5,minValue:10,maxValue:360,animatable:!1},directionMode:{label:"Direction Mode",type:"Options",labels:["Manual","Away From Origin"],values:["manual","awayFromOrigin"],defaultValue:"manual"},directionAxis:{label:"Direction",type:"Options",labels:["XAxis","YAxis","ZAxis"],values:["x","y","z"],defaultValue:"z"},directionTarget:{type:"Node",label:"Direction Target"}},update:function(t,e,r){var n=r.node;i()(e,t),t.useText||(e.text=n.name)}};e.a={Annotation:a}},function(t,e,r){"use strict";var n=r(32),i=r(186),a={schema:{binary:{type:"Binary",label:"Binary Geometry File"},reducedBinary:{type:"Binary",label:"Reduced Binary Geometry File"},operatorDisplay:{type:"Number",defaultValue:1,label:"Operator Display Type"},nbLevel:{type:"Number",defaultValue:1},level0:{type:"Binary",label:"Binary Geometry File"},level1:{type:"Binary",label:"Binary Geometry File"},level2:{type:"Binary",label:"Binary Geometry File"},level3:{type:"Binary",label:"Binary Geometry File"},level4:{type:"Binary",label:"Binary Geometry File"}},update:function(t,e,i){var a=(i.node,i.store),o=i.properties,s=i.previousResult,u=i.loaded,l=o.visible,c=t.binary,h=l||o.prefetch&&u,f=h&&c&&a.hasApi()&&a.dispatch(r.i(n.j)(c)),d=f&&!1;e.mesh=d,e.previousMesh=s&&s.mesh}},o={schema:{geometry:{label:"Mesh",plug:"BinMesh",type:"Plug"}},update:function(t,e){e.mesh=t.geometry&&t.geometry.mesh}};e.a={ProxyMesh:a,MeshSmooth:i.a,Instance:o}},function(t,e,r){"use strict";var n=r(2),i=r.n(n),a=r(6),o=r.n(a),s={"-1":"[ Custom ]",35:"35mm",70:"IMAX"},u={values:[0,1],labels:["Field of View","Focal Length"]},l={schema:{targeted:{label:"Enable Look Target",type:"Boolean",defaultValue:!1},focalDepthEnabled:{label:"Use Focal Depth",type:"Boolean",defaultValue:!1},focalDepth:{label:"Focal Depth",type:"Number",defaultValue:100,minValue:.001,animatable:!0,hidden:!0},axisDirection:{type:"Object",hidden:!0},zoomAxis:{type:"Object",hidden:!0},projection:{label:"Projection",type:"Options",defaultValue:"Perspective",values:["Perspective","Orthographic"]},viewCtrl:{type:"Options",defaultValue:0,values:u.values,labels:u.labels,label:"View Control"},fieldOfView:{label:"Field of View",type:"Number",defaultValue:45,minValue:5,maxValue:179,animatable:!0},focalLength:{label:"Focal Length (mm)",type:"Number",defaultValue:40,minValue:1,maxValue:400,step:1,animatable:!0},filmSizeBox:{type:"Options",defaultValue:"35",values:o()(s),labels:s,label:"Film Size"},customFilmSize:{label:"Custom Film Size (mm)",type:"Number",defaultValue:35,step:.1,minValue:1,maxValue:1e3},fStop:{label:"F-Stop",type:"Number",defaultValue:2.8,minValue:.7,maxValue:32,step:.1},filmOffset:{label:"Film Offset (mm)",type:"Vec2",defaultValue:{x:0,y:0},minValue:-1e3,step:1,maxValue:1e3},aspectRatio:{label:"Aspect Ratio",type:"Number",defaultValue:16/9,step:.01,minValue:.01,maxValue:10},nearClip:{label:"Near Clip",type:"Number",step:.01,defaultValue:.1,minValue:.01},farClip:{label:"Far Clip",type:"Number",defaultValue:5e4,step:1,minValue:1e-5,maxValue:1e6},orthoZoom:{label:"Ortho Zoom",type:"Number",defaultValue:1,minValue:.01,step:.1},targetDistance:{label:"Distance to Target",type:"Number",defaultValue:5,minValue:.01},target:{label:"Virtual Target",type:"Vec3",defaultValue:{x:0,y:0,z:0},hidden:!0},showFrustum:{label:"Show Frustum",type:"Boolean",defaultValue:!1},frustumColor:{label:"Frustum Color",type:"Color",defaultValue:{r:1,g:.78,b:0},animatable:!0},showClipping:{label:"Show Clipping",type:"Boolean",defaultValue:!1},showTarget:{label:"Show Virtual Target",type:"Boolean",defaultValue:!1}},update:function(t,e,r){var n=r.previousResult;i()(e,t);var a=["pivotMatrix","upPosition","radiusConstraint","newRadiusConstraint","offset","newAngleAttrs"];if(n)for(var o=0;o<a.length;o++)n[a[o]]&&(e[a[o]]=n[a[o]]);var s=t.filmSizeBox;e.filmSize=-1===s?t.customFilmSize:parseFloat(s)}};e.a={Camera:l}},function(t,e,r){"use strict";var n={values:[0,1,2,3,4],labels:["Default","Color","Image","CubeMap","EnvironmentMap"]},i={schema:{ambientLight:{label:"Color",type:"Color",defaultValue:{r:0,g:0,b:0}},environmentMap:{label:"Environment Map",type:"Plug",plug:"Material"},backgroundStyle:{label:"Style",type:"Options",defaultValue:0,values:n.values,labels:n.labels},backgroundColor:{label:"Color",type:"Color",defaultValue:{r:0,g:0,b:0}},backgroundOpacity:{label:"Opacity",type:"Number",defaultValue:1,minValue:0,maxValue:1,step:.1},background:{label:"Image",type:"Plug",plug:"Image"},cubeMapBlurring:{label:"CubeMap Blur",type:"Number",defaultValue:0,minValue:0,maxValue:10,step:.5,animatable:!0},cubeMap:{label:"CubeMap",type:"Plug",plug:"Material"}}};e.a={Environment:i}},function(t,e,r){"use strict";var n={values:[0,1,2,3,4,5,6,7],labels:["[ Custom ]","HD 720","HD 1080","640x480","Full 1024","1k Square","2k Square","Retina"]},i={schema:{res:{label:"Resolution",type:"Options",defaultValue:"1",values:n.values,labels:n.labels},res_w:{label:"Custom Width",type:"Number",defaultValue:1280,minValue:100,isInteger:!0},res_h:{label:"Custom Height",type:"Number",defaultValue:720,minValue:100,isInteger:!0},output_dir:{label:"Output directory",type:"Text"},curPass:{label:"Current Pass",type:"Node"},frm_start:{label:"Start Frame",type:"Number",defaultValue:1},frm_last:{label:"Last Frame",type:"Number",defaultValue:24},frm_by:{label:"By Frame",type:"Number",defaultValue:1},ren_start:{label:"Start number",type:"Number",defaultValue:1,isInteger:!0},ren_by:{label:"By Frame",type:"Number",defaultValue:1,isInteger:!0},frm_pad:{label:"Frame padding",type:"Number",defaultValue:1,minValue:0,maxValue:10,isInteger:!0}}};e.a={GeneralRenderer:i}},function(t,e,r){"use strict";var n=r(1),i=(r.n(n),r(32)),a=r(576),o=r.n(a),s=r(202),u={Original:0,WebGL:1,Renderer:3},l={values:[0,1,2],labels:["Original","WebGL","Renderer"]},c={values:[0,1,2],labels:["None","Wrap","Mirror"]},h={values:[n.NearestFilter,n.NearestMipMapNearestFilter,n.NearestMipMapLinearFilter,n.LinearFilter,n.LinearMipMapNearestFilter,n.LinearMipMapLinearFilter],labels:["Nearest","Nearest MipMap Nearest","Nearest MipMap Linear","Linear","Linear MipMap Nearest","Linear MipMap Linear"]},f={values:[3e3,3001,3002,3003,3004,3005],labels:["Linear","sRGB","RGBE/Radiance","Log LUV","RGBM 7","RGBM 16"]},d={schema:{originalBitmapFile:{type:"Image",hidden:!0},glBitmapFile:{type:"Image",hidden:!0},rendererBitmapFile:{type:"Image",hidden:!0},hdrBitmapFile:{type:"Image",hidden:!0},renderOption:{label:"Server Image",type:"Options",defaultValue:0,values:l.values,labels:l.labels},glOption:{label:"WebGL Image",type:"Options",defaultValue:1,values:l.values,labels:l.labels},uOffset:{type:"Number",label:"U Offset",defaultValue:0,step:.1,animatable:!0},vOffset:{type:"Number",label:"V Offset",defaultValue:0,step:.1,animatable:!0},uTile:{type:"Number",label:"U Tile",defaultValue:1,step:.1,animatable:!0},vTile:{type:"Number",label:"V Tile",defaultValue:1,step:.1,animatable:!0},rotation:{type:"Number",label:"Rotation",defaultValue:0,step:.1,animatable:!0},wrapU:{type:"Options",defaultValue:1,values:c.values,labels:c.labels,label:"U Wrap Style"},wrapV:{type:"Options",defaultValue:1,values:c.values,labels:c.labels,label:"V Wrap Style"},invert:{type:"Boolean",label:"Invert",defaultValue:!1,animatable:!0},gainPivot:{type:"Number",label:"Gain Pivot",defaultValue:0,step:.1,animatable:!0},gain:{type:"Number",label:"Gain",defaultValue:1,step:.1,animatable:!0},brightness:{type:"Number",label:"Brightness",defaultValue:0,step:.1,animatable:!0},magFilter:{type:"Options",defaultValue:n.LinearFilter,values:h.values,labels:h.labels,label:"Magnify Filter"},minFilter:{type:"Options",defaultValue:n.LinearMipMapLinearFilter,values:h.values,labels:h.labels,label:"Minify Filter"},generateMipMaps:{label:"Use MipMaps",type:"Boolean",defaultValue:!0},hdrEncoding:{type:"Options",defaultValue:3005,values:f.values,labels:f.labels,label:"HDR Encoding"}},update:function(t,e,n){var a=(n.node,n.store),s=null,l=t.glOption;s=l==u.Original?t.originalBitmapFile:l===u.WebGL?t.glBitmapFile||t.originalBitmapFile:t.rendererBitmapFile||t.originalBitmapFile,e.asset=s,e.hdr=t.hdrBitmapFile;var c=r.i(i.h)(a,t.originalBitmapFile);return t.hdrBitmapFile&&".hdr"===o.a.extname(c)&&(e.hdrSource=t.originalBitmapFile),["uOffset","vOffset","uTile","vTile","rotation","wrapU","wrapV","gain","gainPivot","brightness","magFilter","minFilter","generateMipMaps","hdrEncoding","invert"].forEach(function(r){e[r]=t[r]}),e.preferHDR=3e3!==t.hdrEncoding&&!!t.hdrBitmapFile,e}},p={schema:{width:{type:"Number",defaultValue:512,minValue:16,maxValue:4096,step:1,label:"Width"},height:{type:"Number",defaultValue:512,minValue:16,maxValue:4096,step:1,label:"Height"},color:{label:"Color",type:"Color",defaultValue:{r:0,g:0,b:0,a:0},animatable:!0},opacity:{label:"Opacity",type:"Number",defaultValue:1,minValue:0,maxValue:1,step:.1,animatable:!0},uOffset:{type:"Number",label:"U Offset",defaultValue:0,step:.1,animatable:!0},vOffset:{type:"Number",label:"V Offset",defaultValue:0,step:.1,animatable:!0},uTile:{type:"Number",label:"U Tile",defaultValue:1,step:.1,animatable:!0},vTile:{type:"Number",label:"V Tile",defaultValue:1,step:.1,animatable:!0},rotation:{type:"Number",label:"Rotation",defaultValue:0,step:.1,animatable:!0},wrapU:{type:"Options",defaultValue:1,values:c.values,labels:c.labels,label:"U Wrap Style"},wrapV:{type:"Options",defaultValue:1,values:c.values,labels:c.labels,label:"V Wrap Style"},invert:{type:"Boolean",label:"Invert",defaultValue:!1,animatable:!0},gainPivot:{type:"Number",label:"Gain Pivot",defaultValue:0,step:.1,animatable:!0},gain:{type:"Number",label:"Gain",defaultValue:1,step:.1,animatable:!0},brightness:{type:"Number",label:"Brightness",defaultValue:0,step:.1,animatable:!0},magFilter:{type:"Options",defaultValue:n.LinearFilter,values:h.values,labels:h.labels,label:"Magnify Filter"},minFilter:{type:"Options",defaultValue:n.LinearMipMapLinearFilter,values:h.values,labels:h.labels,label:"Minify Filter"},generateMipMaps:{label:"Use MipMaps",type:"Boolean",defaultValue:!0},hdrEncoding:{type:"Options",defaultValue:n.RGBM16Encoding,values:f.values,labels:f.labels,label:"HDR Encoding"},externalId:{type:"String",defaultValue:"",label:"External ID"}},update:function(t,e,r){var n=(r.node,r.store),i=t.width,a=t.height,o=t.externalId,s=t.color;s&&(s="rgba("+parseInt(255*s.r)+","+parseInt(255*s.g)+","+parseInt(255*s.b)+","+t.opacity+")"),["uOffset","vOffset","uTile","vTile","rotation","wrapU","wrapV","gain","gainPivot","brightness","magFilter","minFilter","generateMipMaps","hdrEncoding","invert","width","height"].forEach(function(r){e[r]=t[r]});var u=void 0;""!==o&&((u=document.getElementById(o))||(u=n.createCanvas(i,a),document.body.appendChild(u),u.id=o,u.style.display="none"));var l=function(t,e,r){return t.fillStyle=s,t.fillRect(0,0,i,a),u&&t.drawImage(u,0,0,i,a),!0};return e.canvasOperations?e.canvasOperations.push(l):e.canvasOperations=[l],e}},m={schema:{startIs:{label:"Start Is",type:"Options",values:["top","left","top-left","bottom-left"],initialValue:"top"},startColor:{label:"Start Color",type:"Color",defaultValue:{r:0,g:0,b:0,a:0},animatable:!0},startOpacity:{label:"Start Opacity",type:"Number",defaultValue:1,minValue:0,maxValue:1,step:.1,animatable:!0},endColor:{label:"End Color",type:"Color",defaultValue:{r:0,g:0,b:0,a:0},animatable:!0},endOpacity:{label:"End Opacity",type:"Number",defaultValue:1,minValue:0,maxValue:1,step:.1,animatable:!0},xOffset:{type:"Number",defaultValue:0,minValue:-1e4,maxValue:1e4,step:1,label:"X",animatable:!0},yOffset:{type:"Number",defaultValue:0,minValue:-1e4,maxValue:1e4,step:1,label:"Y",animatable:!0},width:{type:"Number",defaultValue:512,minValue:16,maxValue:4096,step:1,label:"Width"},height:{type:"Number",defaultValue:512,minValue:16,maxValue:4096,step:1,label:"Height"},composition:{label:"Mode",type:"Options",values:["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","copy","xor","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],initialValue:"source-over"}},update:function(t,e){var r=t.xOffset,n=t.yOffset,i=t.width,a=t.height,o=t.startColor,s=t.endColor;o&&(o="rgba("+parseInt(255*o.r)+","+parseInt(255*o.g)+","+parseInt(255*o.b)+","+t.startOpacity+")"),s&&(s="rgba("+parseInt(255*s.r)+","+parseInt(255*s.g)+","+parseInt(255*s.b)+","+t.endOpacity+")");var u=function(e){var u=void 0;switch(t.startIs){case"top":u=e.createLinearGradient(r,n,r,n+a);break;case"left":u=e.createLinearGradient(r,n,r+i,n);break;case"top-left":u=e.createLinearGradient(r,n,r+i,n+a);break;default:u=e.createLinearGradient(r,n+a,r+i,n)}return u.addColorStop(0,o),u.addColorStop(1,s),e.fillStyle=u,e.globalCompositeOperation=t.composition,e.fillRect(r,n,i,a),!0};return e.canvasOperations?e.canvasOperations.push(u):e.canvasOperations=[u],e}},g={schema:{color:{label:"Color",type:"Color",defaultValue:{r:0,g:0,b:0,a:0},animatable:!0},opacity:{label:"Opacity",type:"Number",defaultValue:1,minValue:0,maxValue:1,step:.1,animatable:!0},xOffset:{type:"Number",defaultValue:0,minValue:-1e4,maxValue:1e4,step:1,label:"X",animatable:!0},yOffset:{type:"Number",defaultValue:0,minValue:-1e4,maxValue:1e4,step:1,label:"Y",animatable:!0},width:{type:"Number",defaultValue:512,minValue:16,maxValue:4096,step:1,label:"Width"},height:{type:"Number",defaultValue:512,minValue:16,maxValue:4096,step:1,label:"Height"},composition:{label:"Mode",type:"Options",values:["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","copy","xor","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],initialValue:"source-over"}},update:function(t,e){var r=t.xOffset,n=t.yOffset,i=t.width,a=t.height,o=t.color;o&&(o="rgba("+parseInt(255*o.r)+","+parseInt(255*o.g)+","+parseInt(255*o.b)+","+t.opacity+")");var s=function(e){return e.fillStyle=o,e.globalCompositeOperation=t.composition,e.fillRect(r,n,i,a),!0};return e.canvasOperations?e.canvasOperations.push(s):e.canvasOperations=[s],e}},v=void 0,y={schema:{sourceImage:{type:"Plug",plug:"Image"},xOffset:{type:"Number",defaultValue:0,minValue:-1e4,maxValue:1e4,step:1,label:"X Pixel",animatable:!0},yOffset:{type:"Number",defaultValue:0,minValue:-1e4,maxValue:1e4,step:1,label:"Y Pixel",animatable:!0},xRelativeOffset:{type:"Number",defaultValue:0,minValue:-10,maxValue:10,step:.01,label:"X Relative",animatable:!0},yRelativeOffset:{type:"Number",defaultValue:0,minValue:-10,maxValue:10,step:.01,label:"Y Relative",animatable:!0},offsetUnit:{label:"Unit",type:"Options",values:["pixel","relative"],initialValue:"absolute"},overrideSize:{type:"Boolean",label:"Override Default Size",defaultValue:!1,animatable:!0},overrideWidth:{type:"Number",defaultValue:0,minValue:-1e4,maxValue:1e4,step:1,label:"Override Width",animatable:!0},overrideHeight:{type:"Number",defaultValue:0,minValue:-1e4,maxValue:1e4,step:1,label:"Override Height",animatable:!0},overrideWidthRelative:{type:"Number",defaultValue:1,minValue:-100,maxValue:100,step:.01,label:"Relative Width",animatable:!0},overrideHeightRelative:{type:"Number",defaultValue:1,minValue:-100,maxValue:100,step:.01,label:"Relative Height",animatable:!0},overrideSizeUnit:{label:"Unit",type:"Options",values:["pixel","relative"],initialValue:"absolute"},rotation:{type:"Number",defaultValue:0,minValue:-3600,maxValue:3600,step:1,label:"Rotation",animatable:!0},horizontalAlign:{type:"Options",defaultValue:"left",values:["left","center","right"],label:"Horizontal Align"},verticalAlign:{type:"Options",defaultValue:"top",values:["top","middle","bottom"],label:"Vertical Align"},composition:{label:"Composition",type:"Options",values:["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","copy","xor","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],initialValue:"source-over"},tint:{label:"Enabled",type:"Boolean",defaultValue:!1,animatable:!0},tintColor:{label:"Tint Color",type:"Color",defaultValue:16777215,animatable:!0},tintOpacity:{label:"Opacity",type:"Number",defaultValue:1,minValue:0,maxValue:1,step:.01,animatable:!0},tintComposition:{label:"Tint Mode",type:"Options",values:["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","copy","xor","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],initialValue:"multiply"}},update:function(t,e,n){var i=(n.node,n.store,t.sourceImage),a=t.xOffset,o=t.yOffset,u=t.xRelativeOffset,l=t.yRelativeOffset,c=t.offsetUnit,h=t.overrideSize,f=t.overrideWidth,d=t.overrideHeight,p=t.overrideWidthRelative,m=t.overrideHeightRelative,g=t.overrideSizeUnit,y=t.composition,M=t.tint,w=t.tintColor,x=t.tintOpacity,b=t.tintComposition,T=t.rotation*Math.PI/180,E=t.horizontalAlign,S=t.verticalAlign,_=function(t,e,n){if(!i)return!0;var _=r.i(s.a)(e,i);if(!_)return!0;h||(f=_.width,d=_.height),h&&"relative"===g&&(f=p*n.width,d=m*n.height),0==f&&(f=1),0==d&&(d=1),v&&(v.width=f,v.height=d);var A=v||e.createCanvas(f,d),D=A.getContext("2d");D.clearRect(0,0,A.width,A.height),v=A;if(M){var N="rgba("+parseInt(255*w.r)+","+parseInt(255*w.g)+","+parseInt(255*w.b)+","+x+")";D.fillStyle=N,D.globalCompositeOperation="source-over",D.fillRect(0,0,f,d),D.globalCompositeOperation="destination-in",D.drawImage(_,0,0,f,d),D.globalCompositeOperation=b}D.drawImage(_,0,0,f,d),t.globalCompositeOperation=y,"relative"===c&&(a=u*n.width,o=l*n.height),t.translate(a,o),t.rotate(T);var I=void 0,L=void 0;switch(E){case"left":I=0;break;case"center":I=.5*-f;break;default:I=-f}switch(S){case"top":L=0;break;case"middle":L=.5*-d;break;default:L=-d}return t.drawImage(A,I,L,f,d),!0};return e.canvasOperations?e.canvasOperations.push(_):e.canvasOperations=[_],e}},M={schema:{fontName:{label:"Font Name",type:"Options",defaultValue:"serif",values:["serif","sans serif","monospace","custom"],labels:["Serif","Sans Serif","Monospace","Custom CSS Font"]},fontCSSSpecifier:{label:"CSS Font Specifer",type:"String",defaultValue:"Times New Roman, Times, serif"},text:{label:"Text",type:"String",defaultValue:"Times New Roman, Times, serif"},fontSize:{label:"Font Size",type:"Number",defaultValue:100,minValue:1,maxValue:1e4,step:1,animatable:!0},italic:{label:"Italic",type:"Boolean",defaultValue:!1,animatable:!0},bold:{label:"Bold",type:"Boolean",defaultValue:!1,animatable:!0},style:{label:"Drawing Style",type:"Options",defaultValue:"solid",values:["solid","outline"]},outlineWidth:{type:"Number",defaultValue:3,minValue:-10,maxValue:100,step:1,label:"Outline Width",animatable:!0},color:{label:"Color",type:"Color",defaultValue:{r:0,g:0,b:0},animatable:!0},opacity:{label:"Opacity",type:"Number",defaultValue:1,minValue:0,maxValue:1,step:.01,animatable:!0},positionX:{type:"Number",defaultValue:256,minValue:-1e3,maxValue:1e4,step:1,label:"Position X",animatable:!0},positionY:{type:"Number",defaultValue:256,minValue:-1e3,maxValue:1e4,step:1,label:"Position Y",animatable:!0},positionXRelative:{type:"Number",defaultValue:.5,minValue:-10,maxValue:10,step:.01,label:"X Relative",animatable:!0},positionYRelative:{type:"Number",defaultValue:.5,minValue:-10,maxValue:10,step:.01,label:"Y Relative",animatable:!0},positionUnit:{label:"Unit",type:"Options",values:["pixel","relative"],initialValue:"absolute"},rotation:{type:"Number",defaultValue:0,minValue:-3600,maxValue:3600,step:1,label:"Rotation",animatable:!0},horizontalAlign:{type:"Options",defaultValue:"center",values:["left","center","right"],label:"Horizontal Align"},verticalAlign:{type:"Options",defaultValue:"middle",values:["top","middle","bottom"],label:"Vertical Align"}},update:function(t,e){var r=t.fontName;switch(r){case"serif":r="Times New Roman, Times, serif";break;case"sans serif":r="Arial, Helvetica, sans-serif";break;case"monospace":r="Courier New, Courier, monospace";break;case"custom":r=t.fontCSSSpecifier}var n=t.text,i=t.fontSize,a=t.italic,o=t.bold,s=t.style,u=t.outlineWidth,l=t.opacity,c=t.positionX,h=t.positionY,f=t.positionXRelative,d=t.positionYRelative,p=t.positionUnit,m=t.horizontalAlign,g=t.verticalAlign,v=t.color;v="rgba("+parseInt(255*v.r)+","+parseInt(255*v.g)+","+parseInt(255*v.b)+","+l+")";var y=t.rotation*Math.PI/180,M=function(t,e,l){var M=c,w=h;"relative"===p&&(M=f*l.width,w=d*l.height),t.fillStyle=v;var x=a?"italic":"normal",b=o?700:400;return t.font=x+" "+b+" "+i+"px "+r,t.textAlign=m,t.textBaseline=g,t.translate(M,w),t.rotate(y),"outline"===s?(t.lineWidth=u,t.strokeStyle=v,t.strokeText(n,0,0)):(t.fillStyle=v,t.fillText(n,0,0)),!0};return e.canvasOperations?e.canvasOperations.push(M):e.canvasOperations=[M],e}};e.a={Image:d,Canvas:p,CanvasLinearGradient:m,CanvasFill:g,CanvasComposite:y,CanvasText:M}},function(t,e,r){"use strict";var n={schema:{lightType:{label:"type",type:"String",defaultValue:"DirectionalLight"},color:{label:"Color",type:"Color",defaultValue:{r:.94,g:.94,b:.94}},intensity:{label:"Intensity",type:"Number",defaultValue:.8},sourceAngle:{label:"Source Angle",type:"Number",defaultValue:0,step:.1,minValue:0,maxValue:20},shadow:{label:"Enable",type:"Boolean",defaultValue:!1},autoShadow:{label:"Auto Shadow",type:"Boolean",default:!1},showShadowCamera:{label:"Show Frustum",type:"Boolean",defaultValue:!1},shadowBias:{label:"Bias",type:"Number",defaultValue:0},shadowSize:{label:"Map Size",type:"Number",defaultValue:512},shadowCameraSize:{label:"Camera Size",type:"Number",defaultValue:500},shadowNearClip:{label:"Near Clip",type:"Number",step:.01,defaultValue:.1},shadowFarClip:{label:"Far Clip",type:"Number",defaultValue:1e3},shadowFrustumColor:{label:"Frustum Color",type:"Color",defaultValue:{r:.94,g:.94,b:.94}}}},i={schema:{lightType:{label:"type",type:"String",defaultValue:"SpotLight"},color:{label:"Color",type:"Color",defaultValue:{r:.94,g:.94,b:.94}},radius:{label:"Radius",type:"Number",defaultValue:0,minValue:0,step:.01},intensity:{label:"Intensity",type:"Number",defaultValue:.8},distance:{label:"Cutoff Distance",type:"Number",defaultValue:0},coneAngle:{label:"Cone Angle",type:"Number",defaultValue:60},coneFalloff:{label:"Cone Falloff",type:"Number",defaultValue:0},decayExponent:{label:"Decay Exponent",type:"Number",defaultValue:0},shadow:{label:"Enable",type:"Boolean",defaultValue:!1},shadowBias:{label:"Bias",type:"Number",defaultValue:-0},shadowSize:{label:"Map Size",type:"Number",defaultValue:512},autoShadow:{label:"Auto Shadow",type:"Boolean",default:!1},shadowNearClip:{label:"Near Clip",type:"Number",step:.01,defaultValue:.1},shadowFarClip:{label:"Far Clip",type:"Number",defaultValue:1e3},showShadowCamera:{label:"Show Frustum",type:"Boolean",defaultValue:!1},shadowFrustumColor:{label:"Frustum Color",type:"Color",defaultValue:{r:.94,g:.94,b:.94}}}},a={schema:{lightType:{label:"type",type:"String",defaultValue:"PointLight"},color:{label:"Color",type:"Color",defaultValue:{r:.94,g:.94,b:.94}},intensity:{label:"Intensity",type:"Number",defaultValue:.8},radius:{label:"Radius",type:"Number",defaultValue:0,minValue:0,step:.01},distance:{label:"Cutoff Distance",type:"Number",defaultValue:0},decayExponent:{label:"Decay Exponent",type:"Number",defaultValue:0},shadow:{label:"Enable",type:"Boolean",defaultValue:!1},shadowBias:{label:"Bias",type:"Number",defaultValue:0},shadowSize:{label:"Map Size",type:"Number",defaultValue:512},shadowNearClip:{label:"Near Clip",type:"Number",step:.01,defaultValue:.5},shadowFarClip:{label:"Far Clip",type:"Number",defaultValue:500}}},o={schema:{lightType:{label:"type",type:"String",defaultValue:"HemisphereLight"},color:{label:"Sky Color",type:"Color",defaultValue:{r:.2,g:.52,b:1}},gndColor:{label:"Sky Color",type:"Color",defaultValue:{r:1,g:.78,b:.5}},intensity:{label:"Intensity",type:"Number",defaultValue:.6}}},s={schema:{lightType:{label:"type",type:"String",defaultValue:"AreaLight"},color:{label:"Color",type:"Color",defaultValue:{r:.94,g:.94,b:.94}},intensity:{label:"Intensity",type:"Number",defaultValue:10},width:{label:"Source Width",type:"Number",defaultValue:1},height:{label:"Source Height",type:"Number",defaultValue:1},shadow:{label:"Enable",type:"Boolean",defaultValue:!1}}};e.a={DirectionalLight:n,SpotLight:i,PointLight:a,HemisphereLight:o,AreaLight:s}},function(t,e,r){"use strict";var n={schema:{color:{label:"Color",type:"Color",defaultValue:{r:.94,g:.94,b:.94}}},update:function(t,e){return e.color=t.color}},i={environment:!0,schema:{baseMap:{label:"Image",type:"Plug",plug:"Image"},baseMapTransparent:{label:"Image Transparent",type:"Boolean",defaultValue:!1},baseColor:{label:"Color",type:"Color",defaultValue:{r:.94,g:.94,b:.94}},baseFalloff:{label:"Falloff",type:"Boolean",defaultValue:!1},baseFalloffMap:{label:"Image",type:"Plug",plug:"Image"},baseFalloffColor:{label:"Falloff Color",type:"Color",defaultValue:{r:.94,g:.94,b:.94},animatable:!0},opacityMap:{label:"Image",type:"Plug",plug:"Image"},opacityFactor:{label:"Factor",type:"Number",defaultValue:1,maxValue:1,minValue:0,step:.01,animatable:!0},opacityFalloffMap:{label:"Image",type:"Plug",plug:"Image"},opacityFalloffFactor:{label:"Falloff Factor",type:"Number",defaultValue:1,maxValue:1,minValue:0,step:.01,animatable:!0},depthWrite:{label:"Depth Write",type:"Boolean",defaultValue:!0},depthTest:{label:"Depth Test",type:"Boolean",defaultValue:!0},specularMap:{label:"Image",type:"Plug",plug:"Image"},specularColor:{label:"Color",type:"Color",defaultValue:{r:1,g:1,b:1},animatable:!0},roughness:{label:"Roughness",type:"Number",defaultValue:.25,minValue:0,maxValue:1,step:.01,animatable:!0},roughnessMap:{label:"Image",type:"Plug",plug:"Image"},metallic:{label:"Metallic",type:"Number",defaultValue:0,minValue:0,maxValue:1,step:.01,animatable:!0},metallicMap:{label:"Image",type:"Plug",plug:"Image"},clearCoat:{label:"Thickness",type:"Number",defaultValue:0,minValue:0,maxValue:1,step:.01,animatable:!0},clearCoatRoughness:{label:"Roughness",type:"Number",defaultValue:.25,minValue:0,maxValue:1,step:.01,animatable:!0},aoMap:{label:"Image",type:"Plug",plug:"Image"},aoMapIntensity:{label:"Factor",type:"Number",defaultValue:1,maxValue:1,minValue:0,step:.01,animatable:!0},lightMap:{label:"Image",type:"Plug",plug:"Image"},ambientColor2:{label:"Color",type:"Color",animatable:!0,defaultValue:{r:0,g:0,b:0}},emissiveMap:{label:"Image",type:"Plug",plug:"Image"},emissiveColor:{label:"Color",type:"Color",animatable:!0,defaultValue:{r:0,g:0,b:0}},emissiveScale:{label:"Scale",type:"Number",defaultValue:1,minValue:0,maxValue:100,step:.1,animatable:!0},emissiveLabel:{type:"Label",align:"right",defaultValue:"Emissive uses the second UV channel."},translucencyColor:{label:"Color",type:"Color",animatable:!0,defaultValue:{r:0,g:0,b:0}},translucencyMap:{label:"Image",type:"Plug",plug:"Image"},translucencyNormalAlpha:{label:"Normal Alpha",type:"Number",defaultValue:.75,minValue:0,maxValue:1,step:.05,animatable:!0},translucencyNormalPower:{label:"Normal Power",type:"Number",defaultValue:2,minValue:.01,maxValue:100,step:.05,animatable:!0},translucencyViewAlpha:{label:"View Alpha",type:"Number",defaultValue:.75,minValue:0,maxValue:1,step:.05,animatable:!0},translucencyViewPower:{label:"View Power",type:"Number",defaultValue:2,minValue:.01,maxValue:100,step:.05,animatable:!0},bumpMap:{label:"Image",type:"Plug",plug:"Image"},bumpScale:{label:"Scale Factor",type:"Number",defaultValue:1,minValue:-5,maxValue:5,step:.1,animatable:!0},normalMap:{label:"Image",type:"Plug",plug:"Image"},normalFactor:{label:"Scale Factor",type:"Number",defaultValue:1,minValue:-100,maxValue:100,step:.001,animatable:!0},normalRedFlip:{label:"Red Channel Flip",type:"Boolean",defaultValue:!1},normalGreenFlip:{label:"Green Channel Flip",type:"Boolean",defaultValue:!1},anisotropyLabel:{type:"Label",align:"right",defaultValue:"Anisotropy requires the Tangent operator."},anisotropyMap:{label:"Image",type:"Plug",plug:"Image"},anisotropy:{label:"Offset",type:"Number",defaultValue:0,minValue:-1,maxValue:1,step:.025,animatable:!0},anisotropyRotationMap:{label:"Image",type:"Plug",plug:"Image"},anisotropyRotation:{label:"Rotation Offset",type:"Number",defaultValue:0,minValue:-1,maxValue:1,step:.025,animatable:!0},overrideEnvironment:{label:"Override Environment",type:"Boolean",defaultValue:!1}}},a={schema:{defaultColor:{label:"Default Color",type:"Color",defaultValue:{r:1,g:1,b:1}},reference:{type:"Plug",plug:"Material",label:"Reference"}},update:function(t,e){e.color=t.defaultColor}},o={schema:{defaultColor:{label:"Default Color",type:"Color",defaultValue:{r:1,g:1,b:1}},reference:{type:"Plug",plug:"Material",label:"Reference"}},update:function(t,e){if(t.reference)return t.reference;e.defaultColor=t.defaultColor}},s={schema:{thumbnailImage:{label:"Thumbnail",type:"Plug",plug:"Image"},irradianceCubeMap:{label:"Irradiance",type:"Plug",plug:"Material"},specularCubeMap:{label:"Specular",type:"Plug",plug:"Material"},intensity:{label:"Intensity",type:"Number",defaultValue:1,minValue:.001,maxValue:100,step:.1,animatable:!0}}},u={schema:{map0:{label:"Map ( x)",type:"Plug",plug:"Image"},map1:{label:"Map (-x)",type:"Plug",plug:"Image"},map2:{label:"Map ( y)",type:"Plug",plug:"Image"},map3:{label:"Map (-y)",type:"Plug",plug:"Image"},map4:{label:"Map ( z)",type:"Plug",plug:"Image"},map5:{label:"Map (-z)",type:"Plug",plug:"Image"}},update:function(t,e,r){r.node;e.maps=[t.map0,t.map1,t.map2,t.map3,t.map4,t.map5]}},l={schema:{webgl:{type:"Plug",label:"WebGL Material",plug:"Material"},vray:{type:"Plug",label:"VRay Material",plug:"Material"}},update:function(t,e){return t.webgl||e}},c={schema:{diffuseColor:{label:"Color",type:"Color",defaultValue:{r:.94,g:.94,b:.94}}}},h={schema:{defaultColor:{label:"Default Color",type:"Color",defaultValue:{r:.5,g:.5,b:.5}},material0:{type:"Plug",plug:"Material",label:"Material ID 0"},material1:{type:"Plug",plug:"Material",label:"Material ID 1"},material2:{type:"Plug",plug:"Material",label:"Material ID 2"},material3:{type:"Plug",plug:"Material",label:"Material ID 3"},material4:{type:"Plug",plug:"Material",label:"Material ID 4"},material5:{type:"Plug",plug:"Material",label:"Material ID 5"},material6:{type:"Plug",plug:"Material",label:"Material ID 6"},material7:{type:"Plug",plug:"Material",label:"Material ID 7"},material8:{type:"Plug",plug:"Material",label:"Material ID 8"},material9:{type:"Plug",plug:"Material",label:"Material ID 9"},material10:{type:"Plug",plug:"Material",label:"Material ID 10"},material11:{type:"Plug",plug:"Material",label:"Material ID 11"},material12:{type:"Plug",plug:"Material",label:"Material ID 12"},material13:{type:"Plug",plug:"Material",label:"Material ID 13"},material14:{type:"Plug",plug:"Material",label:"Material ID 14"},material15:{type:"Plug",plug:"Material",label:"Material ID 15"},material16:{type:"Plug",plug:"Material",label:"Material ID 16"},material17:{type:"Plug",plug:"Material",label:"Material ID 17"},material18:{type:"Plug",plug:"Material",label:"Material ID 18"},material19:{type:"Plug",plug:"Material",label:"Material ID 19"},material20:{type:"Plug",plug:"Material",label:"Material ID 20"},material21:{type:"Plug",plug:"Material",label:"Material ID 21"},material22:{type:"Plug",plug:"Material",label:"Material ID 22"},material23:{type:"Plug",plug:"Material",label:"Material ID 23"},material24:{type:"Plug",plug:"Material",label:"Material ID 24"},material25:{type:"Plug",plug:"Material",label:"Material ID 25"},material26:{type:"Plug",plug:"Material",label:"Material ID 26"},material27:{type:"Plug",plug:"Material",label:"Material ID 27"},material28:{type:"Plug",plug:"Material",label:"Material ID 28"},material29:{type:"Plug",plug:"Material",label:"Material ID 29"},multiID:{type:"Boolean",label:"Is MultiID",defaultValue:!0}}},f={schema:{visMatZipFile:{type:"File",hidden:!0},viewColor:{type:"Color",defaultValue:{r:.94,g:.94,b:.94},label:"Viewport Color"}}};e.a={Material:n,Physical:i,MaterialReference:a,Reference:o,EnvironmentMap:s,CubeMap:u,Standard:c,ProxyReference:l,MultiID:h,"vray/VRmat":f}},function(t,e,r){"use strict";var n=function(t){return"Camera"===t.get("type")},i=function(t){return"Renderer"===t.get("type")},a={schema:{activated:{label:"Activated",type:"Boolean",defaultValue:!0},filename:{label:"Filename",type:"Text",defaultValue:null},fileFormat:{label:"File Format",type:"Text",defaultValue:null},over_res:{label:"On",type:"Boolean",defaultValue:!1},over_res_x:{label:"Image Width",type:"Number",defaultValue:1280,isInteger:!0},over_res_y:{label:"Image Height",type:"Number",defaultValue:720,isInteger:!0},render_cam:{type:"Node",label:"Camera",filter:n},render_red:{type:"Node",label:"Renderer",filter:i}}};e.a={Pass:a}},function(t,e,r){"use strict";var n={schema:{autoRotate:{label:"Auto-Rotate Camera",type:"Boolean",defaultValue:!1},autoRotateNode:{label:"Rotate Node",type:"Node"},autoRotateSpeed:{label:"Rotate Speed (seconds)",type:"Number",minValue:1,maxValue:60,defaultValue:12},autoRotateDirection:{label:"Rotate Direction",type:"Options",values:["-","+"],labels:["Clockwise","Counter-clockwise"],defaultValue:"-"},camera:{label:"Camera",type:"Node"},constraintCameraY:{label:"Constrain Camera to Positive Y",type:"Boolean",defaultValue:!1},orbitTarget:{label:"Orbit Target",type:"Node"},orbitMode:{label:"Orbit Mode",type:"Options",values:["gyroscope","trackball","firstPerson"],labels:["Gyropscope","Trackball","First Person"],defaultValue:"gyroscope"},overrideNavigation:{label:"Override Camera Orbit Mode",type:"Boolean",defaultValue:!0},vrMode:{label:"VR Mode",type:"Options",values:["firstperson","orbit"],labels:["1st Person","Orbit"],defaultValue:"firstperson"},vrCamera:{label:"VR Camera",type:"Node"},toneMapStyle:{label:"Style",type:"Options",values:["Linear","Reinhard","Cineon","Filmic"],defaultValue:"Linear"},toneMapExposureGain:{label:"Exposure Gain",type:"Number",defaultValue:1,minValue:0,maxValue:20,step:.1},toneMapWhitePoint:{label:"White Point",type:"Number",defaultValue:4,minValue:0,maxValue:20,step:.1},dofPass:{label:"Enabled",type:"Boolean",defaultValue:!1},dofMaxBlur:{label:"Max Blur",type:"Number",defaultValue:10,minValue:0,maxValue:100,step:.1},saoPass:{label:"Enabled",type:"Boolean",defaultValue:!1},saoIntensity:{label:"Intensity",type:"Number",defaultValue:1,minValue:0,maxValue:1e3,step:.1},saoScale:{label:"Scale",type:"Number",defaultValue:24,minValue:0,maxValue:1e3,step:.1},bloomPass:{label:"Enabled",type:"Boolean",defaultValue:!1},bloomThreshold:{label:"Luminance Threshold",type:"Number",defaultValue:.9,minValue:0,maxValue:1,step:.1},reflectiveFloor:{label:"Enabled",type:"Boolean",defaultValue:!1},reflectiveFloorWidth:{label:"Width",type:"Number",defaultValue:1,minValue:0,maxValue:1e3,step:1},reflectiveFloorRoughness:{label:"Roughness",type:"Number",defaultValue:0,minValue:0,maxValue:10,step:.1},reflectiveFloorMetallic:{label:"Metallic",type:"Number",defaultValue:0,minValue:0,maxValue:1,step:.1},reflectiveFloorFade:{label:"Fade",type:"Number",defaultValue:0,minValue:0,maxValue:1e4,step:.1},reflectiveFloorHeight:{label:"Height",type:"Number",defaultValue:0,minValue:-100,maxValue:100,step:.1},reflectiveFloorOpacity:{label:"Opacity",type:"Number",defaultValue:1,minValue:0,maxValue:1,step:.1},reflectiveFloorFresnel:{label:"Fresnel Strength",type:"Number",defaultValue:1,minValue:-1,maxValue:1,step:.1},reflectiveFloorExcludeServer:{label:"Exclude on Server",type:"Boolean",defaultValue:!1},configurator:{label:"Configurator",type:"String",hidden:!0,defaultValue:""},gravity:{label:"Gravity",type:"Vec3",step:1,defaultValue:[0,-9.8,0]},shadowType:{label:"Quality",type:"Options",values:[0,1,2,3],labels:["Basic","Medium","High","Ultra"],defaultValue:2}}};e.a={Player:n}},function(t,e,r){"use strict";var n=r(13),i=(r.n(n),r(337)),a=i.a.AxisTypes,o={schema:{defaultAxis:{label:"Default Axis",type:"Options",display:"Radio",defaultValue:a.Z,labels:["X","Y","Z"],values:[a.X,a.Y,a.Z]},bendAngle:{label:"Angle",type:"Number",defaultValue:45,step:1,minValue:-360,maxValue:360,animatable:!0},rotation:{label:"Bend Rotation",type:"Vec3",defaultValue:new n.Vector3(0,0,0),animatable:!0},translation:{label:"Bend Pivot",type:"Vec3",defaultValue:new n.Vector3(0,0,0),animatable:!0},fixedEndsEnabled:{label:"Fixed Ends",type:"Boolean",defaultValue:!1,animatable:!1}},update:function(t,e){if(!e.mesh)return e;var n=t.defaultAxis,a=t.bendAngle,o=t.rotation,s=t.translation,u=t.fixedEndsEnabled;return o.multiplyScalar(-1),s.multiplyScalar(-1),e.mesh=r.i(i.a)(e.mesh,n,a,o,s,u),e}};e.a=o},function(t,e,r){"use strict";var n=r(338),i={label:"Channel",type:"Text",name:"Channel"},a={label:"Weight",type:"Number",name:"Weight",minValue:-1,maxValue:10,step:.05,defaultValue:0},o={schema:function(t){for(var e={},r=0;r<t;++r)e["chan"+r]=i,e["beta"+r]=a;return e}(4),update:function(t,e){var i=e.mesh;if(!i)return e;for(var a=[],o=[],s=0;s<4;++s){var u=t["chan"+s],l=t["beta"+s];u&&l&&(a.push(u),o.push(l))}return i.blendShapes&&(e.mesh=r.i(n.a)(i,a,o)),e}};e.a=o},function(t,e,r){"use strict";var n=r(193),i={schema:{bsChannel:{label:"Channel",type:"Text",defaultValue:"shape0"},bsShape:{label:"Shape",type:"Plug",plug:"PolyMesh"}},update:function(t,e){var r=e.mesh;if(!r)return e;var i=t.bsChannel,a=t.bsShape.mesh;if(i.length&&a){var o=a.positions.values;if(r.positions.values.length===o.length){var s=r.normalMap.values,u=a.normalMap.values;s&&u&&s.length===u.length||(u=null);var l=r.blendShapes;l||(l=r.blendShapes={}),l[i]=new n.a(o,u,null)}else console.log("The Blend Shape cannot be assigned because the number of vertices does not match with the original shape")}return e}};e.a=i},function(t,e,r){"use strict";var n=r(351),i={schema:{depth:{type:"Number",label:"Depth",defaultValue:1,step:.1,minValue:0,animatable:!0},width:{type:"Number",label:"Width",defaultValue:1,step:.1,minValue:0,animatable:!0},height:{type:"Number",label:"Height",defaultValue:1,step:.1,minValue:0,animatable:!0},depthSegments:{type:"Number",label:"Depth Segments",defaultValue:1,minValue:1,isInteger:!0,animatable:!0,i18n:{en:{},xn:{label:"XXX"},hn:{label:"DX"}}},widthSegments:{type:"Number",label:"Width Segments",defaultValue:1,minValue:1,isInteger:!0,animatable:!0},heightSegments:{type:"Number",label:"Height Segments",defaultValue:1,minValue:1,isInteger:!0,animatable:!0}},update:function(t,e){var i=t.width,a=t.height,o=t.depth,s=t.widthSegments,u=t.heightSegments,l=t.depthSegments;e.mesh=r.i(n.a)(i,a,o,s,u,l)}};e.a=i},function(t,e,r){"use strict";var n=r(352),i={schema:{radius:{type:"Number",label:"Radius",defaultValue:.5,minValue:.1,step:.1},height:{type:"Number",label:"Height",defaultValue:1,minValue:.1,step:.1},radiusSegments:{label:"Radial Segments",type:"Integer",defaultValue:12,minValue:4,maxValue:100},heightSegments:{label:"Height Segments",type:"Integer",defaultValue:10,minValue:1,maxValue:100}},update:function(t,e){var i=t.radius,a=t.height,o=t.radiusSegments,s=t.heightSegments;e.mesh=r.i(n.a)(i,a,o,s)}};e.a=i},function(t,e,r){"use strict";var n=r(198),i={schema:{base:{type:"Number",label:"Base Radius",defaultValue:.5,minValue:0,step:.1,animatable:!0},height:{type:"Number",label:"Height",defaultValue:1,minValue:0,step:.1,animatable:!0},radiusSegments:{label:"Radial Segments",type:"Integer",defaultValue:12,minValue:3,maxValue:200,animatable:!0},heightSegments:{label:"Height Segments",type:"Integer",defaultValue:1,minValue:1,maxValue:200,animatable:!0},openEnded:{label:"Open Base",type:"Boolean",defaultValue:!1,animatable:!0}},update:function(t,e){var i=t.base,a=t.height,o=t.radiusSegments,s=t.heightSegments,u=t.openEnded;e.mesh=r.i(n.a)(0,i,a,o,s,u)}};e.a=i},function(t,e,r){"use strict";var n=r(198),i={schema:{radiusTop:{type:"Number",label:"Top Radius",defaultValue:.5,minValue:0,step:.1,animatable:!0},radiusBottom:{type:"Number",label:"Bottom Radius",defaultValue:.5,minValue:0,step:.1,animatable:!0},height:{type:"Number",label:"Height",defaultValue:1,minValue:0,step:.1,animatable:!0},radiusSegments:{label:"Radial Segments",type:"Integer",defaultValue:24,minValue:3,maxValue:200,animatable:!0},heightSegments:{label:"Height Segments",type:"Integer",defaultValue:1,minValue:1,maxValue:200,animatable:!0},openEnded:{label:"Open Ended",type:"Boolean",defaultValue:!1,animatable:!0}},update:function(t,e){var i=t.radiusTop,a=t.radiusBottom,o=t.height,s=t.radiusSegments,u=t.heightSegments,l=t.openEnded;e.mesh=r.i(n.a)(i,a,o,s,u,l)}};e.a=i},function(t,e,r){"use strict";var n=r(355),i={schema:{radius:{type:"Number",label:"Radius",defaultValue:.5,minValue:0,step:.1,animatable:!0},segments:{type:"Integer",label:"Segments",defaultValue:12,minValue:3,maxValue:200,animatable:!0},thetaStart:{label:"Theta Start",type:"Number",defaultValue:0,minValue:0,maxValue:360,step:10,animatable:!0},thetaLength:{label:"Theta Length",type:"Number",defaultValue:360,minValue:0,maxValue:360,step:10,animatable:!0},removeDuplicate:{label:"Remove Duplicate Vertices",type:"Boolean",defaultValue:!1,hidden:!0}},update:function(t,e){var i=t.radius,a=t.segments,o=t.thetaStart,s=t.thetaLength;e.mesh=r.i(n.a)(i,a,o,s)}};e.a=i},function(t,e,r){"use strict";var n={schema:{geometry:{label:"Mesh",plug:"PolyMesh",type:"Plug"}},update:function(t,e){e.mesh=t.geometry&&t.geometry.mesh}};e.a=n},function(t,e,r){"use strict";var n=r(142),i=r(32),a=r(87),o={schema:{geometry:{type:"File",label:"PolyMesh Geometry File"}},update:function(t,e,o){var s=(o.node,o.store),u=o.properties,l=o.previousResult,c=o.loaded,h=u.visible,f=t.geometry,d=h||u.prefetch&&c,p=d&&f,m=p&&s.hasApi()&&s.dispatch(r.i(i.j)(p)),g=m&&r.i(n.a)(m,p);return g&&!g.normalMap&&(g=r.i(a.c)(g)),e.mesh=g,e.previousMesh=l&&l.mesh,e}};e.a=o},function(t,e,r){"use strict";var n=r(356),i={schema:{width:{label:"Width",type:"Number",defaultValue:4,minValue:0,step:.1,animatable:!0},height:{label:"Height",type:"Number",defaultValue:4,minValue:0,step:.1,animatable:!0},widthSegments:{type:"Number",label:"Width Segments",defaultValue:1,minValue:1,isInteger:!0,animatable:!0},heightSegments:{type:"Number",label:"Height Segments",defaultValue:1,minValue:1,isInteger:!0,animatable:!0}},update:function(t,e){var i=t.width,a=t.height,o=t.widthSegments,s=t.heightSegments;e.mesh=r.i(n.a)(i,a,o,s)}};e.a=i},function(t,e,r){"use strict";var n=r(142),i=r(32),a=r(87),o={schema:{binary:{type:"Binary",label:"Binary Geometry File"},reducedBinary:{type:"Binary",label:"Reduced Binary Geometry File"},operatorDisplay:{type:"Number",defaultValue:1,label:"Operator Display Type"},nbLevel:{type:"Number",defaultValue:1},level0:{type:"Binary",label:"Binary Geometry File"},level1:{type:"Binary",label:"Binary Geometry File"},level2:{type:"Binary",label:"Binary Geometry File"},level3:{type:"Binary",label:"Binary Geometry File"},level4:{type:"Binary",label:"Binary Geometry File"}},update:function(t,e,o){var s=(o.node,o.store),u=o.properties,l=o.previousResult,c=o.loaded,h=u.visible,f=t.binary,d=h||u.prefetch&&c,p=d&&f&&s.hasApi()&&r.i(i.j)(f)(s),m=p&&r.i(n.a)(p,f);m&&!m.normalMap&&(m=r.i(a.c)(m)),e.mesh=m,e.previousMesh=l&&l.mesh}};e.a=o},function(t,e,r){"use strict";var n=r(357),i=r(9),a={schema:{phiStart:{type:"Number",label:"Phi Start",defaultValue:0,step:1,minValue:0,maxValue:360},phiLength:{type:"Number",label:"Phi End",defaultValue:360,step:1,minValue:0,maxValue:360},segments:{type:"Number",label:"Segments",defaultValue:50,minValue:1,isInteger:!0},otherPolyMesh:{type:"Plug",plug:"PolyMesh",label:"Other PolyMesh"}},update:function(t,e,a){var o=a.getWorldTransform,s=a.node,u=t.phiStart,l=t.phiLength,c=t.segments,h=t.otherPolyMesh;if(!h)return e.mesh=new i.a,e;var f=o(s.id),d=o(h.id);return e.mesh=r.i(n.a)(h.mesh,c,u,l,f,d),e}};e.a=a},function(t,e,r){"use strict";var n=r(346),i=r(1),a=(r.n(i),{schema:{center:{label:"Local Center",type:"Vec3",defaultValue:new i.Vector3(0,0,0),step:.01,animatable:!0},rotation:{label:"Local Rotation",type:"Vec3",defaultValue:new i.Vector3(0,0,0),step:1,animatable:!0},shearFactor:{label:"Shear Factor",type:"Number",step:"0.1",defaultValue:"0",animatable:!0},vertexIndices:{label:"Selection",type:"TextArea",defaultValue:"",display:"indexStyle"}},update:function(t,e){if(!e.mesh)return e;var i=t.center,a=t.rotation,o=t.shearFactor,s=t.vertexIndices;return e.mesh=r.i(n.a)(e.mesh,i,a,o,s),e}});e.a=a},function(t,e,r){"use strict";function n(t,e,r,n){if(!t||!t.skinning)return t;var i=t.skinning,u=i.applyTransforms(t.positions.values,e,r,n),l=new o.a({faceRangeOffsets:t.faceRangeOffsets,faceValueIndices:t.positions.faceValueIndices,values:u}),c=a()({},t,{positions:l});return new s.a(c)}var i=r(2),a=r.n(i),o=r(7),s=r(9),u={schema:{boneNodeList:{type:"NodeList",label:"Select Bones",plug:"Bone"},optionalRootBone:{type:"Node",label:"Optional Root Bone",defaultValue:null,filter:function(t){return t.isBone()}}},update:function(t,e,r){var i=r.node,a=r.getWorldTransform,o=a(i.id),s=t.boneNodeList,u=t.optionalRootBone,l=-1;if(0===s.length)return e;var c=s.map(function(t){return a(t)});if(u)for(var h=0,f=s.length;h<f;h++){var d=s[h];if(d==u){l=h;break}}var p=e.mesh,m=o;e.mesh=n(p,m,c,l)}};e.a=u},function(t,e,r){"use strict";var n=r(41),i=r.n(n),a=r(13),o=(r.n(a),r(196)),s=r(140),u=r(194),l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=t.split(","),r=[],n=void 0,a=void 0,o=void 0,s=void 0,u=void 0;for(n=0;n<e.length;n++)if(u=e[n],-1!==u.indexOf("-")){var l=u.split("-"),c=i()(l,2);for(o=c[0],s=c[1],o=Number(o),s=Number(s),a=o;a<=s;a++)r.push(a)}else r.push(Number(u));return r},c=new a.Vector3(0,0,-1),h={name:"Slice",label:"Slice / Cut",type:"Edit",schema:{center:{label:"Local Center",type:"Vec3",defaultValue:new a.Vector3(0,0,0),step:.01,animatable:!0},rotation:{label:"Local Rotation",type:"Vec3",defaultValue:new a.Vector3(0,0,0),step:1,animatable:!0},_rotationAxis:{label:"Rotation",type:"Vec3",defaultValue:new a.Vector3(0,0,0),step:1,hidden:!0},axis:{label:"Axis",type:"Options",display:"Dropdown",labels:["X","Y","Z"],values:[1,2,3],defaultValue:1},flip:{label:"Flip",type:"Boolean",defaultValue:!1},cut:{label:"Cut",type:"Boolean",defaultValue:!1},indices:{label:"Selection",type:"TextArea",defaultValue:"",display:"indexStyle"}},update:function(t,e,n){var i=n.node,a=e.mesh;if(!a)return e;var h=t.center,f=t.rotation,d=t.axis,p=t.flip,m=t.cut,g=t.indices,v=g?l(g):null,y=g?new s.a(v,s.a.Faces):null,M=i.plugs.Transform[0].rotateOrder,w=r.i(u.a)(f,M,d,h,c);return e.mesh=r.i(o.a)(a,w,m,p,y),e}};e.a=h},function(t,e,r){"use strict";var n=r(347),i={schema:{axis:{label:"Direction",type:"Vec3",step:.1,defaultValue:{x:1,y:1,z:0},animatable:!0}},update:function(t,e,i){var a=(i.store,t.axis.normalize()),o=e.mesh;e.mesh=r.i(n.a)(o,a)}};e.a=i},function(t,e,r){"use strict";var n=r(358),i={schema:{radius:{label:"Radius",type:"Number",defaultValue:.5,minValue:0,step:.1,animatable:!0},widthSegments:{label:"Longitudinal Segments",type:"Integer",defaultValue:24,minValue:3,maxValue:200,step:1,animatable:!0},heightSegments:{label:"Latitudinal Segments",type:"Integer",defaultValue:24,minValue:3,maxValue:200,step:1,animatable:!0},phiStart:{label:"Phi Start",type:"Number",defaultValue:0,minValue:0,maxValue:360,step:10,animatable:!0},phiLength:{label:"Phi Length",type:"Number",defaultValue:360,minValue:0,maxValue:360,step:10,animatable:!0},thetaStart:{label:"Theta Start",type:"Number",defaultValue:0,minValue:0,maxValue:180,step:10,animatable:!0},thetaLength:{label:"Theta Length",type:"Number",defaultValue:180,minValue:0,maxValue:180,step:10,animatable:!0}},update:function(t,e){var i=t.radius,a=t.widthSegments,o=t.heightSegments,s=t.phiStart,u=t.phiLength,l=t.thetaStart,c=t.thetaLength;e.mesh=r.i(n.a)(i,a,o,s,u,l,c)}};e.a=i},function(t,e,r){"use strict";var n=r(348),i={X:1,Y:2,Z:3},a={schema:{axis:{label:"Axis",type:"Options",display:"Radio",defaultValue:i.X,labels:["X","Y","Z"],values:[i.X,i.Y,i.Z]},margin:{label:"Margin",type:"Number",defaultValue:0,step:.1,minValue:0,animatable:!0},stretchDistance:{label:"Stretch Distance",type:"Number",defaultValue:0,step:.1,animatable:!0}},update:function(t,e){if(!e.mesh)return e;var i=t.axis,a=t.margin,o=t.stretchDistance,s=["x","y","z"];e.mesh=r.i(n.a)(e.mesh,s[i-1],a,o)}};e.a=a},function(t,e,r){"use strict";var n=r(13),i=(r.n(n),r(350)),a=r(194),o=new n.Vector3(0,0,1),s={name:"Symmetry",label:"Symmetry / Mirror",schema:{center:{label:"Local Center",type:"Vec3",defaultValue:new n.Vector3(0,0,0),step:.1,animatable:!0},rotation:{label:"Local Rotation",type:"Vec3",defaultValue:new n.Vector3(0,0,0),step:1,animatable:!0},axis:{label:"Axis",type:"Options",display:"Dropdown",labels:["X","Y","Z"],values:[1,2,3],defaultValue:1},flip:{label:"Flip Mirroring",type:"Boolean",defaultValue:!0},slice:{label:"Slice",type:"Boolean",defaultValue:!1},copyMirror:{label:"Copy and Mirror",type:"Boolean",defaultValue:!1}},update:function(t,e,s){var u=s.node,l=e.mesh;if(!l)return e;var c=t.center,h=t.rotation,f=t.axis,d=t.flip,p=t.slice,m=t.copyMirror,g=u.plugs.Transform[0].rotateOrder,v=(new n.Vector3).copy(o);d&&v.negate();var y=r.i(a.a)(h,g,f,c,v);return e.mesh=r.i(i.a)(l,y,m,p),e}};e.a=s},function(t,e,r){"use strict";var n=r(340),i={schema:{},update:function(t,e){return e.mesh?(e.mesh=r.i(n.a)(e.mesh),e):e}};e.a=i},function(t,e,r){"use strict";var n=r(359),i={schema:{radius:{label:"Radius",type:"Number",defaultValue:.3,minValue:0,step:.1,animatable:!0},tube:{label:"Tube Radius",type:"Number",defaultValue:.2,minValue:0,step:.1,animatable:!0},radialSegments:{label:"Longitudinal Segments",type:"Integer",defaultValue:24,minValue:3,step:1,animatable:!0},tubularSegments:{label:"Latitudinal Segments",type:"Integer",defaultValue:24,minValue:3,step:1,animatable:!0},phiStart:{label:"Phi Start",type:"Number",defaultValue:0,minValue:0,maxValue:360,step:10,animatable:!0},phiLength:{label:"Phi Length",type:"Number",defaultValue:360,minValue:0,maxValue:360,step:10,animatable:!0},thetaStart:{label:"Theta Start",type:"Number",defaultValue:0,minValue:0,maxValue:360,step:10,animatable:!0},thetaLength:{label:"Theta Length",type:"Number",defaultValue:360,minValue:0,maxValue:360,step:10,animatable:!0}},update:function(t,e){var i=t.radius,a=t.tube,o=t.radialSegments,s=t.tubularSegments,u=t.phiStart,l=t.phiLength,c=t.thetaStart,h=t.thetalength;e.mesh=r.i(n.a)(i,a,o,s,u,l,c,h)}};e.a=i},function(t,e,r){"use strict";var n=r(2),i=r.n(n),a=r(24),o=(r.n(a),r(1)),s=(r.n(o),r(141)),u=r(139),l={schema:{translation:{label:"Translation",type:"Vec3",step:.1,defaultValue:{x:0,y:0,z:0},animatable:!0},rotation:{label:"Rotation",type:"Vec3",step:1,defaultValue:{x:0,y:0,z:0},animatable:!0,hidden:!0},scale:{label:"Scale",type:"Vec3",minValue:1e-4,step:.1,defaultValue:{x:1,y:1,z:1},animatable:!0,hidden:!0},updateNormals:{label:"Update Normals",type:"Boolean",defaultValue:!0,hidden:!0},vertexIndices:{label:"Selection",type:"String",defaultValue:""}},update:function(t,e){var n=e.mesh;if(!n)return e;for(var a=(Math.random(),s.e.Vertices,r.i(u.a)(t.vertexIndices)),l=new s.e(a,s.e.Vertices),c=new s.b(s.a.resolveMap(n,"positions")),h=c.values.clone(),f=s.e.getIndices(n,s.e.Vertices,"positions",l),d=(new o.Euler).setFromVector3(t.rotation,"ZYX"),p=new o.Vector3,m=0;m<f.length;++m){var g=f[m];h.getAt(g,p),p.multiply(t.scale),p.applyEuler(d),h.setAt(g,p.add(t.translation))}c.values=h;var v=i()({},n,{positions:c}),y=new s.c(v);e.mesh=y}};e.a=l},function(t,e,r){"use strict";function n(t,e){e=e||{};var r=e.rotation.multiplyScalar(180/Math.PI)||new d.Vector3,n=e.scale||new d.Vector3(1,1,1),l=e.center||new d.Vector3,c=void 0!==e.uvProjectionMode?e.uvProjectionMode:0,h=void 0!==e.alignmentAxis?e.alignmentAxis:1,m=void 0!==e.mapChannel?e.mapChannel:"default",w=void 0!==e.uTile?e.uTile:1,b=void 0!==e.vTile?e.vTile:1,T=e.selectedFaces;T.length||(T=[].concat(f()(Array(t.faceRangeOffsets.length-1).keys())));var E=(new d.Quaternion).setFromEuler((new d.Euler).setFromVector3(r,"ZYX"));if(e.worldSpace){var S=new d.Vector3,_=new d.Quaternion,A=new d.Vector3;(new d.Matrix4).getInverse(e.nodeTransform).decompose(A,_,S),n.multiply(S),E.premultiply(_)}var D=(new d.Matrix4).makeRotationFromQuaternion(E),N=(new d.Matrix4).getInverse(D),I=t.faceRangeOffsets,L=t.positions.faceValueIndices,C=t.positions.values,O=v.a.resolveMap(t,"uvMaps."+m)||new g.a,R=new Uint32Array(L.length);R.set(O.faceValueIndices);for(var z=[],j=new d.Vector3,P=new d.Vector3,U=new d.Vector3,B=void 0,V=0,F=0,k=O.values.length,G=0;G<T.length;G++){V=I[T[G]],F=I[T[G]+1],U.multiplyScalar(0);for(var Y=V;Y<F;Y++){var H=1+Y;H>=F&&(H=V),C.getAt(L[Y],j),C.getAt(L[H],P),U.x+=(j.y-P.y)*(j.z+P.z),U.y+=(j.z-P.z)*(j.x+P.x),U.z+=(j.x-P.x)*(j.y+P.y)}U.normalize();for(var Q=V;Q<F;Q++){switch(B=new d.Vector2,C.getAt(L[Q],j),j.sub(l),j.applyMatrix4(N),c){case x.Planar:o(j,h,n,B);break;case x.Box:a(j,U,n,B);break;case x.Cylindrical:s(j,h,n,B);break;case x.Spherical:u(j,h,n,B);break;default:B.set(0,0)}1!==w&&(B.x*=w),1!==b&&(B.y*=b),R[Q]=k++,z.push(B)}}for(var W=new y.a(d.Vector2,O.values.length+z.length),X=0;X<W.length;++X)X<O.values.length?W.setAt(X,O.values.getAt(X)):W.setAt(X,z[X-O.values.length]);var q=new p.a(t),Z=new g.a({faceRangeOffsets:I,faceValueIndices:R,values:W});return c!==x.Cylindrical&&c!==x.Spherical||i(Z,T,c,w,b),q.uvMaps||(q.uvMaps=new M.a),q.uvMaps.set(m,Z),q}function i(t,e,r,n,i){for(var a=void 0,o=.4*n,s=void 0,u=void 0,l=new d.Vector2,c=new d.Vector2,h=void 0,f=void 0,p=0,m=e.length;p<m;p++){h=t.faceRangeOffsets[e[p]],f=t.faceRangeOffsets[e[p]+1],s=!1;for(var g=h;g<f;g++){u=g+1<f?g+1:h,t.values.getAt(t.faceValueIndices[g],l),t.values.getAt(t.faceValueIndices[u],c),a=Math.abs(l.x-c.x);var v=3===r&&(l.y<w||l.y>i-w);if(a>o&&!v)if(l.x<c.x)l.x+=n,t.values.setAt(t.faceValueIndices[g],l),0===p&&(s=!0);else{if(s)continue;c.x+=n,t.values.setAt(t.faceValueIndices[u],c)}}}}function a(t,e,r,n){var i=0,a=0,o=t.x,s=t.y,u=t.z,l=Math.abs(e.x),c=Math.abs(e.y),h=Math.abs(e.z);return l>=c&&l>=h&&(i=-u/r.z+.5,a=s/r.y+.5),c>=l&&c>=h&&(i=o/r.x+.5,a=-u/r.z+.5),h>=l&&h>=c&&(i=o/r.x+.5,a=s/r.y+.5),e.x<0&&(i=1-i),e.y<0&&(i=1-i),e.z<0&&(i=1-i),n.set(i,a),n}function o(t,e,r,n){var i=0===e?-t.z:t.x,a=1===e?-t.z:t.y;return i=i/r.x+.5,a=a/r.y+.5,n.set(i,a),n}function s(t,e,r,n){var i=void 0,a=void 0;switch(e){case 0:i=l(t.z/r.z,t.x/r.x,-t.y/r.y),a=-t.x/r.x+.5;break;case 1:i=l(t.x/r.x,t.y/r.y,t.z/r.z),a=t.y/r.y+.5;break;case 2:i=l(-t.x/r.x,t.z/r.z,-t.y/r.y),a=-t.z/r.z+.5}return i/=2*Math.PI,n.set(i,a),n}function u(t,e,r,n){var i=void 0,a=void 0,o=void 0;switch(e){case 0:i=c(t.z/r.z,t.x/r.x,-t.y/r.y);break;case 1:i=c(t.x/r.x,-t.y/r.y,t.z/r.z);break;case 2:i=c(-t.x/r.x,t.z/r.z,-t.y/r.y)}return o=i.lon/(2*Math.PI),a=.5-i.lat/Math.PI,n.set(o,a),n}function l(t,e,r){var n=void 0;return Math.abs(t)<w&&Math.abs(r)<w?n=0:(n=Math.atan2(t,r))<0&&(n+=2*Math.PI),n}function c(t,e,r){var n=void 0,i=void 0;if(Math.abs(t)<w&&Math.abs(r)<w)n=0,i=Math.abs(e)<w?0:e<0?-Math.PI/2:Math.PI/2;else{n=Math.atan2(t,r),n<0&&(n+=2*Math.PI);var a=Math.sqrt(t*t+r*r);i=Math.atan2(e,a)}return{lon:n,lat:i}}var h=r(261),f=r.n(h),d=r(1),p=(r.n(d),r(9)),m=r(139),g=r(7),v=r(33),y=r(4),M=r(18),w=1e-6,x={Planar:0,Box:1,Cylindrical:2,Spherical:3},b={schema:{mWidth:{type:"Number",label:"Width",defaultValue:1,step:.1,minValue:0,animatable:!0},mHeight:{type:"Number",label:"Height",defaultValue:1,step:.1,minValue:0,animatable:!0},mLength:{type:"Number",label:"Length",defaultValue:1,step:.1,minValue:0,animatable:!0},center:{label:"Center",type:"Vec3",step:.1,defaultValue:new d.Vector3(0,0,0),animatable:!0},rotation:{label:"Rotation",type:"Vec3",step:1,minValue:-360,maxValue:360,defaultValue:new d.Vector3(0,0,0),animatable:!0},uTile:{label:"U Tile",type:"Number",step:.1,defaultValue:1,animatable:!0},vTile:{label:"V Tile",type:"Number",step:.1,defaultValue:1,animatable:!0},uvProjectionMode:{label:"Projection",type:"Options",display:"Radio",values:[x.Planar,x.Box,x.Cylindrical,x.Spherical],labels:["Planar","Box","Cylindrical","Spherical"],defaultValue:x.Planar},xAxis:{label:"Align Local Axis",type:"Options",display:"Radio",values:[0,1,2,3],labels:["X","Y","Z","Average Normals"],defaultValue:1},uvMapChannel:{label:"UV Channel",type:"String",defaultValue:"default"},autoFit:{label:"Auto Fit",type:"Button"},autoAlign:{label:"Auto Align",type:"Button"},autoFitAlign:{label:"Best Fit",type:"Button"},autoCenter:{label:"Auto Center",type:"Button"},resetUVs:{label:"Reset",type:"Button"},worldRelative:{label:"Project in World Space",type:"Boolean",defaultValue:!1},indices:{label:"Selection",type:"TextArea",defaultValue:"",display:"indexStyle"}},update:function(t,e,i){var a=i.getWorldTransform,o=i.node,s=e.mesh;if(!s)return e;var u={};u.selectedFaces=r.i(m.a)(t.indices),u.uTile=t.uTile,u.vTile=t.vTile,u.uvProjectionMode=t.uvProjectionMode,u.alignmentAxis=t.xAxis,u.center=t.center,u.rotation=t.rotation,u.mapChannel=t.uvMapChannel,u.scale=new d.Vector3(t.mWidth,t.mHeight,t.mLength),u.worldSpace=t.worldRelative,u.worldSpace&&(u.nodeTransform=a(o.id,!0)),e.mesh=n(s,u)}};e.a=b},function(t,e,r){"use strict";function n(t,e,r,n,a,o){var s=new i.Matrix4;if(s.multiply((new i.Matrix4).makeTranslation(o.x,o.y,0)),s.multiply((new i.Matrix4).makeRotationZ(i.Math.degToRad(t))),r)s.multiply((new i.Matrix4).makeScale(n.x,n.y,0));else{var u=function(t){return 0==t?1:1/t};s.multiply((new i.Matrix4).makeScale(u(e.x),u(e.y),0))}return s.multiply((new i.Matrix4).makeTranslation(-o.x,-o.y,0)),s.multiply((new i.Matrix4).makeTranslation(a.x,a.y,0)),s}var i=r(1),a=(r.n(i),r(9)),o=r(7),s=r(4),u={Scale:0,Tiling:1},l={name:"UVTransform",label:"UV Transform",schema:{rotation:{label:"Rotation",type:"Number",step:.1,minValue:-360,maxValue:360,defaultValue:0,animatable:!0},scaleMode:{label:"Scale Mode",type:"Options",display:"Dropdown",labels:["Scale","Tiling"],values:[u.Scale,u.Tiling],defaultValue:u.Scale},tiling:{label:"Tiling",type:"Vec2",step:.1,defaultValue:new i.Vector2(1,1),animatable:!0},scale:{label:"Scale",type:"Vec2",step:.1,defaultValue:new i.Vector2(1,1),animatable:!0},translation:{label:"Translation",type:"Vec2",step:.1,defaultValue:new i.Vector2(0,0),animatable:!0},pivotCenter:{label:"Pivot Center",type:"Vec2",step:.1,defaultValue:new i.Vector2(0,0),animatable:!0},uvMapChannel:{label:"UV Channel",type:"String",defaultValue:"default"}},update:function(t,e){var r=e.mesh;if(!r)return e;var l=t.uvMapChannel||"default",c=r.uvMaps?r.uvMaps.byName[l]:null;if(!c)return e;for(var h=new i.Vector3,f=new i.Vector2,d=new s.a(i.Vector2,c.values.length),p=t.rotation,m=t.scaleMode,g=t.scale,v=t.tiling,y=t.translation,M=t.pivotCenter,w=n(p,v,m===u.Scale,g,y,M),x=0;x<c.values.length;x++)c.values.getAt(x,f),h.set(f.x,f.y,0),h.applyMatrix4(w),f.set(h.x,h.y),d.setAt(x,f);var b=new a.a(r),T=new o.a({faceRangeOffsets:r.faceRangeOffsets,faceValueIndices:c.faceValueIndices,values:d});b.uvMaps.set(l,T),e.mesh=b}};e.a=l},function(t,e,r){"use strict";var n=r(305),i=r(318),a=r(186),o=r(319),s=r(320),u=r(310),l=r(299),c=r(313),h=r(301),f=r(300),d=r(302),p=r(87),m=r(306),g=r(317),v=r(303),y=r(307),M=r(304),w=r(312),x=r(296),b=r(311),T=r(315),E=r(298),S=r(297),_=r(308),A=r(316),D=r(314),N=r(309);e.a={Mesh:n.a,MeshSmooth:a.a,Skin:u.a,TransformVertices:i.a,UVMap:o.a,UVTransform:s.a,Box:l.a,Sphere:c.a,Cone:h.a,Capsule:f.a,Cylinder:d.a,Normals:p.a,Plane:m.a,Torus:g.a,Disk:v.a,ProxyMesh:y.a,Instance:M.a,SortFacesByAxis:w.a,BlendShape:E.a,BlendDeformer:S.a,Revolve:_.a,BendDeformer:x.a,Slice:b.a,Symmetry:T.a,Tangents:A.a,Stretch:D.a,Shear:N.a}},function(t,e,r){"use strict";var n={schema:{doubleSided:{label:"Double Sided",type:"Boolean",defaultValue:!1},visible:{label:"Visible",type:"Boolean",defaultValue:!0,animatable:!0},prefetch:{label:"Pre-fetch mesh",type:"Boolean",defaultValue:!1},castShadow:{label:"Cast Shadow",type:"Boolean",defaultValue:!0},receiveShadow:{label:"Receive Shadow",type:"Boolean",defaultValue:!0},discardable:{label:"Discardable",type:"Boolean",defaultValue:!1},interactive:{label:"Interactive",type:"Boolean",defaultValue:!1},walkableInVR:{label:"Walkable",type:"Boolean",defaultValue:!1}}},i={schema:{prefetch:{label:"Pre-fetch Material",type:"Boolean",defaultValue:!1}}},a={schema:{prefetch:{label:"Pre-fetch Image",type:"Boolean",defaultValue:!1}}},o={hierarchyVisible:"Null",schema:{visible:{label:"Visible",type:"Boolean",defaultValue:!0,animatable:!0}},update:function(t,e,r){var n=(r.node,r.scene,t.sceneProperties&&"Enable"===t.sceneProperties.hierarchyVisibility);e.visible=!n||t.visible}},s=["Static","Kinematic","Dynamic"],u=["Box","Convex","Mesh"],l=["Bounding Box","Convex Hull","Mesh (Non-Dynamic)"],c={schema:{collisionShape:{label:"Collision Shape",type:"Options",display:"Dropdown",values:u,labels:l,defaultValue:"Convex"},motionType:{label:"Motion Type",type:"Options",display:"Dropdown",values:s,labels:s,defaultValue:"Dynamic"},mass:{label:"Mass",type:"Number",defaultValue:1,minValue:0,step:1},linearDamping:{label:"Linear Damping",type:"Number",defaultValue:0,minValue:0,maxValue:1,step:.1},angularDamping:{label:"Angular Damping",type:"Number",defaultValue:0,minValue:0,maxValue:1,step:.1},linearFactor:{label:"Linear Factor",type:"Vec3",defaultValue:[1,1,1]},angularFactor:{label:"Angular Factor",type:"Vec3",defaultValue:[1,1,1]},linearVelocity:{label:"Linear Velocity",type:"Vec3",defaultValue:[0,0,0]},angularVelocity:{label:"Angular Velocity",type:"Vec3",defaultValue:[0,0,0]},linearSleepingThreshold:{label:"Linear Sleep Threshold",type:"Number",defaultValue:.8,minValue:0,step:.1},angularSleepingThreshold:{label:"Angular Sleep Threshold",type:"Number",defaultValue:1,minValue:0,step:.1},friction:{label:"Friction",type:"Number",defaultValue:.5,minValue:0,step:.1},rollingFriction:{label:"Rolling Friction",type:"Number",defaultValue:0,minValue:0,step:.1},restitution:{label:"Bounce",type:"Number",defaultValue:0,minValue:0,maxValue:1,step:.1}}},h={schema:{visible:{label:"Visible",type:"Boolean",defaultValue:!0},orbitMode:{label:"Orbit Mode",type:"Options",values:["gyroscope","trackball","firstPerson"],labels:["Gyropscope","Trackball","First Person"],defaultValue:"gyroscope"},orbitTarget:{label:"Orbit Target",type:"Node"},constraintCameraY:{label:"Constrain Camera to Positive Y",type:"Boolean",defaultValue:!1},constrainCameraSphere:{label:"Constrain Camera Within Sphere",type:"Boolean",defaultValue:!1},maxZoom:{label:"Maximum Zoom",type:"Number",defaultValue:5,minValue:1}}},f={schema:{visible:{label:"Visible",type:"Boolean",defaultValue:!0,animatable:!0},renderable:{label:"Renderable",type:"Boolean",defaultValue:!0},selectable:{label:"Selectable",type:"Boolean",defaultValue:!0},overrideChildSelection:{label:"Override Child Selection",type:"Boolean",defaultValue:!0},configurator:{label:"Configurator",type:"String",hidden:!0,defaultValue:""}}},d={schema:{hierarchyVisibility:{label:"Hierarchical Visibility",type:"Options",values:["Enable","Disable"],labels:["Yes","No"]}}};e.a={Default:o,PolyMeshProperties:n,MaterialProperties:i,ImageProperties:a,RigidBodyProperties:c,CameraProperties:h,ModelProperties:f,SceneProperties:d}},function(t,e,r){"use strict";var n={schema:{format:{type:"Options",defaultValue:"jpeg",values:["jpeg","png"],labels:["JPEG","PNG"],label:"Output Format"},v2renderer:{type:"Boolean",defaultValue:!1,label:"v2 renderer"}}};e.a={WebGLRenderer:n}},function(t,e,r){"use strict";function n(t,e){return 1===t?new s.Vector3(e?-1:1,0,0):2===t?new s.Vector3(0,e?-1:1,0):new s.Vector3(0,0,e?-1:1)}function i(t,e){var r=new s.Quaternion;return 1===t?r.setFromAxisAngle(new s.Vector3(0,1,0),e?-Math.PI/2:Math.PI/2):2===t?r.setFromAxisAngle(new s.Vector3(1,0,0),e?Math.PI/2:-Math.PI/2):3===t&&r.setFromAxisAngle(new s.Vector3(0,1,0),e?0:Math.PI),r}var a=r(2),o=r.n(a),s=r(1),u=(r.n(s),r(5)),l={schema:{translation:{label:"Translation",type:"Vec3",step:.1,defaultValue:{x:0,y:0,z:0},animatable:!0},rotation:{label:"Rotation",type:"Vec3",step:1,defaultValue:{x:0,y:0,z:0},animatable:!0},scale:{label:"Scale",type:"Vec3",step:.01,defaultValue:{x:1,y:1,z:1},animatable:!0},shear:{label:"Shear",type:"Vec3",step:.1,defaultValue:{x:0,y:0,z:0},animatable:!0},rotateOrder:{label:"Rotate Order",type:"Options",display:"Dropdown",values:["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],defaultValue:"ZYX"},preRotation:{label:"Pre-Rotation",type:"Vec3",step:1,defaultValue:{x:0,y:0,z:0}},rotatePivotOffset:{label:"Rotate Pivot Offset",type:"Vec3",step:.1,defaultValue:{x:0,y:0,z:0}},scalePivotOffset:{label:"Scale Pivot Offset",type:"Vec3",step:.1,defaultValue:{x:0,y:0,z:0}},localRotatePivot:{label:"Local Rotate Pivot",type:"Vec3",step:.1,defaultValue:{x:0,y:0,z:0}},localScalePivot:{label:"Local Scale Pivot",type:"Vec3",step:.1,defaultValue:{x:0,y:0,z:0}}},update:function(t,e){e.transform=r.i(u.i)(t)}},c={schema:{target:{label:"LookAt Target",type:"Plug",plug:"Transform"},orientation:{label:"Orientation",type:"Vec3",defaultValue:{x:0,y:0,z:0},animatable:!0},lookAtAxis:{label:"Look Axis",type:"Options",display:"Dropdown",defaultValue:"Z",labels:["X","Y","Z"],values:["X","Y","Z"]},flipLookAtAxis:{label:"Flip Look Axis",type:"Boolean",defaultValue:!0},upAxis:{label:"Up Axis",type:"Options",display:"Dropdown",defaultValue:2,labels:["X","Y","Z"],values:[1,2,3]},flipUpAxis:{label:"Flip Up Axis",type:"Boolean",defaultValue:!1}},update:function(t,e,a){var l=a.node,c=a.getCameraWorldTransform,h=a.getWorldTransform,f=a.store;if("Camera"===l.type)return o()(e,t);var d=t.target&&t.target.id===r.i(u.a)(f,{scene:!0,plug:"Player",property:"camera"});d&&h(l.id,!0);var p=d?c():t.target?t.target.transform:null,m=t.orientation,g=t.lookAtAxis,v=t.upAxis,y=t.flipUpAxis,M=t.flipLookAtAxis,w=new s.Matrix4,x=new s.Quaternion;if(p&&e.transform){var b=(new s.Vector3).setFromMatrixPosition(p),T=(new s.Vector3).setFromMatrixPosition(e.transform),E=n(v,y);w.lookAt(T,b,E),x.setFromRotationMatrix(w),x.multiply(i(g,M)),x.multiply((new s.Quaternion).setFromEuler((new s.Euler).setFromVector3(m.clone().multiplyScalar(Math.PI/180),"ZYX")));var S=h(l.parent);if(S){var _=(new s.Matrix4).getInverse(S),A=(new s.Matrix4).makeRotationFromQuaternion(x),D=(new s.Matrix4).multiplyMatrices(_,A);x.setFromRotationMatrix(D)}var N=new s.Vector3,I=new s.Quaternion,L=new s.Vector3;e.transform.decompose(N,I,L),e.transform.compose(N,x,L)}}},h={schema:{translation:{label:"Translation",type:"Vec3",step:.1,defaultValue:{x:0,y:0,z:0},animatable:!0},rotation:{label:"Rotation",type:"Vec3",step:1,defaultValue:{x:0,y:0,z:0},animatable:!0},scale:{label:"Scale",type:"Vec3",step:.1,defaultValue:{x:1,y:1,z:1},animatable:!0},rotateOrder:{label:"Rotate Order",type:"Options",display:"Dropdown",values:["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],defaultValue:"ZYX"},preRotation:{label:"Pre-Rotation",type:"Vec3",step:1,defaultValue:{x:0,y:0,z:0}},rotateAxis:{label:"Rotate Axis",type:"Vec3",step:1,defaultValue:{x:0,y:0,z:0}}},update:function(t,e,r){var n=(r.node,t.translation),i=t.rotation,a=t.scale,o=(t.rotateOrder,t.preRotation),u=t.rotateAxis;0===a.x&&(a.x=1e-7),0===a.y&&(a.y=1e-7),0===a.z&&(a.z=1e-7);var l=(new s.Matrix4).makeTranslation(n.x,n.y,n.z),c=(new s.Vector3).copy(i).multiplyScalar(Math.PI/180),h=(new s.Matrix4).makeRotationFromEuler(new s.Euler(c.x,c.y,c.z,"ZYX")),f=(new s.Matrix4,(new s.Matrix4).makeScale(a.x,a.y,a.z)),d=(new s.Vector3).copy(o).multiplyScalar(Math.PI/180),p=(new s.Matrix4).makeRotationFromEuler(new s.Euler(d.x,d.y,d.z,"ZYX")),m=(new s.Vector3).copy(u).multiplyScalar(Math.PI/180),g=(new s.Matrix4).makeRotationFromEuler(new s.Euler(m.x,m.y,m.z,"ZYX"));e.transform=(new s.Matrix4).multiply(l).multiply(p).multiply(h).multiply(g).multiply(f)}};e.a={Transform:l,BoneTransform:h,LookAt:c}},function(t,e,r){"use strict";function n(t,e){var n=e.withNone,a=r.i(h.a)(function(t,e){return r.i(h.a)(function(t,r){return i(e,t,r)},t)},t);return n&&(a.None={NoOp:i("None",{schema:{}},"NoOp")}),a}function i(t,e,n){var i=[],a=[],s=[],l=[],d=[],p={},m=r.i(h.a)(function(t,e){var r=f.a[t.type]?c()({type:t.type,schema:t},f.a[t.type](t)):{set:function(t){return t}};return r.isFileReference?a.push(e):r.isNodeReference?(l.push(e),s.push(e)):r.isPlugReference?(p[e]=r.isPlugReference,s.push(e)):r.isReferenceList?d.push(e):i.push(e),r},e.schema),g=u()(m);return{schema:e.schema,keys:g,referenceKeys:s,fileReferenceKeys:a,nodeReferenceKeys:l,nodeReferenceListKeys:d,plugReferences:p,nonReferenceKeys:i,environment:e.environment,hierarchyVisible:e.hierarchyVisible,getProperties:function(){return m},typeOf:function(t){return e.schema[t]&&e.schema[t].type},set:function(t,e,r){var n=m[e]?m[e].set(r):r,i=m[e]&&m[e].equals?!m[e].equals(n,t[e]):n!==t[e];return i&&(t[e]=m[e]&&m[e].get?m[e].get(n):n),i},export:function(e){return c()({},e,{name:n,primitive:t})},contentExport:function(t){var e={},r=!0,a=!1,s=void 0;try{for(var u,l=o()(i);!(r=(u=l.next()).done);r=!0){var c=u.value;e[c]=t[c]}}catch(t){a=!0,s=t}finally{try{!r&&l.return&&l.return()}finally{if(a)throw s}}return e.type=n,e.name=t.name,e},get:function(t,e){return m[e]&&m[e].get?m[e].get(t[e]):t[e]},init:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2],n={type:t,name:r||t},i=!0,a=!1,s=void 0;try{for(var u,l=o()(g);!(i=(u=l.next()).done);i=!0){var c=u.value;n[c]=m[c].set(e[c])}}catch(t){a=!0,s=t}finally{try{!i&&l.return&&l.return()}finally{if(a)throw s}}return!1===e.active&&(n.active=!1),n},update:function(t,r,n){var i=e.update?e.update.call(e,t,r,n):c()(r,t),a=i||r;return a.nodeId||(a.nodeId=n.node.id),a.id||(a.id=n.node.id),a._v=n.node._v,a}}}e.a=n;var a=r(25),o=r.n(a),s=r(6),u=r.n(s),l=r(2),c=r.n(l),h=r(90),f=r(185)},function(t,e,r){"use strict";function n(t,e){var i=void 0,o=void 0;"function"==typeof e?(i=e,o={},console.warn("DEPRECATED: second argument to `claraplayer` should be an options object")):(o=e||{},i=o.callback);var u=Ft.a.init({accessToken:"74f3517e176d41cfa5e9c41f446b5531",verbose:!1,captureUncaught:!o.devMode,payload:{environment:"production",context:"playerv2"}}),l=n.hasWebGL(),c="string"==typeof t?document.getElementById(t):t;if(c.appendChild(document.createElement("div")),!c.getBoundingClientRect().height)throw new Error("Player element must have a height");var h=c.children[0],f=window.getComputedStyle(c,null),d="flex"===f.display,p="relative"===f.position,m=void 0,g=r.i(ae.a)({fetchApi:ne.a,subscribe:function(){v&&!v.getTranslator()&&r.i(ie.a)(v),m=ue(m||h,r.i(oe.a)(v,{isFlex:d,isRelative:p,parentEl:c,hasWebGL:l}))}}),v=g._store;u&&v.useRollbar(u),s()(g.deps,le),g.version="2.3.7",i&&i(g);var y=r.i(se.a)(v);if(g.commands.addCommand(y,"autoRotate"),g.on("loaded",function(){y.tool.start(1e3)}),l){var M=(r(13),r(203).default);v.setTranslator(M,v);var w=v.getTranslator(),x=r(379).default;a()(x).forEach(function(t){var e=x[t];g.commands.addCommand("function"==typeof e?e(v,w):e,t)}),v.dispatch(r.i(ie.b)());var b=r(387).default;g.commands.addCommand(b(v,v.getTranslator()),"vrMode");var T=r(388).default;g.commands.addCommand(T(v,v.getTranslator()),"vrSettings")}return g}Object.defineProperty(e,"__esModule",{value:!0});for(var i=r(6),a=r.n(i),o=r(2),s=r.n(o),u=r(552),l=(r.n(u),r(557)),c=(r.n(l),r(560)),h=(r.n(c),r(561)),f=(r.n(h),r(555)),d=(r.n(f),r(558)),p=(r.n(d),r(556)),m=(r.n(p),r(559)),g=(r.n(m),r(553)),v=(r.n(g),r(554)),y=(r.n(v),r(496)),M=(r.n(y),r(543)),w=(r.n(M),r(562)),x=(r.n(w),r(563)),b=(r.n(x),r(525)),T=(r.n(b),r(526)),E=(r.n(T),r(527)),S=(r.n(E),r(528)),_=(r.n(S),r(531)),A=(r.n(_),r(529)),D=(r.n(A),r(530)),N=(r.n(D),r(532)),I=(r.n(N),r(533)),L=(r.n(I),r(534)),C=(r.n(L),r(535)),O=(r.n(C),r(537)),R=(r.n(O),r(536)),z=(r.n(R),r(524)),j=(r.n(z),r(551)),P=(r.n(j),r(521)),U=(r.n(P),r(522)),B=(r.n(U),r(523)),V=(r.n(B),r(495)),F=(r.n(V),r(548)),k=(r.n(F),r(546)),G=(r.n(k),r(544)),Y=(r.n(G),r(549)),H=(r.n(Y),r(550)),Q=(r.n(H),r(545)),W=(r.n(Q),r(547)),X=(r.n(W),r(538)),q=(r.n(X),r(539)),Z=(r.n(q),r(540)),K=(r.n(Z),r(542)),J=(r.n(K),r(541)),$=(r.n(J),r(493)),tt=(r.n($),r(494)),et=(r.n(tt),r(489)),rt=(r.n(et),r(492)),nt=(r.n(rt),r(491)),it=(r.n(nt),r(490)),at=(r.n(it),r(182)),ot=(r.n(at),r(515)),st=(r.n(ot),r(516)),ut=(r.n(st),r(518)),lt=(r.n(ut),r(517)),ct=(r.n(lt),r(514)),ht=(r.n(ct),r(520)),ft=(r.n(ht),r(519)),dt=(r.n(ft),r(497)),pt=(r.n(dt),r(498)),mt=(r.n(pt),r(499)),gt=(r.n(mt),r(500)),vt=(r.n(gt),r(501)),yt=(r.n(vt),r(502)),Mt=(r.n(yt),r(503)),wt=(r.n(Mt),r(504)),xt=(r.n(wt),r(505)),bt=(r.n(xt),r(506)),Tt=(r.n(bt),r(508)),Et=(r.n(Tt),r(507)),St=(r.n(Et),r(509)),_t=(r.n(St),r(510)),At=(r.n(_t),r(511)),Dt=(r.n(At),r(512)),Nt=(r.n(Dt),r(513)),It=(r.n(Nt),r(564)),Lt=(r.n(It),r(567)),Ct=(r.n(Lt),r(565)),Ot=(r.n(Ct),r(566)),Rt=(r.n(Ot),r(569)),zt=(r.n(Rt),r(568)),jt=(r.n(zt),r(572)),Pt=(r.n(jt),r(571)),Ut=(r.n(Pt),r(570)),Bt=(r.n(Ut),r(577)),Vt=(r.n(Bt),r(578)),Ft=r.n(Vt),kt=r(252),Gt=r.n(kt),Yt=r(31),Ht=r.n(Yt),Qt=r(248),Wt=r.n(Qt),Xt=r(250),qt=r.n(Xt),Zt=r(247),Kt=r.n(Zt),Jt=r(251),$t=r.n(Jt),te=r(249),ee=r.n(te),re=r(1),ne=(r.n(re),r(363)),ie=(r(200),r(8)),ae=r(276),oe=r(271),se=r(265),ue=Gt.a.init([Wt.a,qt.a,Kt.a,$t.a,ee.a]),le={patch:ue,h:Ht.a,THREE:re},ce=document.getElementsByTagName("script"),he=0;he<ce.length;he++)ce[he].src&&ce[he].src.match(/claraplayer/)&&(r.p=ce[he].src.split(/claraplayer/)[0]);n.deps=le,n.hasWebGL=function(){var t=document.createElement("canvas");return!!t.getContext("webgl")||!!t.getContext("experimental-webgl")},e.default=n},function(t,e,r){"use strict";function n(t,e){var r=t.length,n=i.a.sort(s.a.identity(r),t.newCompareAtIndicesStable()),o=0,u=null,l=t.newCompareAtIndices();if(e)o=i.a.unique(n,l);else{u=new Uint32Array(r);for(var c=0,h=0,f=n[0],d=1;d<r;++d){var p=n[d];if(0!==l(p,f)){for(var m=h;m!==d;++m)u[n[m]]=f;h=d,f=p,++c!==d&&(n[c]=p)}}for(var g=h;g!==r;++g)u[n[g]]=f;o=c+1}var v=new a.a(r).includeFromArray(n,0,o).toIndexArray(o);if(null!==u){var y=n,M=s.a.inverse(v,null,y);s.a.apply(u,M)}this.targetToSourceMap=v,this.sourceToTargetMap=u}e.a=n;var i=r(29),a=r(187),o=r(4),s=r(106);n.prototype={constructor:n,compactedValues:function(t){for(var e=this.targetToSourceMap,r=e.length,n=new o.a(t.type,r),i=t.newRangeArray(),a=0;a!==r;++a)t.rangeToArray(e[a],1,i),n.arrayToRange(i,a,1);return n},indices:function(t){return new Uint32Array(this.sourceToTargetMap)},transcribeIndices:function(t){return s.a.apply(t,this.sourceToTargetMap)}}},function(t,e,r){"use strict";function n(t,e){this.ping=new t(e),this.pong=new t(e)}e.a=n,n.apply=function(t){new n(t.constructor,t.length).sortRange(t,0,t.length)},n.prototype={constructor:n,sortRange:function(t,e,r){var n=r-e;if(n<=4)return void(n>=2&&this._handleShortRange(t,e,n));for(var i=t,a=e,o=r,s=this.ping,u=0,l=1,c=2,h=!0;h;){for(var f=(n+l-1)/l>>1,d=a,p=a+c,m=0;m<=1;++m){for(var g=1;g!==f;++g,d+=l,p+=c)for(var v=d+l,y=v,M=i[d],w=i[v],x=!0;x;)if(w<M)if(s[u++]=w,++v===p){for(s[u++]=M;++d!==y;)s[u++]=i[d];x=!1}else w=i[v];else if(s[u++]=M,++d===y){for(s[u++]=w;++v!==p;)s[u++]=i[v];x=!1}else M=i[d];if(0===m)if(f=2,p>o)p=o;else if(p!==o)for(var b=u+c,T=p;T!==o;++T)s[b++]=i[T]}if(s!==t)if(l=c,c<<=1,i=s,a=0,o=n,c<n){var E=this.ping;s=s===E?this.pong:E,u=0}else s=t,u=e;else h=!1}},_handleShortRange:function(t,e,r){var n=t[e],i=t[e+1];switch(r){case 2:i<n&&(t[e]=i,t[e+1]=n);break;case 3:var a=t[e+2];if(i<n){var o=n;n=i,i=o}if(a<i){var s=i;i=a,a=s}if(i<n){var u=n;n=i,i=u}t[e]=n,t[e+1]=i,t[e+2]=a;break;case 4:var l=t[e+2],c=t[e+3];if(i<n){var h=n;n=i,i=h}if(c<l){var f=l;l=c,c=f}if(l<n){var d=n;n=l,l=d}if(c<i){var p=i;i=c,c=p}if(l<i){var m=i;i=l,l=m}t[e]=n,t[e+1]=i,t[e+2]=l,t[e+3]=c}}}},function(t,e){[Uint32Array,Int32Array,Uint8Array,Int8Array].forEach(function(t){t.prototype.fill||Object.defineProperty(t.prototype,"fill",{value:function(t,e,r){e=e||0,r=r||this.length;for(var n=e;n<r;n++)this[n]=t;return this}}),t.prototype.slice||Object.defineProperty(t.prototype,"slice",{value:function(t,e){for(var r=void 0===t?0:t,n=void 0===e?this.length:e,i=n-r,a=new this.constructor(i),o=0;r<n;)a[o]=this[r],++o,++r;return a}}),t.prototype.sort||Object.defineProperty(t.prototype,"sort",{value:function(t){function e(e,r){return e!==e&&r!==r?0:e!==e?1:r!==r?-1:void 0!==t?t(e,r):e<r?-1:e>r?1:0}return Array.prototype.sort.call(this,e)}}),t.from||function(){t.from=function(e,r,n){var i=t.prototype;if(this.prototype!==i)throw new TypeError("this is not a typed array.");if("function"!=typeof(r=r||function(t){return t}))throw new TypeError("specified argument is not a function");if(e=Object(e),!e.length)return new this(0);for(var a=[],o=0;o<e.length;o++)a.push(e[o]);a=a.map(r,n);for(var s=new this(a.length),o=0;o<s.length;o++)s[o]=a[o];return s}}()})},function(t,e,r){"use strict";var n=r(29),i=r(327),a={collapsePositions:function(t,e){var r=new i.a(t),n=r.compactedValues(t);return e&&r.transcribeIndices(e),n},collapseMapVertexValues:function(t,e){for(var r=t.positions.updateInverseIndex(),i=(t.faceRangeOffsets,r.faceValueIndices),a=r.faceRangeOffsets,o=-1,s=0,u=r.valueFaceIndexOffsets,l=r.valueFaceIndices,c=e.values,h=c.data,f=c.elementSize,d=e.faceValueIndices,p=0,m=t.getNumFaceVertices();p!==m;++p){var g=i[p],v=d[p],y=v*f;p===s&&(s=a[++o+1]);for(var M=u[g],w=u[g+1],x=M;x!==w;++x){var b=l[x];if(b===o)break;var T=r.findValueIndexOffset(b,g),E=d[T];E!==v&&n.a.rangeEquals(h,y,h,E*f,f)&&(d[p]=E)}}}};e.a=a},function(t,e,r){"use strict";function n(t,e){for(var r=[],n=[],a=new i.a.Iterator(t);a.next();){var o=a.element,s=a.getId();e&&-1===e.indexOf(s)||(r.push(s),n.push({map:o,faceIndices:o.updateInverseIndex().valueFaceIndices,facesOffset:0}))}for(var u=t.getNumFaceVertices(),l=n.length,c=new Uint32Array(u),h=new Uint32Array(u*l),f=0,d=0,p=t.faceRangeOffsets,m=-1,g=0,v=n[l-1],y=v.faceIndices,M=l-2,w=0;w!==u;++w){w===g&&(g=p[++m+1]);for(var x=!0,b=0,T=0;T!==l;++T){var E=n[T],o=E.map,S=o.faceValueIndices[w];if(h[f+T]=S,x){var _=o.valueFaceIndexOffsets[S],A=o.valueFaceIndices[_];E.facesOffset=_,x=A!==m}}if(x){var D=v.facesOffset,N=0,I=!0;do{N=y[D++],I=N!==m,x=I;for(var T=M;I&&-1!==T;--T){for(var E=n[T],L=E.facesOffset,C=E.faceIndices,O=C[L];O<N;)O=C[++L];O!==N&&(I=!1),O===m?x=!1:E.facesOffset=L}}while(x&&!I);x=I,b=N}if(x){var R=n[0].map,z=R.findValueIndexOffset(b,R.faceValueIndices[w]),j=c[z];c[w]=j}else c[w]=d++,f+=l}this.mesh=t,this.mapIds=r,this.renderIndices=c,this.valueIndices=h.slice(0,f),this.numVertices=d}e.a=n;var i=r(33);n.prototype={constructor:n,getMapValues:function(t,e){var r=this.mapIds,n=r.indexOf(t),a=this.numVertices,o=this.valueIndices;if(-1===n)throw Error("Map with id '"+t+"' not found!");var s=i.a.resolveMap(this.mesh,t),u=s.values;if(e.length<a)throw Error("Data won't fit!");for(var l=n,c=r.length,h=new e.type,f=0;f!==a;++f){var d=o[l+f*c];e.setAt(f,u.getAt(d,h))}}}},function(t,e,r){"use strict";function n(t){this.positionSkinRange=t.positionSkinRange,this.skinWeights=t.skinWeights,this.skinBoneIndices=t.skinBoneIndices,this.poseSkinToPoseBoneTransform=t.poseSkinToPoseBoneTransform}e.a=n;var i=r(1),a=(r.n(i),r(4));n.prototype={constructor:n,applyTransforms:function(t,e,r,n){return this.deform(this.createFinalTransforms(e,r,n),t)},createFinalTransforms:function(t,e,r){var n=this.poseSkinToPoseBoneTransform,a=(new i.Matrix4).getInverse(t,!0),o=new Array(n.length);(new i.Matrix4).identity();if(0===n.length)return o;var s=void 0,u=void 0,l=void 0;r>-1&&(s=e[r],u=(new i.Matrix4).getInverse(s,!0),l=(new i.Matrix4).getInverse(n.getAt(r),!0));for(var c=new i.Matrix4,h=new i.Matrix4,f=(new i.Matrix4,0),d=n.length;f<d;f++){var p=e[f];r>-1?(c.multiplyMatrices(u,p),h.multiplyMatrices(l,c)):h.multiplyMatrices(a,p),o[f]=(new i.Matrix4).multiplyMatrices(h,n.getAt(f))}return o},deform:function(t,e){for(var r=this.positionSkinRange,n=this.skinWeights,o=this.skinBoneIndices,s=new a.a(i.Vector3,e.length),u=new i.Vector3,l=new i.Vector3,c=0;c<e.length;c++){e.getAt(c,u),l.multiplyScalar(0);for(var h=r[c];h<r[c+1];h++)e.getAt(c,u),u.applyMatrix4(t[o[h]]),u.multiplyScalar(n[h]),l.addVectors(l,u);r[c+1]-r[c]==0&&l.copy(u),s.setAt(c,l)}return s}}},function(t,e,r){"use strict";function n(t){this.polyMap=t,this.edgeHighVertexIndices=null,this.edgePivotRangeOffsets=null,this.edgeVertices=null,this._compactEdgeLowToHighMap(this._buildEdgeLowToHighMap()),this._inverseMapping()}e.a=n;var i=r(328),a=r(29);n.prototype={constructor:n,getNumEdges:function(){return this.edgeHighVertexIndices.length},findEdgeId:function(t,e){var r=t,n=e;n<r&&(r=e,n=t);var i=this.edgePivotRangeOffsets;return a.a.binarySearch(this.edgeHighVertexIndices,n,i[r],i[r+1])},getVerticesForEdge:function(t,e){return e?(e[0]=this.edgeVertices[2*t],e[1]=this.edgeVertices[2*t+1],e):{v:this.edgeVertices[2*t],vNext:this.edgeVertices[2*t+1]}},_inverseMapping:function(){for(var t=this.getNumEdges(),e=new Uint32Array(2*t),r=0;r<this.edgePivotRangeOffsets.length-1;r++)for(var n=this.edgePivotRangeOffsets[r],i=this.edgePivotRangeOffsets[r+1],a=n;a<=i;a++){var o=this.edgeHighVertexIndices[a];e[2*a+0]=r,e[2*a+1]=o}this.edgeVertices=e},_buildEdgeLowToHighMap:function(){for(var t=this.polyMap.faceRangeOffsets,e=this.polyMap.faceValueIndices,r=this.polyMap.values.length,n=new Uint32Array(r+2),i=n.subarray(2),o=t[0],s=0,u=1,l=t.length;u!==l;++u){for(var c=t[u],h=e[c-1],f=o;f!==c;++f){var d=e[f],p=d<h?d:h,m=++i[p];m>s&&(s=m),h=d}o=c}a.a.accumulate(i);var g=n.subarray(1),v=new Uint32Array(g[r]);o=t[0];for(var y=1,M=t.length;y!==M;++y){for(var w=t[y],x=e[w-1],b=o;b!==w;++b){var T=e[b],E=x,S=T;S<E&&(E=T,S=x),v[g[E]++]=S,x=T}o=w}return this.edgePivotRangeOffsets=n,this.edgeHighVertexIndices=v,s},_compactEdgeLowToHighMap:function(t){for(var e=this.edgePivotRangeOffsets,r=this.edgeHighVertexIndices,n=new i.a(Uint32Array,t),o=this.polyMap.values.length+1,s=0,u=0,l=0,c=1;c!==o;++c){if(s=e[c],u!==s){n.sortRange(r,u,s);var h=r[u];r[l++]=h;for(var f=u+1;f<s;++f){var d=r[f];d!==h&&(r[l++]=d,h=d)}}e[c]=l,u=s}this.edgeHighVertexIndices=a.a.slice(r,0,l),this.edgePivotRangeOffsets=e.subarray(0,o)}}},function(t,e,r){"use strict";function n(t){this.polyMap=t,this.faceEdgeIndices=null,this.edgeFaceCounts=null,this.edgeFaceIndices=null,this._compute()}e.a=n,n.prototype={constructor:n,getEdgeIdFromFaceValueIndex:function(t){return this.faceEdgeIndices[t]},getNumFacesForEdgeId:function(t){return this.edgeFaceCounts[t]},getFaceForEdgeId:function(t,e){return this.edgeFaceIndices[2*t+e]},checkValidity:function(){for(var t=!0,e=0;e<this.edgeFaceCounts.length;e++)this.edgeFaceCounts[e]>2&&(t=!1);return t},_compute:function(){for(var t=this.polyMap,e=t.edgeVertexAdjacency,r=t.faceRangeOffsets,n=t.faceValueIndices,i=e.edgeHighVertexIndices.length,a=new Uint32Array(i),o=new Uint32Array(2*i),s=new Uint32Array(n.length),u=0;u<r.length-1;u++)for(var l=r[u],c=r[u+1],h=c-l,f=n[l],d=0;d<h;d++){var p=f;f=n[l+(d+1)%h];var m=e.findEdgeId(p,f),g=l+d;s[g]=m,o[2*m+a[m]]=u,a[m]++}return this.faceEdgeIndices=s,this.edgeFaceCounts=a,this.edgeFaceIndices=o,this}}},function(t,e,r){"use strict";function n(t){this.polyMap=t,this.faceFaceCounts=null,this.faceFaceIndices=null,this._compute()}e.a=n,n.prototype={constructor:n,getAdjacentFaces:function(t){for(var e=this.faceFaceCounts[t+1]-this.faceFaceCounts[t],r=new Uint32Array(e),n=this.faceFaceCounts[t],i=0;n<this.faceFaceCounts[t+1];n++,i++)r[i]=this.faceFaceIndices[n];return r},adjacentFacesOnVertex:function(t,e){for(var r=this.getAdjacentFaces(t),n=this.polyMap.faceRangeOffsets,i=this.polyMap.faceValueIndices,a=[],o=0;o<r.length;o++)for(var s=n[r[o]];s<n[r[o]+1];s++)if(i[s]===e){a.push(r[o]);break}return a},_compute:function(){for(var t=this.polyMap.faceRangeOffsets,e=(this.polyMap.faceValueIndices,this.polyMap.faceEdgeAdjacency),r=new Uint32Array(t.length),n=[],i=0;i<t.length-1;i++){for(var a=[],o=t[i];o<t[i+1];o++){var s=e.getEdgeIdFromFaceValueIndex(o);if(e.getNumFacesForEdgeId(s)>1){var u=e.getFaceForEdgeId(s,0);u===i&&(u=e.getFaceForEdgeId(s,1)),a.push(u)}}r[i+1]=r[i]+a.length,n.push.apply(n,a)}return this.faceFaceCounts=r,this.faceFaceIndices=new Uint32Array(n),this}}},function(t,e,r){"use strict";function n(t){this.polyMap=t,this._compute()}e.a=n,n.prototype={constructor:n,getNumEdgesForVertex:function(t){var e=this.valueEdgeOffsets[t];return this.valueEdgeOffsets[t+1]-e},getEdgeForVertexId:function(t,e){var r=this.valueEdgeOffsets[t];return this.valueEdgeIndices[r+e]},getAdjacentValues:function(t){for(var e=this.polyMap.edgeVertexAdjacency,r=[],n=this.getNumEdgesForVertex(t),i=0;i<n;i++){var a=this.getEdgeForVertexId(t,i),o=e.getVerticesForEdge(a),s=o.v===t?o.vNext:o.v;r.push(s)}return r},getAdjacentFaceValuesIndicesOnFace:function(t,e){var r=[],n=this.polyMap.faceRangeOffsets[e],i=this.polyMap.faceRangeOffsets[e+1];if(i-n<3)return r;var a=t===i-1?n:t+1,o=t===n?i-1:t-1;return r.push(o),r.push(a),r},getNumFacesForVertex:function(t){var e=this.valueFaceOffsets[t];return this.valueFaceOffsets[t+1]-e},getFaceForVertexId:function(t,e){var r=this.valueFaceOffsets[t];return this.valueFaceIndices[r+e]},_compute:function(){for(var t=this.polyMap,e=(t.faceRangeOffsets,t.faceValueIndices,t.edgeVertexAdjacency),r=new Uint32Array(t.values.length),n=new Uint32Array(t.values.length),i=e.getNumEdges(),a=new Uint8Array(i),o=0;o<t.faceRangeOffsets.length-1;o++)for(var s=t.faceRangeOffsets[o],u=t.faceRangeOffsets[o+1],l=u-s,c=t.faceValueIndices[s],h=0;h<l;h++){var f=c;c=t.faceValueIndices[s+(h+1)%l];var d=e.findEdgeId(f,c);r[f]++,0===a[d]&&(a[d]=1,n[f]++,n[c]++)}for(var p=0,m=0,g=new Uint32Array(r.length+1),v=new Uint32Array(n.length+1),y=0;y<r.length;y++)g[y]=p,p+=r[y],r[y]=0,v[y]=m,m+=n[y],n[y]=0;g[r.length]=p,v[n.length]=m;for(var M=new Uint32Array(p),w=new Uint32Array(m),x=0;x<t.faceRangeOffsets.length-1;x++)for(var b=t.faceRangeOffsets[x],T=t.faceRangeOffsets[x+1],E=T-b,S=t.faceValueIndices[b],_=0;_<E;_++){var A=S;S=t.faceValueIndices[b+(_+1)%E];var D=e.findEdgeId(A,S);M[g[A]+r[A]++]=x,1===a[D]&&(a[D]=2,w[v[A]+n[A]++]=D,w[v[S]+n[S]++]=D)}this.valueFaceOffsets=g,this.valueFaceIndices=M,this.valueEdgeOffsets=v,this.valueEdgeIndices=w}}},function(t,e,r){"use strict";function n(t,e,n,h,f,d){if(0===n)return t;var p=Math.PI/180;t=new u.a(t);var m=l.a.IdPositions,g=new s.a(l.a.resolveMap(t,m)),v=g.values.clone();g.values=v,l.a.assignMap(t,m,g),m=l.a.IdNormals,g=new s.a(l.a.resolveMap(t,m)),v=g.values.clone(),g.values=v,l.a.assignMap(t,m,g),h.multiplyScalar(p);var y=(new o.Matrix4).makeTranslation(f.x,f.y,f.z),M=(new o.Matrix4).makeRotationFromEuler((new o.Euler).setFromVector3(h)).multiply(a(e)),w=(new o.Matrix4).multiplyMatrices(M,y),x=(new o.Matrix4).getInverse(w),b=t.positions.values,T=-n*p,E=i(b.data);if(!(E<1e-6)){var S=E/T,_=0;d&&(S=.5*E/Math.sin(T/2),_=Math.tan(T/4)*E*.5);for(var A=new o.Vector3,D=void 0,N=void 0,I=void 0,L=0;L<b.length;++L)b.getAt(L,A),A.applyMatrix4(w),D=A.y*T/E,N=Math.sin(D),I=Math.cos(D),A.y=A.x*N+N*S,A.x=A.x*I+I*S-S,A.x+=_,A.applyMatrix4(x),b.setAt(L,A);return t=r.i(c.b)(t)}}function i(t){for(var e=t[1],r=t[1],n=4;n<t.length;n+=3)t[n]<e&&(e=t[n]),t[n]>r&&(r=t[n]);return r-e}function a(t){var e=new o.Matrix4;switch(t){case n.AxisTypes.X:e.makeRotationY(-Math.PI/2);break;case n.AxisTypes.Y:e.makeRotationX(Math.PI/2)}return e}e.a=n;var o=r(1),s=(r.n(o),r(7)),u=r(9),l=r(33),c=r(87);n.AxisTypes={X:1,Y:2,Z:3}},function(t,e,r){"use strict";function n(t){for(var e=t.values,r=new o.Vector3,n=e.length,i=new c.a(e.type,n),a=0;a<n;++a)e.getAt(a,r),i.setAt(a,r);return i}function i(t,e,r,n,i){if(n)for(var a=new o.Vector3,s=new o.Vector3,u=new o.Vector3,l=0;l<e.length;++l){t.getAt(l,a),r.getAt(l,s),e.getAt(l,u);var c=a.add(u.sub(s).multiplyScalar(n));i&&0===c.length()||t.setAt(l,c)}}function a(t,e,r){var a=r.length,c=e.length;if(c!==a)return t;t=new u.a(t);var h=l.a.IdPositions,f=new s.a(l.a.resolveMap(t,h)),d=f.values.clone();f.values=d,l.a.assignMap(t,h,f),h=l.a.IdNormals,f=new s.a(l.a.resolveMap(t,h)),d=f.values.clone(),f.values=d,l.a.assignMap(t,h,f);var p=t.positions,m=p.values,g=t.normalMap,v=!!g,y=m.length,M=t.blendShapes;if(!M)return console.log("BLEND DEFORM IGNORED: no blend shape"),t;for(var w=0;w<c;++w){var x=M[e[w]];if(!x)return console.log("BLEND DEFORM IGNORED: missing channel",e[w]),t;if(x.positions.length!==y)return console.log("BLEND DEFORM IGNORED: cannot use channel",e[w],"because the number of vertices doesn't match with the original shape"),t;!v||x.normals&&x.normals.length===g.values.length||(v=!1)}for(var b=v?g.values:-1,T=n(p),E=n(g),S=0;S<a;++S)i(T,M[e[S]].positions,m,r[S]),i(E,M[e[S]].normals,b,r[S],!0);if(t.positions.values=T,v){for(var _=new o.Vector3,A=0,D=E.length;A<D;++A)E.getAt(A,_),_.normalize(),E.setAt(A,_);t.normalMap.values=E}return t}e.a=a;var o=r(1),s=(r.n(o),r(7)),u=r(9),l=r(33),c=r(4)},function(t,e,r){"use strict";function n(t){for(var e=r.i(a.a)(t),n=e.positions.values,o=e.positions.faceValueIndices,s=e.getNumFaces(),u=0,l=new i.Vector3,c=new i.Vector3,h=new i.Vector3,f=new i.Vector3,d=0;d<3*s;d+=3)n.getAt(o[d],l),n.getAt(o[d+1],c),n.getAt(o[d+2],h),u+=l.dot(f.crossVectors(c,h))/6;return u}e.a=n;var i=r(1),a=(r.n(i),r(197))},function(t,e,r){"use strict";function n(t,e){var r=new o.Vector3;t=new u.a(t);var n=l.a.IdPositions,i=new s.a(l.a.resolveMap(t,n)),h=i.values.clone();if(i.values=h,l.a.assignMap(t,n,i),n=l.a.IdNormals,i=new s.a(l.a.resolveMap(t,n)),h=i.values.clone(),i.values=h,l.a.assignMap(t,n,i),t.normalMap&&t.uvMaps){var f=t.uvMaps.byName[e];if(f||(f=t.uvMaps.byName[t.uvMaps.namesByIndex[0]]),f){for(var d=t.faceRangeOffsets,p=t.positions.values,m=t.positions.faceValueIndices,g=f.faceValueIndices,v=f.values,y=t.normalMap.faceValueIndices,M=t.normalMap.values,w=M.length,x=new c.a(o.Vector4,w),b=new c.a(o.Vector3,w),T=new c.a(o.Vector3,w),E=new o.Vector3,S=new o.Vector4,_=0;_<w;++_)b.setAt(_,E),T.setAt(_,E),x.setAt(_,S);for(var A=d.length-1,D=0;D<A;++D)for(var N=m.slice(d[D],d[D+1]),I=g.slice(d[D],d[D+1]),L=y.slice(d[D],d[D+1]),C=0;C<N.length-2;++C)!function(t,e,n,i,a,s,u,l,c,h,f){var d=t.getAt(e),p=t.getAt(n),m=t.getAt(i),g=a.getAt(s),v=a.getAt(u),y=a.getAt(l),M=p.x-d.x,w=m.x-d.x,x=p.y-d.y,E=m.y-d.y,S=p.z-d.z,_=m.z-d.z,A=v.x-g.x,D=y.x-g.x,N=v.y-g.y,I=y.y-g.y,L=1/(A*I-D*N),C=new o.Vector3((I*M-N*w)*L,(I*x-N*E)*L,(I*S-N*_)*L),O=new o.Vector3((A*w-D*M)*L,(A*E-D*x)*L,(A*_-D*S)*L);b.setAt(c,b.getAt(c,r).add(C)),b.setAt(h,b.getAt(h,r).add(C)),b.setAt(f,b.getAt(f,r).add(C)),T.setAt(c,T.getAt(c,r).add(O)),T.setAt(h,T.getAt(h,r).add(O)),T.setAt(f,T.getAt(f,r).add(O))}(p,N[C],N[C+1],N[C+2],v,I[C],I[C+1],I[C+2],L[C],L[C+1],L[C+2]);for(var O=new o.Vector3,R=new o.Vector3,z=new o.Vector3,j=0,P=d.length;j<P-1;++j)for(var U=y.slice(d[j],d[j+1]),B=0,V=U.length;B<V;++B){var F=U[B];M.getAt(F,O),b.getAt(F,R);var k=R.clone();k.sub(O.multiplyScalar(O.dot(R))).normalize(),z.crossVectors(M.getAt(F),k);var G=z.dot(T.getAt(F)),Y=G<0?-1:1,H=new o.Vector4(k.x,k.y,k.z,Y);x.setAt(F,H)}var Q=new s.a.fromData(d,y,x);return new u.a(a()({},t,{tangentMap:Q}))}}}e.a=n;var i=r(2),a=r.n(i),o=r(1),s=(r.n(o),r(7)),u=r(9),l=r(33),c=r(4)},function(t,e,r){"use strict";function n(t){for(var e=t.values,r=new i.Box3,n=new i.Vector3,a=0;a<e.length;a++)e.getAt(a,n),r.expandByPoint(n);return r}e.a=n;var i=r(1);r.n(i)},function(t,e,r){"use strict";function n(t){if(u("positions",t.positions.values,function(t){return!a(t)}),t.normalMap&&u("normalMap",t.normalMap.values,function(t){return!a(t)&&!o(t)}),t.uvMaps)for(var e=(new i.a,0);e<t.uvMaps.length;e++){var r=t.uvMaps.namesByIndex[e];u("uvMap["+r+"]",t.uvMaps.byName[r].values,function(t){return!s(t)})}return t}e.a=n;var i=(r(4),r(18)),a=(r(7),r(9),function(t){return isNaN(t.x)||isNaN(t.y)||isNaN(t.z)}),o=function(t){return 0===t.length()},s=function(t){return isNaN(t.x)||isNaN(t.y)},u=function(t,e,r){for(var n=new e.type,i=new e.type,a=0;a<e.length;a++)e.getAt(a,n),r(n)||e.setAt(a,i)}},function(t,e,r){"use strict";function n(t,e){var r=e||!1,n=new Uint32Array(t.positions.faceRangeOffsets),i=new Uint32Array(t.positions.faceValueIndices),o=new Uint32Array(t.normalMap.faceValueIndices),h=[],f=[];if(t.uvMaps)for(var d=0;d<t.uvMaps.length;d++)h.push(t.uvMaps.namesByIndex[d]),f.push(new Uint32Array(t.uvMaps.byName[h[d]].faceValueIndices));for(var p=0,m=0,g=0,v=0,y=0,M=new s.a,w=1;w<n.length;w++){g=n[w],v=g-m,y=v,M.clear();for(var x=0;x<v;x++)M.set(i[m+x],m+x);if(1===(y=M.size))r&&v>1&&console.log("Face "+w+" has only 1 unique value. Reducing to a point..."),n[w]=n[w-1]+1,i[p++]=i[m];else{r&&2===v&&console.log("Face "+w+" has only 2 unique values. Reducing to a line..."),n[w]=n[w-1]+y;var b=M.entries(),T=void 0,E=!0,S=!1,_=void 0;try{for(var A,D=a()(b);!(E=(A=D.next()).done);E=!0){T=A.value,o[p]=o[T[1]];for(var N=0;N<f.length;N++)f[N][p]=f[N][T[1]];i[p++]=T[0]}}catch(t){S=!0,_=t}finally{try{!E&&D.return&&D.return()}finally{if(S)throw _}}}m=g}r&&console.log(i.length+" index values reduced to "+p+", duplicates removed: "+(i.length-p));var I=new Uint32Array(i.subarray(0,p)),L=new Uint32Array(o.subarray(0,p)),C=new c.a({faceRangeOffsets:n,faceValueIndices:I,values:t.positions.values}),O={};O.positions=C,O.faceRangeOffsets=O.positions.faceRangeOffsets;var R=new c.a({faceRangeOffsets:O.faceRangeOffsets,faceValueIndices:L,values:t.normalMap.values});if(O.normalMap=R,t.uvMaps){for(var z=new u.a,j=0;j<t.uvMaps.length;j++){var P=t.uvMaps.namesByIndex[j],U=new c.a({faceRangeOffsets:O.faceRangeOffsets,faceValueIndices:f[j],values:t.uvMaps.byName[P].values});z.set(P,U)}O.uvMaps=z}return O.colorMaps=t.colorMaps,new l.a(O)}e.a=n;var i=r(25),a=r.n(i),o=r(145),s=r.n(o),u=(r(4),r(18)),l=(r(88),r(9)),c=r(7)},function(t,e,r){"use strict";function n(t,e){function n(t,e,r){for(var n=r.withLogging||!1,a=new Uint32Array(t.faceRangeOffsets),o=new Uint32Array(t.faceValueIndices),s=t.values,u=0,l=0,c=0,h=1,f=0,d=1;d<a.length;d++){if(u=a[d],(c=u-l)>2){a[h]=a[h-1]+c,h++;for(var p=0;p<c;p++)o[f++]=o[l+p]}else n&&console.log("Removed face "+d+" of size "+c);l=u}var m=new Uint32Array(a.subarray(0,h)),g=new Uint32Array(o.subarray(0,f));return new i.a({faceRangeOffsets:m,faceValueIndices:g,values:s})}var s={withLogging:e},u=r.i(o.a)(t,n,s);return e&&console.log(t.faceRangeOffsets.length-1+" faces reduced to "+(u.faceRangeOffsets.length-1)+", faces removed: "+(t.faceRangeOffsets.length-u.faceRangeOffsets.length)),r.i(a.a)(u).topologyChanged()}e.a=n;var i=(r(18),r(9),r(7)),a=r(345),o=r(135)},function(t,e,r){"use strict";function n(t,e){for(var r=e||!1,n=new Uint32Array(t.positions.faceValueIndices),i=t.positions.values,c=new s.a(o.Vector3,i.length),h=new a.a,f=0,d=0,p=new o.Vector3,m=0;m<n.length;m++)h.has(n[m])?d=h.get(n[m]):(h.set(n[m],f),d=f,i.getAt(n[m],p),c.setAt(f,p),f++),n[m]=d;if(r&&console.log(i.length+" values reduced to "+f+", unused values removed: "+(i.length-f)),i.length===f)return t;var g=new s.a(o.Vector3,f);g.fromArray(c.toArray());var v=new l.a({faceRangeOffsets:t.faceRangeOffsets,faceValueIndices:n,values:g});return t.positions=v,new u.a(t)}e.a=n;var i=r(145),a=r.n(i),o=r(1),s=(r.n(o),r(4)),u=r(9),l=r(7)},function(t,e,r){"use strict";function n(t,e,n,i,f,d){var p=t.positions.values,m=p.clone(),g=n.clone().multiplyScalar(Math.PI/180),v=(new o.Euler).setFromVector3(g,"ZYX"),y=(new o.Matrix4).makeRotationFromEuler(v),M=new o.Vector3(0,0,1);M.applyMatrix4(y);var w=e.dot(M),x=new o.Vector3(1,0,0);x.applyMatrix4(y);var b=r.i(s.a)(f),T=void 0;T=b.length?b.length:p.length;for(var E=new o.Vector3,S=new o.Vector3,_=void 0,A=void 0,D=0;D<T;++D)(A=b.length?b[D]:D)>=p.length||(p.getAt(A,E),_=(E.dot(M)-w)/M.length(),S.copy(x),E.add(S.multiplyScalar(_*i)),m.setAt(A,E));var N=new l.a(c.a.resolveMap(t,"positions"));N.values=m;var I=a()({},t,{positions:N});return t=r.i(u.b)(new h.a(I))}e.a=n;var i=r(2),a=r.n(i),o=r(1),s=(r.n(o),r(139)),u=r(87),l=(r(4),r(7)),c=r(33),h=r(9)},function(t,e,r){"use strict";function n(t,e,n){function s(t,e,r){for(var n=r.newFaceRangeOffsets,i=r.reMapping,o=t.faceRangeOffsets,s=t.faceValueIndices,u=new Uint32Array(s.length),l=0,c=0;c<i.length;c++)for(var h=o[i[c]];h<o[i[c]+1];h++)u[l++]=s[h];return new a.a({faceRangeOffsets:n,faceValueIndices:u,values:t.values})}var u=n||!1;if(!e||!t)return t;if(0===e.x&&0===e.y&&0===e.z)return t;for(var l=t.faceRangeOffsets,c=new Uint32Array(t.faceRangeOffsets.length),h=new Uint32Array(t.positions.faceValueIndices),f=t.positions.values,d=[],p=[],m=new i.Vector3,g=new i.Vector3,v=0;v<l.length-1;v++){d[v]=v;var y=l[v],M=l[v+1];m.set(0,0,0);for(var w=y;w<M;w++)f.getAt(h[w],g),m.add(g);m.multiplyScalar(1/(M-y)),p[v]=m.dot(e)}d.sort(function(t,e){return p[e]-p[t]});for(var x=0;x<d.length;x++)c[x+1]=c[x]+(l[d[x]+1]-l[d[x]]);if(u){console.log("Face List [old][new]:");for(var b=0;b<d.length;b++){for(var T=[],E=[],S=l[b];S<l[b+1];S++)T.push(h[S]);for(var _=l[d[b]];_<l[d[b]+1];_++)E.push(h[_]);console.log(T,E)}}var A={newFaceRangeOffsets:c,reMapping:d};return r.i(o.a)(t,s,A).topologyChanged()}e.a=n;var i=r(1),a=(r.n(i),r(7)),o=r(135)},function(t,e,r){"use strict";function n(t,e,r,n){var i=t.boundingBox,u=i.min[e],l=i.max[e],c=l-u,h=r>c/2?c/2:r,f=c-2*h,d=(f+2*n)/f,p=new o.Vector3(1,1,1);p[e]=d;for(var m=(new o.Matrix4).makeScale(p.x,p.y,p.z),g=s.a.resolveMap(t,"positions"),v=g.values.clone(),y=new o.Vector3,M=0;M<v.length;M+=1)g.values.getAt(M,y),y[e]<u+h?y[e]-=n:y[e]>=l-h?y[e]+=n:y.applyMatrix4(m),v.setAt(M,y);var w=new s.b(a()({},g,{values:v})),x=a()({},t,{positions:w});return new s.c(x)}e.a=n;var i=r(2),a=r.n(i),o=r(1),s=(r.n(o),r(141))},function(t,e,r){"use strict";function n(t,e){var n=r.i(u.a)(t),i=new Uint8Array(n.positions.faceValueIndices.length);if(n.normalMap&&c(n.normalMap,i),n.edgeCreaseWeights)for(var o=n.positions.faceEdgeAdjacency,f=0;f<o.faceEdgeIndices.length;f++){var d=o.faceEdgeIndices[f];i[f]=i[f]||(n.edgeCreaseWeights[d]>0?1:0)}if(e&&n.materialIds)for(var p=n.positions.faceEdgeAdjacency,m=0;m<p.faceEdgeIndices.length;m++){var g=p.faceEdgeIndices[m];2===p.getNumFacesForEdgeId(g)&&n.materialIds[p.getFaceForEdgeId(g,0)]!==n.materialIds[p.getFaceForEdgeId(g,1)]&&(i[m]+=1)}var v=h(n.positions,i),y=new s.a;if(y.positions=l(n.positions,null,i,v),y.faceRangeOffsets=y.positions.faceRangeOffsets,n.normalMap&&(y.normalMap=l(n.normalMap,y.faceRangeOffsets,i,v)),n.uvMaps){for(var M=new a.a,w=0;w<n.uvMaps.length;w++){var x=n.uvMaps.namesByIndex[w],b=new Uint8Array(n.uvMaps.byName[x].faceValueIndices.length);c(n.uvMaps.byName[x],b);for(var T=0;T<i.length;T++)b[T]=b[T]||i[T];for(var E=h(n.uvMaps.byName[x],b),S=0;S<E.length;S++)E[S]=E[S]||v[S];M.set(x,l(n.uvMaps.byName[x],y.faceRangeOffsets,b,E))}y.uvMaps=M}return y.topologyChanged(),new s.a(y)}e.a=n;var i=r(4),a=r(18),o=r(7),s=r(9),u=r(342),l=(r(137),function(t,e,r,n){for(var a=t.edgeVertexAdjacency,s=t.valueAdjacency,u=t.faceEdgeAdjacency,l=t.values,c=l.type,h=l.length,f=t.faceRangeOffsets,d=f.length-1,p=t.faceValueIndices,m=a.getNumEdges(),g=p.length,v=new Uint8Array(t.values.length),y=0;y<n.length;y++)v[p[y]]=n[y];if(!e){e=new Uint32Array(g+1);for(var M=0;M<e.length;M++)e[M]=4*M}for(var w=4*g,x=new Uint32Array(w),b=h,T=b+m,E=h+m+d,S=new i.a(c,E),_=new Uint8Array(h),A=new Uint8Array(h),D=new Uint8Array(m),N=new Uint8Array(m),I=new c,L=new c,C=new c,O=new c,R=new c,z=new c,j=0,P=new Uint8Array(m),U=new Uint8Array(h),B=0;B<d;B++){var V=f[B],F=f[B+1],k=F-V,G=p[V],Y=p[V+1%k],H=a.findEdgeId(G,Y);I.multiplyScalar(0);for(var Q=0;Q<k;Q++){var W=G;G=Y,Y=p[V+(Q+2)%k];var X=H;H=a.findEdgeId(G,Y),D[X]++,A[W]++,0===N[X]&&(N[X]=1,_[W]++,_[G]++,r[V+Q]&&(P[X]=1,U[W]++,U[G]++)),l.getAt(W,L),I.add(L),x[j++]=b+X,x[j++]=G,x[j++]=b+H,x[j++]=T+B}I.multiplyScalar(1/k),S.setAt(T+B,I)}for(var q=0;q<m;q++){var Z=a.edgeVertices[2*q],K=a.edgeVertices[2*q+1];l.getAt(Z,O),l.getAt(K,L),O.add(L);var J=2,$=u.edgeFaceCounts[q];if(!P[q]&&2===$)for(var tt=0;tt<$;tt++){var et=u.edgeFaceIndices[2*q+tt];S.getAt(T+et,L),O.add(L),J++}O.multiplyScalar(1/J),S.setAt(b+q,O)}for(var rt=0;rt<h;rt++){l.getAt(rt,C);var nt=_[rt]!==A[rt];if(0!==_[rt]&&v[rt]<1){var it=s.valueEdgeOffsets[rt],at=s.valueEdgeOffsets[rt+1],ot=at-it;R.multiplyScalar(0);var st=0;if(nt||U[rt]){for(var ut=0;ut<ot;ut++){var lt=s.valueEdgeIndices[it+ut];if(P[lt]){var ct=a.edgeVertices[2*lt];ct===rt&&(ct=a.edgeVertices[2*lt+1]),l.getAt(ct,L),R.add(L),st++}}C.multiplyScalar(.75).add(R.multiplyScalar(.25/st))}else{for(var ht=0;ht<ot;ht++){var ft=s.valueEdgeIndices[it+ht],dt=a.edgeVertices[2*ft];dt===rt&&(dt=a.edgeVertices[2*ft+1]),l.getAt(dt,L),R.add(L),st++}R.multiplyScalar(1/(st*st));var pt=s.valueFaceOffsets[rt],mt=s.valueFaceOffsets[rt+1],gt=mt-pt;z.multiplyScalar(0);for(var vt=0,yt=0;yt<gt;yt++){var Mt=s.valueFaceIndices[pt+yt];S.getAt(T+Mt,L),z.add(L),vt++}z.multiplyScalar(1/(vt*vt)),C.multiplyScalar((vt-2)/vt),C.add(R),C.add(z)}}S.setAt(rt,C)}var wt={faceRangeOffsets:e,faceValueIndices:x,values:S};return new o.a(wt)}),c=function(t,e){for(var r=t.faceEdgeAdjacency,n=0;n<r.faceEdgeIndices.length;n++){var i=r.faceEdgeIndices[n];e[n]=2!==r.edgeFaceCounts[i]?1:0}},h=function(t,e){for(var r=t.edgeVertexAdjacency,n=new Uint8Array(t.faceValueIndices.length),i=new Uint8Array(t.values.length),a=new Uint8Array(t.values.length),o=new Uint8Array(r.getNumEdges()),s=0;s<t.faceRangeOffsets.length-1;s++)for(var u=t.faceRangeOffsets[s],l=t.faceRangeOffsets[s+1],c=l-u,h=t.faceValueIndices[u],f=0;f<c;f++){var d=h;h=t.faceValueIndices[u+(f+1)%c];var p=r.findEdgeId(d,h);0===o[p]&&(o[p]=1,e[u+f]&&(i[d]++,i[h]++),a[d]++,a[h]++)}for(var m=0;m<n.length;m++){var g=t.faceValueIndices[m];(i[g]>2||i[g]-a[g]==0)&&(n[m]=1)}return n}},function(t,e,r){"use strict";function n(t,e,n,i){var o=i?new s.a(r.i(c.a)(t,e,!1,!0)):t,u=new s.a,d=o.positions;if(u.positions=h(d),u.faceRangeOffsets=d.faceRangeOffsets,o.normalMap){var p=o.normalMap;u.normalMap=h(p)}if(o.uvMaps){for(var m=new a.a,g=0;g<o.uvMaps.length;g++){var v=o.uvMaps.namesByIndex[g];m.set(v,h(o.uvMaps.byName[v]))}u.uvMaps=m}var y=u.positions;if(u.positions=f(y,e,!1),u.normalMap){var M=u.normalMap;u.normalMap=f(M,e,!0)}if(n||i){var w=[u,o];return r.i(l.a)(w,null,null)}return new s.a(u)}e.a=n;var i=r(4),a=r(18),o=r(7),s=r(9),u=r(13),l=(r.n(u),r(195)),c=r(196),h=function(t){for(var e=t.faceRangeOffsets,r=e.length-1,n=t.faceValueIndices,i=n.length,a=new Uint32Array(i),s=0;s<r;++s)for(var u=e[s],l=e[s+1],c=l-u,h=0;h<c;++h)a[u+h]=n[l-h-1];var f={faceRangeOffsets:e,faceValueIndices:a,values:t.values};return new o.a(f)},f=function(t,e,r){for(var n=t.values,a=n.type,s=n.length,u=new i.a(a,s),l=new a,c=new a,h=0;h<s;++h){n.getAt(h,l);var f=e.distanceToPoint(l);c.copy(e.normal),r?(l.reflect(c),u.setAt(h,l)):(c.multiplyScalar(-2*f),l.add(c),u.setAt(h,l))}var d={faceRangeOffsets:t.faceRangeOffsets,faceValueIndices:t.faceValueIndices,values:u};return new o.a(d)}},function(t,e,r){"use strict";function n(t,e,n,c,h,f){function d(t){v[R]=t,R++}function p(t){y.setAt(z,t),z++}function m(t,e){w.setAt(j,t),M.setAt(j,e),j++}c=Math.floor(c)||1,h=Math.floor(h)||1,f=Math.floor(f)||1;var g=new Uint32Array(c*h*2+c*f*2+h*f*2+1),v=new Uint32Array(4*(c*h*2+c*f*2+h*f*2)),y=new a.a(i.Vector3,(c+1)*(h+1)*2+(c+1)*(f+1)*2+(h+1)*(f+1)*2),M=new a.a(i.Vector3,(c+1)*(h+1)*2+(c+1)*(f+1)*2+(h+1)*(f+1)*2),w=new a.a(i.Vector2,(c+1)*(h+1)*2+(c+1)*(f+1)*2+(h+1)*(f+1)*2),x=t/c,b=e/h,T=n/f,E=t/2,S=e/2,_=n/2,A=void 0,D=void 0,N=void 0,I=0,L=new i.Vector3,C=new i.Vector3,O=new i.Vector2,R=0;for(N=0,A=0;N<g.length;N++,A+=4)g[N]=A;for(N=0;N<2;N++){for(D=0;D<h;D++)for(A=0;A<c;A++)d(I+D*(c+1)+A),d(I+D*(c+1)+A+1),d(I+(D+1)*(c+1)+A+1),d(I+(D+1)*(c+1)+A);I+=(c+1)*(h+1)}for(D=0;D<2;D++){for(A=0;A<c;A++)for(N=0;N<f;N++)d(I+A*(f+1)+N),d(I+A*(f+1)+N+1),d(I+(A+1)*(f+1)+N+1),d(I+(A+1)*(f+1)+N);I+=(c+1)*(f+1)}for(A=0;A<2;A++){for(N=0;N<f;N++)for(D=0;D<h;D++)d(I+N*(h+1)+D),d(I+N*(h+1)+D+1),d(I+(N+1)*(h+1)+D+1),d(I+(N+1)*(h+1)+D);I+=(f+1)*(h+1)}var z=0,j=0;for(N=-1;N<2;N+=2)for(D=0;D<h+1;D++){var P=D*b-S;for(A=0;A<c+1;A++){var U=-N*A*x+N*E;L.set(U,P,-1*N*_),p(L),C.set(0,0,-1*N),O.set(A/c,D/h),m(O,C)}}for(D=-1;D<2;D+=2)for(A=0;A<c+1;A++){var B=A*x-E;for(N=0;N<f+1;N++){var V=-D*N*T+D*_;L.set(B,-1*D*S,V),p(L),C.set(0,-1*D,0),O.set(A/c,(f-N)/f),m(O,C)}}for(A=-1;A<2;A+=2)for(N=0;N<f+1;N++){var F=-1*A*N*T+A*_;for(D=0;D<h+1;D++){var k=D*b-S;L.set(-1*A*E,k,F),p(L),C.set(-1*A,0,0),O.set((f-N)/f,D/h),m(O,C)}}var G=new u.a({faceRangeOffsets:g,faceValueIndices:v,values:y}),Y=new u.a({faceRangeOffsets:g,faceValueIndices:v,values:M}),H=new u.a({faceRangeOffsets:g,faceValueIndices:v,values:w}),Q=new o.a;Q.set("default",H);var W={faceRangeOffsets:g,positions:G,normalMap:Y,uvMaps:Q,colorMaps:new o.a},X=new s.a(W);return r.i(l.a)(X)}e.a=n;var i=r(1),a=(r.n(i),r(4)),o=r(18),s=r(9),u=r(7),l=r(138)},function(t,e,r){"use strict";function n(t,e,n,s,u,l){t=void 0!==t?t:20,e=void 0!==e?e:100,n=Math.max(1,Math.floor(n||8)),s=Math.max(1,Math.floor(s||8)),u=i.Math.clamp(u||0,0,2*Math.PI),l=i.Math.clamp(l||2*Math.PI,0,2*Math.PI-u);for(var c=e/s,h=e/2,f=new i.Vector3,d=new i.Vector3,p=s<3?2:s,m=1/p,g=new a.a(i.Vector3,s+1+2*(p+1)),v=new a.a(i.Vector3,s+1+2*(p+1)),y=0,M=p;y<=M;y++){var w=Math.PI-y*(Math.PI/2)*m;f.set(0,-t*Math.cos(w)+h,t*Math.sin(w)),d.set(0,-Math.cos(w),Math.sin(w)),g.setAt(y,f),v.setAt(y,d.normalize())}d.set(0,0,1);for(var x=0,b=s;x<=b;x++)f.set(0,h-x*c,t),g.setAt(x+p+1,f),v.setAt(x+p+1,d);for(var T=0,E=p;T<=E;T++){var S=Math.PI/2-T*(Math.PI/2)*m;f.set(0,-t*Math.cos(S)-h,t*Math.sin(S)),d.set(0,-Math.cos(S),Math.sin(S)),g.setAt(T+p+s+2,f),v.setAt(T+p+s+2,d.normalize())}var _=n<3?3:n;return r.i(o.a)(g,v,p,_,u,l)}e.a=n;var i=r(1),a=(r.n(i),r(4)),o=r(353)},function(t,e,r){"use strict";function n(t,e,n,c,h,f){c=c||12,h=h||0,f=f||2*Math.PI;var d=new a.a(i.Vector3,(c+1)*t.length),p=new a.a(i.Vector3,(c+1)*e.length),m=0,g=new Uint32Array(c*(t.length-1)+1),v=new Uint32Array(c*(t.length-1)*4),y=new a.a(i.Vector2,(c+1)*t.length),M=0,w=t.length-2*(n+1)-1,x=1/w,b=1/c;g[0]=0;for(var T=1,E=new i.Vector2,S=new i.Vector3,_=new i.Vector3,A=new i.Matrix4,D=new i.Matrix3,N=0,I=c;N<=I;N++){var L=h+N*b*f;A.makeRotationY(L),D.getNormalMatrix(A);for(var C=0,O=t.length;C<O;C++)t.getAt(C,S),e.getAt(C,_),S.applyMatrix4(A),_.applyMatrix3(D),d.setAt(m,S),p.setAt(m++,_)}for(var R=0,z=c;R<=z;R++){for(var j=R*b,P=0,U=n+1;P<U;P++){var B=1-P/n;E.set(j,B),y.setAt(M++,E)}for(var V=0,F=w+1;V<F;V++){var k=1-V*x;E.set(j,k),y.setAt(M++,E)}for(var G=0,Y=n+1;G<Y;G++){var H=1-G/n;E.set(j,H),y.setAt(M++,E)}}for(var Q=t.length,W=0,X=0,q=c;X<q;X++)for(var Z=0,K=t.length-1;Z<K;Z++){var J=Z+Q*X,$=J,tt=J+Q,et=J+1+Q,rt=J+1;v[W++]=rt,v[W++]=et,v[W++]=tt,v[W++]=$,g[T++]=W}var nt=new u.a({faceRangeOffsets:g,faceValueIndices:v,values:d}),it=new u.a({faceRangeOffsets:g,faceValueIndices:v,values:p}),at=new u.a({faceRangeOffsets:g,faceValueIndices:v,values:y}),ot=new o.a;ot.set("default",at);var st=new s.a;return st.faceRangeOffsets=nt.faceRangeOffsets,st.positions=nt,st.normalMap=it,st.uvMaps=ot,r.i(l.a)(new s.a(st))}e.a=n;var i=r(1),a=(r.n(i),r(4)),o=r(18),s=r(9),u=r(7),l=r(136)},function(t,e,r){"use strict";function n(t,e,n,c,h,f){n=n||12,c=c||0,h=h||2*Math.PI;var d=new a.a(i.Vector3,(n+1)*t.length),p=new a.a(i.Vector3,(n+1)*e.length),m=0,g=new Uint32Array(n*(t.length-1)+1),v=new Uint32Array(n*(t.length-1)*4),y=new a.a(i.Vector2,(n+1)*t.length),M=0,w=f?1/(t.length-1):1/(t.length-5),x=1/n;g[0]=0;for(var b=1,T=new i.Vector2,E=new i.Vector3,S=new i.Vector3,_=(new i.Matrix4).identity(),A=(new i.Matrix3).identity(),D=0,N=n;D<=N;D++){var I=c+D*x*h;_.makeRotationY(I),A.getNormalMatrix(_);for(var L=0,C=t.length;L<C;L++)t.getAt(L,E),e.getAt(L,S),E.applyMatrix4(_),S.applyMatrix3(A),d.setAt(m,E),p.setAt(m++,S)}for(var O=0,R=n;O<=R;O++){var z=O*x;if(!f)for(var j=0;j<2;j++){var P=j;0===P?T.set(0,P):T.set(z,P),y.setAt(M++,T)}for(var U=0,B=f?t.length:t.length-4;U<B;U++){var V=U*w;T.set(z,V),y.setAt(M++,T)}if(!f)for(var F=0;F<2;F++){var k=F;1===k?T.set(0,k):T.set(z,k),y.setAt(M++,T)}}for(var G=t.length,Y=0,H=0,Q=n;H<Q;H++)for(var W=0,X=t.length-1;W<X;W++){var q=W+G*H,Z=q,K=q+G,J=q+1+G,$=q+1;v[Y++]=Z,v[Y++]=K,v[Y++]=J,v[Y++]=$,g[b++]=Y}var tt=new u.a({faceRangeOffsets:g,faceValueIndices:v,values:d}),et=new u.a({faceRangeOffsets:g,faceValueIndices:v,values:p}),rt=new u.a({faceRangeOffsets:g,faceValueIndices:v,values:y}),nt=new o.a;nt.set("default",rt);var it=new s.a;return it.faceRangeOffsets=tt.faceRangeOffsets,it.positions=tt,it.normalMap=et,it.uvMaps=nt,r.i(l.a)(new s.a(it))}e.a=n;var i=r(1),a=(r.n(i),r(4)),o=r(18),s=r(9),u=r(7),l=r(136)},function(t,e,r){"use strict";function n(t,e,n,s){t=t||50,e=Math.max(1,Math.floor(e||8));var u=t/e;n=i.Math.clamp(n||0,0,2*Math.PI),s=i.Math.clamp(s||2*Math.PI,0,2*Math.PI-n);for(var l=new a.a(i.Vector3,e+1),c=new a.a(i.Vector3,e+1),h=new i.Vector3(0,1,0),f=new i.Vector3,d=0,p=e;d<=p;d++)f.set(t-d*u,0,0),l.setAt(d,f),c.setAt(d,h);var m=e<3?3:e;return r.i(o.a)(l,c,m,n,s)}e.a=n;var i=r(1),a=(r.n(i),r(4)),o=r(107)},function(t,e,r){"use strict";function n(t,e,r,n){r=Math.floor(r),n=Math.floor(n);var l=new Uint32Array(r*n+1),c=new Uint32Array(r*n*4),h=new a.a(i.Vector3,(r+1)*(n+1)),f=new a.a(i.Vector3,(r+1)*(n+1)),d=new a.a(i.Vector2,(r+1)*(n+1)),p=t/r,m=e/n,g=t/2,v=e/2,y=void 0,M=void 0,w=new i.Vector3,x=new i.Vector3(0,1,0),b=new i.Vector2;for(y=0,M=0;y<l.length;y++,M+=4)l[y]=M;for(y=0;y<n;y++)for(M=0;M<r;M++)c[4*(y*r+M)]=y*(r+1)+M,c[4*(y*r+M)+1]=y*(r+1)+M+1,c[4*(y*r+M)+2]=(y+1)*(r+1)+M+1,c[4*(y*r+M)+3]=(y+1)*(r+1)+M;for(y=0;y<n+1;y++){var T=y*m-v;for(M=0;M<r+1;M++){var E=M*p-g;w.set(E,0,-T),h.setAt(y*(r+1)+M,w),f.setAt(y*(r+1)+M,x),b.set(M/r,y/n),d.setAt(y*(r+1)+M,b)}}var S=new u.a({faceRangeOffsets:l,faceValueIndices:c,values:h}),_=new u.a({faceRangeOffsets:l,faceValueIndices:c,values:f}),A=new u.a({faceRangeOffsets:l,faceValueIndices:c,values:d}),D=new o.a;D.set("default",A);var N={faceRangeOffsets:l,positions:S,normalMap:_,uvMaps:D,colorMaps:new o.a};return new s.a(N)}e.a=n;var i=r(1),a=(r.n(i),r(4)),o=r(18),s=r(9),u=r(7)},function(t,e,r){"use strict";function n(t,e,n,s,u,l){if(!t)return null;n=n*Math.PI/180,s=s*Math.PI/180;for(var c=(new i.Matrix4).getInverse(u,!0).multiply(l),h=t.positions,f=h.values,d=f.length,p=h.faceRangeOffsets,m=h.faceValueIndices,g=new a.a(i.Vector3,d),v=new a.a(i.Vector3,d+1),y=new a.a(i.Vector3,d+1),M=new i.Vector3,w=new i.Vector3,x=new i.Vector3,b=p[0],T=p[1],E=b;E<T;++E){var S=m[E];f.getAt(S,M),g.setAt(E,M)}for(var _=0;_<=d;++_)g.getAt(_%d,M),M.applyMatrix4(c),v.setAt(_,M);for(var A=new i.Vector3,D=0;A.length()<1e-6&&D<d-2;++D)w=v.getAt(D+1).clone().sub(v.getAt(D)),x=v.getAt(D+2).clone().sub(v.getAt(D+1)),A.crossVectors(w,x);for(var N=new i.Vector3,I=new i.Vector3,L=new i.Vector3,C=new i.Vector3,O=0;O<d+1;++O)v.getAt((O-1+v.length)%v.length,N),v.getAt(O,I),v.getAt((O+1)%v.length,L),w.subVectors(I,N),x.subVectors(L,I),w.cross(A),x.cross(A),C.addVectors(w,x).normalize(),y.setAt(O,C);return r.i(o.a)(v,y,e,n,s)}e.a=n;var i=r(1),a=(r.n(i),r(4)),o=r(107)},function(t,e,r){"use strict";function n(t,e,n,s,u,l,c){t=t||50,e=Math.max(3,Math.floor(e||8)),n=Math.max(2,Math.floor(n||6)),s=i.Math.clamp(s||0,0,2*Math.PI),u=i.Math.clamp(u||2*Math.PI,0,2*Math.PI-s),l=i.Math.clamp(l||0,0,Math.PI),c=i.Math.clamp(c||Math.PI,0,Math.PI-l);for(var h=1/n,f=new a.a(i.Vector3,n+1),d=new a.a(i.Vector3,n+1),p=new i.Vector3,m=0,g=n;m<=g;m++){var v=l+m*h*c;p.set(t*Math.sin(v),-t*Math.cos(v),0),f.setAt(m,p),d.setAt(m,p.normalize())}return r.i(o.a)(f,d,e,s,u)}e.a=n;var i=r(1),a=(r.n(i),r(4)),o=r(107)},function(t,e,r){"use strict";function n(t,e,n,s,u,l,c,h){n=Math.floor(n)||1,s=Math.floor(s)||1,t=t||100,e=e||40,n=Math.max(n||8,3),s=Math.max(s||6,3),u=i.Math.clamp(u||0,0,2*Math.PI),l=i.Math.clamp(l||2*Math.PI,0,2*Math.PI-u),c=i.Math.clamp(c||0,0,2*Math.PI),h=i.Math.clamp(h||2*Math.PI,0,2*Math.PI-c);for(var f=1/s,d=new a.a(i.Vector3,s+1),p=new a.a(i.Vector3,s+1),m=new i.Vector3,g=new i.Vector3,v=0,y=s;v<=y;v++){var M=c+v*f*h;m.set(t+e*Math.cos(M),e*Math.sin(M),0),g.set(Math.cos(M),Math.sin(M),0),d.setAt(v,m),p.setAt(v,g.normalize())}return r.i(o.a)(d,p,n,u,l)}e.a=n;var i=r(1),a=(r.n(i),r(4)),o=r(107)},function(t,e,r){"use strict";function n(t){this.mesh=t,this.triangulation=null,this.renderIndexing=null}e.a=n;var i=r(29),a=r(4),o=r(134),s=r(106),u=r(331),l=r(192);n.prototype={constructor:n,reindexForRendering:function(t){if(null!==this.triangulation)throw Error("Reindex must come before triangulation!");return this.renderIndexing=new u.a(this.mesh,t),this},triangulate:function(t){var e=t||l.a;return this.triangulation=new e(this.mesh,this.renderIndexing),this},getNumFaces:function(){var t=this.triangulation;return null===t?this.mesh.getNumFaces():t.numTriangles},getNumFaceVertices:function(){return null===this.triangulation?this.mesh.getNumFaceVertices():3*this.getNumFaces()},getNumMapValues:function(t){var e=this.renderIndexing;return null!==e?e.numVertices:this.mesh.getMapById(t).values.length},getFaceArities:function(t,e,r){if(null!==this.triangulation)throw Error("No face arity export for triangular meshes!");var n=new o.a(this.getNumFaces(),t,e,r),i=this.mesh.faceRangeOffsets,a=i.length;if(a>1)for(var s=i[0],u=1;u!==a;++u){var l=i[u];n.setAt(u-1,l-s),s=l}return n.data},getMaterialIds:function(t,e,r){var n=null,i=this.mesh.materialIDs;if(null===i)return null;if(null===this.triangulation){var a=e||0,s=r||1,u=t||i.data.constructor;if(0===a&&1===s&&u===i.data.constructor)return i;n=new o.a(i.length,u,a,s),n.fromArray(i)}else this.triangulation.translateMaterialIds(i,n);return n.data},getMapValues:function(t,e,r,n){var i=null,a=this.renderIndexing,o=this.mesh.getMapById(t).values,s=o.type,u=r||0,l=n||s.InstanceScalarSize,c=e||o.data.constructor;if(null===a&&0===u&&l===s.InstanceScalarSize&&c===o.data.constructor)i=o;else{var h=null===a?o.length:a.numVertices;i=this._offsetObjects(s,h,c,u,l),null!==a?a.getMapValues(t,i):i.fromArray(o.data)}return i.data},getGroups:function(){return this.triangulation.groups},getMapIndices:function(t,e,r,n){var i=null,a=this.renderIndexing,s=this.triangulation,u=null!==a?a.renderIndices:this.mesh.getMapById(t).faceValueIndices;if(null===s){var l=r||0,c=n||1,h=e||u.constructor;if(0===l&&1===c&&h===u.constructor)return u;i=new o.a(u.length,h,l,c),i.fromArray(u)}else i=new o.a(3*this.triangulation.numTriangles,e,r,n),s.translateIndices(u,i);return i.data},getUnindexedMapValues:function(t,e,r,n,i){var a=null,o=this.mesh.getMapById(t),s=o.values,u=s.type,l=o.faceValueIndices,c=this.triangulation;if(e&&null!==c)a=this._offsetObjects(u,3*c.numTriangles,r||s.data.constructor,n,i),c.translateToUnindexedValues(s,a,l);else{a=this._offsetObjects(u,l.length,r||s.data.constructor,n,i);for(var h=s.newRangeArray(1),f=0,d=l.length;f!==d;++f)a.arrayToRange(s.rangeToArray(l[f],1,h),f,1)}return a.data},getTriangulatingIndices:function(t,e,r){var n=this.triangulation;if(null===n)return null;var i=new o.a(this.getNumFaceVertices(),t,e,r),a=this.getNumFaceVertices(),u=s.a.identityForReading(a);return n.translateIndices(u,i),i.data},_offsetObjects:function(t,e,r,n,o){var s=n||0,u=o||t.InstanceScalarSize,l=s/u|0,c=(l+e)*u,h=i.a.maybeCreate(r,c),f=0===s?h:h.subarray(s);return new a.a(t,null,f,u)}}},function(t,e,r){"use strict";function n(){this.defaultFaceArity=3,this.collapsePositions=!0,this.collapseMapValues=!0,this.faceArities=null,this.materialIds=null,this.mapIds=[],this.mapValues={},this.mapIndices={},this.skinning=null,this.creases=null}e.a=n;var i=r(1),a=(r.n(i),r(4)),o=r(134),s=r(29),u=r(33),l=r(7),c=r(9),h=r(193),f=r(332),d=r(330);n.prototype={constructor:n,setFaceArities:function(t,e,r,n){return this.faceArities=new o.a(e||null,t,r,n),this},setMaterialIds:function(t){for(var e=0;e<t.length;e++)if(t[e]>0){this.materialIds=t;break}return this},setMapValues:function(t,e,r,n,i){var o=u.a.checkId(t),s=this.mapIds;return-1===s.indexOf(o)&&s.push(o),this.mapValues[o]=new a.a(u.a.getTypeInfo(u.a.getAnchorName(t)).ElementType,r||null,n?e.subarray(n):e,i),this},setMapIndices:function(t,e,r,n,i){return this.mapIndices[u.a.checkId(t)]=new o.a(r||null,e,n,i),this},initializeBlendShape:function(){return this.blendShapes={},this},setBlendShapes:function(t,e,r,n){return this.blendShapes[t]=new h.a(new a.a(i.Vector3,null,e),r?new a.a(i.Vector3,null,r):null,n?new o.a(n.length,n):null),this},setSkinning:function(t,e,r,n){return this.skinning={},this.skinning.positionSkinRange=t,this.skinning.skinWeights=e,this.skinning.skinBoneIndices=r,this.skinning.poseSkinToPoseBoneTransform=new a.a(i.Matrix4,null,n),this},setCreases:function(t,e){this.creases={weights:t,edges:e}},toMeshAndClear:function(){var t=this.mapIds,e=this.mapValues,r=this.mapIndices,i=u.a.IdPositions,a=e[i],o=this.faceArities,h=this.materialIds;if(!a)throw Error("No positions!");var p=r[i]||null,m=p?p.length:a.length,g=null;if(null===o){var v=this.defaultFaceArity,y=m/v|0;o=new Uint32Array(y+1).fill(v,1)}else o=o.toArray(Uint32Array,1);g=s.a.accumulate(o);for(var M=0;M!==t.length;++M){var w=t[M];if(w!==i){var x=r[w];void 0!==x&&x.forceRepack(Uint32Array)}}var b=null;this.collapsePositions?(null!==p&&(b=p.repack(Uint32Array).data),a=d.a.collapsePositions(a,b)):null!==p&&(b=p.repack(Uint32Array).data);for(var T=c.a.fromData(g,a,b,h),E=0;E!==t.length;++E){var S=t[E];if(S!==i){var _=r[S],A=e[S],D=l.a.fromData(g,_.data,A);this.collapseMapValues&&(d.a.collapseMapVertexValues(T,D),D.compactValues()),u.a.assignMap(T,S,D)}}if(this.skinning&&(T.skinning=new f.a(this.skinning)),this.creases){var N=this.creases,I=N.weights,L=N.edges;if(L){for(var C=T.positions.edgeVertexAdjacency,O=new Float32Array(C.getNumEdges()),R=0,z=0;R<L.length;R+=2,z++)O[C.findEdgeId(L[R],L[R+1])]=I[z];T.edgeCreaseWeights=O}else T.edgeCreaseWeights=I}return n.call(this),this.blendShapes&&(T.blendShapes=this.blendShapes),T}}},function(t,e,r){"use strict";var n=r(33),i=r(360),a=r(13),o=(r.n(a),{NoIndices:0,SimpleIndices:1,CompactIndices:2,exportBufferGeometry:function(t,e,r,i,s,u,l,c){var h=new a.BufferGeometry,f=[],d=o._prepare(t,f,e,r,i,s,u,l),p=d.exporter,m=d.triangulationChanged,g=n.a.IdPositions,v={};if(e!==o.NoIndices){var y=e===o.SimpleIndices?p.getTriangulatingIndices():p.getMapIndices(g);h.setIndex(new a.BufferAttribute(y,1,!1))}if(r){for(var M=0,w=0;w!==f.length;++w)M+=f[w].itemSize;var x=0;switch(e){case o.NoIndices:x=p.getNumFaceVertices();break;case o.SimpleIndices:x=p.mesh.getNumFaceVertices();break;case o.CompactIndices:x=p.getNumMapValues(n.a.IdPositions)}for(var b=new Float32Array(M*x),T=new a.InterleavedBuffer(b,M),E=0,w=0;w!==f.length;++w){var S=f[w],_=S.itemSize,A=S.mapId;e!==o.CompactIndices?p.getUnindexedMapValues(A,e===o.NoIndices,b,E,M):p.getMapValues(A,b,E,M),h.addAttribute(S.threeName,new a.InterleavedBufferAttribute(T,_,E)),E+=_}}else for(var w=0;w!==f.length;++w){var b,S=f[w],D=e===o.NoIndices,N=n.a.resolveMap(t,S.mapId),I=s&&n.a.resolveMap(s,S.mapId);b=I===N&&c?c[S.mapId]:e!==o.CompactIndices?p.getUnindexedMapValues(S.mapId,D):p.getMapValues(S.mapId),v[S.mapId]=b,h.addAttribute(S.threeName,new a.BufferAttribute(b,S.itemSize,S.normalized))}var L=p.getGroups();if(t.materialIds&&L)for(var w=0;w<L.groupCounts.length;w++)L.groupCounts[w]>0&&h.addGroup(L.groupStarts[w],L.groupCounts[w],w);else h.addGroup(0,3*p.triangulation.numTriangles,0);return{geometry:h,triangulation:p.triangulation,renderIndexing:p.renderIndexing,triangulationChanged:m,valueMap:v}},_prepare:function(t,e,r,a,s,u,l,c){for(var h=new i.a(t),f=[],d=!u||!l||u.positions.faceValueIndices!==t.positions.faceValueIndices,p=!u||!c,m=0,g=new n.a.Iterator(t);g.next();){var v="",y=3,M=!1;switch(g.typeId){case n.a.TypePosition:v="position";break;case n.a.TypeTangent:if(!s)break;v="tangent";break;case n.a.TypeNormal:v="normal";break;case n.a.TypeUV:if(g.index>=2)break;v="uv"+(0!==g.index?g.index+1:""),y=2;break;case n.a.TypeColor:if(g.index>=1)break;v="color",M=!0}if(!(!v||a&&M)){var w=g.getId();f.push(w),e.push({mapId:w,threeName:v,itemSize:y,normalized:M}),++m}}for(var x=0;x<e.length&&!p;x++){var b=n.a.resolveMap(u,e[x].mapId),T=n.a.resolveMap(t,e[x].mapId);b.faceValueIndices!==T.faceValueIndices&&(p=!0)}r!==o.CompactIndices||p?r===o.CompactIndices&&p&&h.reindexForRendering(f):(c.mesh=t,h.renderIndexing=c);var E=!1;return d?(h.triangulate(),E=!0):h.triangulation=l,{exporter:h,triangulationChanged:E}}});e.a=o},function(t,e,r){"use strict";function n(t,e,r,i,o){function s(t){if(e.length)return n(e[0],e.slice(1),r,i,{contentType:u,method:l,body:c});var a={status:t.status,err:t,message:t.message};if("json"===u)try{a.body=JSON.parse(t.response)}catch(t){}i(a)}var u=o.contentType,l=o.method,c=o.body,h=o.onReadyStateChange,f=o.withCredentials;if("img"===u){var d=new Image;d.crossOrigin="anonymous",d.addEventListener("load",function(t){r(d)}),d.addEventListener("error",s),d.src=t}else{if("external"===u)throw new Error("External Script support not allowed in the browser");var p=new XMLHttpRequest,m=l||"GET";p.withCredentials=f||"GET"!==m,p.open(m,t,!0),!c||c instanceof FormData||(p.setRequestHeader("Content-Type","application/json"),"string"!=typeof c&&(c=a()(c))),"binary"===u&&(p.responseType="arraybuffer"),h&&(p.onreadystatechange=function(){h(p)}),p.onload=function(t){var e=p.response;p.status>=200&&p.status<400?("json"===u&&(e=JSON.parse(e)),r(e)):s(p)},p.onerror=s,p.send(c)}}var i=r(52),a=r.n(i),o=r(199),s=r.i(o.b)(n);e.a=s},function(t,e,r){"use strict";function n(t,e){return r.i(u.a)(function(e){return function(){return t(e.apply(void 0,arguments))}},e)}function i(t,e){return r.i(u.a)(function(e){return function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return e.apply(void 0,[t].concat(n))}},e)}function a(t,e){return r.i(u.a)(function(e,r){return s()({},n(t.dispatch,e.actions),i(t,e.selectors))},e)}e.a=a;var o=r(2),s=r.n(o),u=r(90)},function(t,e,r){"use strict";var n=r(6),i=r.n(n),a=r(24);r.n(a);e.a=function(t){var e=i()(t),n=e.reduce(function(e,r){return e.set(r,t[r]())},r.i(a.Map)());return function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,o=arguments[1],s=arguments[2];return e.reduce(function(e,n){var i=e.get(n),u=t[n](i,o,e,s);return r.i(a.is)(i,u)?e:e.set(n,u)},i)}}},function(t,e,r){"use strict";function n(t,e){var n=r.i(i.a)(t),o=r.i(a.b)(n);return o.dispatch=e(o),o}e.a=n;var i=r(365),a=r(108)},function(t,e,r){"use strict";function n(t){if(null!==t&&"object"===(void 0===t?"undefined":a()(t)))return"function"==typeof t.then}e.a=n;var i=r(40),a=r.n(i)},function(t,e,r){"use strict";function n(t){var e=s.a.map([l.a.Map,s.a.makeWriteHandler({tag:function(){return"iM"},rep:function(e){var r=0,n=new Array(2*e.size);return t&&(e=e.filter(t)),e.forEach(function(t,e){n[r++]=e,n[r++]=t}),n}}),l.a.List,s.a.makeWriteHandler({tag:function(){return"iL"},rep:function(e){return t&&(e=e.filter(t)),e.toArray()}}),Function,s.a.makeWriteHandler({tag:function(){return"_"},rep:function(){return null}})]);return s.a.writer("json",{handlers:e})}function i(t){return h.write(t)}function a(t){return c.read(t)}e.b=i,e.a=a;var o=r(605),s=r.n(o),u=r(24),l=r.n(u),c=function(){return s.a.reader("json",{mapBuilder:{init:function(){return{}},add:function(t,e,r){return t[e]=r,t},finalize:function(t){return t}},handlers:{iM:function(t){for(var e={},r=0;r<t.length;r+=2)e[t[r]]=t[r+1];return new l.a.Map(e)},iL:function(t){return l.a.List(t)}}})}(),h=n(!1)},function(t,e,r){"use strict";function n(t){if(d.length>0){var e=d.shift();e.meta.idx=t,p[t].postMessage(e)}else p[t].postMessage("CLOSE"),delete p[t]}function i(t,e,r,i){for(var a=-1,s=p.length,l=0;l<s;l++)if(!p[l]){a=l;break}if(d.length>0||"undefined"!=typeof Worker&&Worker&&s>=g&&-1===a)d.push({buffer:t,meta:e});else if("undefined"!=typeof Worker&&Worker&&u.a&&"safari"!==u.a.name){var h=new Worker(URL.createObjectURL(m)),f=-1===a?p.length:a;h.onmessage=function(t){"SUCCESS"===t.data.type?(r(t.data.buffer,t.data.meta),n(t.data.meta.idx)):i(t.data.error,t.data.meta)},h.postMessage({buffer:t,meta:o()({},e,{idx:f})}),p[f]=h}else{var v={data:new Uint8Array(t),offset:0,readByte:function(){return this.data[this.offset++]}},y={data:[],offset:0,writeByte:function(t){this.data[this.offset++]=t}};try{c.a.decompressFile(v,y);var M=new Uint8Array(y.data);r(M.buffer,e)}catch(t){i(t)}}}e.a=i;var a=r(2),o=r.n(a),s=r(128),u=r.n(s),l=r(603),c=r.n(l),h='\n//From Repository: https://github.com/jcmellado/js-lzma\n/*\nCopyright (c) 2011 Juan Mellado\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the "Software"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n*/\n\n/*\nReferences:\n- "LZMA SDK" by Igor Pavlov\n  http://www.7-zip.org/sdk.html\n*/\n\nvar LZMA = LZMA || {};\n\nLZMA.OutWindow = function(){\n  this._windowSize = 0;\n};\n\nLZMA.OutWindow.prototype.create = function(windowSize){\n  if ( (!this._buffer) || (this._windowSize !== windowSize) ){\n    this._buffer = [];\n  }\n  this._windowSize = windowSize;\n  this._pos = 0;\n  this._streamPos = 0;\n};\n\nLZMA.OutWindow.prototype.flush = function(){\n  var size = this._pos - this._streamPos;\n  if (size !== 0){\n    while(size --){\n      this._stream.writeByte(this._buffer[this._streamPos ++]);\n    }\n    if (this._pos >= this._windowSize){\n      this._pos = 0;\n    }\n    this._streamPos = this._pos;\n  }\n};\n\nLZMA.OutWindow.prototype.releaseStream = function(){\n  this.flush();\n  this._stream = null;\n};\n\nLZMA.OutWindow.prototype.setStream = function(stream){\n  this.releaseStream();\n  this._stream = stream;\n};\n\nLZMA.OutWindow.prototype.init = function(solid){\n  if (!solid){\n    this._streamPos = 0;\n    this._pos = 0;\n  }\n};\n\nLZMA.OutWindow.prototype.copyBlock = function(distance, len){\n  var pos = this._pos - distance - 1;\n  if (pos < 0){\n    pos += this._windowSize;\n  }\n  while(len --){\n    if (pos >= this._windowSize){\n      pos = 0;\n    }\n    this._buffer[this._pos ++] = this._buffer[pos ++];\n    if (this._pos >= this._windowSize){\n      this.flush();\n    }\n  }\n};\n\nLZMA.OutWindow.prototype.putByte = function(b){\n  this._buffer[this._pos ++] = b;\n  if (this._pos >= this._windowSize){\n    this.flush();\n  }\n};\n\nLZMA.OutWindow.prototype.getByte = function(distance){\n  var pos = this._pos - distance - 1;\n  if (pos < 0){\n    pos += this._windowSize;\n  }\n  return this._buffer[pos];\n};\n\nLZMA.RangeDecoder = function(){\n};\n\nLZMA.RangeDecoder.prototype.setStream = function(stream){\n  this._stream = stream;\n};\n\nLZMA.RangeDecoder.prototype.releaseStream = function(){\n  this._stream = null;\n};\n\nLZMA.RangeDecoder.prototype.init = function(){\n  var i = 5;\n\n  this._code = 0;\n  this._range = -1;\n\n  while(i --){\n    this._code = (this._code << 8) | this._stream.readByte();\n  }\n};\n\nLZMA.RangeDecoder.prototype.decodeDirectBits = function(numTotalBits){\n  var result = 0, i = numTotalBits, t;\n\n  while(i --){\n    this._range >>>= 1;\n    t = (this._code - this._range) >>> 31;\n    this._code -= this._range & (t - 1);\n    result = (result << 1) | (1 - t);\n\n    if ( (this._range & 0xff000000) === 0){\n      this._code = (this._code << 8) | this._stream.readByte();\n      this._range <<= 8;\n    }\n  }\n\n  return result;\n};\n\nLZMA.RangeDecoder.prototype.decodeBit = function(probs, index){\n  var prob = probs[index],\n      newBound = (this._range >>> 11) * prob;\n\n  if ( (this._code ^ 0x80000000) < (newBound ^ 0x80000000) ){\n    this._range = newBound;\n    probs[index] += (2048 - prob) >>> 5;\n    if ( (this._range & 0xff000000) === 0){\n      this._code = (this._code << 8) | this._stream.readByte();\n      this._range <<= 8;\n    }\n    return 0;\n  }\n\n  this._range -= newBound;\n  this._code -= newBound;\n  probs[index] -= prob >>> 5;\n  if ( (this._range & 0xff000000) === 0){\n    this._code = (this._code << 8) | this._stream.readByte();\n    this._range <<= 8;\n  }\n  return 1;\n};\n\nLZMA.initBitModels = function(probs, len){\n  while(len --){\n    probs[len] = 1024;\n  }\n};\n\nLZMA.BitTreeDecoder = function(numBitLevels){\n  this._models = [];\n  this._numBitLevels = numBitLevels;\n};\n\nLZMA.BitTreeDecoder.prototype.init = function(){\n  LZMA.initBitModels(this._models, 1 << this._numBitLevels);\n};\n\nLZMA.BitTreeDecoder.prototype.decode = function(rangeDecoder){\n  var m = 1, i = this._numBitLevels;\n\n  while(i --){\n    m = (m << 1) | rangeDecoder.decodeBit(this._models, m);\n  }\n  return m - (1 << this._numBitLevels);\n};\n\nLZMA.BitTreeDecoder.prototype.reverseDecode = function(rangeDecoder){\n  var m = 1, symbol = 0, i = 0, bit;\n\n  for (; i < this._numBitLevels; ++ i){\n    bit = rangeDecoder.decodeBit(this._models, m);\n    m = (m << 1) | bit;\n    symbol |= bit << i;\n  }\n  return symbol;\n};\n\nLZMA.reverseDecode2 = function(models, startIndex, rangeDecoder, numBitLevels){\n  var m = 1, symbol = 0, i = 0, bit;\n\n  for (; i < numBitLevels; ++ i){\n    bit = rangeDecoder.decodeBit(models, startIndex + m);\n    m = (m << 1) | bit;\n    symbol |= bit << i;\n  }\n  return symbol;\n};\n\nLZMA.LenDecoder = function(){\n  this._choice = [];\n  this._lowCoder = [];\n  this._midCoder = [];\n  this._highCoder = new LZMA.BitTreeDecoder(8);\n  this._numPosStates = 0;\n};\n\nLZMA.LenDecoder.prototype.create = function(numPosStates){\n  for (; this._numPosStates < numPosStates; ++ this._numPosStates){\n    this._lowCoder[this._numPosStates] = new LZMA.BitTreeDecoder(3);\n    this._midCoder[this._numPosStates] = new LZMA.BitTreeDecoder(3);\n  }\n};\n\nLZMA.LenDecoder.prototype.init = function(){\n  var i = this._numPosStates;\n  LZMA.initBitModels(this._choice, 2);\n  while(i --){\n    this._lowCoder[i].init();\n    this._midCoder[i].init();\n  }\n  this._highCoder.init();\n};\n\nLZMA.LenDecoder.prototype.decode = function(rangeDecoder, posState){\n  if (rangeDecoder.decodeBit(this._choice, 0) === 0){\n    return this._lowCoder[posState].decode(rangeDecoder);\n  }\n  if (rangeDecoder.decodeBit(this._choice, 1) === 0){\n    return 8 + this._midCoder[posState].decode(rangeDecoder);\n  }\n  return 16 + this._highCoder.decode(rangeDecoder);\n};\n\nLZMA.Decoder2 = function(){\n  this._decoders = [];\n};\n\nLZMA.Decoder2.prototype.init = function(){\n  LZMA.initBitModels(this._decoders, 0x300);\n};\n\nLZMA.Decoder2.prototype.decodeNormal = function(rangeDecoder){\n  var symbol = 1;\n\n  do{\n    symbol = (symbol << 1) | rangeDecoder.decodeBit(this._decoders, symbol);\n  }while(symbol < 0x100);\n\n  return symbol & 0xff;\n};\n\nLZMA.Decoder2.prototype.decodeWithMatchByte = function(rangeDecoder, matchByte){\n  var symbol = 1, matchBit, bit;\n\n  do{\n    matchBit = (matchByte >> 7) & 1;\n    matchByte <<= 1;\n    bit = rangeDecoder.decodeBit(this._decoders, ( (1 + matchBit) << 8) + symbol);\n    symbol = (symbol << 1) | bit;\n    if (matchBit !== bit){\n      while(symbol < 0x100){\n        symbol = (symbol << 1) | rangeDecoder.decodeBit(this._decoders, symbol);\n      }\n      break;\n    }\n  }while(symbol < 0x100);\n\n  return symbol & 0xff;\n};\n\nLZMA.LiteralDecoder = function(){\n};\n\nLZMA.LiteralDecoder.prototype.create = function(numPosBits, numPrevBits){\n  var i;\n\n  if (this._coders\n    && (this._numPrevBits === numPrevBits)\n    && (this._numPosBits === numPosBits) ){\n    return;\n  }\n  this._numPosBits = numPosBits;\n  this._posMask = (1 << numPosBits) - 1;\n  this._numPrevBits = numPrevBits;\n\n  this._coders = [];\n\n  i = 1 << (this._numPrevBits + this._numPosBits);\n  while(i --){\n    this._coders[i] = new LZMA.Decoder2();\n  }\n};\n\nLZMA.LiteralDecoder.prototype.init = function(){\n  var i = 1 << (this._numPrevBits + this._numPosBits);\n  while(i --){\n    this._coders[i].init();\n  }\n};\n\nLZMA.LiteralDecoder.prototype.getDecoder = function(pos, prevByte){\n  return this._coders[( (pos & this._posMask) << this._numPrevBits)\n    + ( (prevByte & 0xff) >>> (8 - this._numPrevBits) )];\n};\n\nLZMA.Decoder = function(){\n  this._outWindow = new LZMA.OutWindow();\n  this._rangeDecoder = new LZMA.RangeDecoder();\n  this._isMatchDecoders = [];\n  this._isRepDecoders = [];\n  this._isRepG0Decoders = [];\n  this._isRepG1Decoders = [];\n  this._isRepG2Decoders = [];\n  this._isRep0LongDecoders = [];\n  this._posSlotDecoder = [];\n  this._posDecoders = [];\n  this._posAlignDecoder = new LZMA.BitTreeDecoder(4);\n  this._lenDecoder = new LZMA.LenDecoder();\n  this._repLenDecoder = new LZMA.LenDecoder();\n  this._literalDecoder = new LZMA.LiteralDecoder();\n  this._dictionarySize = -1;\n  this._dictionarySizeCheck = -1;\n\n  this._posSlotDecoder[0] = new LZMA.BitTreeDecoder(6);\n  this._posSlotDecoder[1] = new LZMA.BitTreeDecoder(6);\n  this._posSlotDecoder[2] = new LZMA.BitTreeDecoder(6);\n  this._posSlotDecoder[3] = new LZMA.BitTreeDecoder(6);\n};\n\nLZMA.Decoder.prototype.setDictionarySize = function(dictionarySize){\n  if (dictionarySize < 0){\n    return false;\n  }\n  if (this._dictionarySize !== dictionarySize){\n    this._dictionarySize = dictionarySize;\n    this._dictionarySizeCheck = Math.max(this._dictionarySize, 1);\n    this._outWindow.create( Math.max(this._dictionarySizeCheck, 4096) );\n  }\n  return true;\n};\n\nLZMA.Decoder.prototype.setLcLpPb = function(lc, lp, pb){\n  var numPosStates = 1 << pb;\n\n  if (lc > 8 || lp > 4 || pb > 4){\n    return false;\n  }\n\n  this._literalDecoder.create(lp, lc);\n\n  this._lenDecoder.create(numPosStates);\n  this._repLenDecoder.create(numPosStates);\n  this._posStateMask = numPosStates - 1;\n\n  return true;\n};\n\nLZMA.Decoder.prototype.init = function(){\n  var i = 4;\n\n  this._outWindow.init(false);\n\n  LZMA.initBitModels(this._isMatchDecoders, 192);\n  LZMA.initBitModels(this._isRep0LongDecoders, 192);\n  LZMA.initBitModels(this._isRepDecoders, 12);\n  LZMA.initBitModels(this._isRepG0Decoders, 12);\n  LZMA.initBitModels(this._isRepG1Decoders, 12);\n  LZMA.initBitModels(this._isRepG2Decoders, 12);\n  LZMA.initBitModels(this._posDecoders, 114);\n\n  this._literalDecoder.init();\n\n  while(i --){\n    this._posSlotDecoder[i].init();\n  }\n\n  this._lenDecoder.init();\n  this._repLenDecoder.init();\n  this._posAlignDecoder.init();\n  this._rangeDecoder.init();\n};\n\nLZMA.Decoder.prototype.decode = function(inStream, outStream, outSize){\n  var state = 0, rep0 = 0, rep1 = 0, rep2 = 0, rep3 = 0, nowPos64 = 0, prevByte = 0,\n      posState, decoder2, len, distance, posSlot, numDirectBits;\n\n  this._rangeDecoder.setStream(inStream);\n  this._outWindow.setStream(outStream);\n\n  this.init();\n\n  while(outSize < 0 || nowPos64 < outSize){\n    posState = nowPos64 & this._posStateMask;\n\n    if (this._rangeDecoder.decodeBit(this._isMatchDecoders, (state << 4) + posState) === 0){\n      decoder2 = this._literalDecoder.getDecoder(nowPos64 ++, prevByte);\n\n      if (state >= 7){\n        prevByte = decoder2.decodeWithMatchByte(this._rangeDecoder, this._outWindow.getByte(rep0) );\n      }else{\n        prevByte = decoder2.decodeNormal(this._rangeDecoder);\n      }\n      this._outWindow.putByte(prevByte);\n\n      state = state < 4? 0: state - (state < 10? 3: 6);\n\n    }else{\n\n      if (this._rangeDecoder.decodeBit(this._isRepDecoders, state) === 1){\n        len = 0;\n        if (this._rangeDecoder.decodeBit(this._isRepG0Decoders, state) === 0){\n          if (this._rangeDecoder.decodeBit(this._isRep0LongDecoders, (state << 4) + posState) === 0){\n            state = state < 7? 9: 11;\n            len = 1;\n          }\n        }else{\n          if (this._rangeDecoder.decodeBit(this._isRepG1Decoders, state) === 0){\n            distance = rep1;\n          }else{\n            if (this._rangeDecoder.decodeBit(this._isRepG2Decoders, state) === 0){\n              distance = rep2;\n            }else{\n              distance = rep3;\n              rep3 = rep2;\n            }\n            rep2 = rep1;\n          }\n          rep1 = rep0;\n          rep0 = distance;\n        }\n        if (len === 0){\n          len = 2 + this._repLenDecoder.decode(this._rangeDecoder, posState);\n          state = state < 7? 8: 11;\n        }\n      }else{\n        rep3 = rep2;\n        rep2 = rep1;\n        rep1 = rep0;\n\n        len = 2 + this._lenDecoder.decode(this._rangeDecoder, posState);\n        state = state < 7? 7: 10;\n\n        posSlot = this._posSlotDecoder[len <= 5? len - 2: 3].decode(this._rangeDecoder);\n        if (posSlot >= 4){\n\n          numDirectBits = (posSlot >> 1) - 1;\n          rep0 = (2 | (posSlot & 1) ) << numDirectBits;\n\n          if (posSlot < 14){\n            rep0 += LZMA.reverseDecode2(this._posDecoders,\n                rep0 - posSlot - 1, this._rangeDecoder, numDirectBits);\n          }else{\n            rep0 += this._rangeDecoder.decodeDirectBits(numDirectBits - 4) << 4;\n            rep0 += this._posAlignDecoder.reverseDecode(this._rangeDecoder);\n            if (rep0 < 0){\n              if (rep0 === -1){\n                break;\n              }\n              return false;\n            }\n          }\n        }else{\n          rep0 = posSlot;\n        }\n      }\n\n      if (rep0 >= nowPos64 || rep0 >= this._dictionarySizeCheck){\n        return false;\n      }\n\n      this._outWindow.copyBlock(rep0, len);\n      nowPos64 += len;\n      prevByte = this._outWindow.getByte(0);\n    }\n  }\n\n  this._outWindow.flush();\n  this._outWindow.releaseStream();\n  this._rangeDecoder.releaseStream();\n\n  return true;\n};\n\nLZMA.Decoder.prototype.setDecoderProperties = function(properties){\n  var value, lc, lp, pb, dictionarySize;\n\n  if (properties.size < 5){\n    return false;\n  }\n\n  value = properties.readByte();\n  lc = value % 9;\n  value = ~~(value / 9);\n  lp = value % 5;\n  pb = ~~(value / 5);\n\n  if ( !this.setLcLpPb(lc, lp, pb) ){\n    return false;\n  }\n\n  dictionarySize = properties.readByte();\n  dictionarySize |= properties.readByte() << 8;\n  dictionarySize |= properties.readByte() << 16;\n  dictionarySize += properties.readByte() * 16777216;\n\n  return this.setDictionarySize(dictionarySize);\n};\n\nLZMA.decompress = function(properties, inStream, outStream, outSize){\n  var decoder = new LZMA.Decoder();\n\n  if ( !decoder.setDecoderProperties(properties) ){\n    throw "Incorrect stream properties";\n  }\n\n  if ( !decoder.decode(inStream, outStream, outSize) ){\n    throw "Error in data stream";\n  }\n\n  return true;\n};\n\nLZMA.decompressFile = function(inStream, outStream){\n  var decoder = new LZMA.Decoder(), outSize;\n\n  if ( !decoder.setDecoderProperties(inStream) ){\n    throw "Incorrect stream properties";\n  }\n\n  outSize = inStream.readByte();\n  outSize |= inStream.readByte() << 8;\n  outSize |= inStream.readByte() << 16;\n  outSize += inStream.readByte() * 16777216;\n\n  inStream.readByte();\n  inStream.readByte();\n  inStream.readByte();\n  inStream.readByte();\n\n  if ( !decoder.decode(inStream, outStream, outSize) ){\n    throw "Error in data stream";\n  }\n\n  return true;\n};\n\n//export default LZMA;\n\n\n',f="\nfunction decompressBuffer(buffer){\n  var inStream = {\n    data: new Uint8Array(buffer),\n    offset: 0,\n    readByte: function() {\n      return this.data[this.offset++]\n    },\n  }\n  var outStream = {\n    data:[],\n    offset: 0,\n    writeByte: function(val) {\n      this.data[this.offset++] = val\n    },\n  }\n  LZMA.decompressFile(inStream, outStream);\n  var uintGeomArray = new Uint8Array(outStream.data);\n  return uintGeomArray.buffer;\n}\n\nself.onmessage = function( event ) {\n  if(event.data==='CLOSE') {\n    self.close();\n    return;\n  }\n\n  try {\n    var decompBuffer = decompressBuffer(event.data.buffer);\n    self.postMessage({type:'SUCCESS', buffer:decompBuffer, meta:event.data.meta});\n  } catch(e) {\n    self.postMessage({type:'FAILURE', error:e, meta:event.data.meta});\n  }\n\n};\n",d=[],p=[],m=void 0;try{m=new Blob([h,f],{type:"application/javascript"})}catch(t){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,m=new BlobBuilder,m.append(h),m.append(f),m=m.getBlob()}var g=Math.max(window.navigator.hardwareConcurrency-1,1)},function(t,e,r){"use strict";function n(t,e,r,n){var i=(new u.Matrix4).getInverse(e),a=(new u.Matrix4).multiply(i).multiply(t),o=(new u.Matrix4).multiply(r).multiply(i).multiply(t),s=new u.Vector3(0,0,0),l=n,c=s.clone().applyMatrix4(a),h=l.clone().applyMatrix4(a),f=(new u.Vector3).subVectors(h,c).normalize(),d=s.clone().applyMatrix4(o);return d.addScalar(1).multiplyScalar(.5),{position:d,normal:f}}function i(t,e,i,o){return function(f){var d=r.i(l.b)(f,t),p=r.i(c.g)(f),m=r.i(l.a)(f,{id:p,evalPlug:"Camera"}),g=r.i(l.b)(f,p);if(!g)return{};var v=r.i(h.a)(m),y=n(d,g,v,a(f,t,e,i,o)),M=r.i(l.a)(f,{id:t,evalPlug:"Annotation"}),w=1;if(M.limitVisilibility){var x=Math.min(.5*M.visibilityAngle,180),b=new u.Vector3(0,0,-1),T=(b.dot(y.normal),u.Math.radToDeg(Math.acos(b.dot(y.normal))));T>x?w=0:T>.75*x&&(w=(x-T)/(.25*x))}return s()({alpha:w},y)}}function a(t,e,n,i,a){var o=null;if(n){var s=new u.Vector3(0,0,0);a&&(s=(new u.Vector3).setFromMatrixPosition(r.i(l.b)(t,a)));var c=r.i(l.b)(t,e),h=(new u.Vector3).setFromMatrixPosition(c);o=s.clone().sub(h).normalize();var f=new u.Matrix4;f.getInverse(c),o.applyMatrix4(f).normalize()}else o=new u.Vector3,o[i]=-1;return o}e.a=i;var o=r(2),s=r.n(o),u=r(13),l=(r.n(u),r(5)),c=r(3),h=r(110)},function(t,e,r){"use strict";function n(t,e,r,n,a){var s=t.lightType,u=r.getObjectByName("Objects");switch(s){case"DirectionalLight":var l=new o.DirectionalLight(t.color.getHex(),t.intensity,t.decayExponent);l.visible=n;var c=new o.Euler(e.rotation.x*Math.PI/180,e.rotation.y*Math.PI/180,e.rotation.z*Math.PI/180,"ZYX"),h=(new o.Quaternion).setFromEuler(c);return l.quaternion.set(h.x,h.y,h.z,h.w),l.target.position.set(0,0,-1),l.target.updateMatrix(),l.add(l.target),i(t,l,u),l;case"PointLight":var f=new o.PointLight(t.color.getHex(),t.intensity,t.distance);return f.visible=n,i(t,f),f;case"SpotLight":var d=new o.SpotLight(t.color.getHex(),t.intensity,t.distance,t.coneAngle*Math.PI/180,t.coneFalloff/100,t.decayExponent);return d.visible=n,d.position.set(e.translation.x,e.translation.y,e.translation.z),d.target.position.set(0,0,-1),d.target.updateMatrix(),d.add(d.target),i(t,d,u),d;case"HemisphereLight":var p=new o.HemisphereLight(t.color.getHex(),t.gndColor.getHex(),t.intensity);p.rotateZ(-Math.PI/2);var m=new o.Object3D;return m.add(p),m.visible=n,i(t,p,u),m;case"AreaLight":return;default:return void console.warn("Unknown light type: "+s)}}function i(t,e,r){switch(e.intensity=t.intensity,e.color.copy(t.color),t.lightType){case"DirectionalLight":e.shadow.camera.left=-t.shadowCameraSize,e.shadow.camera.right=t.shadowCameraSize,e.shadow.camera.top=t.shadowCameraSize,e.shadow.camera.bottom=-t.shadowCameraSize,e.shadow.spreadAngle=o.Math.DEG2RAD*t.sourceAngle;break;case"PointLight":case"SpotLight":e.distance=t.distance,e.angle=o.Math.DEG2RAD*t.coneAngle,e.penumbra=o.Math.DEG2RAD*t.coneFalloff,e.decay=t.decayExponent,e.shadow.radius=t.radius;break;case"HemisphereLight":e.groundColor.copy(t.gndColor);break;case"AreaLight":break;default:console.warn("Unknown light type: "+type)}if(e.shadow){e.castShadow=t.shadow,e.shadow.bias=t.shadowBias,e.shadow.mapSize.width=t.shadowSize,e.shadow.mapSize.height=t.shadowSize,e.autoShadow=t.autoShadow;e.autoShadow&&e.updateShadow?e.updateShadow(r):(e.shadow.virtualPosition=void 0,e.shadow.camera.near=t.shadowNearClip,e.shadow.camera.far=t.shadowFarClip),e.shadow.update&&e.shadow.update(e)}}function a(t){if(t){var e=t.getObjectByName("Objects");e&&e.traverseVisible&&e.traverseVisible(function(t){t.isLight&&t.autoShadow&&t.updateShadow&&t.updateShadow(e)})}}e.b=n,e.c=i,e.a=a;var o=r(13);r.n(o),r(392),r(3)},function(t,e,r){"use strict";function n(t,e,r){var n=y.a.stream();return t.addEventListener(e,n),r?y.a.map(r,n):n}function i(t,e,r){var n=y.a.stream();return t.addEventListener(e,n),y.a.transduce(r,n)}function a(t){return t.touches&&1===t.touches.length}function o(t){return t.touches&&2===t.touches.length}function s(t,e){var r=y.a.stream()(0),n=y.a.combine(function(t,e){return t.end()?e():t()},[t,r]),i=1;return y.a.on(function(){var e=l(1e3/60),n=new Date;if(!t())return r.end(!0);var a=t(),o=a.deltaX,s=a.deltaY;y.a.map(function(t){i<=.005?(r.end(!0),e.end(!0)):(i=Math.exp(-8*(Date.now()-n)/1e3),r({deltaX:o*i,deltaY:s*i}))},e)},t.end),n}function u(t,e,u){function d(t){var e=N.getBoundingClientRect();I={x:e.left+window.pageXOffset,y:e.top+window.pageYOffset},L=t}function m(t){return R&&(R.lastMove=new Date),t}function v(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){if(O[t]){for(var n,i,a,o=C.length-1;o>=0;o--)if(n=C[o],i=n.tool,n.enabled&&i[t])if(a=i[t].call(n,r),e.findFirst){if(!1!==a)break}else if(!e.doAll&&!1===a)break;return a}}}function T(t){return{rect:L,clientX:t.clientX-I.x+window.pageXOffset,clientY:t.clientY-I.y+window.pageYOffset,deltaX:t.movementX,deltaY:t.movementY,originalEvent:t,which:t.which,altKey:t.altKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,shiftKey:t.shiftKey}}function E(t){if(!t.touches||!t.touches.length)return t;var e=t.srcElement||t.target,r=e.getBoundingClientRect();return{which:1,rect:L,clientX:t.touches[0].clientX-r.left,clientY:t.touches[0].clientY-r.top,isTouch:!0,originalEvent:t}}function S(t){return t.preventDefault(),{a:{x:t.touches[0].clientX,y:t.touches[0].clientY},b:{x:t.touches[1].clientX,y:t.touches[1].clientY}}}function _(){var t=e.externals.vrControls,r=e.externals.controllers;if(t&&r&&O.controllerupdate){var n=r.filter(function(t){return t.update(),!!t.getGamepad()}).map(function(e){var r=e.getGamepad(),n=e.position.clone(),i=e.quaternion.clone();return n.applyQuaternion(t.rotationalOffset).add(t.offset),i.premultiply(t.rotationalOffset),{id:r.id,index:r.index,position:n,orientation:i,buttons:r.buttons,axes:r.axes}});return n.length&&v("controllerupdate")({states:n}),n}}function A(e){if(O.nodeenter||O.nodeleave){var n=e.map(function(t){var e=new w.Vector3(0,0,-1).applyQuaternion(t.orientation);return new w.Ray(t.position,e)}),i=r.i(x.e)(t,{plug:"Properties",properties:{interactive:!0}}).map(function(e){return{id:e[0],box:r.i(x.f)(t,e[0])}});n.map(function(t,e){return{index:e,nodeId:i.reduce(function(e,r){var n=t.intersectBox(r.box),i=n?n.distanceTo(t.origin):1/0;return i<e.distance?{id:r.id,distance:i}:e},{id:null,distance:1/0}).id}}).forEach(function(t){var r=e[t.index],n=r.id+r.index,i=X[n];t.nodeId!==i&&(i&&v("nodeleave")(i),t.nodeId&&v("nodeenter")(t.nodeId),X[n]=t.nodeId)})}}function D(){if(O.nodeenter||O.nodeleave){var e=r.i(b.v)(t)[0];e!==q&&(q&&v("nodeleave")(q),e&&v("nodeenter")(e),q=e)}}var N=u.parentNode.parentNode,I={x:0,y:0},L={width:0,height:0},C=[],O={},R=!1,z=void 0,j=!1;y.a.on(v("dragenter"),n(u,"dragenter")),y.a.on(v("dragover"),n(u,"dragover")),y.a.on(v("dragleave"),n(u,"dragleave")),y.a.on(v("dblclick"),n(u,"dblclick"));var P={};y.a.on(function(t){P[t.key]||(v("keydown")(t),P[t.key]=setInterval(function(){return v("keyheld")(t)},17))},n(u,"keydown")),y.a.on(function(t){P[t.key]&&(clearInterval(P[t.key]),delete P[t.key]),v("keyup")(t)},n(u,"keyup"));var U=(n(u,"click",T),n(u,"mousedown",T)),B=n(u,"mousemove",T),V=n(window,"mouseup",T),F=y.a.stream(),k=y.a.stream(),G=i(u,"touchstart",r.i(M.a)(r.i(M.b)(a),r.i(M.c)(E))),Y=n(u,"touchend",E);y.a.on(function(t){function e(t){t.preventDefault();var e={rect:L,clientX:t.clientX-I.x,clientY:t.clientY-I.y,originalEvent:t,which:t.which,altKey:t.altKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,shiftKey:t.shiftKey};return void 0===t.movementX?(e.deltaX=null===n?0:t.clientX-n,e.deltaY=null===n?0:t.clientY-a):(e.deltaX=t.movementX,e.deltaY=t.movementY),n=t.clientX,a=t.clientY,e}if(t.originalEvent.target.focus(),v("mousedown")(t),j={start:new Date,event:t},z=v("drag",{findFirst:!0})(t)){R={lastMove:new Date};var n=null,a=null;F=i(window,"mousemove",r.i(M.a)(r.i(M.c)(m),r.i(M.c)(e))),k.end(!0),k=z.momentum?s(F,V):F,k.map(z.handle)}},U),y.a.on(function(t){function e(t){z.allowDefault||t.originalEvent.preventDefault();var e=g()(t,{deltaX:t.clientX-n,deltaY:t.clientY-o});return n=t.clientX,o=t.clientY,e}if(v("mousedown")(t),j={start:new Date,event:t},z=v("drag",{findFirst:!0})(t)){R={lastMove:new Date};var n=t.clientX,o=t.clientY;F=i(u,"touchmove",r.i(M.a)(r.i(M.b)(a),r.i(M.c)(m),r.i(M.c)(E),r.i(M.c)(e))),k.end(!0),k=z.momentum?s(F,Y):F,k.map(z.handle)}},G);var H=y.a.merge(Y,V);y.a.on(function(t){if(R&&(F.end(!0),z.end&&z.end(),new Date-R.lastMove>200&&k.end(!0)),v("mouseup")(t),j&&new Date-j.start<300){var e=Math.abs(t.clientX-j.event.clientX),r=Math.abs(t.clientY-j.event.clientY);isNaN(e)?v("click")(j.event):e<=5&&r<=5&&v("click")(t)}R=!1,j=!1},H),y.a.on(v("hover"),y.a.transduce(r.i(M.b)(function(){return!R&&O.hover}),B));var Q=v("scroll");n(u,"wheel",function(t){if(O.scroll){t.preventDefault();var e=Math.abs(t.deltaY)>100?200:10;Q({delta:-t.deltaY/(Math.abs(t.wheelDelta)||e),originalEvent:t})}});var W=c(function(t){var e=t,n=i(u,"touchmove",r.i(M.a)(r.i(M.b)(o),r.i(M.c)(S),r.i(M.c)(function(t){var r={pinchX:t.b.x-e.b.x-(t.a.x-e.a.x),pinchY:e.a.y-t.a.y-(e.b.y-t.b.y),dragX:(t.a.x-e.a.x+(t.b.x-e.b.x))/2,dragY:(t.a.y-e.a.y+(t.b.y-e.b.y))/2,a:t.a,b:t.b};return e=t,r})));return y.a.endsOn(Y,n),n},i(u,"touchstart",r.i(M.a)(r.i(M.b)(o),r.i(M.c)(S))));y.a.on(function(t){var e=t.pinchX,r=t.pinchY,n=t.dragX,i=t.dragY,a=t.a,o=t.b;Math.abs(e)+Math.abs(r)>Math.abs(n)+Math.abs(i)?v("pinch")({deltaX:a.x>o.x?-e:e,deltaY:a.y>o.y?r:-r}):v("swipe")({deltaX:n,deltaY:i})},W);var X={},q=void 0,Z=l(100),K=f(Z,B),J=h(),$=void 0;return y.a.on(function(e){if((O.nodeenter||O.nodeleave)&&J(e)){var n=r.i(b.w)(t,e)[0];n!==$&&($&&v("nodeleave")($),n&&v("nodeenter")(n),$=n)}},K),{resize:d,frameUpdate:function(t){var e=_();e&&e.length?A(e):t===b.m.vr&&D()},updateTools:function(t){C=t,O={},C.forEach(function(t){p()(t.tool).forEach(function(t){return O[t]=!0})})}}}function l(t){function e(){if(!r.end()){var i=Date.now();n+=t,r(i),setTimeout(e,n-i)}}var r=y.a.stream(),n=Date.now();return e(),r}function c(t,e){return y.a.combine(function(e,r){y.a.map(r,t(e()))},[e])}function h(){var t=void 0;return function(e){return e!==t&&(t=e,!0)}}function f(t,e){return y.a.combine(function(){return e()},[t])}e.a=u;var d=r(6),p=r.n(d),m=r(2),g=r.n(m),v=r(602),y=r.n(v),M=r(394),w=r(1),x=(r.n(w),r(5)),b=r(3)},function(t,e,r){"use strict";function n(t,e){var n=e.hdrSource;if(!n)return null;var i=r.i(M.j)(n)(t);if(!i)return null;var a=new Uint8Array(i);return(new y.RGBELoader)._parser(a)}function i(t,e,r){var n=t.getTranslator().textureCache,i=n[e]&&n[e].image;return!i||r&&i._v!==r._v?null:n[e].value}function a(t,e,r,n){var i=t.getTranslator().textureCache;return i[e]&&i[e].value.dispose(),i[e]={image:r,value:n},n}function o(t,e,r,o,s){var u=r.maps,l=r.nodeId,c=i(t,l,r);if(c)return c;if(!u)return null;for(var h=0;h<u.length;h++)if(!u[h])return null;var f=!1,d=!1;s&&u[0].preferHDR&&(f=!0),f&&x&&u[0].hdrSource&&(d=!0);var p=u.map(function(e){var r=i(t,e.nodeId,e);if(r)return r;if((r=(d?n:w.a)(t,e,!0))&&d){var o=new y.DataTexture(r.data,r.width,r.height);o.encoding=y.RGBEEncoding,o.generateMipmaps=!1,o.type=y.UnsignedByteType,o.minFilter=y.NearestFilter,o.magFilter=y.NearestFilter,o.format=y.RGBEFormat,r=o,a(t,e.nodeId,e,r)}return r});if(p.filter(function(t){return!!t}).length!==p.length)return null;var m=new y.CubeTexture;if(m.images=p,m.flipY=!1,f&&(m.encoding=d?y.RGBEEncoding:u[0].hdrEncoding),m.needsUpdate=!0,o)return a(t,l,r,m);var g=d?y.NearestFilter:y.LinearFilter,v=new y.PMREMGenerator(m,20);v.update(e),v.cubeLods[0].texture.magFilter=g,v.cubeLods[0].texture.minFilter=g;var M=new y.PMREMCubeUVPacker(v.cubeLods);return M.update(e),M.CubeUVRenderTarget.texture.magFilter=g,M.CubeUVRenderTarget.texture.minFilter=g,a(t,l,r,M.CubeUVRenderTarget.texture)}function s(t,e){if(e){var n=e.nodeId;i(t,n,e)||(e.maps?e.maps.forEach(function(e){return r.i(w.a)(t,e)}):r.i(w.a)(t,e))}}function u(t,e,r,s,u){if(!r)return s&&(s.texture=null),null;var l="envMap"===u||"emissiveMap"===u;if(r.maps)return o(t,e,r,!1,l);var c=!1,h=!1;l&&r.preferHDR&&(c=!0),c&&x&&r.hdrSource&&(h=!0);var f=m()({},r),d=r.nodeId,p=i(t,d,r);if(!p){if(p=h?new y.DataTexture:new y.Texture,p.meta={nodeId:d},r.canvasOperations){p.meta.source="canvas operator";var g=r.canvasOperations,v=i(t,r.nodeId),M=v&&v.image,b=M||t.createCanvas(r.width,r.height),T=b.getContext("2d");T.clearRect(0,0,b.width,b.height);g.reduce(function(e,r){T.save();var n=e&&r(T,t,b);return T.restore(),n},!0)&&(p.image=b)}else{p.meta.source="image fetch";var E=h?n:w.a;p.image=E(t,r)}if(!p.image)return s&&(s.texture=null),null;p.transparent=!0;var S={0:y.ClampToEdgeWrapping,1:y.RepeatWrapping,2:y.MirroredRepeatWrapping};p.wrapS=S[f.wrapU],p.wrapT=S[f.wrapV],p.generateMipmaps=!c&&f.generateMipMaps,p.anisotropy=p.generateMipmaps?16:1,p.magFilter=h?y.NearestFilter:f.magFilter,p.minFilter=h?y.NearestFilter:f.minFilter,p.encoding=c?userHDRSource?y.RGBEEncoding:f.hdrEncoding:y.sRGBEncoding,y.Math.nearestPowerOfTwo(p.image.width)===p.image.width&&y.Math.nearestPowerOfTwo(p.image.height)===p.image.height||(p.wrapS=y.ClampToEdgeWrapping,p.wrapT=y.ClampToEdgeWrapping,p.generateMipmaps=!1,p.anisotropy=1,p.anisotropy=1,p.magFilter=h?y.NearestFilter:y.LinearFilter,p.minFilter=h?y.NearestFilter:y.LinearFilter),p.needsUpdate=!0,s.texture&&s.texture.dispose(),a(t,d,r,p)}if(!s)return p;s.texture=p,s.uvTransform=!0,s.uvOffset=new y.Vector2(f.uOffset,f.vOffset),s.uvRepeat=new y.Vector2(f.uTile,f.vTile),s.texelTransform=!0,s.texelInvert=f.invert;var _=f.brightness-f.gain*f.gainPivot;return s.texelScale=f.gain,s.texelOffset=_,s}function l(t,e,r,n){function i(r,n){var i=u(t,e,r,a[n]||new y.MaterialMap,n);i&&!a[n]&&(a[n]=i)}var a=n&&n instanceof y.MeshPhysicalMaterial?n:new y.MeshPhysicalMaterial({});if(!r)return a;if("MultiID"===r.type){for(var o=[],s=0;s<30;s++){var c=n&&n.materials&&n.materials[s];if(r["material"+s])o.push(l(t,e,r["material"+s],c));else{var f={defaultColor:r.defaultColor};o.push(l(t,e,f,c))}}return a=new y.MultiMaterial(o)}if(r.defaultColor)return a.color=r.defaultColor,a;if(!r.baseColor)return r.diffuseColor&&(a.color=r.diffuseColor),a;var p={color:"baseColor",aoMapIntensity:"aoMapIntensity",bumpScale:"bumpScale",emissive:"emissiveColor",falloff:"baseFalloff",falloffColor:"baseFalloffColor",metalness:"metallic",roughness:"roughness",clearCoat:"clearCoat",clearCoatRoughness:"clearCoatRoughness",opacity:"opacityFactor",falloffOpacity:"opacityFalloffFactor",transparent:"baseMapTransparent"},m=["depthTest","depthWrite"],g={map:"baseMap",bumpMap:"bumpMap",aoMap:"aoMap",emissiveMap:"emissiveMap",lightMap:"lightMap",metalnessMap:"metallicMap",normalMap:"normalMap",alphaMap:"opacityMap",roughnessMap:"roughnessMap",falloffMap:"baseFalloffMap",falloffAlphaMap:"opacityFalloffMap"},v=!0,M=!1,w=void 0;try{for(var x,b=d()(h()(g));!(v=(x=b.next()).done);v=!0){var T=x.value;i(r[g[T]],T+"Slot")}}catch(t){M=!0,w=t}finally{try{!v&&b.return&&b.return()}finally{if(M)throw w}}var E=!0,S=!1,_=void 0;try{for(var A,D=d()(h()(p));!(E=(A=D.next()).done);E=!0){var N=A.value;a[N]=r[p[N]]}}catch(t){S=!0,_=t}finally{try{!E&&D.return&&D.return()}finally{if(S)throw _}}var I=!0,L=!1,C=void 0;try{for(var O,R=d()(m);!(I=(O=R.next()).done);I=!0){var z=O.value;a[z]=r[z]}}catch(t){L=!0,C=t}finally{try{!I&&R.return&&R.return()}finally{if(L)throw C}}r.emissiveScale&&(a.emissive=a.emissive.clone(),a.emissive.multiplyScalar(r.emissiveScale)),a.transparent=a.opacity<1||!!r.opacityMap||r.baseMapTransparent||r.opacityFalloffFactor<1||!!r.opacityFalloffMap;var j=r.specularColor;a.reflectivity=.33333*(j.r+j.g+j.b),a.clearCoat*=.25,a.normalScale.x=(r.normalRedFlip?-1:1)*r.normalFactor,a.normalScale.y=(r.normalGreenFlip?-1:1)*r.normalFactor,a.blending=y.NormalBlending,a.premultipliedAlpha=!0,a.side=y.DoubleSide;var P=r.environment&&r.environment.environmentMap;return P&&(i(P.specularCubeMap,"envMap"),a.envMapIntensity=void 0!==P.intensity?P.intensity:1),a.needsUpdate=!0,a}e.d=o,e.b=s,e.c=u,e.a=l;var c=r(6),h=r.n(c),f=r(25),d=r.n(f),p=r(2),m=r.n(p),g=r(128),v=r.n(g),y=r(13),M=(r.n(y),r(32)),w=r(202),x=function(){return/iPad|iPhone|iPod/.test(window.navigator&&window.navigator.userAgent)||v.a&&"ie"===v.a.name}()},function(t,e,r){"use strict";var n=r(6),i=(r.n(n),r(13));r.n(i)},function(t,e,r){"use strict";function n(t,e){return{label:"Configure",enabled:!0,display:{playerTools:!1},options:{},execute:function(){if(r.i(i.b)(t))t.dispatch(r.i(i.c)({form:!1}));else{var e=r.i(i.d)(t);t.dispatch(r.i(i.c)({form:!e.length||e[0].name}))}}}}e.a=n;var i=(r(17),r(85))},function(t,e,r){"use strict";function n(t,e){function n(t,e){h[t]+=e,c=new s.Vector3(h.x,h.y,h.z).normalize().multiplyScalar(M)}function a(){d=Date.now()-f,d=m(1,g(1e-5,d/w));var t=-(d-1)*(d-1)+1;c.normalize().multiplyScalar(M*t)}var u=null,c=new s.Vector3(0,0,0),h={x:0,y:0,z:0},f=void 0,d=void 0;return{name:"firstPersonMode",active:!1,enabled:!0,options:{movementMode:"fly",keyboardEnabled:!0},display:{playerTools:!1},heldKeys:[],tool:{keydown:function(t){var e=v[t.key];if(e&&this.active){this.heldKeys.push(t.key);var r=o()(y[e],2),i=r[0],a=r[1];this.heldKeys.length<=1&&(f=Date.now()),n(i,a)}},keyup:function(t){var e=v[t.key];if(e&&this.active){var r=this.heldKeys.indexOf(t.key);this.heldKeys.splice(r,1);var i=o()(y[e],2);n(i[0],-i[1])}},keyheld:function(r){var n=this.heldKeys[0];if(r.key===n&&this.options.keyboardEnabled){a();var o=i(t,c,this.options.movementMode);o&&e.externals.vrControls&&e.externals.vrControls.offset.add(o)}}},activate:function(){var e=r.i(l.g)(t);u||(u=r.i(p.a)(t,e)),t.dispatch(r.i(p.c)(t,e,"firstPerson"))},deactivate:function(){t.dispatch(r.i(p.c)(t,r.i(l.g)(t),u)),u=null}}}function i(t,e,n){var i=(r.i(c.a)(t,{scene:!0,evalPlug:"Player"}),r.i(l.g)(t)),a=r.i(l.h)(t),o=r.i(f.a)(t,i),m=r.i(c.a)(t,{id:i,evalPlug:"Camera"});if(o&&a&&m.upPosition){var g=new s.Vector3,v=new s.Vector3;g.setFromMatrixPosition(a),v.setFromMatrixPosition(o);var y=(new s.Vector3).subVectors(v,g).normalize();"plane"===n&&y.projectOnPlane(x).normalize();var M=(new s.Vector3).crossVectors(y,x).normalize(),w=(new s.Vector3).addScaledVector(y,e.y).addScaledVector(M,e.x);return w.y<-g.y&&r.i(p.b)(t,i)&&(w.y=-g.y),g.add(w),v.add(w),a.setPosition(g),o.setPosition(v),r.i(h.a)(a,o,m.upPosition),t.dispatch(r.i(d.g)([i,"Transform",0],r.i(u.a)(a))),r.i(c.a)(t,{id:i,evalPlug:"Transform"}).target||t.dispatch(r.i(d.g)([d.h,"Transform",0],r.i(u.a)(o))),w}}e.a=n;var a=r(41),o=r.n(a),s=r(1),u=(r.n(s),r(109),r(44)),l=r(3),c=r(5),h=r(62),f=r(51),d=r(8),p=r(89),m=(Math.tan,Math.cos,Math.atan,Math.acos,Math.min),g=Math.max,v=(Math.pow,Math.PI,Math.sqrt,{w:"FORWARD",a:"LEFT",s:"BACKWARD",d:"RIGHT",ArrowUp:"FORWARD",ArrowLeft:"LEFT",ArrowDown:"BACKWARD",ArrowRight:"RIGHT"}),y={FORWARD:["y",1],BACKWARD:["y",-1],LEFT:["x",-1],RIGHT:["x",1]},M=.2,w=2e3,x=new s.Vector3(0,1,0)},function(t,e,r){"use strict";function n(t,e){var n=void 0;return n=/iPad|iPhone|iPod/.test(window.navigator.userAgent),{enabled:!n,display:!0,options:{},isActive:i.o,activate:function(){var e=t.getIn(["player","playerElement"]);["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"].forEach(function(t){if(e[t])return e[t]()}),t.dispatch(r.i(a.b)(["vrSettings"],{enabled:!1})),t.dispatch(r.i(i.p)(!0))},deactivate:function(){["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"].forEach(function(t){if(document[t])return document[t]()}),t.dispatch(r.i(a.l)("vrSettings")),t.dispatch(r.i(i.p)(!1))}}}e.a=n;var i=r(3),a=r(43)},function(t,e,r){"use strict";function n(t,e){return{label:"Home",enabled:!0,display:{playerTools:!0},options:{},execute:function(){var n=r.i(a.a)(t,{scene:!0,evalPlug:"Player"}),c=void 0;if(n.orbitTarget)c=r.i(a.b)(t,n.orbitTarget);else{var h=e.getNodeListBoundingBox([r.i(s.a)(t)]).getCenter();(isNaN(h.x)||isNaN(h.y)||isNaN(h.z))&&h.set(0,0,0),c=(new i.Matrix4).setPosition(h)}r.i(l.a)(t,o.h,c),r.i(u.a)(t,!0,n&&n.camera)}}}e.a=n;var i=r(1),a=(r.n(i),r(5)),o=(r(3),r(8)),s=r(17),u=r(109),l=r(111)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,i=r(2),a=r.n(i),o=r(19),s=r.n(o),u=r(207),l=r(381),c=r(210),h=r(204),f=r(205),d=r(206),p=r(380),m=r(383),g=r(377),v=r(378),y=r(384),M=r(376),w=r(382),x=r(375),b=(n={orbit:u.b,pan:l.a,zoom:c.b,home:v.a,select:m.a,nodeMove:h.a,nodeRotate:f.a,nodeScale:d.a,nodeManipulate:p.a},s()(n,"select",m.a),s()(n,"fullscreen",g.a),s()(n,"snapshot",y.a),s()(n,"firstPersonMode",M.a),s()(n,"configurator",x.a),n);a()(b,w.a),e.default=b},function(t,e,r){"use strict";function n(t,e){return{enabled:!0,display:{playerTools:!1},options:{displayGizmo:!0,mode:"free",plane:{normal:{x:0,y:1,z:0},constant:0}},tool:{drag:function(e){if(!this.active)return!1;if(1==e.which){var n=this;return{momentum:!0,handle:function(e){switch(n.options.mode){case"plane":r.i(i.b)(t,e.deltaX,e.deltaY,n.options.plane);break;case"objects":r.i(i.c)(t,e.clientX,e.clientY,n.options.objects);break;default:r.i(i.d)(t,e.deltaX,e.deltaY,!1)}}}}return 3==e.which?{momentum:!0,handle:function(e){r.i(o.b)(t,e.deltaX,e.deltaY,!1)}}:void 0},scroll:function(e){this.active&&r.i(a.b)(t,e,!1)}}}}e.a=n;var i=r(204),a=r(206),o=r(205)},function(t,e,r){"use strict";function n(t,e){function r(e){var r=e.deltaX,n=e.deltaY,o=1;o=window.devicePixelRatio,i(t,new a.Vector2(r/o,n/o))}return{label:"Pan",enabled:!0,display:{playerTools:!0},options:{},tool:{drag:function(t){return!(!this.active&&2!==t.which&&3!==t.which&&!t.shiftKey)&&{momentum:!0,handle:function(t){r(t)}}},swipe:function(t){r(t)}}}}function i(t,e){var n=r.i(s.g)(t),i=r.i(u.a)(t,{id:n,evalPlug:"Camera"}),E=(r.i(u.a)(t,{scene:!0,evalPlug:"Player"}),r.i(f.a)(t,n)),S=r.i(u.b)(t,n),_=r.i(s.e)(t),A=r.i(h.a)(r.i(u.a)(t,{id:n,evalPlug:"Camera"})),D=(new a.Vector2).copy(e).divide(_).multiplyScalar(2);D.x*=-1;var N=(new a.Matrix4).getInverse(S,!0);if(p.copy(A).multiply(N),g.setFromMatrixPosition(E).applyMatrix4(p),m.getInverse(p,!0),M.set(0,0,g.z).applyMatrix4(m),y.set(D.x,D.y,g.z).applyMatrix4(m),v.copy(y).sub(M),i.radiusConstraint&&v.length()>0){var I=i.radiusConstraint,L=I.maxBoundingSphere,C=I.minBoundingSphere;x.setFromMatrixPosition(S),b.setFromMatrixPosition(E);var O=(new a.Vector3).copy(v).normalize(),R=new a.Ray(x,O),z=new a.Ray(b,O),j=z.intersectSphere(C).sub(b).length()-.001,P=R.intersectSphere(C);P=P?P.sub(x).length()-.001:1/0;var U=L.radius===1/0?1/0:R.intersectSphere(L).sub(x).length()-.001,B=Math.min(v.length(),j,P,U);v.normalize().multiplyScalar(B)}w.makeTranslation(v.x,v.y,v.z),T.addVectors(i.offset,v),i.offset=T,E.multiplyMatrices(w,E),S.multiplyMatrices(w,S),r.i(d.b)(t,n)&&"trackball"!==r.i(d.a)(t,n)&&(x.setFromMatrixPosition(S),b.setFromMatrixPosition(E),x.y<0&&(b.y-=x.y,x.y=0),E.setPosition(b),S.setPosition(x)),r.i(c.a)(S,E,i.upPosition),t.dispatch(r.i(l.g)([n,"Transform",0],r.i(o.a)(S))),t.dispatch(r.i(l.g)([l.h,"Transform",0],r.i(o.a)(E)))}e.a=n;var a=r(1),o=(r.n(a),r(44)),s=r(3),u=r(5),l=r(8),c=r(62),h=r(110),f=r(51),d=r(89),p=(Math.tan,Math.cos,Math.atan,Math.acos,Math.min,Math.max,Math.pow,Math.PI,Math.sqrt,new a.Matrix4),m=new a.Matrix4,g=new a.Vector3,v=new a.Vector3,y=new a.Vector3,M=new a.Vector3,w=new a.Matrix4,x=new a.Vector3,b=new a.Vector3,T=new a.Vector3},function(t,e,r){"use strict";var n=r(19),i=r.n(n),a=r(6),o=r.n(a),s=r(5),u=r(50),l={},c={PolyMesh:["Box","Capsule","Cone","Cylinder","Disk","Plane","Sphere","Torus"],Light:["DirectionalLight","SpotLight","PointLight","HemisphereLight","AreaLight"]};o()(c).forEach(function(t){c[t].forEach(function(e){l[t+e]=function(n,a){return{label:"Create "+e,enabled:!0,display:{primitives:!0},options:{operator:e,primitive:t},execute:function(){var a=r.i(s.d)(n,{type:"Objects"});a&&n.dispatch(r.i(s.j)({type:t,name:e,parent:a,plugs:i()({},t,[[e,{}]])})).then(function(t){n.dispatch(r.i(u.a)(t))})}}}})}),e.a=l},function(t,e,r){"use strict";function n(t,e){return{label:"Select",enabled:!0,display:{playerTools:!1,editorTools:!0},options:{},tool:{click:function(e){var n=r.i(i.r)(t,e);n.length&&t.dispatch(r.i(a.a)(n[0]))},drag:function(t){return!(1!==t.which||!this.active)&&{momentum:!1,handle:function(t){}}}}}}e.a=n;var i=r(3),a=r(50)},function(t,e,r){"use strict";function n(t,e){return{label:"Snapshot",enabled:!0,display:{playerTools:!1},options:{dateType:"image"},execute:function(){var n=t.getIn(["commands","all"]).snapshot,u=(r.i(o.n)(t),e.composer);e.renderQualityControl(s.QUALITY_MODE.HIGH),u.render();var l=e.renderer.domElement.toDataURL();return"dataURL"===n.options.dataType?l:"blob"===n.options.dataType?i(l):a(i(l),"screenshot.png")}}}function i(t){return function(t){for(var e=t.split(","),r=e[0].match(/:(.*?);/)[1],n=atob(e[1]),i=n.length,a=new Uint8Array(i);i--;)a[i]=n.charCodeAt(i);return new Blob([a],{type:r})}(t)}function a(t,e){var r=window.URL.createObjectURL(t),n=document.createElement("a");document.body.appendChild(n),n.style="display: none",n.href=r,n.download=e,n.click(),window.URL.revokeObjectURL(r)}e.a=n;var o=r(3),s=r(203)},function(t,e,r){"use strict";function n(t){var e=r.i(i.i)(t),n=!1;return["orbit","pan","zoom"].forEach(function(t){n=n||e[t]&&e[t].active}),n}e.a=n;var i=r(43)},function(t,e,r){"use strict";function n(){return!/^(?!.*Mobile).*$/.test(window.navigator.userAgent)}e.a=n},function(t,e,r){"use strict";function n(t,e){var n=r.i(g.g)(t),i=r.i(M.a)(t),a=(new d.Vector3).setFromMatrixPosition(i),o=a.sub(e.position).length();a.set(0,0,-o).applyQuaternion(e.quaternion).add(e.position);var s=new d.Vector3(0,1,0).applyQuaternion(e.quaternion);i.setPosition(a),r.i(x.a)(t,{id:n,evalPlug:"Camera"}).upPosition=s,t.dispatch(r.i(w.g)([n,"Transform",0],r.i(y.a)(e.matrix.clone()))),r.i(x.a)(t,{id:n,evalPlug:"Transform"}).target||t.dispatch(r.i(w.g)([w.h,"Transform",0],r.i(y.a)(i)))}function i(t,e){var n=r.i(g.g)(t),i=e.position.length(),a=new d.Vector3(0,0,i).applyQuaternion(e.quaternion),o=new d.Vector3(0,1,0).applyQuaternion(e.quaternion);e.position.copy(a),e.updateMatrixWorld(!0),r.i(x.a)(t,{id:n,evalPlug:"Camera"}).upPosition=o,t.dispatch(r.i(w.g)([n,"Transform",0],r.i(y.a)(e.matrixWorld.clone())))}Object.defineProperty(e,"__esModule",{value:!0});var a=r(6),o=r.n(a),s=r(19),u=r.n(s),l=r(41),c=r.n(l),h=r(128),f=r.n(h),d=r(13),p=(r.n(d),r(592)),m=(r.n(p),r(393)),g=r(3),v=r(43),y=r(44),M=r(51),w=(r(62),r(8)),x=r(5),b=r(17),T=r(212);window.WebVRConfig.CARDBOARD_UI_DISABLED=!0,window.WebVRConfig.ROTATE_INSTRUCTIONS_DISABLED=!0,window.WebVRConfig.BUFFER_SCALE=1,e.default=function(t,e){function a(e){return function(n){if(D.highlight(t,!1),"active"===D.state&&!r.i(g.a)(t)){var i=D.getReticlePosition().clone();i.y=0;var a=i.add(e.position),o=r.i(x.b)(t,r.i(g.g)(t)),s=(new d.Vector3).setFromMatrixPosition(o);I.rotationalOffset.clone().inverse();s.sub(I.offset),a.sub(s),a.y=0,I.setOffset(a)}}}function s(e){return function(n){if(D.highlight(t,!1),"active"===D.state&&!r.i(g.a)(t)){var i=(r.i(g.g)(t),D.getReticlePosition().clone());i.y=0,e.position.add(i),e.updateMatrix();var a=e.position.clone();I.setOffset(a)}}}function l(){D.highlight(t,!0)}function h(t){window.addEventListener("touchstart",l),window.addEventListener("thumbpaddown",l),j=s(t),window.addEventListener("touchend",j),R=a(t),window.addEventListener("thumbpadup",R)}function p(){window.removeEventListener("touchstart",l),window.removeEventListener("touchend",j),window.removeEventListener("thumbpadup",R),window.addEventListener("thumbpaddown",l),j=null,R=null}function y(){t.dispatch(r.i(v.d)("firstPersonMode")),t.dispatch(r.i(v.j)("firstPersonMode",{movementMode:"plane"}))}function E(){t.dispatch(r.i(v.f)("firstPersonMode")),t.dispatch(r.i(v.j)("firstPersonMode",{movementMode:V}))}function S(e){var n=e.id+e.index,i=Y[n];if(!i&&{"Daydream Controller":"a2810b47-5787-420c-8384-d386e336466a","Oculus Touch (Right)":"93ed5b59-8d2d-4e4d-95ca-c6b693d1027a","VR Reticle":"804a38b2-47cb-4489-beae-8a76cb6dca27","OpenVR Gamepad":"abf474c1-7010-46fd-a6da-15097cf95aeb","Oculus Touch (Left)":"8ec601db-39ca-490d-82b3-9d32725f0a66"}[e.id]){var a=r.i(x.d)(t,{from:{id:{"Daydream Controller":"a2810b47-5787-420c-8384-d386e336466a","Oculus Touch (Right)":"93ed5b59-8d2d-4e4d-95ca-c6b693d1027a","VR Reticle":"804a38b2-47cb-4489-beae-8a76cb6dca27","OpenVR Gamepad":"abf474c1-7010-46fd-a6da-15097cf95aeb","Oculus Touch (Left)":"8ec601db-39ca-490d-82b3-9d32725f0a66"}[e.id]},name:"IMPORT_NULL"});if(a){var o=r.i(x.d)(t,{from:{id:a},name:"CONTROLLER_ROOT"}),s=r.i(x.e)(t,{from:{id:a}});t.dispatch(r.i(w.s)(s,u()({},a,w.v),{cloneDependencies:!0})).then(function(t){Y[n]=t[o]})}else G[e.id]||(console.log("try fetch"),t.dispatch(r.i(b.c)({"Daydream Controller":"a2810b47-5787-420c-8384-d386e336466a","Oculus Touch (Right)":"93ed5b59-8d2d-4e4d-95ca-c6b693d1027a","VR Reticle":"804a38b2-47cb-4489-beae-8a76cb6dca27","OpenVR Gamepad":"abf474c1-7010-46fd-a6da-15097cf95aeb","Oculus Touch (Left)":"8ec601db-39ca-490d-82b3-9d32725f0a66"}[e.id],null,{ignoreErrorMessage:!0})).catch(function(t){return G[e.id]=!0}))}else if(i){t.dispatch(r.i(x.c)({id:i,plug:"Transform",property:"translation"},e.position));var l=(new d.Euler).setFromQuaternion(e.orientation,"ZYX");t.dispatch(r.i(x.c)({id:i,plug:"Transform",property:"rotation"},l.toVector3().multiplyScalar(180/Math.PI)))}D&&D.update(t,e)}var _=void 0,A=void 0,D=void 0,N=void 0,I=void 0,L=void 0,C=void 0,O=void 0,R=void 0,z=void 0,j=void 0,P=void 0,U=void 0,B=void 0,V=void 0,F=!1,k=!1,G={},Y={};e.externals.controllers=[["OpenVR Gamepad",0],["OpenVR Gamepad",1],["Daydream Controller"],["Oculus Touch (Left)"],["Oculus Touch (Right)"]].map(function(t){var e=c()(t,2),r=e[0],n=e[1];return new d.VRController(r,n)});var H=(e.scene,e.camera);return"ie"===f.a.name||window.navigator.getVRDisplays().then(function(t){t.length&&(C=t[0].capabilities.hasExternalDisplay,A=t[0])}),{label:"VR mode",activeLabel:"Exit VR Mode",enabled:!0,display:{playerTools:!1},options:{planeEnabled:!1,navigationEnabled:!0,keyboardEnabled:!0,userHeightFeet:5,userHeightInches:11},isActive:g.j,widget:{draw:function(n){"orbit"!==L&&(D=new m.a(t,U,n),r.i(x.e)(t,{type:"PolyMesh",plug:"Properties",properties:{walkableInVR:!0}}).forEach(function(t){var r=t[0],n=e.getThreeObject(r);n&&D.addCollider(n)})),F=this.options.navigationEnabled,this.options.navigationEnabled&&"orbit"!==L&&h(n)},remove:function(t){this.options.navigationEnabled&&"orbit"!==L&&p()},position:function(e){F!==this.options.navigationEnabled&&"orbit"!==L&&(this.options.navigationEnabled?h(e):p(),F=this.options.navigationEnabled),k!==this.options.keyboardEnabled&&(this.options.keyboardEnabled?y():E(),k=this.options.keyboardEnabled),I&&(I.update(),e.position.copy(I.offset)),U&&("orbit"===L&&U.position.set(0,0,P),U.updateMatrix(),z(t,U));var r=navigator.getGamepads(),n=o()(r).find(function(t){return r[t]&&"Daydream Controller"===r[t].id});C&&O?O.update():D&&!n&&D.update(t);var i=new d.Vector3(0,0,-1).applyQuaternion(H.quaternion),a=Math.min(i.y,0),s=1-Math.sqrt(1-a*a);this.options.planeEnabled&&(N.material.opacity=s),Math.round(2*e.position.x),e.position.x,Math.round(2*e.position.z),e.position.z,e.updateMatrix()}},tool:{controllerupdate:function(t){t.states.forEach(S)}},activate:function(){var e=this,a=t.getTranslator();if(L=r.i(x.a)(t,{scene:!0,evalPlug:"Player",property:"vrMode"}),"orbit"!==L?(B=r.i(v.k)(t,"firstPersonMode"),z=n):z=i,A){if(_=new d.VREffect(a.renderer),_.setVRDisplay(A),a.externals.vrEffect=_,!A.capabilities.canPresent)return;return _.requestPresent().then(function(){return V=r.i(v.i)(t).firstPersonMode.options.movementMode,B&&(e.options.keyboardEnabled?y():E()),k=e.options.keyboardEnabled,t.dispatch(r.i(g.k)(!0))}).then(function(){var n=r.i(g.g)(t),i=(new d.Vector3).setFromMatrixPosition(r.i(x.b)(t,n));i.y=0;var o=(new d.Vector3).setFromMatrixPosition(r.i(M.a)(t,n)).sub(i);o.y=0,o.normalize();var s=(new d.Quaternion).setFromUnitVectors(new d.Vector3(0,0,-1),o);if(U=a.camera.clone(),"orbit"===L){var u=r.i(g.d)(t).getBoundingSphere(),l=new d.Object3D;l.position.copy(u.center),l.add(U),l.updateMatrixWorld(!0),P=u.radius/Math.sin(U.fov*Math.PI/360)}I=new T.a(U);var c=(e.options.userHeightFeet+e.options.userHeightInches/12)/3.2808;return I.setUserHeight(c),I.setOffset(i),I.setRotationalOffset(s),a.externals.vrControls=I,I.setStanding(!0),I.resetPose(),I.update(),U.updateMatrix(),z(t,U),"orbit"!==L&&C&&(O=new d.VRController("Oculus Remote")),a.externals.controllers.forEach(function(t){t.standingMatrix=I.getStandingMatrix()}),t.dispatch(r.i(g.l)(g.m.vr)),t.setRequestAnimationFrame(A.requestAnimationFrame,A),A}).catch(function(t){throw console.log("Error Activating VR"),t})}},deactivate:function(){var e=t.getTranslator();A.isPresenting&&_.exitPresent(),t.setRequestAnimationFrame(),B||E(),t.dispatch(r.i(g.l)(g.m.normal)),t.dispatch(r.i(g.k)(!1)),U=null,I=null,C&&(O=null),r.i(x.e)(t,{from:{id:w.v}}).forEach(function(e){t.dispatch(r.i(w.w)(e))}),D&&D.removeAllColliders(),e.renderer.setScissorTest(!1)}}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(128),i=r.n(n),a=r(43),o=r(3);e.default=function(t,e){var n=!1,s=!1;return"ie"===i.a.name||window.navigator.getVRDisplays().then(function(e){if(e.length){var i=window.navigator.userAgent,o=/iPad|iPhone|iPod/.test(i);/Android/.test(i)&&(o=/^(?!.*Mobile).*$/.test(i)),n=e[0].capabilities.canPresent&&!o,s=e[0].capabilities.hasExternalDisplay,t.dispatch(r.i(a.a)("vrSettings",{enabled:n}))}}),{label:"VR settings",activeLabel:"Exit VR Mode",enabled:n,display:{playerTools:!0},options:{},isActive:o.a,activate:function(){this.options.icon="exit",t.dispatch(r.i(a.b)(a.c,{enabled:!1})),t.dispatch(r.i(a.d)("vrMode"))},deactivate:function(){this.options.icon="vrSettings",t.dispatch(r.i(a.e)(a.c)),t.dispatch(r.i(a.f)("vrMode"))}}}},function(t,e,r){"use strict";function n(t,e,r,n){t.position.set(e.x,e.y,e.z),t.rotation.set(r.x,r.y,r.z,"ZYX"),t.scale.set(n.x,n.y,n.z)}function i(t,e){var r=new a.Vector3,i=new a.Quaternion,o=new a.Vector3;e.decompose(r,i,o),n(t,r,(new a.Vector3).copy((new a.Euler).setFromQuaternion(i,"ZYX")),o)}e.a=i;var a=r(13);r.n(a)},function(t,e,r){"use strict";function n(t,e,n){function i(e){function n(t){var e=i.nodes[t];if(e){var r=i.evaluatedNodes[t],s=v[t];s&&s._v===r._v&&s._ev===r._ev||(p.translate(t,r,e),o+=1),a[t]={_v:r._v,_ev:r._ev};var u=!0,c=!1,h=void 0;try{for(var f,d=l()(e.children);!(u=(f=d.next()).done);u=!0){n(f.value)}}catch(t){c=!0,h=t}finally{try{!u&&d.return&&d.return()}finally{if(c)throw h}}}}var i=r.i(h.a)(t);if(g===i._ev)return 0;var a={},o=0;n(e),i.nodes[h.c]&&n(h.c),i.nodes[h.d]&&n(h.d),i.nodes[h.v]&&n(h.v);var u=!0,c=!1,f=void 0;try{for(var d,m=l()(s()(v));!(u=(d=m.next()).done);u=!0){var y=d.value;a[y]||p.deleteNode(y)}}catch(t){c=!0,f=t}finally{try{!u&&m.return&&m.return()}finally{if(c)throw f}}return v=a,g=i._ev,o}function o(){var t=!0,e=!1,r=void 0;try{for(var n,i=l()(s()(v));!(t=(n=i.next()).done);t=!0){var a=n.value;p.deleteNode(a)}}catch(t){e=!0,r=t}finally{try{!t&&i.return&&i.return()}finally{if(e)throw r}}p.reset(),g=null,v={},m=null}var u={},p=e(t,n,u),m=(t.get("player"),void 0),g=null,v={};t.getIn(["player","renderingMode"]);return a()({},d,p,{reset:o,update:function(){var e=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],r.i(c.a)(t)),n=r.i(c.d)(t);if(!e)return void(m=null);(e!==m||n<c.e.RENDERING)&&(o(),m=e);var a=i(e),s=n>=c.e.RENDERING,u=n>=c.e.PRELOADING,l=n>=c.e.LOADED,h=n>=c.e.RENDERED;if(!s&&a&&t.dispatch(r.i(c.f)()),l&&!h&&t.dispatch(r.i(c.g)()),!l&&u&&r.i(c.h)(t)){p.onLoad()&&t.dispatch(r.i(c.i)())}!u&&r.i(c.j)(t)&&t.dispatch(r.i(c.k)()),u&&p.postTranslate(),t.dispatch(r.i(f.e)())}})}e.a=n;var i=r(2),a=r.n(i),o=r(6),s=r.n(o),u=r(25),l=r.n(u),c=r(17),h=r(8),f=r(61),d={onLoad:function(){},postTranslate:function(){},handleStateChanges:function(){}}},function(t,e,r){"use strict";function n(t,e){function n(){d&&d.update(),f.updateMatrix(),h(f)}function h(e){var n=r.i(a.g)(t),c=r.i(l.a)(t),h=(new i.Vector3).setFromMatrixPosition(c),f=h.sub(e.position).length();h.set(0,0,-f).applyQuaternion(e.quaternion).add(e.position);var d=new i.Vector3(0,1,0).applyQuaternion(e.quaternion);c.setPosition(h),r.i(o.a)(t,{id:n,evalPlug:"Camera"}).upPosition=d,t.dispatch(r.i(s.q)([n,"Transform",0,"rotation"],r.i(u.a)(e.matrix.clone()).rotation)),r.i(o.a)(t,{id:n,evalPlug:"Transform"}).target||t.dispatch(r.i(s.g)([s.h,"Transform",0],r.i(u.a)(c)))}var f=new i.Camera,d=new c.a(f);return e.vrControls=d,window.addEventListener("deviceorientation",n),n}e.a=n;var i=r(13),a=(r.n(i),r(3)),o=r(5),s=r(8),u=r(44),l=r(51),c=r(212)},function(t,e,r){"use strict";function n(t,e,r,n,i){s.Object3D.call(this),this.className="ArrowHelper",this.light=t,void 0===r&&(r=16777215),void 0===e&&(e=1),void 0===n&&(n=.2*e),void 0===i&&(i=.2*n);var a=new s.CylinderGeometry(.15,.15,.5,10,1),o=new s.CylinderGeometry(0,.5,.5,5,1);this.cylinder1=new s.Mesh(a,new s.MeshBasicMaterial({color:r})),this.cylinder1.matrixAutoUpdate=!1,this.add(this.cylinder1),this.cone1=new s.Mesh(o,new s.MeshBasicMaterial({color:r})),this.cone1.matrixAutoUpdate=!1,this.add(this.cone1),this.setLength(e,n,i),this.update()}function i(t,e){s.Object3D.call(this),this.isHelper=!0,this.light=t,this.light.updateMatrixWorld(),this.arrow=new n(this.light,e),this.add(this.arrow),this.update()}e.a=i;var a=r(69),o=r.n(a),s=r(13);r.n(s);n.prototype=o()(s.Object3D.prototype),n.prototype.update=function(){var t=new s.Vector3,e=void 0;return function(){var r=new s.Vector3(0,0,-1).applyQuaternion(this.light.quaternion);r.y>.99999?this.quaternion.set(0,0,0,1):r.y<-.99999?this.quaternion.set(1,0,0,0):(t.set(r.z,0,-r.x).normalize(),e=Math.acos(r.y),this.quaternion.setFromAxisAngle(t,e))}}(),n.prototype.setLength=function(t,e,r){void 0===e&&(e=.2*t),void 0===r&&(r=.2*e),this.cylinder1.scale.set(r,t,r),this.cylinder1.updateMatrix(),this.cone1.scale.set(r,e,r),this.cone1.position.y=t/4,this.cone1.updateMatrix()},n.prototype.setColor=function(t){this.cylinder1.material.color.setHex(t),this.cone1.material.color.setHex(t)},i.prototype=o()(s.Object3D.prototype),i.prototype.update=function(){return function(){this.position.set(this.light.position.x,this.light.position.y,this.light.position.z),this.arrow.update()}}()},function(t,e,r){"use strict";function n(t,e,n){this.state=f.INACTIVE,this.stateChanged=!1,this.colliders=[],this.position=null,this.camera=e,this.manipulatorsObject=n,this.error=null;var i=this;if(!this.reticleMoveRoot&&!this.error){var o=void 0,h=void 0,d=void 0,p=void 0;t.dispatch(r.i(s.c)(c,null,{ignoreErrorMessage:!0})).then(function(){var e=r.i(u.d)(t,{from:{id:c},name:"IMPORT_NULL"});d=r.i(u.d)(t,{from:{id:c},name:"RETICLE"}),p=r.i(u.d)(t,{from:{id:c},name:"DISABLE"}),h=r.i(u.d)(t,{from:{id:c},name:"RETICLE_MATERIAL"}),o=r.i(u.d)(t,{from:{id:e},name:"RETICLE_ROOT"});var n=r.i(u.e)(t,{from:{id:e}});return t.dispatch(r.i(l.s)(n,a()({},e,l.v),{cloneDependencies:!0}))}).then(function(e){i.reticleMoveRoot=e[o],i.reticleMaterialId=e[h],i.reticleId=e[d],i.disableId=e[p],i.changeVisibility(t)}).catch(function(t){i.error=t})}}e.a=n;var i=r(19),a=r.n(i),o=r(13),s=(r.n(o),r(17)),u=r(5),l=r(8),c={"Daydream Controller":"a2810b47-5787-420c-8384-d386e336466a","Oculus Touch (Right)":"93ed5b59-8d2d-4e4d-95ca-c6b693d1027a","VR Reticle":"804a38b2-47cb-4489-beae-8a76cb6dca27","OpenVR Gamepad":"abf474c1-7010-46fd-a6da-15097cf95aeb","Oculus Touch (Left)":"8ec601db-39ca-490d-82b3-9d32725f0a66"}["VR Reticle"],h=new o.Vector3(0,1,0),f={ACTIVE:"active",INACTIVE:"inactive",DISABLED:"disalbed"};n.prototype={constructor:n,getReticlePosition:function(){return this.position},addCollider:function(t){this.colliders.push(t)},removeCollider:function(t){var e=this.colliders.indexOf(t);e>-1&&this.colliders.splice(e,1)},removeAllColliders:function(){this.colliders=[]},getIntersects:function(t){var e=new o.Vector3,r=new o.Vector3;return t?(e=new o.Vector3(0,0,-1).applyQuaternion(t.orientation),r=t.position):(this.camera.getWorldDirection(e),r=this.camera.position),new o.Raycaster(r,e).intersectObjects(this.colliders)},highlight:function(t,e){e?t.dispatch(r.i(u.c)({id:this.reticleMaterialId,plug:"Material",property:"emissiveColor"},{r:0,g:1,b:0})):t.dispatch(r.i(u.c)({id:this.reticleMaterialId,plug:"Material",property:"emissiveColor"},{r:.6,g:.6,b:.6}))},changeVisibility:function(t){this.state===f.ACTIVE?(t.dispatch(r.i(u.c)({id:this.reticleId,plug:"Properties",property:"visible"},!0)),t.dispatch(r.i(u.c)({id:this.disableId,plug:"Properties",property:"visible"},!1))):this.state===f.INACTIVE?(t.dispatch(r.i(u.c)({id:this.reticleId,plug:"Properties",property:"visible"},!1)),t.dispatch(r.i(u.c)({id:this.disableId,plug:"Properties",property:"visible"},!0))):this.state===f.DISABLED&&(t.dispatch(r.i(u.c)({id:this.reticleId,plug:"Properties",property:"visible"},!1)),t.dispatch(r.i(u.c)({id:this.disableId,plug:"Properties",property:"visible"},!1)))},update:function(t,e){if(this.camera){var n=this.getIntersects(e);if(n[0]){this.position=n[0].point,this.reticleMoveRoot&&t.dispatch(r.i(u.c)({id:this.reticleMoveRoot,plug:"Transform",property:"translation"},n[0].point));var i=r.i(u.a)(t,{id:this.reticleMoveRoot,plug:"Transform",property:"rotation"});this.reticleMoveRoot&&t.dispatch(r.i(u.c)({id:this.reticleMoveRoot,plug:"Transform",property:"rotation"},{x:i.x,y:i.y-4,z:i.z})),this.manipulatorsObject.position&&this.position.sub(this.manipulatorsObject.position);1!==n[0].face.normal.dot(h)?(this.state!==f.INACTIVE&&(this.stateChanged=!0),this.state=f.INACTIVE):(this.state!==f.ACTIVE&&(this.stateChanged=!0),this.state=f.ACTIVE)}else this.state!==f.DISABLED&&(this.stateChanged=!0),this.state=f.DISABLED;this.stateChanged&&this.reticleId&&this.disableId&&(this.changeVisibility(t),this.stateChanged=!1)}}}},function(t,e,r){"use strict";function n(t,e){this.xform=e,this.f=t}function i(t,e){this.xform=e,this.f=t}function a(t){return function(e){return new n(t,e)}}function o(t){return function(e){return new i(t,e)}}function s(){var t=Array.prototype.slice.call(arguments);return function(e){for(var r=e,n=t.length-1;n>=0;n--)r=t[n](r);return r}}e.c=a,e.b=o,e.a=s,n.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},n.prototype["@@transducer/result"]=function(t){return this.xform["@@transducer/result"](t)},n.prototype["@@transducer/step"]=function(t,e){return this.xform["@@transducer/step"](t,this.f(e))},i.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},i.prototype["@@transducer/result"]=function(t){return this.xform["@@transducer/result"](t)},i.prototype["@@transducer/step"]=function(t,e){return this.f(e)?this.xform["@@transducer/step"](t,e):t}},function(t,e,r){"use strict";function n(){function t(t,e,r){return(i[t]||(i[t]=[])).push({fn:e,ctx:r}),this}function e(e,r,i){function a(){n(e,a),r.apply(i,arguments)}return a._=r,t(e,a,i)}function r(t){var e=[].slice.call(arguments,1),r=(i[t]||[]).slice(),n=0,a=r.length;for(n;n<a;n++)r[n].fn.apply(r[n].ctx,e);return this}function n(t,e){var r=i[t],n=[];if(r&&e)for(var a=0,o=r.length;a<o;a++)r[a].fn!==e&&r[a].fn._!==e&&n.push(r[a]);return n.length?i[t]=n:delete i[t],this}var i={};return{on:t,once:e,emit:r,off:n}}e.a=n},function(t,e,r){"use strict";function n(t,e){var r=a()({},e);return t.forEach(function(t){return delete r[t]}),r}e.a=n;var i=r(2),a=r.n(i)},function(t,e,r){t.exports={default:r(408),__esModule:!0}},function(t,e,r){t.exports={default:r(410),__esModule:!0}},function(t,e,r){t.exports={default:r(413),__esModule:!0}},function(t,e,r){t.exports={default:r(414),__esModule:!0}},function(t,e,r){t.exports={default:r(415),__esModule:!0}},function(t,e,r){t.exports={default:r(416),__esModule:!0}},function(t,e,r){t.exports={default:r(420),__esModule:!0}},function(t,e,r){t.exports={default:r(425),__esModule:!0}},function(t,e,r){t.exports={default:r(426),__esModule:!0}},function(t,e,r){t.exports={default:r(427),__esModule:!0}},function(t,e,r){"use strict";function n(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function i(t){return 3*t.length/4-n(t)}function a(t){var e,r,i,a,o,s,u=t.length;o=n(t),s=new h(3*u/4-o),i=o>0?u-4:u;var l=0;for(e=0,r=0;e<i;e+=4,r+=3)a=c[t.charCodeAt(e)]<<18|c[t.charCodeAt(e+1)]<<12|c[t.charCodeAt(e+2)]<<6|c[t.charCodeAt(e+3)],s[l++]=a>>16&255,s[l++]=a>>8&255,s[l++]=255&a;return 2===o?(a=c[t.charCodeAt(e)]<<2|c[t.charCodeAt(e+1)]>>4,s[l++]=255&a):1===o&&(a=c[t.charCodeAt(e)]<<10|c[t.charCodeAt(e+1)]<<4|c[t.charCodeAt(e+2)]>>2,s[l++]=a>>8&255,s[l++]=255&a),s}function o(t){return l[t>>18&63]+l[t>>12&63]+l[t>>6&63]+l[63&t]}function s(t,e,r){for(var n,i=[],a=e;a<r;a+=3)n=(t[a]<<16)+(t[a+1]<<8)+t[a+2],i.push(o(n));return i.join("")}function u(t){for(var e,r=t.length,n=r%3,i="",a=[],o=0,u=r-n;o<u;o+=16383)a.push(s(t,o,o+16383>u?u:o+16383));return 1===n?(e=t[r-1],i+=l[e>>2],i+=l[e<<4&63],i+="=="):2===n&&(e=(t[r-2]<<8)+t[r-1],i+=l[e>>10],i+=l[e>>4&63],i+=l[e<<2&63],i+="="),a.push(i),a.join("")}e.byteLength=i,e.toByteArray=a,e.fromByteArray=u;for(var l=[],c=[],h="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,p=f.length;d<p;++d)l[d]=f[d],c[f.charCodeAt(d)]=d;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},function(t,e,r){r(72),r(454),t.exports=r(10).Array.from},function(t,e,r){r(95),r(72),t.exports=r(452)},function(t,e,r){r(95),r(72),t.exports=r(453)},function(t,e,r){var n=r(10),i=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}},function(t,e,r){r(162),r(72),r(95),r(456),r(469),t.exports=r(10).Map},function(t,e,r){r(457),t.exports=r(10).Math.sign},function(t,e,r){r(458),t.exports=r(10).Math.trunc},function(t,e,r){r(459),t.exports=r(10).Number.isInteger},function(t,e,r){r(460),t.exports=9007199254740991},function(t,e,r){r(461),t.exports=r(10).Object.assign},function(t,e,r){r(462);var n=r(10).Object;t.exports=function(t,e){return n.create(t,e)}},function(t,e,r){r(463);var n=r(10).Object;t.exports=function(t,e,r){return n.defineProperty(t,e,r)}},function(t,e,r){r(464),t.exports=r(10).Object.freeze},function(t,e,r){r(465),t.exports=r(10).Object.getPrototypeOf},function(t,e,r){r(466),t.exports=r(10).Object.keys},function(t,e,r){r(470),t.exports=r(10).Object.values},function(t,e,r){r(162),r(72),r(95),r(467),t.exports=r(10).Promise},function(t,e,r){r(473),t.exports=r(10).setImmediate},function(t,e,r){r(468),r(162),r(471),r(472),t.exports=r(10).Symbol},function(t,e,r){r(72),r(95),t.exports=r(160).f("iterator")},function(t,e){t.exports=function(){}},function(t,e,r){var n=r(115);t.exports=function(t,e){var r=[];return n(t,!1,r.push,r,e),r}},function(t,e,r){var n=r(49),i=r(119),a=r(451);t.exports=function(t){return function(e,r,o){var s,u=n(e),l=i(u.length),c=a(o,l);if(t&&r!=r){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((t||c in u)&&u[c]===r)return t||c||0;return!t&&-1}}},function(t,e,r){var n=r(58),i=r(150),a=r(71),o=r(119),s=r(433);t.exports=function(t,e){var r=1==t,u=2==t,l=3==t,c=4==t,h=6==t,f=5==t||h,d=e||s;return function(e,s,p){for(var m,g,v=a(e),y=i(v),M=n(s,p,3),w=o(y.length),x=0,b=r?d(e,w):u?d(e,0):void 0;w>x;x++)if((f||x in y)&&(m=y[x],g=M(m,x,v),t))if(r)b[x]=g;else if(g)switch(t){case 3:return!0;case 5:return m;case 6:return x;case 2:b.push(m)}else if(c)return!1;return h?-1:l||c?c:b}}},function(t,e,r){var n=r(42),i=r(217),a=r(22)("species");t.exports=function(t){var e;return i(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!i(e.prototype)||(e=void 0),n(e)&&null===(e=e[a])&&(e=void 0)),void 0===e?Array:e}},function(t,e,r){var n=r(432);t.exports=function(t,e){return new(n(t))(e)}},function(t,e,r){"use strict";var n=r(34).f,i=r(118),a=r(153),o=r(58),s=r(147),u=r(114),l=r(115),c=r(151),h=r(220),f=r(225),d=r(38),p=r(117).fastKey,m=d?"_s":"size",g=function(t,e){var r,n=p(e);if("F"!==n)return t._i[n];for(r=t._f;r;r=r.n)if(r.k==e)return r};t.exports={getConstructor:function(t,e,r,c){var h=t(function(t,n){s(t,h,e,"_i"),t._i=i(null),t._f=void 0,t._l=void 0,t[m]=0,void 0!=n&&l(n,r,t[c],t)});return a(h.prototype,{clear:function(){for(var t=this,e=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete e[r.i];t._f=t._l=void 0,t[m]=0},delete:function(t){var e=this,r=g(e,t);if(r){var n=r.n,i=r.p;delete e._i[r.i],r.r=!0,i&&(i.n=n),n&&(n.p=i),e._f==r&&(e._f=n),e._l==r&&(e._l=i),e[m]--}return!!r},forEach:function(t){s(this,h,"forEach");for(var e,r=o(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.n:this._f;)for(r(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!g(this,t)}}),d&&n(h.prototype,"size",{get:function(){return u(this[m])}}),h},def:function(t,e,r){var n,i,a=g(t,e);return a?a.v=r:(t._l=a={i:i=p(e,!0),k:e,v:r,p:n=t._l,n:void 0,r:!1},t._f||(t._f=a),n&&(n.n=a),t[m]++,"F"!==i&&(t._i[i]=a)),t},getEntry:g,setStrong:function(t,e,r){c(t,e,function(t,e){this._t=t,this._k=e,this._l=void 0},function(){for(var t=this,e=t._k,r=t._l;r&&r.r;)r=r.p;return t._t&&(t._l=r=r?r.n:t._t._f)?"keys"==e?h(0,r.k):"values"==e?h(0,r.v):h(0,[r.k,r.v]):(t._t=void 0,h(1))},r?"entries":"values",!r,!0),f(e)}}},function(t,e,r){var n=r(113),i=r(429);t.exports=function(t){return function(){if(n(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},function(t,e,r){"use strict";var n=r(26),i=r(16),a=r(117),o=r(63),s=r(53),u=r(153),l=r(115),c=r(147),h=r(42),f=r(94),d=r(34).f,p=r(431)(0),m=r(38);t.exports=function(t,e,r,g,v,y){var M=n[t],w=M,x=v?"set":"add",b=w&&w.prototype,T={};return m&&"function"==typeof w&&(y||b.forEach&&!o(function(){(new w).entries().next()}))?(w=e(function(e,r){c(e,w,t,"_c"),e._c=new M,void 0!=r&&l(r,v,e[x],e)}),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var e="add"==t||"set"==t;t in b&&(!y||"clear"!=t)&&s(w.prototype,t,function(r,n){if(c(this,w,t),!e&&y&&!h(r))return"get"==t&&void 0;var i=this._c[t](0===r?0:r,n);return e?this:i})}),"size"in b&&d(w.prototype,"size",{get:function(){return this._c.size}})):(w=g.getConstructor(e,t,v,x),u(w.prototype,r),a.NEED=!0),f(w,t),T[t]=w,i(i.G+i.W+i.F,T),y||g.setStrong(w,t,v),w}},function(t,e,r){"use strict";var n=r(34),i=r(93);t.exports=function(t,e,r){e in t?n.f(t,e,i(0,r)):t[e]=r}},function(t,e,r){var n=r(65),i=r(152),a=r(92);t.exports=function(t){var e=n(t),r=i.f;if(r)for(var o,s=r(t),u=a.f,l=0;s.length>l;)u.call(t,o=s[l++])&&e.push(o);return e}},function(t,e){t.exports=function(t,e,r){var n=void 0===r;switch(e.length){case 0:return n?t():t.call(r);case 1:return n?t(e[0]):t.call(r,e[0]);case 2:return n?t(e[0],e[1]):t.call(r,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(r,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(r,e[0],e[1],e[2],e[3])}return t.apply(r,e)}},function(t,e,r){var n=r(42),i=Math.floor;t.exports=function(t){return!n(t)&&isFinite(t)&&i(t)===t}},function(t,e,r){"use strict";var n=r(118),i=r(93),a=r(94),o={};r(53)(o,r(22)("iterator"),function(){return this}),t.exports=function(t,e,r){t.prototype=n(o,{next:i(1,r)}),a(t,e+" Iterator")}},function(t,e,r){var n=r(65),i=r(49);t.exports=function(t,e){for(var r,a=i(t),o=n(a),s=o.length,u=0;s>u;)if(a[r=o[u++]]===e)return r}},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e,r){var n=r(26),i=r(156).set,a=n.MutationObserver||n.WebKitMutationObserver,o=n.process,s=n.Promise,u="process"==r(91)(o);t.exports=function(){var t,e,r,l=function(){var n,i;for(u&&(n=o.domain)&&n.exit();t;){i=t.fn,t=t.next;try{i()}catch(n){throw t?r():e=void 0,n}}e=void 0,n&&n.enter()};if(u)r=function(){o.nextTick(l)};else if(a){var c=!0,h=document.createTextNode("");new a(l).observe(h,{characterData:!0}),r=function(){h.data=c=!c}}else if(s&&s.resolve){var f=s.resolve();r=function(){f.then(l)}}else r=function(){i.call(n,l)};return function(n){var i={fn:n,next:void 0};e&&(e.next=i),t||(t=i,r()),e=i}}},function(t,e,r){"use strict";var n=r(65),i=r(152),a=r(92),o=r(71),s=r(150),u=Object.assign;t.exports=!u||r(63)(function(){var t={},e={},r=Symbol(),n="abcdefghijklmnopqrst";return t[r]=7,n.split("").forEach(function(t){e[t]=t}),7!=u({},t)[r]||Object.keys(u({},e)).join("")!=n})?function(t,e){for(var r=o(t),u=arguments.length,l=1,c=i.f,h=a.f;u>l;)for(var f,d=s(arguments[l++]),p=c?n(d).concat(c(d)):n(d),m=p.length,g=0;m>g;)h.call(d,f=p[g++])&&(r[f]=d[f]);return r}:u},function(t,e,r){var n=r(34),i=r(48),a=r(65);t.exports=r(38)?Object.defineProperties:function(t,e){i(t);for(var r,o=a(e),s=o.length,u=0;s>u;)n.f(t,r=o[u++],e[r]);return t}},function(t,e,r){var n=r(49),i=r(221).f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return i(t)}catch(t){return o.slice()}};t.exports.f=function(t){return o&&"[object Window]"==a.call(t)?s(t):i(n(t))}},function(t,e,r){var n=r(65),i=r(49),a=r(92).f;t.exports=function(t){return function(e){for(var r,o=i(e),s=n(o),u=s.length,l=0,c=[];u>l;)a.call(o,r=s[l++])&&c.push(t?[r,o[r]]:o[r]);return c}}},function(t,e,r){var n=r(48),i=r(146),a=r(22)("species");t.exports=function(t,e){var r,o=n(t).constructor;return void 0===o||void 0==(r=n(o)[a])?e:i(r)}},function(t,e,r){var n=r(157),i=r(114);t.exports=function(t){return function(e,r){var a,o,s=String(i(e)),u=n(r),l=s.length;return u<0||u>=l?t?"":void 0:(a=s.charCodeAt(u),a<55296||a>56319||u+1===l||(o=s.charCodeAt(u+1))<56320||o>57343?t?s.charAt(u):a:t?s.slice(u,u+2):o-56320+(a-55296<<10)+65536)}}},function(t,e,r){var n=r(157),i=Math.max,a=Math.min;t.exports=function(t,e){return t=n(t),t<0?i(t+e,0):a(t,e)}},function(t,e,r){var n=r(48),i=r(161);t.exports=r(10).getIterator=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return n(e.call(t))}},function(t,e,r){var n=r(113),i=r(22)("iterator"),a=r(70);t.exports=r(10).isIterable=function(t){var e=Object(t);return void 0!==e[i]||"@@iterator"in e||a.hasOwnProperty(n(e))}},function(t,e,r){"use strict";var n=r(58),i=r(16),a=r(71),o=r(218),s=r(216),u=r(119),l=r(437),c=r(161);i(i.S+i.F*!r(219)(function(t){Array.from(t)}),"Array",{from:function(t){var e,r,i,h,f=a(t),d="function"==typeof this?this:Array,p=arguments.length,m=p>1?arguments[1]:void 0,g=void 0!==m,v=0,y=c(f);if(g&&(m=n(m,p>2?arguments[2]:void 0,2)),void 0==y||d==Array&&s(y))for(e=u(f.length),r=new d(e);e>v;v++)l(r,v,g?m(f[v],v):f[v]);else for(h=y.call(f),r=new d;!(i=h.next()).done;v++)l(r,v,g?o(h,m,[i.value,v],!0):i.value);return r.length=v,r}})},function(t,e,r){"use strict";var n=r(428),i=r(220),a=r(70),o=r(49);t.exports=r(151)(Array,"Array",function(t,e){this._t=o(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):"keys"==e?i(0,r):"values"==e?i(0,t[r]):i(0,[r,t[r]])},"values"),a.Arguments=a.Array,n("keys"),n("values"),n("entries")},function(t,e,r){"use strict";var n=r(434);t.exports=r(436)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=n.getEntry(this,t);return e&&e.v},set:function(t,e){return n.def(this,0===t?0:t,e)}},n,!0)},function(t,e,r){var n=r(16);n(n.S,"Math",{sign:r(443)})},function(t,e,r){var n=r(16);n(n.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,r){var n=r(16);n(n.S,"Number",{isInteger:r(440)})},function(t,e,r){var n=r(16);n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,r){var n=r(16);n(n.S+n.F,"Object",{assign:r(445)})},function(t,e,r){var n=r(16);n(n.S,"Object",{create:r(118)})},function(t,e,r){var n=r(16);n(n.S+n.F*!r(38),"Object",{defineProperty:r(34).f})},function(t,e,r){var n=r(42),i=r(117).onFreeze;r(130)("freeze",function(t){return function(e){return t&&n(e)?t(i(e)):e}})},function(t,e,r){var n=r(71),i=r(222);r(130)("getPrototypeOf",function(){return function(t){return i(n(t))}})},function(t,e,r){var n=r(71),i=r(65);r(130)("keys",function(){return function(t){return i(n(t))}})},function(t,e,r){"use strict";var n,i,a,o=r(116),s=r(26),u=r(58),l=r(113),c=r(16),h=r(42),f=r(146),d=r(147),p=r(115),m=r(449),g=r(156).set,v=r(444)(),y=s.TypeError,M=s.process,w=s.Promise,M=s.process,x="process"==l(M),b=function(){},T=!!function(){try{var t=w.resolve(1),e=(t.constructor={})[r(22)("species")]=function(t){t(b,b)};return(x||"function"==typeof PromiseRejectionEvent)&&t.then(b)instanceof e}catch(t){}}(),E=function(t,e){return t===e||t===w&&e===a},S=function(t){var e;return!(!h(t)||"function"!=typeof(e=t.then))&&e},_=function(t){return E(w,t)?new A(t):new i(t)},A=i=function(t){var e,r;this.promise=new t(function(t,n){if(void 0!==e||void 0!==r)throw y("Bad Promise constructor");e=t,r=n}),this.resolve=f(e),this.reject=f(r)},D=function(t){try{t()}catch(t){return{error:t}}},N=function(t,e){if(!t._n){t._n=!0;var r=t._c;v(function(){for(var n=t._v,i=1==t._s,a=0;r.length>a;)!function(e){var r,a,o=i?e.ok:e.fail,s=e.resolve,u=e.reject,l=e.domain;try{o?(i||(2==t._h&&C(t),t._h=1),!0===o?r=n:(l&&l.enter(),r=o(n),l&&l.exit()),r===e.promise?u(y("Promise-chain cycle")):(a=S(r))?a.call(r,s,u):s(r)):u(n)}catch(t){u(t)}}(r[a++]);t._c=[],t._n=!1,e&&!t._h&&I(t)})}},I=function(t){g.call(s,function(){var e,r,n,i=t._v;if(L(t)&&(e=D(function(){x?M.emit("unhandledRejection",i,t):(r=s.onunhandledrejection)?r({promise:t,reason:i}):(n=s.console)&&n.error&&n.error("Unhandled promise rejection",i)}),t._h=x||L(t)?2:1),t._a=void 0,e)throw e.error})},L=function(t){if(1==t._h)return!1;for(var e,r=t._a||t._c,n=0;r.length>n;)if(e=r[n++],e.fail||!L(e.promise))return!1;return!0},C=function(t){g.call(s,function(){var e;x?M.emit("rejectionHandled",t):(e=s.onrejectionhandled)&&e({promise:t,reason:t._v})})},O=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),N(e,!0))},R=function(t){var e,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw y("Promise can't be resolved itself");(e=S(t))?v(function(){var n={_w:r,_d:!1};try{e.call(t,u(R,n,1),u(O,n,1))}catch(t){O.call(n,t)}}):(r._v=t,r._s=1,N(r,!1))}catch(t){O.call({_w:r,_d:!1},t)}}};T||(w=function(t){d(this,w,"Promise","_h"),f(t),n.call(this);try{t(u(R,this,1),u(O,this,1))}catch(t){O.call(this,t)}},n=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},n.prototype=r(153)(w.prototype,{then:function(t,e){var r=_(m(this,w));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=x?M.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&N(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),A=function(){var t=new n;this.promise=t,this.resolve=u(R,t,1),this.reject=u(O,t,1)}),c(c.G+c.W+c.F*!T,{Promise:w}),r(94)(w,"Promise"),r(225)("Promise"),a=r(10).Promise,c(c.S+c.F*!T,"Promise",{reject:function(t){var e=_(this);return(0,e.reject)(t),e.promise}}),c(c.S+c.F*(o||!T),"Promise",{resolve:function(t){if(t instanceof w&&E(t.constructor,this))return t;var e=_(this);return(0,e.resolve)(t),e.promise}}),c(c.S+c.F*!(T&&r(219)(function(t){w.all(t).catch(b)})),"Promise",{all:function(t){var e=this,r=_(e),n=r.resolve,i=r.reject,a=D(function(){var r=[],a=0,o=1;p(t,!1,function(t){var s=a++,u=!1;r.push(void 0),o++,e.resolve(t).then(function(t){u||(u=!0,r[s]=t,--o||n(r))},i)}),--o||n(r)});return a&&i(a.error),r.promise},race:function(t){var e=this,r=_(e),n=r.reject,i=D(function(){p(t,!1,function(t){e.resolve(t).then(r.resolve,n)})});return i&&n(i.error),r.promise}})},function(t,e,r){"use strict";var n=r(26),i=r(64),a=r(38),o=r(16),s=r(224),u=r(117).KEY,l=r(63),c=r(155),h=r(94),f=r(120),d=r(22),p=r(160),m=r(159),g=r(442),v=r(438),y=r(217),M=r(48),w=r(49),x=r(158),b=r(93),T=r(118),E=r(447),S=r(262),_=r(34),A=r(65),D=S.f,N=_.f,I=E.f,L=n.Symbol,C=n.JSON,O=C&&C.stringify,R=d("_hidden"),z=d("toPrimitive"),j={}.propertyIsEnumerable,P=c("symbol-registry"),U=c("symbols"),B=c("op-symbols"),V=Object.prototype,F="function"==typeof L,k=n.QObject,G=!k||!k.prototype||!k.prototype.findChild,Y=a&&l(function(){return 7!=T(N({},"a",{get:function(){return N(this,"a",{value:7}).a}})).a})?function(t,e,r){var n=D(V,e);n&&delete V[e],N(t,e,r),n&&t!==V&&N(V,e,n)}:N,H=function(t){var e=U[t]=T(L.prototype);return e._k=t,e},Q=F&&"symbol"==typeof L.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof L},W=function(t,e,r){return t===V&&W(B,e,r),M(t),e=x(e,!0),M(r),i(U,e)?(r.enumerable?(i(t,R)&&t[R][e]&&(t[R][e]=!1),r=T(r,{enumerable:b(0,!1)})):(i(t,R)||N(t,R,b(1,{})),t[R][e]=!0),Y(t,e,r)):N(t,e,r)},X=function(t,e){M(t);for(var r,n=v(e=w(e)),i=0,a=n.length;a>i;)W(t,r=n[i++],e[r]);return t},q=function(t,e){return void 0===e?T(t):X(T(t),e)},Z=function(t){var e=j.call(this,t=x(t,!0));return!(this===V&&i(U,t)&&!i(B,t))&&(!(e||!i(this,t)||!i(U,t)||i(this,R)&&this[R][t])||e)},K=function(t,e){if(t=w(t),e=x(e,!0),t!==V||!i(U,e)||i(B,e)){var r=D(t,e);return!r||!i(U,e)||i(t,R)&&t[R][e]||(r.enumerable=!0),r}},J=function(t){for(var e,r=I(w(t)),n=[],a=0;r.length>a;)i(U,e=r[a++])||e==R||e==u||n.push(e);return n},$=function(t){for(var e,r=t===V,n=I(r?B:w(t)),a=[],o=0;n.length>o;)!i(U,e=n[o++])||r&&!i(V,e)||a.push(U[e]);return a};F||(L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(r){this===V&&e.call(B,r),i(this,R)&&i(this[R],t)&&(this[R][t]=!1),Y(this,t,b(1,r))};return a&&G&&Y(V,t,{configurable:!0,set:e}),H(t)},s(L.prototype,"toString",function(){return this._k}),S.f=K,_.f=W,r(221).f=E.f=J,r(92).f=Z,r(152).f=$,a&&!r(116)&&s(V,"propertyIsEnumerable",Z,!0),p.f=function(t){return H(d(t))}),o(o.G+o.W+o.F*!F,{Symbol:L});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;tt.length>et;)d(tt[et++]);for(var tt=A(d.store),et=0;tt.length>et;)m(tt[et++]);o(o.S+o.F*!F,"Symbol",{for:function(t){return i(P,t+="")?P[t]:P[t]=L(t)},keyFor:function(t){if(Q(t))return g(P,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){G=!0},useSimple:function(){G=!1}}),o(o.S+o.F*!F,"Object",{create:q,defineProperty:W,defineProperties:X,getOwnPropertyDescriptor:K,getOwnPropertyNames:J,getOwnPropertySymbols:$}),C&&o(o.S+o.F*(!F||l(function(){var t=L();return"[null]"!=O([t])||"{}"!=O({a:t})||"{}"!=O(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!Q(t)){for(var e,r,n=[t],i=1;arguments.length>i;)n.push(arguments[i++]);return e=n[1],"function"==typeof e&&(r=e),!r&&y(e)||(e=function(t,e){if(r&&(e=r.call(this,t,e)),!Q(e))return e}),n[1]=e,O.apply(C,n)}}}),L.prototype[z]||r(53)(L.prototype,z,L.prototype.valueOf),h(L,"Symbol"),h(Math,"Math",!0),h(n.JSON,"JSON",!0)},function(t,e,r){var n=r(16);n(n.P+n.R,"Map",{toJSON:r(435)("Map")})},function(t,e,r){var n=r(16),i=r(448)(!1);n(n.S,"Object",{values:function(t){return i(t)}})},function(t,e,r){r(159)("asyncIterator")},function(t,e,r){r(159)("observable")},function(t,e,r){var n=r(16),i=r(156);n(n.G+n.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,e,r){var n=r(14),i=r(231),a=r(15)("species");t.exports=function(t){var e;return i(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!i(e.prototype)||(e=void 0),n(e)&&null===(e=e[a])&&(e=void 0)),void 0===e?Array:e}},function(t,e,r){var n=r(474);t.exports=function(t,e){return new(n(t))(e)}},function(t,e,r){"use strict";var n=r(66),i=r(14),a=r(124),o=[].slice,s={},u=function(t,e,r){if(!(e in s)){for(var n=[],i=0;i<e;i++)n[i]="a["+i+"]";s[e]=Function("F,a","return new F("+n.join(",")+")")}return s[e](t,r)};t.exports=Function.bind||function(t){var e=n(this),r=o.call(arguments,1),s=function(){var n=r.concat(o.call(arguments));return this instanceof s?u(e,n.length,n):a(e,n,t)};return i(e.prototype)&&(s.prototype=e.prototype),s}},function(t,e,r){var n=r(78),i=r(126),a=r(102);t.exports=function(t){var e=n(t),r=i.f;if(r)for(var o,s=r(t),u=a.f,l=0;s.length>l;)u.call(t,o=s[l++])&&e.push(o);return e}},function(t,e,r){"use strict";var n=r(12);t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,r){var n=r(14),i=r(174).set;t.exports=function(t,e,r){var a,o=e.constructor;return o!==r&&"function"==typeof o&&(a=o.prototype)!==r.prototype&&n(a)&&i&&i(t,a),t}},function(t,e,r){"use strict";var n=r(99),i=r(56),a=r(80),o={};r(35)(o,r(15)("iterator"),function(){return this}),t.exports=function(t,e,r){t.prototype=n(o,{next:i(1,r)}),a(t,e+" Iterator")}},function(t,e,r){var n=r(78),i=r(39);t.exports=function(t,e){for(var r,a=i(t),o=n(a),s=o.length,u=0;s>u;)if(a[r=o[u++]]===e)return r}},function(t,e,r){var n=r(11),i=r(179).set,a=n.MutationObserver||n.WebKitMutationObserver,o=n.process,s=n.Promise,u="process"==r(75)(o);t.exports=function(){var t,e,r,l=function(){var n,i;for(u&&(n=o.domain)&&n.exit();t;){i=t.fn,t=t.next;try{i()}catch(n){throw t?r():e=void 0,n}}e=void 0,n&&n.enter()};if(u)r=function(){o.nextTick(l)};else if(a){var c=!0,h=document.createTextNode("");new a(l).observe(h,{characterData:!0}),r=function(){h.data=c=!c}}else if(s&&s.resolve){var f=s.resolve();r=function(){f.then(l)}}else r=function(){i.call(n,l)};return function(n){var i={fn:n,next:void 0};e&&(e.next=i),t||(t=i,r()),e=i}}},function(t,e,r){var n=r(23),i=r(12),a=r(78);t.exports=r(30)?Object.defineProperties:function(t,e){i(t);for(var r,o=a(e),s=o.length,u=0;s>u;)n.f(t,r=o[u++],e[r]);return t}},function(t,e,r){var n=r(39),i=r(100).f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return i(t)}catch(t){return o.slice()}};t.exports.f=function(t){return o&&"[object Window]"==a.call(t)?s(t):i(n(t))}},function(t,e,r){"use strict";var n=r(486),i=r(124),a=r(66);t.exports=function(){for(var t=a(this),e=arguments.length,r=Array(e),o=0,s=n._,u=!1;e>o;)(r[o]=arguments[o++])===s&&(u=!0);return function(){var n,a=this,o=arguments.length,l=0,c=0;if(!u&&!o)return i(t,r,a);if(n=r.slice(),u)for(;e>l;l++)n[l]===s&&(n[l]=arguments[c++]);for(;o>c;)n.push(arguments[c++]);return i(t,n,a)}}},function(t,e,r){t.exports=r(11)},function(t,e,r){var n=r(82),i=r(54);t.exports=function(t){return function(e,r){var a,o,s=String(i(e)),u=n(r),l=s.length;return u<0||u>=l?t?"":void 0:(a=s.charCodeAt(u),a<55296||a>56319||u+1===l||(o=s.charCodeAt(u+1))<56320||o>57343?t?s.charAt(u):a:t?s.slice(u,u+2):o-56320+(a-55296<<10)+65536)}}},function(t,e,r){var n=r(11),i=r(97),a=r(77),o=r(246),s=r(23).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=a?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:o.f(t)})}},function(t,e,r){var n=r(0);n(n.P,"Array",{copyWithin:r(226)}),r(73)("copyWithin")},function(t,e,r){var n=r(0);n(n.P,"Array",{fill:r(163)}),r(73)("fill")},function(t,e,r){"use strict";var n=r(0),i=r(96)(6),a="findIndex",o=!0;a in[]&&Array(1)[a](function(){o=!1}),n(n.P+n.F*o,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(73)(a)},function(t,e,r){"use strict";var n=r(0),i=r(96)(5),a=!0;"find"in[]&&Array(1).find(function(){a=!1}),n(n.P+n.F*a,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(73)("find")},function(t,e,r){"use strict";var n=r(45),i=r(0),a=r(67),o=r(234),s=r(171),u=r(28),l=r(166),c=r(181);i(i.S+i.F*!r(125)(function(t){Array.from(t)}),"Array",{from:function(t){var e,r,i,h,f=a(t),d="function"==typeof this?this:Array,p=arguments.length,m=p>1?arguments[1]:void 0,g=void 0!==m,v=0,y=c(f);if(g&&(m=n(m,p>2?arguments[2]:void 0,2)),void 0==y||d==Array&&s(y))for(e=u(f.length),r=new d(e);e>v;v++)l(r,v,g?m(f[v],v):f[v]);else for(h=y.call(f),r=new d;!(i=h.next()).done;v++)l(r,v,g?o(h,m,[i.value,v],!0):i.value);return r.length=v,r}})},function(t,e,r){"use strict";var n=r(0),i=r(166);n(n.S+n.F*r(20)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,r=new("function"==typeof this?this:Array)(e);e>t;)i(r,t,arguments[t++]);return r.length=e,r}})},function(t,e,r){var n=r(23).f,i=r(56),a=r(27),o=Function.prototype,s=/^\s*function ([^ (]*)/,u=Object.isExtensible||function(){return!0};"name"in o||r(30)&&n(o,"name",{configurable:!0,get:function(){try{var t=this,e=(""+t).match(s)[1];return a(t,"name")||!u(t)||n(t,"name",i(5,e)),e}catch(t){return""}}})},function(t,e,r){"use strict";var n=r(227);t.exports=r(121)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=n.getEntry(this,t);return e&&e.v},set:function(t,e){return n.def(this,0===t?0:t,e)}},n,!0)},function(t,e,r){var n=r(0),i=r(237),a=Math.sqrt,o=Math.acosh;n(n.S+n.F*!(o&&710==Math.floor(o(Number.MAX_VALUE))&&o(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+a(t-1)*a(t+1))}})},function(t,e,r){function n(t){return isFinite(t=+t)&&0!=t?t<0?-n(-t):Math.log(t+Math.sqrt(t*t+1)):t}var i=r(0),a=Math.asinh;i(i.S+i.F*!(a&&1/a(0)>0),"Math",{asinh:n})},function(t,e,r){var n=r(0),i=Math.atanh;n(n.S+n.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,r){var n=r(0),i=r(173);n(n.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e,r){var n=r(0);n(n.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,r){var n=r(0),i=Math.exp;n(n.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},function(t,e,r){var n=r(0),i=r(172);n(n.S+n.F*(i!=Math.expm1),"Math",{expm1:i})},function(t,e,r){var n=r(0),i=r(173),a=Math.pow,o=a(2,-52),s=a(2,-23),u=a(2,127)*(2-s),l=a(2,-126),c=function(t){return t+1/o-1/o};n(n.S,"Math",{fround:function(t){var e,r,n=Math.abs(t),a=i(t);return n<l?a*c(n/l/s)*l*s:(e=(1+s/o)*n,r=e-(e-n),r>u||r!=r?a*(1/0):a*r)}})},function(t,e,r){var n=r(0),i=Math.abs;n(n.S,"Math",{hypot:function(t,e){for(var r,n,a=0,o=0,s=arguments.length,u=0;o<s;)r=i(arguments[o++]),u<r?(n=u/r,a=a*n*n+1,u=r):r>0?(n=r/u,a+=n*n):a+=r;return u===1/0?1/0:u*Math.sqrt(a)}})},function(t,e,r){var n=r(0),i=Math.imul;n(n.S+n.F*r(20)(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(t,e){var r=+t,n=+e,i=65535&r,a=65535&n;return 0|i*a+((65535&r>>>16)*a+i*(65535&n>>>16)<<16>>>0)}})},function(t,e,r){var n=r(0);n(n.S,"Math",{log10:function(t){return Math.log(t)/Math.LN10}})},function(t,e,r){var n=r(0);n(n.S,"Math",{log1p:r(237)})},function(t,e,r){var n=r(0);n(n.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,r){var n=r(0);n(n.S,"Math",{sign:r(173)})},function(t,e,r){var n=r(0),i=r(172),a=Math.exp;n(n.S+n.F*r(20)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(a(t-1)-a(-t-1))*(Math.E/2)}})},function(t,e,r){var n=r(0),i=r(172),a=Math.exp;n(n.S,"Math",{tanh:function(t){var e=i(t=+t),r=i(-t);return e==1/0?1:r==1/0?-1:(e-r)/(a(t)+a(-t))}})},function(t,e,r){var n=r(0);n(n.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,r){var n=r(0);n(n.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,r){var n=r(0),i=r(11).isFinite;n(n.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,e,r){var n=r(0);n(n.S,"Number",{isInteger:r(232)})},function(t,e,r){var n=r(0);n(n.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,r){var n=r(0),i=r(232),a=Math.abs;n(n.S,"Number",{isSafeInteger:function(t){return i(t)&&a(t)<=9007199254740991}})},function(t,e,r){var n=r(0);n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,r){var n=r(0);n(n.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,r){var n=r(0);n(n.S+n.F,"Object",{assign:r(238)})},function(t,e,r){var n=r(0);n(n.S,"Object",{is:r(242)})},function(t,e,r){var n=r(0);n(n.S,"Object",{setPrototypeOf:r(174).set})},function(t,e,r){"use strict";var n,i,a,o=r(77),s=r(11),u=r(45),l=r(165),c=r(0),h=r(14),f=r(66),d=r(74),p=r(123),m=r(177),g=r(179).set,v=r(482)(),y=s.TypeError,M=s.process,w=s.Promise,M=s.process,x="process"==l(M),b=function(){},T=!!function(){try{var t=w.resolve(1),e=(t.constructor={})[r(15)("species")]=function(t){t(b,b)};return(x||"function"==typeof PromiseRejectionEvent)&&t.then(b)instanceof e}catch(t){}}(),E=function(t,e){return t===e||t===w&&e===a},S=function(t){var e;return!(!h(t)||"function"!=typeof(e=t.then))&&e},_=function(t){return E(w,t)?new A(t):new i(t)},A=i=function(t){var e,r;this.promise=new t(function(t,n){if(void 0!==e||void 0!==r)throw y("Bad Promise constructor");e=t,r=n}),this.resolve=f(e),this.reject=f(r)},D=function(t){try{t()}catch(t){return{error:t}}},N=function(t,e){if(!t._n){t._n=!0;var r=t._c;v(function(){for(var n=t._v,i=1==t._s,a=0;r.length>a;)!function(e){var r,a,o=i?e.ok:e.fail,s=e.resolve,u=e.reject,l=e.domain;try{o?(i||(2==t._h&&C(t),t._h=1),!0===o?r=n:(l&&l.enter(),r=o(n),l&&l.exit()),r===e.promise?u(y("Promise-chain cycle")):(a=S(r))?a.call(r,s,u):s(r)):u(n)}catch(t){u(t)}}(r[a++]);t._c=[],t._n=!1,e&&!t._h&&I(t)})}},I=function(t){g.call(s,function(){var e,r,n,i=t._v;if(L(t)&&(e=D(function(){x?M.emit("unhandledRejection",i,t):(r=s.onunhandledrejection)?r({promise:t,reason:i}):(n=s.console)&&n.error&&n.error("Unhandled promise rejection",i)}),t._h=x||L(t)?2:1),t._a=void 0,e)throw e.error})},L=function(t){if(1==t._h)return!1;for(var e,r=t._a||t._c,n=0;r.length>n;)if(e=r[n++],e.fail||!L(e.promise))return!1;return!0},C=function(t){g.call(s,function(){var e;x?M.emit("rejectionHandled",t):(e=s.onrejectionhandled)&&e({promise:t,reason:t._v})})},O=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),N(e,!0))},R=function(t){var e,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw y("Promise can't be resolved itself");(e=S(t))?v(function(){var n={_w:r,_d:!1};try{e.call(t,u(R,n,1),u(O,n,1))}catch(t){O.call(n,t)}}):(r._v=t,r._s=1,N(r,!1))}catch(t){O.call({_w:r,_d:!1},t)}}};T||(w=function(t){d(this,w,"Promise","_h"),f(t),n.call(this);try{t(u(R,this,1),u(O,this,1))}catch(t){O.call(this,t)}},n=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},n.prototype=r(79)(w.prototype,{then:function(t,e){var r=_(m(this,w));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=x?M.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&N(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),A=function(){var t=new n;this.promise=t,this.resolve=u(R,t,1),this.reject=u(O,t,1)}),c(c.G+c.W+c.F*!T,{Promise:w}),r(80)(w,"Promise"),r(127)("Promise"),a=r(97).Promise,c(c.S+c.F*!T,"Promise",{reject:function(t){var e=_(this);return(0,e.reject)(t),e.promise}}),c(c.S+c.F*(o||!T),"Promise",{resolve:function(t){if(t instanceof w&&E(t.constructor,this))return t;var e=_(this);return(0,e.resolve)(t),e.promise}}),c(c.S+c.F*!(T&&r(125)(function(t){w.all(t).catch(b)})),"Promise",{all:function(t){var e=this,r=_(e),n=r.resolve,i=r.reject,a=D(function(){var r=[],a=0,o=1;p(t,!1,function(t){var s=a++,u=!1;r.push(void 0),o++,e.resolve(t).then(function(t){u||(u=!0,r[s]=t,--o||n(r))},i)}),--o||n(r)});return a&&i(a.error),r.promise},race:function(t){var e=this,r=_(e),n=r.reject,i=D(function(){p(t,!1,function(t){e.resolve(t).then(r.resolve,n)})});return i&&n(i.error),r.promise}})},function(t,e,r){var n=r(0),i=r(66),a=r(12),o=(r(11).Reflect||{}).apply,s=Function.apply;n(n.S+n.F*!r(20)(function(){o(function(){})}),"Reflect",{apply:function(t,e,r){var n=i(t),u=a(r);return o?o(n,e,u):s.call(n,e,u)}})},function(t,e,r){var n=r(0),i=r(99),a=r(66),o=r(12),s=r(14),u=r(20),l=r(476),c=(r(11).Reflect||{}).construct,h=u(function(){function t(){}return!(c(function(){},[],t)instanceof t)}),f=!u(function(){c(function(){})});n(n.S+n.F*(h||f),"Reflect",{construct:function(t,e){a(t),o(e);var r=arguments.length<3?t:a(arguments[2]);if(f&&!h)return c(t,e,r);if(t==r){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return n.push.apply(n,e),new(l.apply(t,n))}var u=r.prototype,d=i(s(u)?u:Object.prototype),p=Function.apply.call(t,d,e);return s(p)?p:d}})},function(t,e,r){var n=r(23),i=r(0),a=r(12),o=r(103);i(i.S+i.F*r(20)(function(){Reflect.defineProperty(n.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,r){a(t),e=o(e,!0),a(r);try{return n.f(t,e,r),!0}catch(t){return!1}}})},function(t,e,r){var n=r(0),i=r(55).f,a=r(12);n(n.S,"Reflect",{deleteProperty:function(t,e){var r=i(a(t),e);return!(r&&!r.configurable)&&delete t[e]}})},function(t,e,r){var n=r(55),i=r(0),a=r(12);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return n.f(a(t),e)}})},function(t,e,r){var n=r(0),i=r(101),a=r(12);n(n.S,"Reflect",{getPrototypeOf:function(t){return i(a(t))}})},function(t,e,r){function n(t,e){var r,s,c=arguments.length<3?t:arguments[2];return l(t)===c?t[e]:(r=i.f(t,e))?o(r,"value")?r.value:void 0!==r.get?r.get.call(c):void 0:u(s=a(t))?n(s,e,c):void 0}var i=r(55),a=r(101),o=r(27),s=r(0),u=r(14),l=r(12);s(s.S,"Reflect",{get:n})},function(t,e,r){var n=r(0);n(n.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,r){var n=r(0),i=r(12),a=Object.isExtensible;n(n.S,"Reflect",{isExtensible:function(t){return i(t),!a||a(t)}})},function(t,e,r){var n=r(0);n(n.S,"Reflect",{ownKeys:r(241)})},function(t,e,r){var n=r(0),i=r(12),a=Object.preventExtensions;n(n.S,"Reflect",{preventExtensions:function(t){i(t);try{return a&&a(t),!0}catch(t){return!1}}})},function(t,e,r){var n=r(0),i=r(174);i&&n(n.S,"Reflect",{setPrototypeOf:function(t,e){i.check(t,e);try{return i.set(t,e),!0}catch(t){return!1}}})},function(t,e,r){function n(t,e,r){var u,f,d=arguments.length<4?t:arguments[3],p=a.f(c(t),e);if(!p){if(h(f=o(t)))return n(f,e,r,d);p=l(0)}return s(p,"value")?!(!1===p.writable||!h(d))&&(u=a.f(d,e)||l(0),u.value=r,i.f(d,e,u),!0):void 0!==p.set&&(p.set.call(d,r),!0)}var i=r(23),a=r(55),o=r(101),s=r(27),u=r(0),l=r(56),c=r(12),h=r(14);u(u.S,"Reflect",{set:n})},function(t,e,r){r(30)&&"g"!=/./g.flags&&r(23).f(RegExp.prototype,"flags",{configurable:!0,get:r(478)})},function(t,e,r){r(122)("match",1,function(t,e,r){return[function(r){"use strict";var n=t(this),i=void 0==r?void 0:r[e];return void 0!==i?i.call(r,n):new RegExp(r)[e](String(n))},r]})},function(t,e,r){r(122)("replace",2,function(t,e,r){return[function(n,i){"use strict";var a=t(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,a,i):r.call(String(a),n,i)},r]})},function(t,e,r){r(122)("search",1,function(t,e,r){return[function(r){"use strict";var n=t(this),i=void 0==r?void 0:r[e];return void 0!==i?i.call(r,n):new RegExp(r)[e](String(n))},r]})},function(t,e,r){r(122)("split",2,function(t,e,n){"use strict";var i=r(233),a=n,o=[].push,s="length";if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[s]||2!="ab".split(/(?:ab)*/)[s]||4!=".".split(/(.?)(.?)/)[s]||".".split(/()()/)[s]>1||"".split(/.?/)[s]){var u=void 0===/()??/.exec("")[1];n=function(t,e){var r=String(this);if(void 0===t&&0===e)return[];if(!i(t))return a.call(r,t,e);var n,l,c,h,f,d=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),m=0,g=void 0===e?4294967295:e>>>0,v=new RegExp(t.source,p+"g");for(u||(n=new RegExp("^"+v.source+"$(?!\\s)",p));(l=v.exec(r))&&!((c=l.index+l[0][s])>m&&(d.push(r.slice(m,l.index)),!u&&l[s]>1&&l[0].replace(n,function(){for(f=1;f<arguments[s]-2;f++)void 0===arguments[f]&&(l[f]=void 0)}),l[s]>1&&l.index<r[s]&&o.apply(d,l.slice(1)),h=l[0][s],m=c,d[s]>=g));)v.lastIndex===l.index&&v.lastIndex++;return m===r[s]?!h&&v.test("")||d.push(""):d.push(r.slice(m)),d[s]>g?d.slice(0,g):d}}else"0".split(void 0,0)[s]&&(n=function(t,e){return void 0===t&&0===e?[]:a.call(this,t,e)});return[function(r,i){var a=t(this),o=void 0==r?void 0:r[e];return void 0!==o?o.call(r,a,i):n.call(String(a),r,i)},n]})},function(t,e,r){"use strict";var n=r(227);t.exports=r(121)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return n.def(this,t=0===t?0:t,t)}},n)},function(t,e,r){"use strict";var n=r(0),i=r(487)(!1);n(n.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,e,r){"use strict";var n=r(0),i=r(28),a=r(178),o="".endsWith;n(n.P+n.F*r(169)("endsWith"),"String",{endsWith:function(t){var e=a(this,t,"endsWith"),r=arguments.length>1?arguments[1]:void 0,n=i(e.length),s=void 0===r?n:Math.min(i(r),n),u=String(t);return o?o.call(e,u,s):e.slice(s-u.length,s)===u}})},function(t,e,r){var n=r(0),i=r(81),a=String.fromCharCode,o=String.fromCodePoint;n(n.S+n.F*(!!o&&1!=o.length),"String",{fromCodePoint:function(t){for(var e,r=[],n=arguments.length,o=0;n>o;){if(e=+arguments[o++],i(e,1114111)!==e)throw RangeError(e+" is not a valid code point");r.push(e<65536?a(e):a(55296+((e-=65536)>>10),e%1024+56320))}return r.join("")}})},function(t,e,r){"use strict";var n=r(0),i=r(178);n(n.P+n.F*r(169)("includes"),"String",{includes:function(t){return!!~i(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,r){var n=r(0),i=r(39),a=r(28);n(n.S,"String",{raw:function(t){for(var e=i(t.raw),r=a(e.length),n=arguments.length,o=[],s=0;r>s;)o.push(String(e[s++])),s<n&&o.push(String(arguments[s]));return o.join("")}})},function(t,e,r){var n=r(0);n(n.P,"String",{repeat:r(244)})},function(t,e,r){"use strict";var n=r(0),i=r(28),a=r(178),o="".startsWith;n(n.P+n.F*r(169)("startsWith"),"String",{startsWith:function(t){var e=a(this,t,"startsWith"),r=i(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),n=String(t);return o?o.call(e,n,r):e.slice(r,r+n.length)===n}})},function(t,e,r){"use strict";var n=r(11),i=r(27),a=r(30),o=r(0),s=r(57),u=r(98).KEY,l=r(20),c=r(176),h=r(80),f=r(68),d=r(15),p=r(246),m=r(488),g=r(481),v=r(477),y=r(231),M=r(12),w=r(39),x=r(103),b=r(56),T=r(99),E=r(484),S=r(55),_=r(23),A=r(78),D=S.f,N=_.f,I=E.f,L=n.Symbol,C=n.JSON,O=C&&C.stringify,R=d("_hidden"),z=d("toPrimitive"),j={}.propertyIsEnumerable,P=c("symbol-registry"),U=c("symbols"),B=c("op-symbols"),V=Object.prototype,F="function"==typeof L,k=n.QObject,G=!k||!k.prototype||!k.prototype.findChild,Y=a&&l(function(){return 7!=T(N({},"a",{get:function(){return N(this,"a",{value:7}).a}})).a})?function(t,e,r){var n=D(V,e);n&&delete V[e],N(t,e,r),n&&t!==V&&N(V,e,n)}:N,H=function(t){var e=U[t]=T(L.prototype);return e._k=t,e},Q=F&&"symbol"==typeof L.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof L},W=function(t,e,r){return t===V&&W(B,e,r),M(t),e=x(e,!0),M(r),i(U,e)?(r.enumerable?(i(t,R)&&t[R][e]&&(t[R][e]=!1),r=T(r,{enumerable:b(0,!1)})):(i(t,R)||N(t,R,b(1,{})),t[R][e]=!0),Y(t,e,r)):N(t,e,r)},X=function(t,e){M(t);for(var r,n=v(e=w(e)),i=0,a=n.length;a>i;)W(t,r=n[i++],e[r]);return t},q=function(t,e){return void 0===e?T(t):X(T(t),e)},Z=function(t){var e=j.call(this,t=x(t,!0));return!(this===V&&i(U,t)&&!i(B,t))&&(!(e||!i(this,t)||!i(U,t)||i(this,R)&&this[R][t])||e)},K=function(t,e){if(t=w(t),e=x(e,!0),t!==V||!i(U,e)||i(B,e)){var r=D(t,e);return!r||!i(U,e)||i(t,R)&&t[R][e]||(r.enumerable=!0),r}},J=function(t){for(var e,r=I(w(t)),n=[],a=0;r.length>a;)i(U,e=r[a++])||e==R||e==u||n.push(e);return n},$=function(t){for(var e,r=t===V,n=I(r?B:w(t)),a=[],o=0;n.length>o;)!i(U,e=n[o++])||r&&!i(V,e)||a.push(U[e]);return a};F||(L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(r){this===V&&e.call(B,r),i(this,R)&&i(this[R],t)&&(this[R][t]=!1),Y(this,t,b(1,r))};return a&&G&&Y(V,t,{configurable:!0,set:e}),H(t)},s(L.prototype,"toString",function(){return this._k}),S.f=K,_.f=W,r(100).f=E.f=J,r(102).f=Z,r(126).f=$,a&&!r(77)&&s(V,"propertyIsEnumerable",Z,!0),p.f=function(t){return H(d(t))}),o(o.G+o.W+o.F*!F,{Symbol:L});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;tt.length>et;)d(tt[et++]);for(var tt=A(d.store),et=0;tt.length>et;)m(tt[et++]);o(o.S+o.F*!F,"Symbol",{for:function(t){return i(P,t+="")?P[t]:P[t]=L(t)},keyFor:function(t){if(Q(t))return g(P,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){G=!0},useSimple:function(){G=!1}}),o(o.S+o.F*!F,"Object",{create:q,defineProperty:W,defineProperties:X,getOwnPropertyDescriptor:K,getOwnPropertyNames:J,getOwnPropertySymbols:$}),C&&o(o.S+o.F*(!F||l(function(){var t=L();return"[null]"!=O([t])||"{}"!=O({a:t})||"{}"!=O(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!Q(t)){for(var e,r,n=[t],i=1;arguments.length>i;)n.push(arguments[i++]);return e=n[1],"function"==typeof e&&(r=e),!r&&y(e)||(e=function(t,e){if(r&&(e=r.call(this,t,e)),!Q(e))return e}),n[1]=e,O.apply(C,n)}}}),L.prototype[z]||r(35)(L.prototype,z,L.prototype.valueOf),h(L,"Symbol"),h(Math,"Math",!0),h(n.JSON,"JSON",!0)},function(t,e,r){"use strict";var n=r(0),i=r(180),a=r(245),o=r(12),s=r(81),u=r(28),l=r(14),c=r(11).ArrayBuffer,h=r(177),f=a.ArrayBuffer,d=a.DataView,p=i.ABV&&c.isView,m=f.prototype.slice,g=i.VIEW;n(n.G+n.W+n.F*(c!==f),{ArrayBuffer:f}),n(n.S+n.F*!i.CONSTR,"ArrayBuffer",{isView:function(t){return p&&p(t)||l(t)&&g in t}}),n(n.P+n.U+n.F*r(20)(function(){return!new f(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(t,e){if(void 0!==m&&void 0===e)return m.call(o(this),t);for(var r=o(this).byteLength,n=s(t,r),i=s(void 0===e?r:e,r),a=new(h(this,f))(u(i-n)),l=new d(this),c=new d(a),p=0;n<i;)c.setUint8(p++,l.getUint8(n++));return a}}),r(127)("ArrayBuffer")},function(t,e,r){r(46)("Float32",4,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){r(46)("Float64",8,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){r(46)("Int16",2,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){r(46)("Int32",4,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){r(46)("Int8",1,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){r(46)("Uint16",2,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){r(46)("Uint32",4,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){r(46)("Uint8",1,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){r(46)("Uint8",1,function(t){return function(e,r,n){return t(this,e,r,n)}},!0)},function(t,e,r){"use strict";var n,i=r(96)(0),a=r(57),o=r(98),s=r(238),u=r(228),l=r(14),c=o.getWeak,h=Object.isExtensible,f=u.ufstore,d={},p=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},m={get:function(t){if(l(t)){var e=c(t);return!0===e?f(this).get(t):e?e[this._i]:void 0}},set:function(t,e){return u.def(this,t,e)}},g=t.exports=r(121)("WeakMap",p,m,u,!0,!0);7!=(new g).set((Object.freeze||Object)(d),7).get(d)&&(n=u.getConstructor(p),s(n.prototype,m),o.NEED=!0,i(["delete","has","get","set"],function(t){var e=g.prototype,r=e[t];a(e,t,function(e,i){if(l(e)&&!h(e)){this._f||(this._f=new n);var a=this._f[t](e,i);return"set"==t?this:a}return r.call(this,e,i)})}))},function(t,e,r){"use strict";var n=r(228);r(121)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return n.def(this,t,!0)}},n,!1,!0)},function(t,e,r){"use strict";var n=r(0),i=r(164)(!0);n(n.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(73)("includes")},function(t,e,r){var n=r(0),i=r(240)(!0);n(n.S,"Object",{entries:function(t){return i(t)}})},function(t,e,r){var n=r(0),i=r(241),a=r(39),o=r(55),s=r(166);n(n.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,r=a(t),n=o.f,u=i(r),l={},c=0;u.length>c;)s(l,e=u[c++],n(r,e));return l}})},function(t,e,r){var n=r(0),i=r(240)(!1);n(n.S,"Object",{values:function(t){return i(t)}})},function(t,e,r){"use strict";var n=r(0),i=r(243);n(n.P,"String",{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,r){"use strict";var n=r(0),i=r(243);n(n.P,"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,r){for(var n=r(182),i=r(57),a=r(11),o=r(35),s=r(76),u=r(15),l=u("iterator"),c=u("toStringTag"),h=s.Array,f=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],d=0;d<5;d++){var p,m=f[d],g=a[m],v=g&&g.prototype;if(v){v[l]||o(v,l,h),v[c]||o(v,c,m),s[m]=h;for(p in n)v[p]||i(v,p,n[p],!0)}}},function(t,e,r){var n=r(0),i=r(179);n(n.G+n.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,e,r){var n=r(11),i=r(0),a=r(124),o=r(485),s=n.navigator,u=!!s&&/MSIE .\./.test(s.userAgent),l=function(t){return u?function(e,r){return t(a(o,[].slice.call(arguments,2),"function"==typeof e?e:Function(e)),r)}:t};i(i.G+i.B+i.F*u,{setTimeout:l(n.setTimeout),setInterval:l(n.setInterval)})},function(t,e){t.exports=function(t){return t?[["edge",/Edge\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)$/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+)\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/]].map(function(e){if(e[1].test(t)){var r=e[1].exec(t),n=r&&r[1].split(/[._]/).slice(0,3);return n&&n.length<3&&Array.prototype.push.apply(n,1==n.length?[0,0]:[0]),{name:e[0],version:n.join(".")}}}).filter(Boolean).shift():null}},function(t,e){e.read=function(t,e,r,n,i){var a,o,s=8*i-n-1,u=(1<<s)-1,l=u>>1,c=-7,h=r?i-1:0,f=r?-1:1,d=t[e+h];for(h+=f,a=d&(1<<-c)-1,d>>=-c,c+=s;c>0;a=256*a+t[e+h],h+=f,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=n;c>0;o=256*o+t[e+h],h+=f,c-=8);if(0===a)a=1-l;else{if(a===u)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,n),a-=l}return(d?-1:1)*o*Math.pow(2,a-n)},e.write=function(t,e,r,n,i,a){var o,s,u,l=8*a-i-1,c=(1<<l)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:a-1,p=n?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),e+=o+h>=1?f/u:f*Math.pow(2,1-h),e*u>=2&&(o++,u/=2),o+h>=c?(s=0,o=c):o+h>=1?(s=(e*u-1)*Math.pow(2,i),o+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[r+d]=255&s,d+=p,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;t[r+d]=255&o,d+=p,o/=256,l-=8);t[r+d-p]|=128*m}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){(function(t){function r(t,e){for(var r=0,n=t.length-1;n>=0;n--){var i=t[n];"."===i?t.splice(n,1):".."===i?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}function n(t,e){if(t.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,a=function(t){return i.exec(t).slice(1)};e.resolve=function(){for(var e="",i=!1,a=arguments.length-1;a>=-1&&!i;a--){var o=a>=0?arguments[a]:t.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(e=o+"/"+e,i="/"===o.charAt(0))}return e=r(n(e.split("/"),function(t){return!!t}),!i).join("/"),(i?"/":"")+e||"."},e.normalize=function(t){var i=e.isAbsolute(t),a="/"===o(t,-1);return t=r(n(t.split("/"),function(t){return!!t}),!i).join("/"),t||i||(t="."),t&&a&&(t+="/"),(i?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(n(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,r){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;r>=0&&""===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=e.resolve(t).substr(1),r=e.resolve(r).substr(1);for(var i=n(t.split("/")),a=n(r.split("/")),o=Math.min(i.length,a.length),s=o,u=0;u<o;u++)if(i[u]!==a[u]){s=u;break}for(var l=[],u=s;u<i.length;u++)l.push("..");return l=l.concat(a.slice(s)),l.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=a(t),r=e[0],n=e[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},e.basename=function(t,e){var r=a(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},e.extname=function(t){return a(t)[3]};var o="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)}}).call(e,r(129))},function(t,e,r){(function(e){!function(e){"use strict";function r(t,e,r,n){var a=e&&e.prototype instanceof i?e:i,o=Object.create(a.prototype),s=new d(n||[]);return o._invoke=l(t,r,s),o}function n(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function i(){}function a(){}function o(){}function s(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function u(t){function r(e,i,a,o){var s=n(t[e],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==typeof l&&y.call(l,"__await")?Promise.resolve(l.__await).then(function(t){r("next",t,a,o)},function(t){r("throw",t,a,o)}):Promise.resolve(l).then(function(t){u.value=t,a(u)},o)}o(s.arg)}function i(t,e){function n(){return new Promise(function(n,i){r(t,e,n,i)})}return a=a?a.then(n,n):n()}"object"==typeof e.process&&e.process.domain&&(r=e.process.domain.bind(r));var a;this._invoke=i}function l(t,e,r){var i=S;return function(a,o){if(i===A)throw new Error("Generator is already running");if(i===D){if("throw"===a)throw o;return m()}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var u=c(s,r);if(u){if(u===N)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===S)throw i=D,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=A;var l=n(t,e,r);if("normal"===l.type){if(i=r.done?D:_,l.arg===N)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=D,r.method="throw",r.arg=l.arg)}}}function c(t,e){var r=t.iterator[e.method];if(r===g){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=g,c(t,e),"throw"===e.method))return N;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return N}var i=n(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,N;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=g),e.delegate=null,N):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,N)}function h(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function f(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function d(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(h,this),this.reset(!0)}function p(t){if(t){var e=t[w];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(y.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=g,e.done=!0,e};return n.next=n}}return{next:m}}function m(){return{value:g,done:!0}}var g,v=Object.prototype,y=v.hasOwnProperty,M="function"==typeof Symbol?Symbol:{},w=M.iterator||"@@iterator",x=M.asyncIterator||"@@asyncIterator",b=M.toStringTag||"@@toStringTag",T="object"==typeof t,E=e.regeneratorRuntime;if(E)return void(T&&(t.exports=E));E=e.regeneratorRuntime=T?t.exports:{},E.wrap=r;var S="suspendedStart",_="suspendedYield",A="executing",D="completed",N={},I={};I[w]=function(){return this};var L=Object.getPrototypeOf,C=L&&L(L(p([])));C&&C!==v&&y.call(C,w)&&(I=C);var O=o.prototype=i.prototype=Object.create(I);a.prototype=O.constructor=o,o.constructor=a,o[b]=a.displayName="GeneratorFunction",E.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===a||"GeneratorFunction"===(e.displayName||e.name))},E.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,b in t||(t[b]="GeneratorFunction")),t.prototype=Object.create(O),t},E.awrap=function(t){return{__await:t}},s(u.prototype),u.prototype[x]=function(){return this},E.AsyncIterator=u,E.async=function(t,e,n,i){var a=new u(r(t,e,n,i));return E.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},s(O),O[b]="Generator",O[w]=function(){return this},O.toString=function(){return"[object Generator]"},E.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},E.values=p,d.prototype={constructor:d,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(f),!t)for(var e in this)"t"===e.charAt(0)&&y.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=g)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,n){return a.type="throw",a.arg=t,r.next=e,n&&(r.method="next",r.arg=g),!!n}if(this.done)throw t;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var o=y.call(i,"catchLoc"),s=y.call(i,"finallyLoc");if(o&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&y.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,N):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),N},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),f(r),N}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;f(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:p(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=g),N}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this)}).call(e,r(59))},function(t,e,r){!function(e,r){t.exports=r()}(0,function(){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){t.exports=r(1)},function(t,e,r){"use strict";var n=r(2),i=r(3);!function(){var t="undefined"==typeof JSON?{}:JSON;n.setupJSON(t)}();var a=window._rollbarConfig,o=a&&a.globalAlias||"Rollbar";window[o]&&void 0!==window[o].shimId||!a?(window.Rollbar=n.wrapper,window.RollbarNotifier=i.Notifier):n.wrapper.init(a),t.exports=n.wrapper},function(t,e,r){"use strict";function n(t,e,r){!r[4]&&window._rollbarWrappedError&&(r[4]=window._rollbarWrappedError,window._rollbarWrappedError=null),t.uncaughtError.apply(t,r),e&&e.apply(window,r)}function i(t,e){if(e.hasOwnProperty&&e.hasOwnProperty("addEventListener")){var r=e.addEventListener;e.addEventListener=function(e,n,i){r.call(this,e,t.wrap(n),i)};var n=e.removeEventListener;e.removeEventListener=function(t,e,r){n.call(this,t,e&&e._wrapped||e,r)}}}var a=r(3),o=r(8),s=a.Notifier;window._rollbarWrappedError=null;var u={};u.init=function(t,e){var r=new s(e);if(r.configure(t),t.captureUncaught){var a;e&&o.isType(e._rollbarOldOnError,"function")?a=e._rollbarOldOnError:window.onerror&&!window.onerror.belongsToShim&&(a=window.onerror),window.onerror=function(){var t=Array.prototype.slice.call(arguments,0);n(r,a,t)};var u,l,c=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];for(u=0;u<c.length;++u)l=c[u],window[l]&&window[l].prototype&&i(r,window[l].prototype)}return t.captureUnhandledRejections&&(e&&o.isType(e._unhandledRejectionHandler,"function")&&window.removeEventListener("unhandledrejection",e._unhandledRejectionHandler),r._unhandledRejectionHandler=function(t){var e=t.reason,n=t.promise,i=t.detail;!e&&i&&(e=i.reason,n=i.promise),r.unhandledRejection(e,n)},window.addEventListener("unhandledrejection",r._unhandledRejectionHandler)),window.Rollbar=r,s.processPayloads(),r},t.exports={wrapper:u,setupJSON:a.setupJSON}},function(t,e,r){"use strict";function n(t){x=t,y.setupJSON(t),v.setupJSON(t)}function i(t,e){return function(){var r=e||this;try{return t.apply(r,arguments)}catch(t){v.consoleError("[Rollbar]:",t)}}}function a(){p||(p=setTimeout(f,1e3))}function o(){return b}function s(t){b=b||this;var e="https://"+s.DEFAULT_ENDPOINT;this.options={enabled:!0,endpoint:e,environment:"production",scrubFields:m([],s.DEFAULT_SCRUB_FIELDS),checkIgnore:null,logLevel:s.DEFAULT_LOG_LEVEL,reportLevel:s.DEFAULT_REPORT_LEVEL,uncaughtErrorLevel:s.DEFAULT_UNCAUGHT_ERROR_LEVEL,payload:{}},this.lastError=null,this.plugins={},this.parentNotifier=t,t&&(t.hasOwnProperty("shimId")?t.notifier=this:this.configure(t.options))}function u(t){window._rollbarPayloadQueue.push(t),a()}function l(t){return i(function(){var e=this._getLogArgs(arguments);return this._log(t||e.level||this.options.logLevel||s.DEFAULT_LOG_LEVEL,e.message,e.err,e.custom,e.callback)})}function c(t,e){t||(t=e?x.stringify(e):"");var r={body:t};return e&&(r.extra=m(!0,{},e)),{message:r}}function h(t,e,r){var n=g.guessErrorClass(e.message),i=e.name||n[0],a=n[1],o={exception:{class:i,message:a}};if(t&&(o.exception.description=t||"uncaught exception"),e.stack){var s,u,l,h,f,d,p,y;for(o.frames=[],p=0;p<e.stack.length;++p)s=e.stack[p],u={filename:s.url?v.sanitizeUrl(s.url):"(unknown)",lineno:s.line||null,method:s.func&&"?"!==s.func?s.func:"[anonymous]",colno:s.column},l=h=f=null,d=s.context?s.context.length:0,d&&(y=Math.floor(d/2),h=s.context.slice(0,y),l=s.context[y],f=s.context.slice(y)),l&&(u.code=l),(h||f)&&(u.context={},h&&h.length&&(u.context.pre=h),f&&f.length&&(u.context.post=f)),s.args&&(u.args=s.args),o.frames.push(u);return o.frames.reverse(),r&&(o.extra=m(!0,{},r)),{trace:o}}return c(i+": "+a,r)}function f(){var t;try{for(;t=window._rollbarPayloadQueue.shift();)d(t)}finally{p=void 0}}function d(t){var e=t.endpointUrl,r=t.accessToken,n=t.payload,i=t.callback||function(){},a=(new Date).getTime();a-E>=6e4&&(E=a,_=0);var o=window._globalRollbarOptions.maxItems,l=window._globalRollbarOptions.itemsPerMinute,c=function(){return!n.ignoreRateLimit&&o>=1&&S>=o};return c()?void i(new Error(o+" max items reached")):function(){return!n.ignoreRateLimit&&l>=1&&_>=l}()?void i(new Error(l+" items per minute reached")):(S++,_++,c()&&b._log(b.options.uncaughtErrorLevel,"maxItems has been hit. Ignoring errors for the remainder of the current page load.",null,{maxItems:o},null,!1,!0),n.ignoreRateLimit&&delete n.ignoreRateLimit,void M.post(e,r,n,function(e,r){return e?(e instanceof w&&(t.callback=function(){},setTimeout(function(){u(t)},s.RETRY_DELAY)),i(e)):i(null,r)}))}var p,m=r(4),g=r(5),v=r(8),y=r(11),M=y.XHR,w=y.ConnectionError,x=null;s.NOTIFIER_VERSION="1.9.4",s.DEFAULT_ENDPOINT="api.rollbar.com/api/1/",s.DEFAULT_SCRUB_FIELDS=["pw","pass","passwd","password","secret","confirm_password","confirmPassword","password_confirmation","passwordConfirmation","access_token","accessToken","secret_key","secretKey","secretToken"],s.DEFAULT_LOG_LEVEL="debug",s.DEFAULT_REPORT_LEVEL="debug",s.DEFAULT_UNCAUGHT_ERROR_LEVEL="error",s.DEFAULT_ITEMS_PER_MIN=60,s.DEFAULT_MAX_ITEMS=0,s.LEVELS={debug:0,info:1,warning:2,error:3,critical:4},s.RETRY_DELAY=1e4,window._rollbarPayloadQueue=window._rollbarPayloadQueue||[],window._globalRollbarOptions={startTime:(new Date).getTime(),maxItems:s.DEFAULT_MAX_ITEMS,itemsPerMinute:s.DEFAULT_ITEMS_PER_MIN};var b,T=s.prototype;T._getLogArgs=function(t){for(var e,r,n,a,o,u,l=this.options.logLevel||s.DEFAULT_LOG_LEVEL,c=[],h=0;h<t.length;++h)u=t[h],o=v.typeName(u),"string"===o?e?c.push(u):e=u:"function"===o?a=i(u,this):"date"===o?c.push(u):"error"===o||u instanceof Error||"undefined"!=typeof DOMException&&u instanceof DOMException?r?c.push(u):r=u:"object"!==o&&"array"!==o||(n?c.push(u):n=u);return c.length&&(n=n||{},n.extraArgs=c),{level:l,message:e,err:r,custom:n,callback:a}},T._route=function(t){var e=this.options.endpoint,r=/\/$/.test(e),n=/^\//.test(t);return r&&n?t=t.substring(1):r||n||(t="/"+t),e+t},T._processShimQueue=function(t){for(var e,r,n,i,a,o,u,l={};r=t.shift();)e=r.shim,n=r.method,i=r.args,a=e.parentShim,u=l[e.shimId],u||(a?(o=l[a.shimId],u=new s(o)):u=this,l[e.shimId]=u),u[n]&&v.isType(u[n],"function")&&u[n].apply(u,i)},T._buildPayload=function(t,e,r,n,i){var a=this.options.accessToken,o=this.options.environment,u=m(!0,{},this.options.payload),l=v.uuid4();if(void 0===s.LEVELS[e])throw new Error("Invalid level");if(!r&&!n&&!i)throw new Error("No message, stack info or custom data");var c={environment:o,endpoint:this.options.endpoint,uuid:l,level:e,platform:"browser",framework:"browser-js",language:"javascript",body:this._buildBody(r,n,i),request:{url:window.location.href,query_string:window.location.search,user_ip:"$remote_ip"},client:{runtime_ms:t.getTime()-window._globalRollbarOptions.startTime,timestamp:Math.round(t.getTime()/1e3),javascript:{browser:window.navigator.userAgent,language:window.navigator.language,cookie_enabled:window.navigator.cookieEnabled,screen:{width:window.screen.width,height:window.screen.height},plugins:this._getBrowserPlugins()}},server:{},notifier:{name:"rollbar-browser-js",version:s.NOTIFIER_VERSION}};u.body&&delete u.body;var h={access_token:a,data:m(!0,c,u)};return this._scrub(h.data),h},T._buildBody=function(t,e,r){return e?h(t,e,r):c(t,r)},T._getBrowserPlugins=function(){if(!this._browserPlugins){var t,e,r=window.navigator.plugins||[],n=r.length,i=[];for(e=0;e<n;++e)t=r[e],i.push({name:t.name,description:t.description});this._browserPlugins=i}return this._browserPlugins},T._scrub=function(t){function e(t,e,r,n,i,a){return e+v.redact(a)}function r(t){var r;if(v.isType(t,"string"))for(r=0;r<s.length;++r)t=t.replace(s[r],e);return t}function n(t,e){var r;for(r=0;r<o.length;++r)if(o[r].test(t)){e=v.redact(e);break}return e}function i(t,e){var i=n(t,e);return i===e?r(i):i}var a=this.options.scrubFields,o=this._getScrubFieldRegexs(a),s=this._getScrubQueryParamRegexs(a);return v.traverse(t,i),t},T._getScrubFieldRegexs=function(t){for(var e,r=[],n=0;n<t.length;++n)e="\\[?(%5[bB])?"+t[n]+"\\[?(%5[bB])?\\]?(%5[dD])?",r.push(new RegExp(e,"i"));return r},T._getScrubQueryParamRegexs=function(t){for(var e,r=[],n=0;n<t.length;++n)e="\\[?(%5[bB])?"+t[n]+"\\[?(%5[bB])?\\]?(%5[dD])?",r.push(new RegExp("("+e+"=)([^&\\n]+)","igm"));return r},T._urlIsWhitelisted=function(t){var e,r,n,i,a,o,s,u,l,c;try{if(e=this.options.hostWhiteList,r=t&&t.data&&t.data.body&&t.data.body.trace,!e||0===e.length)return!0;if(!r)return!0;for(s=e.length,a=r.frames.length,l=0;l<a;l++){if(n=r.frames[l],i=n.filename,!v.isType(i,"string"))return!0;for(c=0;c<s;c++)if(o=e[c],u=new RegExp(o),u.test(i))return!0}}catch(t){return this.configure({hostWhiteList:null}),v.consoleError("[Rollbar]: Error while reading your configuration's hostWhiteList option. Removing custom hostWhiteList.",t),!0}return!1},T._messageIsIgnored=function(t){var e,r,n,i,a,o,s,u,l;try{if(a=!1,!(n=this.options.ignoredMessages)||0===n.length)return!1;if(s=t&&t.data&&t.data.body,u=s&&s.trace&&s.trace.exception&&s.trace.exception.message,l=s&&s.message&&s.message.body,!(e=u||l))return!1;for(i=n.length,r=0;r<i&&(o=new RegExp(n[r],"gi"),!(a=o.test(e)));r++);}catch(t){this.configure({ignoredMessages:null}),v.consoleError("[Rollbar]: Error while reading your configuration's ignoredMessages option. Removing custom ignoredMessages.")}return a},T._enqueuePayload=function(t,e,r,n){var i={callback:n,accessToken:this.options.accessToken,endpointUrl:this._route("item/"),payload:t},a=function(){if(n){n(null,{err:0,result:{id:null,uuid:null,message:"This item was not sent to Rollbar because it was ignored. This can happen if a custom checkIgnore() function was used or if the item's level was less than the notifier' reportLevel. See https://rollbar.com/docs/notifier/rollbar.js/configuration for more details."}})}};if(this._internalCheckIgnore(e,r,t))return void a();try{if(v.isType(this.options.checkIgnore,"function")&&this.options.checkIgnore(e,r,t))return void a()}catch(t){this.configure({checkIgnore:null}),v.consoleError("[Rollbar]: Error while calling custom checkIgnore() function. Removing custom checkIgnore().",t)}if(this._urlIsWhitelisted(t)&&!this._messageIsIgnored(t)){if(this.options.verbose){if(t.data&&t.data.body&&t.data.body.trace){var o=t.data.body.trace,s=o.exception.message;v.consoleError("[Rollbar]: ",s)}v.consoleInfo("[Rollbar]: ",i)}v.isType(this.options.logFunction,"function")&&this.options.logFunction(i);try{v.isType(this.options.transform,"function")&&this.options.transform(t)}catch(t){this.configure({transform:null}),v.consoleError("[Rollbar]: Error while calling custom transform() function. Removing custom transform().",t)}this.options.enabled&&u(i)}},T._internalCheckIgnore=function(t,e,r){var n=e[0];if((s.LEVELS[n]||0)<(s.LEVELS[this.options.reportLevel]||0))return!0;var i=this.options?this.options.plugins:{};if(i&&i.jquery&&i.jquery.ignoreAjaxErrors)try{return!!r.data.body.message.extra.isAjax}catch(t){return!1}return!1},T._log=function(t,e,r,n,i,a,o){var s=null;if(r)try{if(s=r._savedStackTrace?r._savedStackTrace:g.parse(r),r===this.lastError)return;this.lastError=r}catch(t){v.consoleError("[Rollbar]: Error while parsing the error object.",t),e=r.message||r.description||e||String(r),r=null}var u=this._buildPayload(new Date,t,e,s,n);return o&&(u.ignoreRateLimit=!0),this._enqueuePayload(u,!!a,[t,e,r,n],i),{uuid:u.data.uuid}},T.log=l(),T.debug=l("debug"),T.info=l("info"),T.warn=l("warning"),T.warning=l("warning"),T.error=l("error"),T.critical=l("critical"),T.uncaughtError=i(function(t,e,r,n,i,a){if(a=a||null,i&&v.isType(i,"error"))return void this._log(this.options.uncaughtErrorLevel,t,i,a,null,!0);if(e&&v.isType(e,"error"))return void this._log(this.options.uncaughtErrorLevel,t,e,a,null,!0);var o={url:e||"",line:r};o.func=g.guessFunctionName(o.url,o.line),o.context=g.gatherContext(o.url,o.line);var s={mode:"onerror",message:i?String(i):t||"uncaught exception",url:document.location.href,stack:[o],useragent:navigator.userAgent},u=this._buildPayload(new Date,this.options.uncaughtErrorLevel,t,s,a);this._enqueuePayload(u,!0,[this.options.uncaughtErrorLevel,t,e,r,n,i])}),T.unhandledRejection=i(function(t,e){var r,n;if(t?(r=t.message||String(t),n=t._rollbarContext):r="unhandled rejection was null or undefined!",n=n||e._rollbarContext||null,t&&v.isType(t,"error"))return void this._log(this.options.uncaughtErrorLevel,r,t,n,null,!0);var i={url:"",line:0};i.func=g.guessFunctionName(i.url,i.line),i.context=g.gatherContext(i.url,i.line);var a={mode:"unhandledrejection",message:r,url:document.location.href,stack:[i],useragent:navigator.userAgent},o=this._buildPayload(new Date,this.options.uncaughtErrorLevel,r,a,n);this._enqueuePayload(o,!0,[this.options.uncaughtErrorLevel,r,i.url,i.line,0,t,e])}),T.global=i(function(t){t=t||{};var e={startTime:t.startTime,maxItems:t.maxItems,itemsPerMinute:t.itemsPerMinute};m(!0,window._globalRollbarOptions,e),void 0!==t.maxItems&&(S=0),void 0!==t.itemsPerMinute&&(_=0)}),T.configure=i(function(t,e){var r=m(!0,{},t);m(!e,this.options,r),this.global(r)}),T.scope=i(function(t){var e=new s(this);return m(!0,e.options.payload,t),e}),T.wrap=function(t,e){try{var r;if(r=v.isType(e,"function")?e:function(){return e||{}},!v.isType(t,"function"))return t;if(t._isWrap)return t;if(!t._wrapped){t._wrapped=function(){try{return t.apply(this,arguments)}catch(e){throw"string"==typeof e&&(e=new String(e)),e.stack||(e._savedStackTrace=g.parse(e)),e._rollbarContext=r()||{},e._rollbarContext._wrappedSource=t.toString(),window._rollbarWrappedError=e,e}},t._wrapped._isWrap=!0;for(var n in t)t.hasOwnProperty(n)&&(t._wrapped[n]=t[n])}return t._wrapped}catch(e){return t}},T.loadFull=function(){v.consoleError("[Rollbar]: Unexpected Rollbar.loadFull() called on a Notifier instance")},s.processPayloads=function(t){return t?void f():void a()};var E=(new Date).getTime(),S=0,_=0;t.exports={Notifier:s,setupJSON:n,topLevelNotifier:o}},function(t,e){"use strict";var r=Object.prototype.hasOwnProperty,n=Object.prototype.toString,i=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===n.call(t)},a=function(t){if(!t||"[object Object]"!==n.call(t))return!1;var e=r.call(t,"constructor"),i=t.constructor&&t.constructor.prototype&&r.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!e&&!i)return!1;var a;for(a in t);return void 0===a||r.call(t,a)};t.exports=function t(){var e,r,n,o,s,u,l=arguments[0],c=1,h=arguments.length,f=!1;for("boolean"==typeof l?(f=l,l=arguments[1]||{},c=2):("object"!=typeof l&&"function"!=typeof l||null==l)&&(l={});c<h;++c)if(null!=(e=arguments[c]))for(r in e)n=l[r],o=e[r],l!==o&&(f&&o&&(a(o)||(s=i(o)))?(s?(s=!1,u=n&&i(n)?n:[]):u=n&&a(n)?n:{},l[r]=t(f,u,o)):void 0!==o&&(l[r]=o));return l}},function(t,e,r){"use strict";function n(){return c}function i(){return null}function a(t){var e={};return e._stackFrame=t,e.url=t.fileName,e.line=t.lineNumber,e.func=t.functionName,e.column=t.columnNumber,e.args=t.args,e.context=i(e.url,e.line),e}function o(t){return{stack:function(){var e=[];try{e=l.parse(t)}catch(t){e=[]}for(var r=[],n=0;n<e.length;n++)r.push(new a(e[n]));return r}(),message:t.message,name:t.name}}function s(t){return new o(t)}function u(t){if(!t)return["Unknown error. There was no error message to display.",""];var e=t.match(h),r="(unknown)";return e&&(r=e[e.length-1],t=t.replace((e[e.length-2]||"")+r+":",""),t=t.replace(/(^[\s]+|[\s]+$)/g,"")),[r,t]}var l=r(6),c="?",h=new RegExp("^(([a-zA-Z0-9-_$ ]*): *)?(Uncaught )?([a-zA-Z0-9-_$ ]*): ");t.exports={guessFunctionName:n,guessErrorClass:u,gatherContext:i,parse:s,Stack:o,Frame:a}},function(t,e,r){var n,i,a;!function(o,s){"use strict";i=[r(7)],n=s,void 0!==(a="function"==typeof n?n.apply(e,i):n)&&(t.exports=a)}(0,function(t){"use strict";function e(t,e,r){if("function"==typeof Array.prototype.map)return t.map(e,r);for(var n=new Array(t.length),i=0;i<t.length;i++)n[i]=e.call(r,t[i]);return n}function r(t,e,r){if("function"==typeof Array.prototype.filter)return t.filter(e,r);for(var n=[],i=0;i<t.length;i++)e.call(r,t[i])&&n.push(t[i]);return n}var n=/(^|@)\S+\:\d+/,i=/^\s*at .*(\S+\:\d+|\(native\))/m,a=/^(eval@)?(\[native code\])?$/;return{parse:function(t){if(void 0!==t.stacktrace||void 0!==t["opera#sourceloc"])return this.parseOpera(t);if(t.stack&&t.stack.match(i))return this.parseV8OrIE(t);if(t.stack)return this.parseFFOrSafari(t);throw new Error("Cannot parse given Error object")},extractLocation:function(t){if(-1===t.indexOf(":"))return[t];var e=t.replace(/[\(\)\s]/g,"").split(":"),r=e.pop(),n=e[e.length-1];if(!isNaN(parseFloat(n))&&isFinite(n)){var i=e.pop();return[e.join(":"),i,r]}return[e.join(":"),r,void 0]},parseV8OrIE:function(n){return e(r(n.stack.split("\n"),function(t){return!!t.match(i)},this),function(e){e.indexOf("(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var r=e.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),n=this.extractLocation(r.pop()),i=r.join(" ")||void 0,a="eval"===n[0]?void 0:n[0];return new t(i,void 0,a,n[1],n[2],e)},this)},parseFFOrSafari:function(n){return e(r(n.stack.split("\n"),function(t){return!t.match(a)},this),function(e){if(e.indexOf(" > eval")>-1&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===e.indexOf("@")&&-1===e.indexOf(":"))return new t(e);var r=e.split("@"),n=this.extractLocation(r.pop()),i=r.shift()||void 0;return new t(i,void 0,n[0],n[1],n[2],e)},this)},parseOpera:function(t){return!t.stacktrace||t.message.indexOf("\n")>-1&&t.message.split("\n").length>t.stacktrace.split("\n").length?this.parseOpera9(t):t.stack?this.parseOpera11(t):this.parseOpera10(t)},parseOpera9:function(e){for(var r=/Line (\d+).*script (?:in )?(\S+)/i,n=e.message.split("\n"),i=[],a=2,o=n.length;a<o;a+=2){var s=r.exec(n[a]);s&&i.push(new t(void 0,void 0,s[2],s[1],void 0,n[a]))}return i},parseOpera10:function(e){for(var r=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=e.stacktrace.split("\n"),i=[],a=0,o=n.length;a<o;a+=2){var s=r.exec(n[a]);s&&i.push(new t(s[3]||void 0,void 0,s[2],s[1],void 0,n[a]))}return i},parseOpera11:function(i){return e(r(i.stack.split("\n"),function(t){return!!t.match(n)&&!t.match(/^Error created at/)},this),function(e){var r,n=e.split("@"),i=this.extractLocation(n.pop()),a=n.shift()||"",o=a.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;a.match(/\(([^\)]*)\)/)&&(r=a.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var s=void 0===r||"[arguments not available]"===r?void 0:r.split(",");return new t(o,s,i[0],i[1],i[2],e)},this)}}})},function(t,e,r){var n,i,a;!function(r,o){"use strict";i=[],n=o,void 0!==(a="function"==typeof n?n.apply(e,i):n)&&(t.exports=a)}(0,function(){"use strict";function t(t){return!isNaN(parseFloat(t))&&isFinite(t)}function e(t,e,r,n,i,a){void 0!==t&&this.setFunctionName(t),void 0!==e&&this.setArgs(e),void 0!==r&&this.setFileName(r),void 0!==n&&this.setLineNumber(n),void 0!==i&&this.setColumnNumber(i),void 0!==a&&this.setSource(a)}return e.prototype={getFunctionName:function(){return this.functionName},setFunctionName:function(t){this.functionName=String(t)},getArgs:function(){return this.args},setArgs:function(t){if("[object Array]"!==Object.prototype.toString.call(t))throw new TypeError("Args must be an Array");this.args=t},getFileName:function(){return this.fileName},setFileName:function(t){this.fileName=String(t)},getLineNumber:function(){return this.lineNumber},setLineNumber:function(e){if(!t(e))throw new TypeError("Line Number must be a Number");this.lineNumber=Number(e)},getColumnNumber:function(){return this.columnNumber},setColumnNumber:function(e){if(!t(e))throw new TypeError("Column Number must be a Number");this.columnNumber=Number(e)},getSource:function(){return this.source},setSource:function(t){this.source=String(t)},toString:function(){return(this.getFunctionName()||"{anonymous}")+"("+(this.getArgs()||[]).join(",")+")"+(this.getFileName()?"@"+this.getFileName():"")+(t(this.getLineNumber())?":"+this.getLineNumber():"")+(t(this.getColumnNumber())?":"+this.getColumnNumber():"")}},e})},function(t,e,r){"use strict";function n(t){v=t}function i(t){return{}.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function a(t,e){return i(t)===e}function o(t){if(!a(t,"string"))throw new Error("received invalid input");for(var e=y,r=e.parser[e.strictMode?"strict":"loose"].exec(t),n={},i=14;i--;)n[e.key[i]]=r[i]||"";return n[e.q.name]={},n[e.key[12]].replace(e.q.parser,function(t,r,i){r&&(n[e.q.name][r]=i)}),n}function s(t){var e=o(t);return""===e.anchor&&(e.source=e.source.replace("#","")),t=e.source.replace("?"+e.query,"")}function u(t,e){var r,n,i,o=a(t,"object"),s=a(t,"array"),l=[];if(o)for(r in t)t.hasOwnProperty(r)&&l.push(r);else if(s)for(i=0;i<t.length;++i)l.push(i);for(i=0;i<l.length;++i)r=l[i],n=t[r],o=a(n,"object"),s=a(n,"array"),t[r]=o||s?u(n,e):e(r,n);return t}function l(t){return t=String(t),new Array(t.length+1).join("*")}function c(){var t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var r=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?r:7&r|8).toString(16)})}function h(t){return"function"!=typeof Object.create?function(t){var e=function(){};return function(t){if(null!==t&&t!==Object(t))throw TypeError("Argument must be an object, or null");e.prototype=t||{};var r=new e;return e.prototype=null,null===t&&(r.__proto__=null),r}}()(t):Object.create(t)}function f(){for(var t=[],e=0;e<arguments.length;e++){var r=arguments[e];"object"==typeof r?(r=v.stringify(r),r.length>500&&(r=r.substr(0,500)+"...")):void 0===r&&(r="undefined"),t.push(r)}return t.join(" ")}function d(){g.ieVersion()<=8?console.error(f.apply(null,arguments)):console.error.apply(null,arguments)}function p(){g.ieVersion()<=8?console.info(f.apply(null,arguments)):console.info.apply(null,arguments)}function m(){g.ieVersion()<=8?console.log(f.apply(null,arguments)):console.log.apply(null,arguments)}r(9);var g=r(10),v=null,y={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},M={setupJSON:n,isType:a,parseUri:o,parseUriOptions:y,redact:l,sanitizeUrl:s,traverse:u,typeName:i,uuid4:c,objectCreate:h,consoleError:d,consoleInfo:p,consoleLog:m};t.exports=M},function(t,e){!function(t){"use strict";t.console||(t.console={});for(var e,r,n=t.console,i=function(){},a=["memory"],o="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");e=a.pop();)n[e]||(n[e]={});for(;r=o.pop();)n[r]||(n[r]=i)}("undefined"==typeof window?this:window)},function(t,e){"use strict";function r(){for(var t=3,e=document.createElement("div"),r=e.getElementsByTagName("i");e.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e",r[0];);return t>4?t:void 0}var n={ieVersion:r};t.exports=n},function(t,e,r){"use strict";function n(t){o=t}function i(t){this.name="Connection Error",this.message=t,this.stack=(new Error).stack}var a=r(8),o=null;i.prototype=a.objectCreate(Error.prototype),i.prototype.constructor=i;var s={XMLHttpFactories:[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],createXMLHTTPObject:function(){var t,e=!1,r=s.XMLHttpFactories,n=r.length;for(t=0;t<n;t++)try{e=r[t]();break}catch(t){}return e},post:function(t,e,r,n){if(!a.isType(r,"object"))throw new Error("Expected an object to POST");r=o.stringify(r),n=n||function(){};var u=s.createXMLHTTPObject();if(u)try{try{var l=function(){try{if(l&&4===u.readyState){l=void 0;var t=o.parse(u.responseText);200===u.status?n(null,t):a.isType(u.status,"number")&&u.status>=400&&u.status<600?(403==u.status&&a.consoleError("[Rollbar]:"+t.message),n(new Error(String(u.status)))):n(new i("XHR response had no status code (likely connection failure)"))}}catch(t){var e;e=t&&t.stack?t:new Error(t),n(e)}};u.open("POST",t,!0),u.setRequestHeader&&(u.setRequestHeader("Content-Type","application/json"),u.setRequestHeader("X-Rollbar-Access-Token",e)),u.onreadystatechange=l,u.send(r)}catch(e){if("undefined"!=typeof XDomainRequest){"http:"===window.location.href.substring(0,5)&&"https"===t.substring(0,5)&&(t="http"+t.substring(5));var c=function(){n(new i("Request timed out"))},h=function(){n(new Error("Error during request"))},f=function(){n(null,o.parse(u.responseText))};u=new XDomainRequest,u.onprogress=function(){},u.ontimeout=c,u.onerror=h,u.onload=f,u.open("POST",t,!0),u.send(r)}}}catch(t){n(t)}}};t.exports={XHR:s,setupJSON:n,ConnectionError:i}}])})},function(t,e,r){(function(e){!function(){function r(t){"use strict";for(var e={fill:0},a=function(t){for(t+=9;t%64>0;t+=1);return t},o=function(t,e){var r=new Uint8Array(t.buffer),n=e%4,i=e-n;switch(n){case 0:r[i+3]=0;case 1:r[i+2]=0;case 2:r[i+1]=0;case 3:r[i+0]=0}for(var a=1+(e>>2);a<t.length;a++)t[a]=0},s=function(t,e,r){t[e>>2]|=128<<24-(e%4<<3),t[14+(2+(e>>2)&-16)]=r/(1<<29)|0,t[15+(2+(e>>2)&-16)]=r<<3},u=function(t,e,r,n,i){var a,o=this,s=i%4,u=(n+s)%4,l=n-u;switch(s){case 0:t[i]=o.charCodeAt(r+3);case 1:t[i+1-(s<<1)|0]=o.charCodeAt(r+2);case 2:t[i+2-(s<<1)|0]=o.charCodeAt(r+1);case 3:t[i+3-(s<<1)|0]=o.charCodeAt(r)}if(!(n<u+s)){for(a=4-s;a<l;a=a+4|0)e[i+a>>2]=o.charCodeAt(r+a)<<24|o.charCodeAt(r+a+1)<<16|o.charCodeAt(r+a+2)<<8|o.charCodeAt(r+a+3);switch(u){case 3:t[i+l+1|0]=o.charCodeAt(r+l+2);case 2:t[i+l+2|0]=o.charCodeAt(r+l+1);case 1:t[i+l+3|0]=o.charCodeAt(r+l)}}},l=function(t,e,r,n,i){var a,o=this,s=i%4,u=(n+s)%4,l=n-u;switch(s){case 0:t[i]=o[r+3];case 1:t[i+1-(s<<1)|0]=o[r+2];case 2:t[i+2-(s<<1)|0]=o[r+1];case 3:t[i+3-(s<<1)|0]=o[r]}if(!(n<u+s)){for(a=4-s;a<l;a=a+4|0)e[i+a>>2|0]=o[r+a]<<24|o[r+a+1]<<16|o[r+a+2]<<8|o[r+a+3];switch(u){case 3:t[i+l+1|0]=o[r+l+2];case 2:t[i+l+2|0]=o[r+l+1];case 1:t[i+l+3|0]=o[r+l]}}},c=function(t,e,r,n,a){var o,s=this,u=a%4,l=(n+u)%4,c=n-l,h=new Uint8Array(i.readAsArrayBuffer(s.slice(r,r+n)));switch(u){case 0:t[a]=h[3];case 1:t[a+1-(u<<1)|0]=h[2];case 2:t[a+2-(u<<1)|0]=h[1];case 3:t[a+3-(u<<1)|0]=h[0]}if(!(n<l+u)){for(o=4-u;o<c;o=o+4|0)e[a+o>>2|0]=h[o]<<24|h[o+1]<<16|h[o+2]<<8|h[o+3];switch(l){case 3:t[a+c+1|0]=h[c+2];case 2:t[a+c+2|0]=h[c+1];case 1:t[a+c+3|0]=h[c]}}},h=function(t){switch(n.getDataType(t)){case"string":return u.bind(t);case"array":case"buffer":return l.bind(t);case"arraybuffer":return l.bind(new Uint8Array(t));case"view":return l.bind(new Uint8Array(t.buffer,t.byteOffset,t.byteLength));case"blob":return c.bind(t)}},f=new Array(256),d=0;d<256;d++)f[d]=(d<16?"0":"")+d.toString(16);var p=function(t){for(var e=new Uint8Array(t),r=new Array(t.byteLength),n=0;n<r.length;n++)r[n]=f[e[n]];return r.join("")},m=function(t){var e;if(t<=65536)return 65536;if(t<16777216)for(e=1;e<t;e<<=1);else for(e=16777216;e<t;e+=16777216);return e};!function(t){if(t%64>0)throw new Error("Chunk size must be a multiple of 128 bit");e.offset=0,e.maxChunkLen=t,e.padMaxChunkLen=a(t),e.heap=new ArrayBuffer(m(e.padMaxChunkLen+320+20)),e.h32=new Int32Array(e.heap),e.h8=new Int8Array(e.heap),e.core=new r._core({Int32Array:Int32Array,DataView:DataView},{},e.heap),e.buffer=null}(t||65536);var g=function(t,r){e.offset=0;var n=new Int32Array(t,r+320,5);n[0]=1732584193,n[1]=-271733879,n[2]=-1732584194,n[3]=271733878,n[4]=-1009589776},v=function(t,r){var n=a(t),i=new Int32Array(e.heap,0,n>>2);return o(i,t),s(i,t,r),n},y=function(t,r,n,i){h(t)(e.h8,e.h32,r,n,i||0)},M=function(t,r,n,i,a){var o=n;y(t,r,n),a&&(o=v(n,i)),e.core.hash(o,e.padMaxChunkLen)},w=function(t,e){var r=new Int32Array(t,e+320,5),n=new Int32Array(5),i=new DataView(n.buffer);return i.setInt32(0,r[0],!1),i.setInt32(4,r[1],!1),i.setInt32(8,r[2],!1),i.setInt32(12,r[3],!1),i.setInt32(16,r[4],!1),n},x=this.rawDigest=function(t){var r=t.byteLength||t.length||t.size||0;g(e.heap,e.padMaxChunkLen);var n=0,i=e.maxChunkLen;for(n=0;r>n+i;n+=i)M(t,n,i,r,!1);return M(t,n,r-n,r,!0),w(e.heap,e.padMaxChunkLen)};this.digest=this.digestFromString=this.digestFromBuffer=this.digestFromArrayBuffer=function(t){return p(x(t).buffer)},this.resetState=function(){return g(e.heap,e.padMaxChunkLen),this},this.append=function(t){var r,n=0,i=t.byteLength||t.length||t.size||0,a=e.offset%e.maxChunkLen;for(e.offset+=i;n<i;)r=Math.min(i-n,e.maxChunkLen-a),y(t,n,r,a),a+=r,n+=r,a===e.maxChunkLen&&(e.core.hash(e.maxChunkLen,e.padMaxChunkLen),a=0);return this},this.getState=function(){var t,r=e.offset%e.maxChunkLen;if(r)t=e.heap.slice(0);else{var n=new Int32Array(e.heap,e.padMaxChunkLen+320,5);t=n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}return{offset:e.offset,heap:t}},this.setState=function(t){if(e.offset=t.offset,20===t.heap.byteLength){new Int32Array(e.heap,e.padMaxChunkLen+320,5).set(new Int32Array(t.heap))}else e.h32.set(new Int32Array(t.heap));return this};var b=this.rawEnd=function(){var t=e.offset,r=t%e.maxChunkLen,n=v(r,t);e.core.hash(n,e.padMaxChunkLen);var i=w(e.heap,e.padMaxChunkLen);return g(e.heap,e.padMaxChunkLen),i};this.end=function(){return p(b().buffer)}}var n={getDataType:function(t){if("string"==typeof t)return"string";if(t instanceof Array)return"array";if(void 0!==e&&e.Buffer&&e.Buffer.isBuffer(t))return"buffer";if(t instanceof ArrayBuffer)return"arraybuffer";if(t.buffer instanceof ArrayBuffer)return"view";if(t instanceof Blob)return"blob";throw new Error("Unsupported data type.")}};if(r._core=function(t,e,r){"use asm";var n=new t.Int32Array(r);function i(t,e){t=t|0;e=e|0;var r=0,i=0,a=0,o=0,s=0,u=0,l=0,c=0,h=0,f=0,d=0,p=0,m=0,g=0;a=n[e+320>>2]|0;s=n[e+324>>2]|0;l=n[e+328>>2]|0;h=n[e+332>>2]|0;d=n[e+336>>2]|0;for(r=0;(r|0)<(t|0);r=r+64|0){o=a;u=s;c=l;f=h;p=d;for(i=0;(i|0)<64;i=i+4|0){g=n[r+i>>2]|0;m=((a<<5|a>>>27)+(s&l|~s&h)|0)+((g+d|0)+1518500249|0)|0;d=h;h=l;l=s<<30|s>>>2;s=a;a=m;n[t+i>>2]=g}for(i=t+64|0;(i|0)<(t+80|0);i=i+4|0){g=(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])<<1|(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])>>>31;m=((a<<5|a>>>27)+(s&l|~s&h)|0)+((g+d|0)+1518500249|0)|0;d=h;h=l;l=s<<30|s>>>2;s=a;a=m;n[i>>2]=g}for(i=t+80|0;(i|0)<(t+160|0);i=i+4|0){g=(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])<<1|(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])>>>31;m=((a<<5|a>>>27)+(s^l^h)|0)+((g+d|0)+1859775393|0)|0;d=h;h=l;l=s<<30|s>>>2;s=a;a=m;n[i>>2]=g}for(i=t+160|0;(i|0)<(t+240|0);i=i+4|0){g=(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])<<1|(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])>>>31;m=((a<<5|a>>>27)+(s&l|s&h|l&h)|0)+((g+d|0)-1894007588|0)|0;d=h;h=l;l=s<<30|s>>>2;s=a;a=m;n[i>>2]=g}for(i=t+240|0;(i|0)<(t+320|0);i=i+4|0){g=(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])<<1|(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])>>>31;m=((a<<5|a>>>27)+(s^l^h)|0)+((g+d|0)-899497514|0)|0;d=h;h=l;l=s<<30|s>>>2;s=a;a=m;n[i>>2]=g}a=a+o|0;s=s+u|0;l=l+c|0;h=h+f|0;d=d+p|0}n[e+320>>2]=a;n[e+324>>2]=s;n[e+328>>2]=l;n[e+332>>2]=h;n[e+336>>2]=d}return{hash:i}},t.exports=r,"undefined"!=typeof FileReaderSync){var i=new FileReaderSync,a=function(t,e,r){try{return r(null,t.digest(e))}catch(t){return r(t)}},o=function(t,e,r,n,i){var a=new self.FileReader;a.onloadend=function(){var s=a.result;e+=a.result.byteLength;try{t.append(s)}catch(t){return void i(t)}e<n.size?o(t,e,r,n,i):i(null,t.end())},a.readAsArrayBuffer(n.slice(e,e+r))};self.onmessage=function(t){var e=t.data.data,n=t.data.file,i=t.data.id;if(void 0!==i&&(n||e)){var s=t.data.blockSize||4194304,u=new r(s);u.resetState();var l=function(t,e){t?self.postMessage({id:i,error:t.name}):self.postMessage({id:i,hash:e})};e&&a(u,e,l),n&&o(u,0,s,n,l)}}}}()}).call(e,r(59))},function(t,e,r){(function(t,e){!function(t,r){"use strict";function n(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),r=0;r<e.length;r++)e[r]=arguments[r+1];var n={callback:t,args:e};return l[u]=n,s(u),u++}function i(t){delete l[t]}function a(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(r,n)}}function o(t){if(c)setTimeout(o,0,t);else{var e=l[t];if(e){c=!0;try{a(e)}finally{i(t),c=!1}}}}if(!t.setImmediate){var s,u=1,l={},c=!1,h=t.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(t);f=f&&f.setTimeout?f:t,"[object process]"==={}.toString.call(t.process)?function(){s=function(t){e.nextTick(function(){o(t)})}}():function(){if(t.postMessage&&!t.importScripts){var e=!0,r=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=r,e}}()?function(){var e="setImmediate$"+Math.random()+"$",r=function(r){r.source===t&&"string"==typeof r.data&&0===r.data.indexOf(e)&&o(+r.data.slice(e.length))};t.addEventListener?t.addEventListener("message",r,!1):t.attachEvent("onmessage",r),s=function(r){t.postMessage(e+r,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){o(t.data)},s=function(e){t.port2.postMessage(e)}}():h&&"onreadystatechange"in h.createElement("script")?function(){var t=h.documentElement;s=function(e){var r=h.createElement("script");r.onreadystatechange=function(){o(e),r.onreadystatechange=null,t.removeChild(r),r=null},t.appendChild(r)}}():function(){s=function(t){setTimeout(o,0,t)}}(),f.setImmediate=n,f.clearImmediate=i}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,r(59),r(129))},function(t,e,r){function n(t,e){this._id=t,this._clearFn=e}var i=Function.prototype.apply;e.setTimeout=function(){return new n(i.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new n(i.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},r(580),e.setImmediate=setImmediate,e.clearImmediate=clearImmediate},function(t,e){function r(t,e){var r=e||0,i=n;return i[t[r++]]+i[t[r++]]+i[t[r++]]+i[t[r++]]+"-"+i[t[r++]]+i[t[r++]]+"-"+i[t[r++]]+i[t[r++]]+"-"+i[t[r++]]+i[t[r++]]+"-"+i[t[r++]]+i[t[r++]]+i[t[r++]]+i[t[r++]]+i[t[r++]]+i[t[r++]]}for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);t.exports=r},function(t,e,r){(function(e){var r,n=e.crypto||e.msCrypto;if(n&&n.getRandomValues){var i=new Uint8Array(16);r=function(){return n.getRandomValues(i),i}}if(!r){var a=new Array(16);r=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),a[e]=t>>>((3&e)<<3)&255;return a}}t.exports=r}).call(e,r(59))},function(t,e){t.exports={name:"webvr-polyfill",version:"0.9.34",homepage:"https://github.com/googlevr/webvr-polyfill",authors:["Boris Smus <boris@smus.com>","Brandon Jones <tojiro@gmail.com>","Jordan Santell <jordan@jsantell.com>"],description:"Use WebVR today, on mobile or desktop, without requiring a special browser build.",devDependencies:{chai:"^3.5.0",jsdom:"^9.12.0",mocha:"^3.2.0",semver:"^5.3.0",webpack:"^2.6.1","webpack-dev-server":"^2.4.5"},main:"src/node-entry",keywords:["vr","webvr"],license:"Apache-2.0",scripts:{start:"npm run watch",watch:"webpack-dev-server",build:"webpack",test:"mocha"},repository:"googlevr/webvr-polyfill",bugs:{url:"https://github.com/googlevr/webvr-polyfill/issues"}}},function(t,e,r){function n(t){this.gl=t,this.ctxAttribs=t.getContextAttributes(),this.meshWidth=20,this.meshHeight=20,this.bufferScale=window.WebVRConfig.BUFFER_SCALE,this.bufferWidth=t.drawingBufferWidth,this.bufferHeight=t.drawingBufferHeight,this.realBindFramebuffer=t.bindFramebuffer,this.realEnable=t.enable,this.realDisable=t.disable,this.realColorMask=t.colorMask,this.realClearColor=t.clearColor,this.realViewport=t.viewport,a.isIOS()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(t.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(t.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=a.linkProgram(t,s,u,this.attribs),this.uniforms=a.getProgramUniforms(t,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.indexCount=0,this.renderTarget=t.createTexture(),this.framebuffer=t.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=t.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=t.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=t.createRenderbuffer()),this.patch(),this.onResize(),window.WebVRConfig.CARDBOARD_UI_DISABLED||(this.cardboardUI=new i(t))}var i=r(255),a=r(21),o=r(256),s=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join("\n"),u=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");n.prototype.destroy=function(){var t=this.gl;this.unpatch(),t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer),t.deleteTexture(this.renderTarget),t.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&t.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&t.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&t.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},n.prototype.onResize=function(){var t=this.gl,e=this,r=[t.RENDERBUFFER_BINDING,t.TEXTURE_BINDING_2D,t.TEXTURE0];o(t,r,function(t){e.realBindFramebuffer.call(t,t.FRAMEBUFFER,null),e.scissorTest&&e.realDisable.call(t,t.SCISSOR_TEST),e.realColorMask.call(t,!0,!0,!0,!0),e.realViewport.call(t,0,0,t.drawingBufferWidth,t.drawingBufferHeight),e.realClearColor.call(t,0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),e.realBindFramebuffer.call(t,t.FRAMEBUFFER,e.framebuffer),t.bindTexture(t.TEXTURE_2D,e.renderTarget),t.texImage2D(t.TEXTURE_2D,0,e.ctxAttribs.alpha?t.RGBA:t.RGB,e.bufferWidth,e.bufferHeight,0,e.ctxAttribs.alpha?t.RGBA:t.RGB,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.renderTarget,0),e.ctxAttribs.depth&&e.ctxAttribs.stencil?(t.bindRenderbuffer(t.RENDERBUFFER,e.depthStencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,e.bufferWidth,e.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e.depthStencilBuffer)):e.ctxAttribs.depth?(t.bindRenderbuffer(t.RENDERBUFFER,e.depthBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,e.bufferWidth,e.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e.depthBuffer)):e.ctxAttribs.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,e.stencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.STENCIL_INDEX8,e.bufferWidth,e.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.STENCIL_ATTACHMENT,t.RENDERBUFFER,e.stencilBuffer)),!t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),e.realBindFramebuffer.call(t,t.FRAMEBUFFER,e.lastBoundFramebuffer),e.scissorTest&&e.realEnable.call(t,t.SCISSOR_TEST),e.realColorMask.apply(t,e.colorMask),e.realViewport.apply(t,e.viewport),e.realClearColor.apply(t,e.clearColor)}),this.cardboardUI&&this.cardboardUI.onResize()},n.prototype.patch=function(){if(!this.isPatched){var t=this,e=this.gl.canvas,r=this.gl;a.isIOS()||(e.width=a.getScreenWidth()*this.bufferScale,e.height=a.getScreenHeight()*this.bufferScale,Object.defineProperty(e,"width",{configurable:!0,enumerable:!0,get:function(){return t.bufferWidth},set:function(r){t.bufferWidth=r,t.realCanvasWidth.set.call(e,r),t.onResize()}}),Object.defineProperty(e,"height",{configurable:!0,enumerable:!0,get:function(){return t.bufferHeight},set:function(r){t.bufferHeight=r,t.realCanvasHeight.set.call(e,r),t.onResize()}})),this.lastBoundFramebuffer=r.getParameter(r.FRAMEBUFFER_BINDING),null==this.lastBoundFramebuffer&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(e,n){t.lastBoundFramebuffer=n||t.framebuffer,t.realBindFramebuffer.call(r,e,t.lastBoundFramebuffer)},this.cullFace=r.getParameter(r.CULL_FACE),this.depthTest=r.getParameter(r.DEPTH_TEST),this.blend=r.getParameter(r.BLEND),this.scissorTest=r.getParameter(r.SCISSOR_TEST),this.stencilTest=r.getParameter(r.STENCIL_TEST),r.enable=function(e){switch(e){case r.CULL_FACE:t.cullFace=!0;break;case r.DEPTH_TEST:t.depthTest=!0;break;case r.BLEND:t.blend=!0;break;case r.SCISSOR_TEST:t.scissorTest=!0;break;case r.STENCIL_TEST:t.stencilTest=!0}t.realEnable.call(r,e)},r.disable=function(e){switch(e){case r.CULL_FACE:t.cullFace=!1;break;case r.DEPTH_TEST:t.depthTest=!1;break;case r.BLEND:t.blend=!1;break;case r.SCISSOR_TEST:t.scissorTest=!1;break;case r.STENCIL_TEST:t.stencilTest=!1}t.realDisable.call(r,e)},this.colorMask=r.getParameter(r.COLOR_WRITEMASK),r.colorMask=function(e,n,i,a){t.colorMask[0]=e,t.colorMask[1]=n,t.colorMask[2]=i,t.colorMask[3]=a,t.realColorMask.call(r,e,n,i,a)},this.clearColor=r.getParameter(r.COLOR_CLEAR_VALUE),r.clearColor=function(e,n,i,a){t.clearColor[0]=e,t.clearColor[1]=n,t.clearColor[2]=i,t.clearColor[3]=a,t.realClearColor.call(r,e,n,i,a)},this.viewport=r.getParameter(r.VIEWPORT),r.viewport=function(e,n,i,a){t.viewport[0]=e,t.viewport[1]=n,t.viewport[2]=i,t.viewport[3]=a,t.realViewport.call(r,e,n,i,a)},this.isPatched=!0,a.safariCssSizeWorkaround(e)}},n.prototype.unpatch=function(){if(this.isPatched){var t=this.gl,e=this.gl.canvas;a.isIOS()||(Object.defineProperty(e,"width",this.realCanvasWidth),Object.defineProperty(e,"height",this.realCanvasHeight)),e.width=this.bufferWidth,e.height=this.bufferHeight,t.bindFramebuffer=this.realBindFramebuffer,t.enable=this.realEnable,t.disable=this.realDisable,t.colorMask=this.realColorMask,t.clearColor=this.realClearColor,t.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&t.bindFramebuffer(t.FRAMEBUFFER,null),this.isPatched=!1,setTimeout(function(){a.safariCssSizeWorkaround(e)},1)}},n.prototype.setTextureBounds=function(t,e){t||(t=[0,0,.5,1]),e||(e=[.5,0,.5,1]),this.viewportOffsetScale[0]=t[0],this.viewportOffsetScale[1]=t[1],this.viewportOffsetScale[2]=t[2],this.viewportOffsetScale[3]=t[3],this.viewportOffsetScale[4]=e[0],this.viewportOffsetScale[5]=e[1],this.viewportOffsetScale[6]=e[2],this.viewportOffsetScale[7]=e[3]},n.prototype.submitFrame=function(){var t=this.gl,e=this,r=[];if(window.WebVRConfig.DIRTY_SUBMIT_FRAME_BINDINGS||r.push(t.CURRENT_PROGRAM,t.ARRAY_BUFFER_BINDING,t.ELEMENT_ARRAY_BUFFER_BINDING,t.TEXTURE_BINDING_2D,t.TEXTURE0),o(t,r,function(t){e.realBindFramebuffer.call(t,t.FRAMEBUFFER,null),e.cullFace&&e.realDisable.call(t,t.CULL_FACE),e.depthTest&&e.realDisable.call(t,t.DEPTH_TEST),e.blend&&e.realDisable.call(t,t.BLEND),e.scissorTest&&e.realDisable.call(t,t.SCISSOR_TEST),e.stencilTest&&e.realDisable.call(t,t.STENCIL_TEST),e.realColorMask.call(t,!0,!0,!0,!0),e.realViewport.call(t,0,0,t.drawingBufferWidth,t.drawingBufferHeight),(e.ctxAttribs.alpha||a.isIOS())&&(e.realClearColor.call(t,0,0,0,1),t.clear(t.COLOR_BUFFER_BIT)),t.useProgram(e.program),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.indexBuffer),t.bindBuffer(t.ARRAY_BUFFER,e.vertexBuffer),t.enableVertexAttribArray(e.attribs.position),t.enableVertexAttribArray(e.attribs.texCoord),t.vertexAttribPointer(e.attribs.position,2,t.FLOAT,!1,20,0),t.vertexAttribPointer(e.attribs.texCoord,3,t.FLOAT,!1,20,8),t.activeTexture(t.TEXTURE0),t.uniform1i(e.uniforms.diffuse,0),t.bindTexture(t.TEXTURE_2D,e.renderTarget),t.uniform4fv(e.uniforms.viewportOffsetScale,e.viewportOffsetScale),t.drawElements(t.TRIANGLES,e.indexCount,t.UNSIGNED_SHORT,0),e.cardboardUI&&e.cardboardUI.renderNoState(),e.realBindFramebuffer.call(e.gl,t.FRAMEBUFFER,e.framebuffer),e.ctxAttribs.preserveDrawingBuffer||(e.realClearColor.call(t,0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)),window.WebVRConfig.DIRTY_SUBMIT_FRAME_BINDINGS||e.realBindFramebuffer.call(t,t.FRAMEBUFFER,e.lastBoundFramebuffer),e.cullFace&&e.realEnable.call(t,t.CULL_FACE),e.depthTest&&e.realEnable.call(t,t.DEPTH_TEST),e.blend&&e.realEnable.call(t,t.BLEND),e.scissorTest&&e.realEnable.call(t,t.SCISSOR_TEST),e.stencilTest&&e.realEnable.call(t,t.STENCIL_TEST),e.realColorMask.apply(t,e.colorMask),e.realViewport.apply(t,e.viewport),!e.ctxAttribs.alpha&&e.ctxAttribs.preserveDrawingBuffer||e.realClearColor.apply(t,e.clearColor)}),a.isIOS()){var n=t.canvas;n.width==e.bufferWidth&&n.height==e.bufferHeight||(e.bufferWidth=n.width,e.bufferHeight=n.height,e.onResize())}},n.prototype.updateDeviceInfo=function(t){var e=this.gl,r=this,n=[e.ARRAY_BUFFER_BINDING,e.ELEMENT_ARRAY_BUFFER_BINDING];o(e,n,function(e){var n=r.computeMeshVertices_(r.meshWidth,r.meshHeight,t);if(e.bindBuffer(e.ARRAY_BUFFER,r.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW),!r.indexCount){var i=r.computeMeshIndices_(r.meshWidth,r.meshHeight);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,i,e.STATIC_DRAW),r.indexCount=i.length}})},n.prototype.computeMeshVertices_=function(t,e,r){for(var n=new Float32Array(2*t*e*5),i=r.getLeftEyeVisibleTanAngles(),o=r.getLeftEyeNoLensTanAngles(),s=r.getLeftEyeVisibleScreenRect(o),u=0,l=0;l<2;l++){for(var c=0;c<e;c++)for(var h=0;h<t;h++,u++){var f=h/(t-1),d=c/(e-1),p=f,m=d,g=a.lerp(i[0],i[2],f),v=a.lerp(i[3],i[1],d),y=Math.sqrt(g*g+v*v),M=r.distortion.distortInverse(y),w=g*M/y,x=v*M/y;f=(w-o[0])/(o[2]-o[0]),d=(x-o[3])/(o[1]-o[3]);r.device.widthMeters,r.device.heightMeters;f=2*(s.x+f*s.width-.5),d=2*(s.y+d*s.height-.5),n[5*u+0]=f,n[5*u+1]=d,n[5*u+2]=p,n[5*u+3]=m,n[5*u+4]=l}var b=i[2]-i[0];i[0]=-(b+i[0]),i[2]=b-i[2],b=o[2]-o[0],o[0]=-(b+o[0]),o[2]=b-o[2],s.x=1-(s.x+s.width)}return n},n.prototype.computeMeshIndices_=function(t,e){for(var r=new Uint16Array(2*(t-1)*(e-1)*6),n=t/2,i=e/2,a=0,o=0,s=0;s<2;s++)for(var u=0;u<e;u++)for(var l=0;l<t;l++,a++)0!=l&&0!=u&&(l<=n==u<=i?(r[o++]=a,r[o++]=a-t-1,r[o++]=a-t,r[o++]=a-t-1,r[o++]=a,r[o++]=a-1):(r[o++]=a-1,r[o++]=a-t,r[o++]=a,r[o++]=a-t,r[o++]=a-1,r[o++]=a-t-1));return r},n.prototype.getOwnPropertyDescriptor_=function(t,e){var r=Object.getOwnPropertyDescriptor(t,e);return void 0!==r.get&&void 0!==r.set||(r.configurable=!0,r.enumerable=!0,r.get=function(){return this.getAttribute(e)},r.set=function(t){this.setAttribute(e,t)}),r},t.exports=n},function(t,e,r){function n(){this.displayName="Cardboard VRDisplay (webvr-polyfill)",this.capabilities.hasOrientation=!0,this.capabilities.canPresent=!0,this.bufferScale_=window.WebVRConfig.BUFFER_SCALE,this.poseSensor_=new u,this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new s(!0,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new o(this.dpdb_.getDeviceParams()),this.viewerSelector_=new c,this.viewerSelector_.onChange(this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),window.WebVRConfig.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new l),f.isIOS()&&window.addEventListener("resize",this.onResize_.bind(this))}var i=r(585),a=r(255),o=r(257),s=r(588),u=r(595),l=r(593),c=r(599),h=r(47).VRDisplay,f=r(21),d={LEFT:"left",RIGHT:"right"};n.prototype=new h,n.prototype.getImmediatePose=function(){return{position:this.poseSensor_.getPosition(),orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},n.prototype.resetPose=function(){this.poseSensor_.resetPose()},n.prototype.getEyeParameters=function(t){var e,r=[.5*this.deviceInfo_.viewer.interLensDistance,0,0];if(t==d.LEFT)r[0]*=-1,e=this.deviceInfo_.getFieldOfViewLeftEye();else{if(t!=d.RIGHT)return console.error("Invalid eye provided: %s",t),null;e=this.deviceInfo_.getFieldOfViewRightEye()}return{fieldOfView:e,offset:r,renderWidth:.5*this.deviceInfo_.device.width*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_}},n.prototype.onDeviceParamsUpdated_=function(t){f.isDebug()&&console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(t),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_)},n.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},n.prototype.beginPresent_=function(){var t=this.layer_.source.getContext("webgl");t||(t=this.layer_.source.getContext("experimental-webgl")),t||(t=this.layer_.source.getContext("webgl2")),t&&(this.layer_.predistorted?window.WebVRConfig.CARDBOARD_UI_DISABLED||(t.canvas.width=f.getScreenWidth()*this.bufferScale_,t.canvas.height=f.getScreenHeight()*this.bufferScale_,this.cardboardUI_=new a(t)):(this.distorter_=new i(t),this.distorter_.updateDeviceInfo(this.deviceInfo_),this.cardboardUI_=this.distorter_.cardboardUI),this.cardboardUI_&&this.cardboardUI_.listen(function(t){this.viewerSelector_.show(this.layer_.source.parentElement),t.stopPropagation(),t.preventDefault()}.bind(this),function(t){this.exitPresent(),t.stopPropagation(),t.preventDefault()}.bind(this)),this.rotateInstructions_&&(f.isLandscapeMode()&&f.isMobile()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),window.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),window.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},n.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),window.removeEventListener("orientationchange",this.orientationHandler),window.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},n.prototype.submitFrame=function(t){if(this.distorter_)this.updateBounds_(),this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var e=this.layer_.source.getContext("webgl").canvas;e.width==this.lastWidth&&e.height==this.lastHeight||this.cardboardUI_.onResize(),this.lastWidth=e.width,this.lastHeight=e.height,this.cardboardUI_.render()}},n.prototype.onOrientationChange_=function(t){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},n.prototype.onResize_=function(t){if(this.layer_){var e=this.layer_.source.getContext("webgl"),r=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0 10px 10px 0","box-sizing: content-box"];e.canvas.setAttribute("style",r.join("; ")+";"),f.safariCssSizeWorkaround(e.canvas)}},n.prototype.onViewerChanged_=function(t){this.deviceInfo_.setViewer(t),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},n.prototype.fireVRDisplayDeviceParamsChange_=function(){var t=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});window.dispatchEvent(t)},t.exports=n},function(t,e){function r(t){this.coefficients=t}r.prototype.distortInverse=function(t){for(var e=0,r=1,n=t-this.distort(e);Math.abs(r-e)>1e-4;){var i=t-this.distort(r),a=r-i*((r-e)/(i-n));e=r,r=a,n=i}return r},r.prototype.distort=function(t){for(var e=t*t,r=0,n=0;n<this.coefficients.length;n++)r=e*(r+this.coefficients[n]);return(r+1)*t},t.exports=r},function(t,e,r){function n(t,e){if(this.dpdb=a,this.recalculateDeviceParams_(),t){this.onDeviceParamsUpdated=e;var r=new XMLHttpRequest,n=this;r.open("GET",s,!0),r.addEventListener("load",function(){n.loading=!1,r.status>=200&&r.status<=299?(n.dpdb=JSON.parse(r.response),n.recalculateDeviceParams_()):console.error("Error loading online DPDB!")}),r.send()}}function i(t){this.xdpi=t.xdpi,this.ydpi=t.ydpi,this.bevelMm=t.bevelMm}var a=r(589),o=r(21),s="https://dpdb.webvr.rocks/dpdb.json";n.prototype.getDeviceParams=function(){return this.deviceParams},n.prototype.recalculateDeviceParams_=function(){var t=this.calcDeviceParams_();t?(this.deviceParams=t,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},n.prototype.calcDeviceParams_=function(){var t=this.dpdb;if(!t)return console.error("DPDB not available."),null;if(1!=t.format)return console.error("DPDB has unexpected format version."),null;if(!t.devices||!t.devices.length)return console.error("DPDB does not have a devices section."),null;var e=navigator.userAgent||navigator.vendor||window.opera,r=o.getScreenWidth(),n=o.getScreenHeight();if(!t.devices)return console.error("DPDB has no devices section."),null;for(var a=0;a<t.devices.length;a++){var s=t.devices[a];if(s.rules)if("ios"==s.type||"android"==s.type){if(o.isIOS()==("ios"==s.type)){for(var u=!1,l=0;l<s.rules.length;l++){var c=s.rules[l];if(this.matchRule_(c,e,r,n)){u=!0;break}}if(u){var h=s.dpi[0]||s.dpi,f=s.dpi[1]||s.dpi;return new i({xdpi:h,ydpi:f,bevelMm:s.bw})}}}else console.warn("Device["+a+"] has invalid type.");else console.warn("Device["+a+"] has no rules section.")}return console.warn("No DPDB device match."),null},n.prototype.matchRule_=function(t,e,r,n){if(!t.ua&&!t.res)return!1;if(t.ua&&e.indexOf(t.ua)<0)return!1;if(t.res){if(!t.res[0]||!t.res[1])return!1;var i=t.res[0],a=t.res[1];if(Math.min(r,n)!=Math.min(i,a)||Math.max(r,n)!=Math.max(i,a))return!1}return!0},t.exports=n},function(t,e){t.exports={format:1,last_updated:"2017-01-12T08:41:55Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google//Pixel XL/"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google//Pixel/"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3}]}},function(t,e,r){var n=r(21),i=r(601).WebVRPolyfill;window.WebVRConfig=n.extend({FORCE_ENABLE_VR:!1,K_FILTER:.98,PREDICTION_TIME_S:.04,TOUCH_PANNER_DISABLED:!0,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,MOUSE_KEYBOARD_CONTROLS_DISABLED:!1,DEFER_INITIALIZATION:!1,ENABLE_DEPRECATED_API:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1,ALWAYS_APPEND_POLYFILL_DISPLAY:!1,GET_VR_DISPLAYS_TIMEOUT:1e3},window.WebVRConfig),window.WebVRConfig.DEFER_INITIALIZATION?window.InitializeWebVRPolyfill=function(){new i}:new i,window.WebVRPolyfill=i},function(t,e,r){function n(){this.displayName="Mouse and Keyboard VRDisplay (webvr-polyfill)",this.capabilities.hasOrientation=!0,window.addEventListener("keydown",this.onKeyDown_.bind(this)),window.addEventListener("mousemove",this.onMouseMove_.bind(this)),window.addEventListener("mousedown",this.onMouseDown_.bind(this)),window.addEventListener("mouseup",this.onMouseUp_.bind(this)),this.phi_=0,this.theta_=0,this.targetAngle_=null,this.angleAnimation_=null,this.orientation_=new a.Quaternion,this.rotateStart_=new a.Vector2,this.rotateEnd_=new a.Vector2,this.rotateDelta_=new a.Vector2,this.isDragging_=!1,this.orientationOut_=new Float32Array(4)}var i=r(47).VRDisplay,a=r(83),o=r(21);n.prototype=new i,n.prototype.getImmediatePose=function(){return this.orientation_.setFromEulerYXZ(this.phi_,this.theta_,0),this.orientationOut_[0]=this.orientation_.x,this.orientationOut_[1]=this.orientation_.y,this.orientationOut_[2]=this.orientation_.z,this.orientationOut_[3]=this.orientation_.w,{position:null,orientation:this.orientationOut_,linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},n.prototype.onKeyDown_=function(t){38==t.keyCode?this.animatePhi_(this.phi_+.15):39==t.keyCode?this.animateTheta_(this.theta_-.15):40==t.keyCode?this.animatePhi_(this.phi_-.15):37==t.keyCode&&this.animateTheta_(this.theta_+.15)},n.prototype.animateTheta_=function(t){this.animateKeyTransitions_("theta_",t)},n.prototype.animatePhi_=function(t){t=o.clamp(t,-Math.PI/2,Math.PI/2),this.animateKeyTransitions_("phi_",t)},n.prototype.animateKeyTransitions_=function(t,e){this.angleAnimation_&&cancelAnimationFrame(this.angleAnimation_);var r=this[t],n=new Date;this.angleAnimation_=requestAnimationFrame(function i(){var a=new Date-n;if(a>=80)return this[t]=e,void cancelAnimationFrame(this.angleAnimation_);this.angleAnimation_=requestAnimationFrame(i.bind(this));var o=a/80;this[t]=r+(e-r)*o}.bind(this))},n.prototype.onMouseDown_=function(t){this.rotateStart_.set(t.clientX,t.clientY),this.isDragging_=!0},n.prototype.onMouseMove_=function(t){if(this.isDragging_||this.isPointerLocked_()){if(this.isPointerLocked_()){var e=t.movementX||t.mozMovementX||0,r=t.movementY||t.mozMovementY||0;this.rotateEnd_.set(this.rotateStart_.x-e,this.rotateStart_.y-r)}else this.rotateEnd_.set(t.clientX,t.clientY);this.rotateDelta_.subVectors(this.rotateEnd_,this.rotateStart_),this.rotateStart_.copy(this.rotateEnd_),this.phi_+=2*Math.PI*this.rotateDelta_.y/screen.height*.3,this.theta_+=2*Math.PI*this.rotateDelta_.x/screen.width*.5,this.phi_=o.clamp(this.phi_,-Math.PI/2,Math.PI/2)}},n.prototype.onMouseUp_=function(t){this.isDragging_=!1},n.prototype.isPointerLocked_=function(){return void 0!==(document.pointerLockElement||document.mozPointerLockElement||document.webkitPointerLockElement)},n.prototype.resetPose=function(){this.phi_=0,this.theta_=0},t.exports=n},function(t,e,r){(function(t){void 0!==t&&t.window&&(t.document=t.window.document,t.navigator=t.window.navigator),r(590)}).call(e,r(59))},function(t,e,r){function n(){this.loadIcon_();var t=document.createElement("div"),e=t.style;e.position="fixed",e.top=0,e.right=0,e.bottom=0,e.left=0,e.backgroundColor="gray",e.fontFamily="sans-serif",e.zIndex=1e6;var r=document.createElement("img");r.src=this.icon;var e=r.style;e.marginLeft="25%",e.marginTop="25%",e.width="50%",t.appendChild(r);var n=document.createElement("div"),e=n.style;e.textAlign="center",e.fontSize="16px",e.lineHeight="24px",e.margin="24px 25%",e.width="50%",n.innerHTML="Place your phone into your Cardboard viewer.",t.appendChild(n);var i=document.createElement("div"),e=i.style;e.backgroundColor="#CFD8DC",e.position="fixed",e.bottom=0,e.width="100%",e.height="48px",e.padding="14px 24px",e.boxSizing="border-box",e.color="#656A6B",t.appendChild(i);var a=document.createElement("div");a.style.float="left",a.innerHTML="No Cardboard viewer?";var o=document.createElement("a");o.href="https://www.google.com/get/cardboard/get-cardboard/",o.innerHTML="get one",o.target="_blank";var e=o.style;e.float="right",e.fontWeight=600,e.textTransform="uppercase",e.borderLeft="1px solid gray",e.paddingLeft="24px",e.textDecoration="none",e.color="#656A6B",i.appendChild(a),i.appendChild(o),this.overlay=t,this.text=n,this.hide()}var i=r(21);n.prototype.show=function(t){t||this.overlay.parentElement?t&&(this.overlay.parentElement&&this.overlay.parentElement!=t&&this.overlay.parentElement.removeChild(this.overlay),t.appendChild(this.overlay)):document.body.appendChild(this.overlay),this.overlay.style.display="block";var e=this.overlay.querySelector("img"),r=e.style;i.isLandscapeMode()?(r.width="20%",r.marginLeft="40%",r.marginTop="3%"):(r.width="50%",r.marginLeft="25%",r.marginTop="25%")},n.prototype.hide=function(){this.overlay.style.display="none"},n.prototype.showTemporarily=function(t,e){this.show(e),this.timer=setTimeout(this.hide.bind(this),t)},n.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},n.prototype.update=function(){this.disableShowTemporarily(),!i.isLandscapeMode()&&i.isMobile()?this.show():this.hide()},n.prototype.loadIcon_=function(){this.icon=i.base64("image/svg+xml","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE5OHB4IiBoZWlnaHQ9IjI0MHB4IiB2aWV3Qm94PSIwIDAgMTk4IDI0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDMuMy4zICgxMjA4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+dHJhbnNpdGlvbjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJ0cmFuc2l0aW9uIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTQtKy1JbXBvcnRlZC1MYXllcnMtQ29weS0rLUltcG9ydGVkLUxheWVycy1Db3B5LTItQ29weSIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHktNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDEwNy4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjYyNSwyLjUyNyBDMTQ5LjYyNSwyLjUyNyAxNTUuODA1LDYuMDk2IDE1Ni4zNjIsNi40MTggTDE1Ni4zNjIsNy4zMDQgQzE1Ni4zNjIsNy40ODEgMTU2LjM3NSw3LjY2NCAxNTYuNCw3Ljg1MyBDMTU2LjQxLDcuOTM0IDE1Ni40Miw4LjAxNSAxNTYuNDI3LDguMDk1IEMxNTYuNTY3LDkuNTEgMTU3LjQwMSwxMS4wOTMgMTU4LjUzMiwxMi4wOTQgTDE2NC4yNTIsMTcuMTU2IEwxNjQuMzMzLDE3LjA2NiBDMTY0LjMzMywxNy4wNjYgMTY4LjcxNSwxNC41MzYgMTY5LjU2OCwxNC4wNDIgQzE3MS4wMjUsMTQuODgzIDE5NS41MzgsMjkuMDM1IDE5NS41MzgsMjkuMDM1IEwxOTUuNTM4LDgzLjAzNiBDMTk1LjUzOCw4My44MDcgMTk1LjE1Miw4NC4yNTMgMTk0LjU5LDg0LjI1MyBDMTk0LjM1Nyw4NC4yNTMgMTk0LjA5NSw4NC4xNzcgMTkzLjgxOCw4NC4wMTcgTDE2OS44NTEsNzAuMTc5IEwxNjkuODM3LDcwLjIwMyBMMTQyLjUxNSw4NS45NzggTDE0MS42NjUsODQuNjU1IEMxMzYuOTM0LDgzLjEyNiAxMzEuOTE3LDgxLjkxNSAxMjYuNzE0LDgxLjA0NSBDMTI2LjcwOSw4MS4wNiAxMjYuNzA3LDgxLjA2OSAxMjYuNzA3LDgxLjA2OSBMMTIxLjY0LDk4LjAzIEwxMTMuNzQ5LDEwMi41ODYgTDExMy43MTIsMTAyLjUyMyBMMTEzLjcxMiwxMzAuMTEzIEMxMTMuNzEyLDEzMC44ODUgMTEzLjMyNiwxMzEuMzMgMTEyLjc2NCwxMzEuMzMgQzExMi41MzIsMTMxLjMzIDExMi4yNjksMTMxLjI1NCAxMTEuOTkyLDEzMS4wOTQgTDY5LjUxOSwxMDYuNTcyIEM2OC41NjksMTA2LjAyMyA2Ny43OTksMTA0LjY5NSA2Ny43OTksMTAzLjYwNSBMNjcuNzk5LDEwMi41NyBMNjcuNzc4LDEwMi42MTcgQzY3LjI3LDEwMi4zOTMgNjYuNjQ4LDEwMi4yNDkgNjUuOTYyLDEwMi4yMTggQzY1Ljg3NSwxMDIuMjE0IDY1Ljc4OCwxMDIuMjEyIDY1LjcwMSwxMDIuMjEyIEM2NS42MDYsMTAyLjIxMiA2NS41MTEsMTAyLjIxNSA2NS40MTYsMTAyLjIxOSBDNjUuMTk1LDEwMi4yMjkgNjQuOTc0LDEwMi4yMzUgNjQuNzU0LDEwMi4yMzUgQzY0LjMzMSwxMDIuMjM1IDYzLjkxMSwxMDIuMjE2IDYzLjQ5OCwxMDIuMTc4IEM2MS44NDMsMTAyLjAyNSA2MC4yOTgsMTAxLjU3OCA1OS4wOTQsMTAwLjg4MiBMMTIuNTE4LDczLjk5MiBMMTIuNTIzLDc0LjAwNCBMMi4yNDUsNTUuMjU0IEMxLjI0NCw1My40MjcgMi4wMDQsNTEuMDM4IDMuOTQzLDQ5LjkxOCBMNTkuOTU0LDE3LjU3MyBDNjAuNjI2LDE3LjE4NSA2MS4zNSwxNy4wMDEgNjIuMDUzLDE3LjAwMSBDNjMuMzc5LDE3LjAwMSA2NC42MjUsMTcuNjYgNjUuMjgsMTguODU0IEw2NS4yODUsMTguODUxIEw2NS41MTIsMTkuMjY0IEw2NS41MDYsMTkuMjY4IEM2NS45MDksMjAuMDAzIDY2LjQwNSwyMC42OCA2Ni45ODMsMjEuMjg2IEw2Ny4yNiwyMS41NTYgQzY5LjE3NCwyMy40MDYgNzEuNzI4LDI0LjM1NyA3NC4zNzMsMjQuMzU3IEM3Ni4zMjIsMjQuMzU3IDc4LjMyMSwyMy44NCA4MC4xNDgsMjIuNzg1IEM4MC4xNjEsMjIuNzg1IDg3LjQ2NywxOC41NjYgODcuNDY3LDE4LjU2NiBDODguMTM5LDE4LjE3OCA4OC44NjMsMTcuOTk0IDg5LjU2NiwxNy45OTQgQzkwLjg5MiwxNy45OTQgOTIuMTM4LDE4LjY1MiA5Mi43OTIsMTkuODQ3IEw5Ni4wNDIsMjUuNzc1IEw5Ni4wNjQsMjUuNzU3IEwxMDIuODQ5LDI5LjY3NCBMMTAyLjc0NCwyOS40OTIgTDE0OS42MjUsMi41MjcgTTE0OS42MjUsMC44OTIgQzE0OS4zNDMsMC44OTIgMTQ5LjA2MiwwLjk2NSAxNDguODEsMS4xMSBMMTAyLjY0MSwyNy42NjYgTDk3LjIzMSwyNC41NDIgTDk0LjIyNiwxOS4wNjEgQzkzLjMxMywxNy4zOTQgOTEuNTI3LDE2LjM1OSA4OS41NjYsMTYuMzU4IEM4OC41NTUsMTYuMzU4IDg3LjU0NiwxNi42MzIgODYuNjQ5LDE3LjE1IEM4My44NzgsMTguNzUgNzkuNjg3LDIxLjE2OSA3OS4zNzQsMjEuMzQ1IEM3OS4zNTksMjEuMzUzIDc5LjM0NSwyMS4zNjEgNzkuMzMsMjEuMzY5IEM3Ny43OTgsMjIuMjU0IDc2LjA4NCwyMi43MjIgNzQuMzczLDIyLjcyMiBDNzIuMDgxLDIyLjcyMiA2OS45NTksMjEuODkgNjguMzk3LDIwLjM4IEw2OC4xNDUsMjAuMTM1IEM2Ny43MDYsMTkuNjcyIDY3LjMyMywxOS4xNTYgNjcuMDA2LDE4LjYwMSBDNjYuOTg4LDE4LjU1OSA2Ni45NjgsMTguNTE5IDY2Ljk0NiwxOC40NzkgTDY2LjcxOSwxOC4wNjUgQzY2LjY5LDE4LjAxMiA2Ni42NTgsMTcuOTYgNjYuNjI0LDE3LjkxMSBDNjUuNjg2LDE2LjMzNyA2My45NTEsMTUuMzY2IDYyLjA1MywxNS4zNjYgQzYxLjA0MiwxNS4zNjYgNjAuMDMzLDE1LjY0IDU5LjEzNiwxNi4xNTggTDMuMTI1LDQ4LjUwMiBDMC40MjYsNTAuMDYxIC0wLjYxMyw1My40NDIgMC44MTEsNTYuMDQgTDExLjA4OSw3NC43OSBDMTEuMjY2LDc1LjExMyAxMS41MzcsNzUuMzUzIDExLjg1LDc1LjQ5NCBMNTguMjc2LDEwMi4yOTggQzU5LjY3OSwxMDMuMTA4IDYxLjQzMywxMDMuNjMgNjMuMzQ4LDEwMy44MDYgQzYzLjgxMiwxMDMuODQ4IDY0LjI4NSwxMDMuODcgNjQuNzU0LDEwMy44NyBDNjUsMTAzLjg3IDY1LjI0OSwxMDMuODY0IDY1LjQ5NCwxMDMuODUyIEM2NS41NjMsMTAzLjg0OSA2NS42MzIsMTAzLjg0NyA2NS43MDEsMTAzLjg0NyBDNjUuNzY0LDEwMy44NDcgNjUuODI4LDEwMy44NDkgNjUuODksMTAzLjg1MiBDNjUuOTg2LDEwMy44NTYgNjYuMDgsMTAzLjg2MyA2Ni4xNzMsMTAzLjg3NCBDNjYuMjgyLDEwNS40NjcgNjcuMzMyLDEwNy4xOTcgNjguNzAyLDEwNy45ODggTDExMS4xNzQsMTMyLjUxIEMxMTEuNjk4LDEzMi44MTIgMTEyLjIzMiwxMzIuOTY1IDExMi43NjQsMTMyLjk2NSBDMTE0LjI2MSwxMzIuOTY1IDExNS4zNDcsMTMxLjc2NSAxMTUuMzQ3LDEzMC4xMTMgTDExNS4zNDcsMTAzLjU1MSBMMTIyLjQ1OCw5OS40NDYgQzEyMi44MTksOTkuMjM3IDEyMy4wODcsOTguODk4IDEyMy4yMDcsOTguNDk4IEwxMjcuODY1LDgyLjkwNSBDMTMyLjI3OSw4My43MDIgMTM2LjU1Nyw4NC43NTMgMTQwLjYwNyw4Ni4wMzMgTDE0MS4xNCw4Ni44NjIgQzE0MS40NTEsODcuMzQ2IDE0MS45NzcsODcuNjEzIDE0Mi41MTYsODcuNjEzIEMxNDIuNzk0LDg3LjYxMyAxNDMuMDc2LDg3LjU0MiAxNDMuMzMzLDg3LjM5MyBMMTY5Ljg2NSw3Mi4wNzYgTDE5Myw4NS40MzMgQzE5My41MjMsODUuNzM1IDE5NC4wNTgsODUuODg4IDE5NC41OSw4NS44ODggQzE5Ni4wODcsODUuODg4IDE5Ny4xNzMsODQuNjg5IDE5Ny4xNzMsODMuMDM2IEwxOTcuMTczLDI5LjAzNSBDMTk3LjE3MywyOC40NTEgMTk2Ljg2MSwyNy45MTEgMTk2LjM1NSwyNy42MTkgQzE5Ni4zNTUsMjcuNjE5IDE3MS44NDMsMTMuNDY3IDE3MC4zODUsMTIuNjI2IEMxNzAuMTMyLDEyLjQ4IDE2OS44NSwxMi40MDcgMTY5LjU2OCwxMi40MDcgQzE2OS4yODUsMTIuNDA3IDE2OS4wMDIsMTIuNDgxIDE2OC43NDksMTIuNjI3IEMxNjguMTQzLDEyLjk3OCAxNjUuNzU2LDE0LjM1NyAxNjQuNDI0LDE1LjEyNSBMMTU5LjYxNSwxMC44NyBDMTU4Ljc5NiwxMC4xNDUgMTU4LjE1NCw4LjkzNyAxNTguMDU0LDcuOTM0IEMxNTguMDQ1LDcuODM3IDE1OC4wMzQsNy43MzkgMTU4LjAyMSw3LjY0IEMxNTguMDA1LDcuNTIzIDE1Ny45OTgsNy40MSAxNTcuOTk4LDcuMzA0IEwxNTcuOTk4LDYuNDE4IEMxNTcuOTk4LDUuODM0IDE1Ny42ODYsNS4yOTUgMTU3LjE4MSw1LjAwMiBDMTU2LjYyNCw0LjY4IDE1MC40NDIsMS4xMTEgMTUwLjQ0MiwxLjExMSBDMTUwLjE4OSwwLjk2NSAxNDkuOTA3LDAuODkyIDE0OS42MjUsMC44OTIiIGlkPSJGaWxsLTEiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTYuMDI3LDI1LjYzNiBMMTQyLjYwMyw1Mi41MjcgQzE0My44MDcsNTMuMjIyIDE0NC41ODIsNTQuMTE0IDE0NC44NDUsNTUuMDY4IEwxNDQuODM1LDU1LjA3NSBMNjMuNDYxLDEwMi4wNTcgTDYzLjQ2LDEwMi4wNTcgQzYxLjgwNiwxMDEuOTA1IDYwLjI2MSwxMDEuNDU3IDU5LjA1NywxMDAuNzYyIEwxMi40ODEsNzMuODcxIEw5Ni4wMjcsMjUuNjM2IiBpZD0iRmlsbC0yIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYzLjQ2MSwxMDIuMTc0IEM2My40NTMsMTAyLjE3NCA2My40NDYsMTAyLjE3NCA2My40MzksMTAyLjE3MiBDNjEuNzQ2LDEwMi4wMTYgNjAuMjExLDEwMS41NjMgNTguOTk4LDEwMC44NjMgTDEyLjQyMiw3My45NzMgQzEyLjM4Niw3My45NTIgMTIuMzY0LDczLjkxNCAxMi4zNjQsNzMuODcxIEMxMi4zNjQsNzMuODMgMTIuMzg2LDczLjc5MSAxMi40MjIsNzMuNzcgTDk1Ljk2OCwyNS41MzUgQzk2LjAwNCwyNS41MTQgOTYuMDQ5LDI1LjUxNCA5Ni4wODUsMjUuNTM1IEwxNDIuNjYxLDUyLjQyNiBDMTQzLjg4OCw1My4xMzQgMTQ0LjY4Miw1NC4wMzggMTQ0Ljk1Nyw1NS4wMzcgQzE0NC45Nyw1NS4wODMgMTQ0Ljk1Myw1NS4xMzMgMTQ0LjkxNSw1NS4xNjEgQzE0NC45MTEsNTUuMTY1IDE0NC44OTgsNTUuMTc0IDE0NC44OTQsNTUuMTc3IEw2My41MTksMTAyLjE1OCBDNjMuNTAxLDEwMi4xNjkgNjMuNDgxLDEwMi4xNzQgNjMuNDYxLDEwMi4xNzQgTDYzLjQ2MSwxMDIuMTc0IFogTTEyLjcxNCw3My44NzEgTDU5LjExNSwxMDAuNjYxIEM2MC4yOTMsMTAxLjM0MSA2MS43ODYsMTAxLjc4MiA2My40MzUsMTAxLjkzNyBMMTQ0LjcwNyw1NS4wMTUgQzE0NC40MjgsNTQuMTA4IDE0My42ODIsNTMuMjg1IDE0Mi41NDQsNTIuNjI4IEw5Ni4wMjcsMjUuNzcxIEwxMi43MTQsNzMuODcxIEwxMi43MTQsNzMuODcxIFoiIGlkPSJGaWxsLTMiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ4LjMyNyw1OC40NzEgQzE0OC4xNDUsNTguNDggMTQ3Ljk2Miw1OC40OCAxNDcuNzgxLDU4LjQ3MiBDMTQ1Ljg4Nyw1OC4zODkgMTQ0LjQ3OSw1Ny40MzQgMTQ0LjYzNiw1Ni4zNCBDMTQ0LjY4OSw1NS45NjcgMTQ0LjY2NCw1NS41OTcgMTQ0LjU2NCw1NS4yMzUgTDYzLjQ2MSwxMDIuMDU3IEM2NC4wODksMTAyLjExNSA2NC43MzMsMTAyLjEzIDY1LjM3OSwxMDIuMDk5IEM2NS41NjEsMTAyLjA5IDY1Ljc0MywxMDIuMDkgNjUuOTI1LDEwMi4wOTggQzY3LjgxOSwxMDIuMTgxIDY5LjIyNywxMDMuMTM2IDY5LjA3LDEwNC4yMyBMMTQ4LjMyNyw1OC40NzEiIGlkPSJGaWxsLTQiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjkuMDcsMTA0LjM0NyBDNjkuMDQ4LDEwNC4zNDcgNjkuMDI1LDEwNC4zNCA2OS4wMDUsMTA0LjMyNyBDNjguOTY4LDEwNC4zMDEgNjguOTQ4LDEwNC4yNTcgNjguOTU1LDEwNC4yMTMgQzY5LDEwMy44OTYgNjguODk4LDEwMy41NzYgNjguNjU4LDEwMy4yODggQzY4LjE1MywxMDIuNjc4IDY3LjEwMywxMDIuMjY2IDY1LjkyLDEwMi4yMTQgQzY1Ljc0MiwxMDIuMjA2IDY1LjU2MywxMDIuMjA3IDY1LjM4NSwxMDIuMjE1IEM2NC43NDIsMTAyLjI0NiA2NC4wODcsMTAyLjIzMiA2My40NSwxMDIuMTc0IEM2My4zOTksMTAyLjE2OSA2My4zNTgsMTAyLjEzMiA2My4zNDcsMTAyLjA4MiBDNjMuMzM2LDEwMi4wMzMgNjMuMzU4LDEwMS45ODEgNjMuNDAyLDEwMS45NTYgTDE0NC41MDYsNTUuMTM0IEMxNDQuNTM3LDU1LjExNiAxNDQuNTc1LDU1LjExMyAxNDQuNjA5LDU1LjEyNyBDMTQ0LjY0Miw1NS4xNDEgMTQ0LjY2OCw1NS4xNyAxNDQuNjc3LDU1LjIwNCBDMTQ0Ljc4MSw1NS41ODUgMTQ0LjgwNiw1NS45NzIgMTQ0Ljc1MSw1Ni4zNTcgQzE0NC43MDYsNTYuNjczIDE0NC44MDgsNTYuOTk0IDE0NS4wNDcsNTcuMjgyIEMxNDUuNTUzLDU3Ljg5MiAxNDYuNjAyLDU4LjMwMyAxNDcuNzg2LDU4LjM1NSBDMTQ3Ljk2NCw1OC4zNjMgMTQ4LjE0Myw1OC4zNjMgMTQ4LjMyMSw1OC4zNTQgQzE0OC4zNzcsNTguMzUyIDE0OC40MjQsNTguMzg3IDE0OC40MzksNTguNDM4IEMxNDguNDU0LDU4LjQ5IDE0OC40MzIsNTguNTQ1IDE0OC4zODUsNTguNTcyIEw2OS4xMjksMTA0LjMzMSBDNjkuMTExLDEwNC4zNDIgNjkuMDksMTA0LjM0NyA2OS4wNywxMDQuMzQ3IEw2OS4wNywxMDQuMzQ3IFogTTY1LjY2NSwxMDEuOTc1IEM2NS43NTQsMTAxLjk3NSA2NS44NDIsMTAxLjk3NyA2NS45MywxMDEuOTgxIEM2Ny4xOTYsMTAyLjAzNyA2OC4yODMsMTAyLjQ2OSA2OC44MzgsMTAzLjEzOSBDNjkuMDY1LDEwMy40MTMgNjkuMTg4LDEwMy43MTQgNjkuMTk4LDEwNC4wMjEgTDE0Ny44ODMsNTguNTkyIEMxNDcuODQ3LDU4LjU5MiAxNDcuODExLDU4LjU5MSAxNDcuNzc2LDU4LjU4OSBDMTQ2LjUwOSw1OC41MzMgMTQ1LjQyMiw1OC4xIDE0NC44NjcsNTcuNDMxIEMxNDQuNTg1LDU3LjA5MSAxNDQuNDY1LDU2LjcwNyAxNDQuNTIsNTYuMzI0IEMxNDQuNTYzLDU2LjAyMSAxNDQuNTUyLDU1LjcxNiAxNDQuNDg4LDU1LjQxNCBMNjMuODQ2LDEwMS45NyBDNjQuMzUzLDEwMi4wMDIgNjQuODY3LDEwMi4wMDYgNjUuMzc0LDEwMS45ODIgQzY1LjQ3MSwxMDEuOTc3IDY1LjU2OCwxMDEuOTc1IDY1LjY2NSwxMDEuOTc1IEw2NS42NjUsMTAxLjk3NSBaIiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMjA4LDU1LjEzNCBDMS4yMDcsNTMuMzA3IDEuOTY3LDUwLjkxNyAzLjkwNiw0OS43OTcgTDU5LjkxNywxNy40NTMgQzYxLjg1NiwxNi4zMzMgNjQuMjQxLDE2LjkwNyA2NS4yNDMsMTguNzM0IEw2NS40NzUsMTkuMTQ0IEM2NS44NzIsMTkuODgyIDY2LjM2OCwyMC41NiA2Ni45NDUsMjEuMTY1IEw2Ny4yMjMsMjEuNDM1IEM3MC41NDgsMjQuNjQ5IDc1LjgwNiwyNS4xNTEgODAuMTExLDIyLjY2NSBMODcuNDMsMTguNDQ1IEM4OS4zNywxNy4zMjYgOTEuNzU0LDE3Ljg5OSA5Mi43NTUsMTkuNzI3IEw5Ni4wMDUsMjUuNjU1IEwxMi40ODYsNzMuODg0IEwyLjIwOCw1NS4xMzQgWiIgaWQ9IkZpbGwtNiIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40ODYsNzQuMDAxIEMxMi40NzYsNzQuMDAxIDEyLjQ2NSw3My45OTkgMTIuNDU1LDczLjk5NiBDMTIuNDI0LDczLjk4OCAxMi4zOTksNzMuOTY3IDEyLjM4NCw3My45NCBMMi4xMDYsNTUuMTkgQzEuMDc1LDUzLjMxIDEuODU3LDUwLjg0NSAzLjg0OCw0OS42OTYgTDU5Ljg1OCwxNy4zNTIgQzYwLjUyNSwxNi45NjcgNjEuMjcxLDE2Ljc2NCA2Mi4wMTYsMTYuNzY0IEM2My40MzEsMTYuNzY0IDY0LjY2NiwxNy40NjYgNjUuMzI3LDE4LjY0NiBDNjUuMzM3LDE4LjY1NCA2NS4zNDUsMTguNjYzIDY1LjM1MSwxOC42NzQgTDY1LjU3OCwxOS4wODggQzY1LjU4NCwxOS4xIDY1LjU4OSwxOS4xMTIgNjUuNTkxLDE5LjEyNiBDNjUuOTg1LDE5LjgzOCA2Ni40NjksMjAuNDk3IDY3LjAzLDIxLjA4NSBMNjcuMzA1LDIxLjM1MSBDNjkuMTUxLDIzLjEzNyA3MS42NDksMjQuMTIgNzQuMzM2LDI0LjEyIEM3Ni4zMTMsMjQuMTIgNzguMjksMjMuNTgyIDgwLjA1MywyMi41NjMgQzgwLjA2NCwyMi41NTcgODAuMDc2LDIyLjU1MyA4MC4wODgsMjIuNTUgTDg3LjM3MiwxOC4zNDQgQzg4LjAzOCwxNy45NTkgODguNzg0LDE3Ljc1NiA4OS41MjksMTcuNzU2IEM5MC45NTYsMTcuNzU2IDkyLjIwMSwxOC40NzIgOTIuODU4LDE5LjY3IEw5Ni4xMDcsMjUuNTk5IEM5Ni4xMzgsMjUuNjU0IDk2LjExOCwyNS43MjQgOTYuMDYzLDI1Ljc1NiBMMTIuNTQ1LDczLjk4NSBDMTIuNTI2LDczLjk5NiAxMi41MDYsNzQuMDAxIDEyLjQ4Niw3NC4wMDEgTDEyLjQ4Niw3NC4wMDEgWiBNNjIuMDE2LDE2Ljk5NyBDNjEuMzEyLDE2Ljk5NyA2MC42MDYsMTcuMTkgNTkuOTc1LDE3LjU1NCBMMy45NjUsNDkuODk5IEMyLjA4Myw1MC45ODUgMS4zNDEsNTMuMzA4IDIuMzEsNTUuMDc4IEwxMi41MzEsNzMuNzIzIEw5NS44NDgsMjUuNjExIEw5Mi42NTMsMTkuNzgyIEM5Mi4wMzgsMTguNjYgOTAuODcsMTcuOTkgODkuNTI5LDE3Ljk5IEM4OC44MjUsMTcuOTkgODguMTE5LDE4LjE4MiA4Ny40ODksMTguNTQ3IEw4MC4xNzIsMjIuNzcyIEM4MC4xNjEsMjIuNzc4IDgwLjE0OSwyMi43ODIgODAuMTM3LDIyLjc4NSBDNzguMzQ2LDIzLjgxMSA3Ni4zNDEsMjQuMzU0IDc0LjMzNiwyNC4zNTQgQzcxLjU4OCwyNC4zNTQgNjkuMDMzLDIzLjM0NyA2Ny4xNDIsMjEuNTE5IEw2Ni44NjQsMjEuMjQ5IEM2Ni4yNzcsMjAuNjM0IDY1Ljc3NCwxOS45NDcgNjUuMzY3LDE5LjIwMyBDNjUuMzYsMTkuMTkyIDY1LjM1NiwxOS4xNzkgNjUuMzU0LDE5LjE2NiBMNjUuMTYzLDE4LjgxOSBDNjUuMTU0LDE4LjgxMSA2NS4xNDYsMTguODAxIDY1LjE0LDE4Ljc5IEM2NC41MjUsMTcuNjY3IDYzLjM1NywxNi45OTcgNjIuMDE2LDE2Ljk5NyBMNjIuMDE2LDE2Ljk5NyBaIiBpZD0iRmlsbC03IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQyLjQzNCw0OC44MDggTDQyLjQzNCw0OC44MDggQzM5LjkyNCw0OC44MDcgMzcuNzM3LDQ3LjU1IDM2LjU4Miw0NS40NDMgQzM0Ljc3MSw0Mi4xMzkgMzYuMTQ0LDM3LjgwOSAzOS42NDEsMzUuNzg5IEw1MS45MzIsMjguNjkxIEM1My4xMDMsMjguMDE1IDU0LjQxMywyNy42NTggNTUuNzIxLDI3LjY1OCBDNTguMjMxLDI3LjY1OCA2MC40MTgsMjguOTE2IDYxLjU3MywzMS4wMjMgQzYzLjM4NCwzNC4zMjcgNjIuMDEyLDM4LjY1NyA1OC41MTQsNDAuNjc3IEw0Ni4yMjMsNDcuNzc1IEM0NS4wNTMsNDguNDUgNDMuNzQyLDQ4LjgwOCA0Mi40MzQsNDguODA4IEw0Mi40MzQsNDguODA4IFogTTU1LjcyMSwyOC4xMjUgQzU0LjQ5NSwyOC4xMjUgNTMuMjY1LDI4LjQ2MSA1Mi4xNjYsMjkuMDk2IEwzOS44NzUsMzYuMTk0IEMzNi41OTYsMzguMDg3IDM1LjMwMiw0Mi4xMzYgMzYuOTkyLDQ1LjIxOCBDMzguMDYzLDQ3LjE3MyA0MC4wOTgsNDguMzQgNDIuNDM0LDQ4LjM0IEM0My42NjEsNDguMzQgNDQuODksNDguMDA1IDQ1Ljk5LDQ3LjM3IEw1OC4yODEsNDAuMjcyIEM2MS41NiwzOC4zNzkgNjIuODUzLDM0LjMzIDYxLjE2NCwzMS4yNDggQzYwLjA5MiwyOS4yOTMgNTguMDU4LDI4LjEyNSA1NS43MjEsMjguMTI1IEw1NS43MjEsMjguMTI1IFoiIGlkPSJGaWxsLTgiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjU4OCwyLjQwNyBDMTQ5LjU4OCwyLjQwNyAxNTUuNzY4LDUuOTc1IDE1Ni4zMjUsNi4yOTcgTDE1Ni4zMjUsNy4xODQgQzE1Ni4zMjUsNy4zNiAxNTYuMzM4LDcuNTQ0IDE1Ni4zNjIsNy43MzMgQzE1Ni4zNzMsNy44MTQgMTU2LjM4Miw3Ljg5NCAxNTYuMzksNy45NzUgQzE1Ni41Myw5LjM5IDE1Ny4zNjMsMTAuOTczIDE1OC40OTUsMTEuOTc0IEwxNjUuODkxLDE4LjUxOSBDMTY2LjA2OCwxOC42NzUgMTY2LjI0OSwxOC44MTQgMTY2LjQzMiwxOC45MzQgQzE2OC4wMTEsMTkuOTc0IDE2OS4zODIsMTkuNCAxNjkuNDk0LDE3LjY1MiBDMTY5LjU0MywxNi44NjggMTY5LjU1MSwxNi4wNTcgMTY5LjUxNywxNS4yMjMgTDE2OS41MTQsMTUuMDYzIEwxNjkuNTE0LDEzLjkxMiBDMTcwLjc4LDE0LjY0MiAxOTUuNTAxLDI4LjkxNSAxOTUuNTAxLDI4LjkxNSBMMTk1LjUwMSw4Mi45MTUgQzE5NS41MDEsODQuMDA1IDE5NC43MzEsODQuNDQ1IDE5My43ODEsODMuODk3IEwxNTEuMzA4LDU5LjM3NCBDMTUwLjM1OCw1OC44MjYgMTQ5LjU4OCw1Ny40OTcgMTQ5LjU4OCw1Ni40MDggTDE0OS41ODgsMjIuMzc1IiBpZD0iRmlsbC05IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE5NC41NTMsODQuMjUgQzE5NC4yOTYsODQuMjUgMTk0LjAxMyw4NC4xNjUgMTkzLjcyMiw4My45OTcgTDE1MS4yNSw1OS40NzYgQzE1MC4yNjksNTguOTA5IDE0OS40NzEsNTcuNTMzIDE0OS40NzEsNTYuNDA4IEwxNDkuNDcxLDIyLjM3NSBMMTQ5LjcwNSwyMi4zNzUgTDE0OS43MDUsNTYuNDA4IEMxNDkuNzA1LDU3LjQ1OSAxNTAuNDUsNTguNzQ0IDE1MS4zNjYsNTkuMjc0IEwxOTMuODM5LDgzLjc5NSBDMTk0LjI2Myw4NC4wNCAxOTQuNjU1LDg0LjA4MyAxOTQuOTQyLDgzLjkxNyBDMTk1LjIyNyw4My43NTMgMTk1LjM4NCw4My4zOTcgMTk1LjM4NCw4Mi45MTUgTDE5NS4zODQsMjguOTgyIEMxOTQuMTAyLDI4LjI0MiAxNzIuMTA0LDE1LjU0MiAxNjkuNjMxLDE0LjExNCBMMTY5LjYzNCwxNS4yMiBDMTY5LjY2OCwxNi4wNTIgMTY5LjY2LDE2Ljg3NCAxNjkuNjEsMTcuNjU5IEMxNjkuNTU2LDE4LjUwMyAxNjkuMjE0LDE5LjEyMyAxNjguNjQ3LDE5LjQwNSBDMTY4LjAyOCwxOS43MTQgMTY3LjE5NywxOS41NzggMTY2LjM2NywxOS4wMzIgQzE2Ni4xODEsMTguOTA5IDE2NS45OTUsMTguNzY2IDE2NS44MTQsMTguNjA2IEwxNTguNDE3LDEyLjA2MiBDMTU3LjI1OSwxMS4wMzYgMTU2LjQxOCw5LjQzNyAxNTYuMjc0LDcuOTg2IEMxNTYuMjY2LDcuOTA3IDE1Ni4yNTcsNy44MjcgMTU2LjI0Nyw3Ljc0OCBDMTU2LjIyMSw3LjU1NSAxNTYuMjA5LDcuMzY1IDE1Ni4yMDksNy4xODQgTDE1Ni4yMDksNi4zNjQgQzE1NS4zNzUsNS44ODMgMTQ5LjUyOSwyLjUwOCAxNDkuNTI5LDIuNTA4IEwxNDkuNjQ2LDIuMzA2IEMxNDkuNjQ2LDIuMzA2IDE1NS44MjcsNS44NzQgMTU2LjM4NCw2LjE5NiBMMTU2LjQ0Miw2LjIzIEwxNTYuNDQyLDcuMTg0IEMxNTYuNDQyLDcuMzU1IDE1Ni40NTQsNy41MzUgMTU2LjQ3OCw3LjcxNyBDMTU2LjQ4OSw3LjggMTU2LjQ5OSw3Ljg4MiAxNTYuNTA3LDcuOTYzIEMxNTYuNjQ1LDkuMzU4IDE1Ny40NTUsMTAuODk4IDE1OC41NzIsMTEuODg2IEwxNjUuOTY5LDE4LjQzMSBDMTY2LjE0MiwxOC41ODQgMTY2LjMxOSwxOC43MiAxNjYuNDk2LDE4LjgzNyBDMTY3LjI1NCwxOS4zMzYgMTY4LDE5LjQ2NyAxNjguNTQzLDE5LjE5NiBDMTY5LjAzMywxOC45NTMgMTY5LjMyOSwxOC40MDEgMTY5LjM3NywxNy42NDUgQzE2OS40MjcsMTYuODY3IDE2OS40MzQsMTYuMDU0IDE2OS40MDEsMTUuMjI4IEwxNjkuMzk3LDE1LjA2NSBMMTY5LjM5NywxMy43MSBMMTY5LjU3MiwxMy44MSBDMTcwLjgzOSwxNC41NDEgMTk1LjU1OSwyOC44MTQgMTk1LjU1OSwyOC44MTQgTDE5NS42MTgsMjguODQ3IEwxOTUuNjE4LDgyLjkxNSBDMTk1LjYxOCw4My40ODQgMTk1LjQyLDgzLjkxMSAxOTUuMDU5LDg0LjExOSBDMTk0LjkwOCw4NC4yMDYgMTk0LjczNyw4NC4yNSAxOTQuNTUzLDg0LjI1IiBpZD0iRmlsbC0xMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDUuNjg1LDU2LjE2MSBMMTY5LjgsNzAuMDgzIEwxNDMuODIyLDg1LjA4MSBMMTQyLjM2LDg0Ljc3NCBDMTM1LjgyNiw4Mi42MDQgMTI4LjczMiw4MS4wNDYgMTIxLjM0MSw4MC4xNTggQzExNi45NzYsNzkuNjM0IDExMi42NzgsODEuMjU0IDExMS43NDMsODMuNzc4IEMxMTEuNTA2LDg0LjQxNCAxMTEuNTAzLDg1LjA3MSAxMTEuNzMyLDg1LjcwNiBDMTEzLjI3LDg5Ljk3MyAxMTUuOTY4LDk0LjA2OSAxMTkuNzI3LDk3Ljg0MSBMMTIwLjI1OSw5OC42ODYgQzEyMC4yNiw5OC42ODUgOTQuMjgyLDExMy42ODMgOTQuMjgyLDExMy42ODMgTDcwLjE2Nyw5OS43NjEgTDE0NS42ODUsNTYuMTYxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05NC4yODIsMTEzLjgxOCBMOTQuMjIzLDExMy43ODUgTDY5LjkzMyw5OS43NjEgTDcwLjEwOCw5OS42NiBMMTQ1LjY4NSw1Ni4wMjYgTDE0NS43NDMsNTYuMDU5IEwxNzAuMDMzLDcwLjA4MyBMMTQzLjg0Miw4NS4yMDUgTDE0My43OTcsODUuMTk1IEMxNDMuNzcyLDg1LjE5IDE0Mi4zMzYsODQuODg4IDE0Mi4zMzYsODQuODg4IEMxMzUuNzg3LDgyLjcxNCAxMjguNzIzLDgxLjE2MyAxMjEuMzI3LDgwLjI3NCBDMTIwLjc4OCw4MC4yMDkgMTIwLjIzNiw4MC4xNzcgMTE5LjY4OSw4MC4xNzcgQzExNS45MzEsODAuMTc3IDExMi42MzUsODEuNzA4IDExMS44NTIsODMuODE5IEMxMTEuNjI0LDg0LjQzMiAxMTEuNjIxLDg1LjA1MyAxMTEuODQyLDg1LjY2NyBDMTEzLjM3Nyw4OS45MjUgMTE2LjA1OCw5My45OTMgMTE5LjgxLDk3Ljc1OCBMMTE5LjgyNiw5Ny43NzkgTDEyMC4zNTIsOTguNjE0IEMxMjAuMzU0LDk4LjYxNyAxMjAuMzU2LDk4LjYyIDEyMC4zNTgsOTguNjI0IEwxMjAuNDIyLDk4LjcyNiBMMTIwLjMxNyw5OC43ODcgQzEyMC4yNjQsOTguODE4IDk0LjU5OSwxMTMuNjM1IDk0LjM0LDExMy43ODUgTDk0LjI4MiwxMTMuODE4IEw5NC4yODIsMTEzLjgxOCBaIE03MC40MDEsOTkuNzYxIEw5NC4yODIsMTEzLjU0OSBMMTE5LjA4NCw5OS4yMjkgQzExOS42Myw5OC45MTQgMTE5LjkzLDk4Ljc0IDEyMC4xMDEsOTguNjU0IEwxMTkuNjM1LDk3LjkxNCBDMTE1Ljg2NCw5NC4xMjcgMTEzLjE2OCw5MC4wMzMgMTExLjYyMiw4NS43NDYgQzExMS4zODIsODUuMDc5IDExMS4zODYsODQuNDA0IDExMS42MzMsODMuNzM4IEMxMTIuNDQ4LDgxLjUzOSAxMTUuODM2LDc5Ljk0MyAxMTkuNjg5LDc5Ljk0MyBDMTIwLjI0Niw3OS45NDMgMTIwLjgwNiw3OS45NzYgMTIxLjM1NSw4MC4wNDIgQzEyOC43NjcsODAuOTMzIDEzNS44NDYsODIuNDg3IDE0Mi4zOTYsODQuNjYzIEMxNDMuMjMyLDg0LjgzOCAxNDMuNjExLDg0LjkxNyAxNDMuNzg2LDg0Ljk2NyBMMTY5LjU2Niw3MC4wODMgTDE0NS42ODUsNTYuMjk1IEw3MC40MDEsOTkuNzYxIEw3MC40MDEsOTkuNzYxIFoiIGlkPSJGaWxsLTEyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2Ny4yMywxOC45NzkgTDE2Ny4yMyw2OS44NSBMMTM5LjkwOSw4NS42MjMgTDEzMy40NDgsNzEuNDU2IEMxMzIuNTM4LDY5LjQ2IDEzMC4wMiw2OS43MTggMTI3LjgyNCw3Mi4wMyBDMTI2Ljc2OSw3My4xNCAxMjUuOTMxLDc0LjU4NSAxMjUuNDk0LDc2LjA0OCBMMTE5LjAzNCw5Ny42NzYgTDkxLjcxMiwxMTMuNDUgTDkxLjcxMiw2Mi41NzkgTDE2Ny4yMywxOC45NzkiIGlkPSJGaWxsLTEzIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTkxLjcxMiwxMTMuNTY3IEM5MS42OTIsMTEzLjU2NyA5MS42NzIsMTEzLjU2MSA5MS42NTMsMTEzLjU1MSBDOTEuNjE4LDExMy41MyA5MS41OTUsMTEzLjQ5MiA5MS41OTUsMTEzLjQ1IEw5MS41OTUsNjIuNTc5IEM5MS41OTUsNjIuNTM3IDkxLjYxOCw2Mi40OTkgOTEuNjUzLDYyLjQ3OCBMMTY3LjE3MiwxOC44NzggQzE2Ny4yMDgsMTguODU3IDE2Ny4yNTIsMTguODU3IDE2Ny4yODgsMTguODc4IEMxNjcuMzI0LDE4Ljg5OSAxNjcuMzQ3LDE4LjkzNyAxNjcuMzQ3LDE4Ljk3OSBMMTY3LjM0Nyw2OS44NSBDMTY3LjM0Nyw2OS44OTEgMTY3LjMyNCw2OS45MyAxNjcuMjg4LDY5Ljk1IEwxMzkuOTY3LDg1LjcyNSBDMTM5LjkzOSw4NS43NDEgMTM5LjkwNSw4NS43NDUgMTM5Ljg3Myw4NS43MzUgQzEzOS44NDIsODUuNzI1IDEzOS44MTYsODUuNzAyIDEzOS44MDIsODUuNjcyIEwxMzMuMzQyLDcxLjUwNCBDMTMyLjk2Nyw3MC42ODIgMTMyLjI4LDcwLjIyOSAxMzEuNDA4LDcwLjIyOSBDMTMwLjMxOSw3MC4yMjkgMTI5LjA0NCw3MC45MTUgMTI3LjkwOCw3Mi4xMSBDMTI2Ljg3NCw3My4yIDEyNi4wMzQsNzQuNjQ3IDEyNS42MDYsNzYuMDgyIEwxMTkuMTQ2LDk3LjcwOSBDMTE5LjEzNyw5Ny43MzggMTE5LjExOCw5Ny43NjIgMTE5LjA5Miw5Ny43NzcgTDkxLjc3LDExMy41NTEgQzkxLjc1MiwxMTMuNTYxIDkxLjczMiwxMTMuNTY3IDkxLjcxMiwxMTMuNTY3IEw5MS43MTIsMTEzLjU2NyBaIE05MS44MjksNjIuNjQ3IEw5MS44MjksMTEzLjI0OCBMMTE4LjkzNSw5Ny41OTggTDEyNS4zODIsNzYuMDE1IEMxMjUuODI3LDc0LjUyNSAxMjYuNjY0LDczLjA4MSAxMjcuNzM5LDcxLjk1IEMxMjguOTE5LDcwLjcwOCAxMzAuMjU2LDY5Ljk5NiAxMzEuNDA4LDY5Ljk5NiBDMTMyLjM3Nyw2OS45OTYgMTMzLjEzOSw3MC40OTcgMTMzLjU1NCw3MS40MDcgTDEzOS45NjEsODUuNDU4IEwxNjcuMTEzLDY5Ljc4MiBMMTY3LjExMywxOS4xODEgTDkxLjgyOSw2Mi42NDcgTDkxLjgyOSw2Mi42NDcgWiIgaWQ9IkZpbGwtMTQiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTY4LjU0MywxOS4yMTMgTDE2OC41NDMsNzAuMDgzIEwxNDEuMjIxLDg1Ljg1NyBMMTM0Ljc2MSw3MS42ODkgQzEzMy44NTEsNjkuNjk0IDEzMS4zMzMsNjkuOTUxIDEyOS4xMzcsNzIuMjYzIEMxMjguMDgyLDczLjM3NCAxMjcuMjQ0LDc0LjgxOSAxMjYuODA3LDc2LjI4MiBMMTIwLjM0Niw5Ny45MDkgTDkzLjAyNSwxMTMuNjgzIEw5My4wMjUsNjIuODEzIEwxNjguNTQzLDE5LjIxMyIgaWQ9IkZpbGwtMTUiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTMuMDI1LDExMy44IEM5My4wMDUsMTEzLjggOTIuOTg0LDExMy43OTUgOTIuOTY2LDExMy43ODUgQzkyLjkzMSwxMTMuNzY0IDkyLjkwOCwxMTMuNzI1IDkyLjkwOCwxMTMuNjg0IEw5Mi45MDgsNjIuODEzIEM5Mi45MDgsNjIuNzcxIDkyLjkzMSw2Mi43MzMgOTIuOTY2LDYyLjcxMiBMMTY4LjQ4NCwxOS4xMTIgQzE2OC41MiwxOS4wOSAxNjguNTY1LDE5LjA5IDE2OC42MDEsMTkuMTEyIEMxNjguNjM3LDE5LjEzMiAxNjguNjYsMTkuMTcxIDE2OC42NiwxOS4yMTIgTDE2OC42Niw3MC4wODMgQzE2OC42Niw3MC4xMjUgMTY4LjYzNyw3MC4xNjQgMTY4LjYwMSw3MC4xODQgTDE0MS4yOCw4NS45NTggQzE0MS4yNTEsODUuOTc1IDE0MS4yMTcsODUuOTc5IDE0MS4xODYsODUuOTY4IEMxNDEuMTU0LDg1Ljk1OCAxNDEuMTI5LDg1LjkzNiAxNDEuMTE1LDg1LjkwNiBMMTM0LjY1NSw3MS43MzggQzEzNC4yOCw3MC45MTUgMTMzLjU5Myw3MC40NjMgMTMyLjcyLDcwLjQ2MyBDMTMxLjYzMiw3MC40NjMgMTMwLjM1Nyw3MS4xNDggMTI5LjIyMSw3Mi4zNDQgQzEyOC4xODYsNzMuNDMzIDEyNy4zNDcsNzQuODgxIDEyNi45MTksNzYuMzE1IEwxMjAuNDU4LDk3Ljk0MyBDMTIwLjQ1LDk3Ljk3MiAxMjAuNDMxLDk3Ljk5NiAxMjAuNDA1LDk4LjAxIEw5My4wODMsMTEzLjc4NSBDOTMuMDY1LDExMy43OTUgOTMuMDQ1LDExMy44IDkzLjAyNSwxMTMuOCBMOTMuMDI1LDExMy44IFogTTkzLjE0Miw2Mi44ODEgTDkzLjE0MiwxMTMuNDgxIEwxMjAuMjQ4LDk3LjgzMiBMMTI2LjY5NSw3Ni4yNDggQzEyNy4xNCw3NC43NTggMTI3Ljk3Nyw3My4zMTUgMTI5LjA1Miw3Mi4xODMgQzEzMC4yMzEsNzAuOTQyIDEzMS41NjgsNzAuMjI5IDEzMi43Miw3MC4yMjkgQzEzMy42ODksNzAuMjI5IDEzNC40NTIsNzAuNzMxIDEzNC44NjcsNzEuNjQxIEwxNDEuMjc0LDg1LjY5MiBMMTY4LjQyNiw3MC4wMTYgTDE2OC40MjYsMTkuNDE1IEw5My4xNDIsNjIuODgxIEw5My4xNDIsNjIuODgxIFoiIGlkPSJGaWxsLTE2IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS44LDcwLjA4MyBMMTQyLjQ3OCw4NS44NTcgTDEzNi4wMTgsNzEuNjg5IEMxMzUuMTA4LDY5LjY5NCAxMzIuNTksNjkuOTUxIDEzMC4zOTMsNzIuMjYzIEMxMjkuMzM5LDczLjM3NCAxMjguNSw3NC44MTkgMTI4LjA2NCw3Ni4yODIgTDEyMS42MDMsOTcuOTA5IEw5NC4yODIsMTEzLjY4MyBMOTQuMjgyLDYyLjgxMyBMMTY5LjgsMTkuMjEzIEwxNjkuOCw3MC4wODMgWiIgaWQ9IkZpbGwtMTciIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTQuMjgyLDExMy45MTcgQzk0LjI0MSwxMTMuOTE3IDk0LjIwMSwxMTMuOTA3IDk0LjE2NSwxMTMuODg2IEM5NC4wOTMsMTEzLjg0NSA5NC4wNDgsMTEzLjc2NyA5NC4wNDgsMTEzLjY4NCBMOTQuMDQ4LDYyLjgxMyBDOTQuMDQ4LDYyLjczIDk0LjA5Myw2Mi42NTIgOTQuMTY1LDYyLjYxMSBMMTY5LjY4MywxOS4wMSBDMTY5Ljc1NSwxOC45NjkgMTY5Ljg0NCwxOC45NjkgMTY5LjkxNywxOS4wMSBDMTY5Ljk4OSwxOS4wNTIgMTcwLjAzMywxOS4xMjkgMTcwLjAzMywxOS4yMTIgTDE3MC4wMzMsNzAuMDgzIEMxNzAuMDMzLDcwLjE2NiAxNjkuOTg5LDcwLjI0NCAxNjkuOTE3LDcwLjI4NSBMMTQyLjU5NSw4Ni4wNiBDMTQyLjUzOCw4Ni4wOTIgMTQyLjQ2OSw4Ni4xIDE0Mi40MDcsODYuMDggQzE0Mi4zNDQsODYuMDYgMTQyLjI5Myw4Ni4wMTQgMTQyLjI2Niw4NS45NTQgTDEzNS44MDUsNzEuNzg2IEMxMzUuNDQ1LDcwLjk5NyAxMzQuODEzLDcwLjU4IDEzMy45NzcsNzAuNTggQzEzMi45MjEsNzAuNTggMTMxLjY3Niw3MS4yNTIgMTMwLjU2Miw3Mi40MjQgQzEyOS41NCw3My41MDEgMTI4LjcxMSw3NC45MzEgMTI4LjI4Nyw3Ni4zNDggTDEyMS44MjcsOTcuOTc2IEMxMjEuODEsOTguMDM0IDEyMS43NzEsOTguMDgyIDEyMS43Miw5OC4xMTIgTDk0LjM5OCwxMTMuODg2IEM5NC4zNjIsMTEzLjkwNyA5NC4zMjIsMTEzLjkxNyA5NC4yODIsMTEzLjkxNyBMOTQuMjgyLDExMy45MTcgWiBNOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDExMy4yNzkgTDEyMS40MDYsOTcuNzU0IEwxMjcuODQsNzYuMjE1IEMxMjguMjksNzQuNzA4IDEyOS4xMzcsNzMuMjQ3IDEzMC4yMjQsNzIuMTAzIEMxMzEuNDI1LDcwLjgzOCAxMzIuNzkzLDcwLjExMiAxMzMuOTc3LDcwLjExMiBDMTM0Ljk5NSw3MC4xMTIgMTM1Ljc5NSw3MC42MzggMTM2LjIzLDcxLjU5MiBMMTQyLjU4NCw4NS41MjYgTDE2OS41NjYsNjkuOTQ4IEwxNjkuNTY2LDE5LjYxNyBMOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDYyLjk0OCBaIiBpZD0iRmlsbC0xOCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMDkuODk0LDkyLjk0MyBMMTA5Ljg5NCw5Mi45NDMgQzEwOC4xMiw5Mi45NDMgMTA2LjY1Myw5Mi4yMTggMTA1LjY1LDkwLjgyMyBDMTA1LjU4Myw5MC43MzEgMTA1LjU5Myw5MC42MSAxMDUuNjczLDkwLjUyOSBDMTA1Ljc1Myw5MC40NDggMTA1Ljg4LDkwLjQ0IDEwNS45NzQsOTAuNTA2IEMxMDYuNzU0LDkxLjA1MyAxMDcuNjc5LDkxLjMzMyAxMDguNzI0LDkxLjMzMyBDMTEwLjA0Nyw5MS4zMzMgMTExLjQ3OCw5MC44OTQgMTEyLjk4LDkwLjAyNyBDMTE4LjI5MSw4Ni45NiAxMjIuNjExLDc5LjUwOSAxMjIuNjExLDczLjQxNiBDMTIyLjYxMSw3MS40ODkgMTIyLjE2OSw2OS44NTYgMTIxLjMzMyw2OC42OTIgQzEyMS4yNjYsNjguNiAxMjEuMjc2LDY4LjQ3MyAxMjEuMzU2LDY4LjM5MiBDMTIxLjQzNiw2OC4zMTEgMTIxLjU2Myw2OC4yOTkgMTIxLjY1Niw2OC4zNjUgQzEyMy4zMjcsNjkuNTM3IDEyNC4yNDcsNzEuNzQ2IDEyNC4yNDcsNzQuNTg0IEMxMjQuMjQ3LDgwLjgyNiAxMTkuODIxLDg4LjQ0NyAxMTQuMzgyLDkxLjU4NyBDMTEyLjgwOCw5Mi40OTUgMTExLjI5OCw5Mi45NDMgMTA5Ljg5NCw5Mi45NDMgTDEwOS44OTQsOTIuOTQzIFogTTEwNi45MjUsOTEuNDAxIEMxMDcuNzM4LDkyLjA1MiAxMDguNzQ1LDkyLjI3OCAxMDkuODkzLDkyLjI3OCBMMTA5Ljg5NCw5Mi4yNzggQzExMS4yMTUsOTIuMjc4IDExMi42NDcsOTEuOTUxIDExNC4xNDgsOTEuMDg0IEMxMTkuNDU5LDg4LjAxNyAxMjMuNzgsODAuNjIxIDEyMy43OCw3NC41MjggQzEyMy43OCw3Mi41NDkgMTIzLjMxNyw3MC45MjkgMTIyLjQ1NCw2OS43NjcgQzEyMi44NjUsNzAuODAyIDEyMy4wNzksNzIuMDQyIDEyMy4wNzksNzMuNDAyIEMxMjMuMDc5LDc5LjY0NSAxMTguNjUzLDg3LjI4NSAxMTMuMjE0LDkwLjQyNSBDMTExLjY0LDkxLjMzNCAxMTAuMTMsOTEuNzQyIDEwOC43MjQsOTEuNzQyIEMxMDguMDgzLDkxLjc0MiAxMDcuNDgxLDkxLjU5MyAxMDYuOTI1LDkxLjQwMSBMMTA2LjkyNSw5MS40MDEgWiIgaWQ9IkZpbGwtMTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjA5Nyw5MC4yMyBDMTE4LjQ4MSw4Ny4xMjIgMTIyLjg0NSw3OS41OTQgMTIyLjg0NSw3My40MTYgQzEyMi44NDUsNzEuMzY1IDEyMi4zNjIsNjkuNzI0IDEyMS41MjIsNjguNTU2IEMxMTkuNzM4LDY3LjMwNCAxMTcuMTQ4LDY3LjM2MiAxMTQuMjY1LDY5LjAyNiBDMTA4Ljg4MSw3Mi4xMzQgMTA0LjUxNyw3OS42NjIgMTA0LjUxNyw4NS44NCBDMTA0LjUxNyw4Ny44OTEgMTA1LDg5LjUzMiAxMDUuODQsOTAuNyBDMTA3LjYyNCw5MS45NTIgMTEwLjIxNCw5MS44OTQgMTEzLjA5Nyw5MC4yMyIgaWQ9IkZpbGwtMjAiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTA4LjcyNCw5MS42MTQgTDEwOC43MjQsOTEuNjE0IEMxMDcuNTgyLDkxLjYxNCAxMDYuNTY2LDkxLjQwMSAxMDUuNzA1LDkwLjc5NyBDMTA1LjY4NCw5MC43ODMgMTA1LjY2NSw5MC44MTEgMTA1LjY1LDkwLjc5IEMxMDQuNzU2LDg5LjU0NiAxMDQuMjgzLDg3Ljg0MiAxMDQuMjgzLDg1LjgxNyBDMTA0LjI4Myw3OS41NzUgMTA4LjcwOSw3MS45NTMgMTE0LjE0OCw2OC44MTIgQzExNS43MjIsNjcuOTA0IDExNy4yMzIsNjcuNDQ5IDExOC42MzgsNjcuNDQ5IEMxMTkuNzgsNjcuNDQ5IDEyMC43OTYsNjcuNzU4IDEyMS42NTYsNjguMzYyIEMxMjEuNjc4LDY4LjM3NyAxMjEuNjk3LDY4LjM5NyAxMjEuNzEyLDY4LjQxOCBDMTIyLjYwNiw2OS42NjIgMTIzLjA3OSw3MS4zOSAxMjMuMDc5LDczLjQxNSBDMTIzLjA3OSw3OS42NTggMTE4LjY1Myw4Ny4xOTggMTEzLjIxNCw5MC4zMzggQzExMS42NCw5MS4yNDcgMTEwLjEzLDkxLjYxNCAxMDguNzI0LDkxLjYxNCBMMTA4LjcyNCw5MS42MTQgWiBNMTA2LjAwNiw5MC41MDUgQzEwNi43OCw5MS4wMzcgMTA3LjY5NCw5MS4yODEgMTA4LjcyNCw5MS4yODEgQzExMC4wNDcsOTEuMjgxIDExMS40NzgsOTAuODY4IDExMi45OCw5MC4wMDEgQzExOC4yOTEsODYuOTM1IDEyMi42MTEsNzkuNDk2IDEyMi42MTEsNzMuNDAzIEMxMjIuNjExLDcxLjQ5NCAxMjIuMTc3LDY5Ljg4IDEyMS4zNTYsNjguNzE4IEMxMjAuNTgyLDY4LjE4NSAxMTkuNjY4LDY3LjkxOSAxMTguNjM4LDY3LjkxOSBDMTE3LjMxNSw2Ny45MTkgMTE1Ljg4Myw2OC4zNiAxMTQuMzgyLDY5LjIyNyBDMTA5LjA3MSw3Mi4yOTMgMTA0Ljc1MSw3OS43MzMgMTA0Ljc1MSw4NS44MjYgQzEwNC43NTEsODcuNzM1IDEwNS4xODUsODkuMzQzIDEwNi4wMDYsOTAuNTA1IEwxMDYuMDA2LDkwLjUwNSBaIiBpZD0iRmlsbC0yMSIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDkuMzE4LDcuMjYyIEwxMzkuMzM0LDE2LjE0IEwxNTUuMjI3LDI3LjE3MSBMMTYwLjgxNiwyMS4wNTkgTDE0OS4zMTgsNy4yNjIiIGlkPSJGaWxsLTIyIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS42NzYsMTMuODQgTDE1OS45MjgsMTkuNDY3IEMxNTYuMjg2LDIxLjU3IDE1MC40LDIxLjU4IDE0Ni43ODEsMTkuNDkxIEMxNDMuMTYxLDE3LjQwMiAxNDMuMTgsMTQuMDAzIDE0Ni44MjIsMTEuOSBMMTU2LjMxNyw2LjI5MiBMMTQ5LjU4OCwyLjQwNyBMNjcuNzUyLDQ5LjQ3OCBMMTEzLjY3NSw3NS45OTIgTDExNi43NTYsNzQuMjEzIEMxMTcuMzg3LDczLjg0OCAxMTcuNjI1LDczLjMxNSAxMTcuMzc0LDcyLjgyMyBDMTE1LjAxNyw2OC4xOTEgMTE0Ljc4MSw2My4yNzcgMTE2LjY5MSw1OC41NjEgQzEyMi4zMjksNDQuNjQxIDE0MS4yLDMzLjc0NiAxNjUuMzA5LDMwLjQ5MSBDMTczLjQ3OCwyOS4zODggMTgxLjk4OSwyOS41MjQgMTkwLjAxMywzMC44ODUgQzE5MC44NjUsMzEuMDMgMTkxLjc4OSwzMC44OTMgMTkyLjQyLDMwLjUyOCBMMTk1LjUwMSwyOC43NSBMMTY5LjY3NiwxMy44NCIgaWQ9IkZpbGwtMjMiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3Ni40NTkgQzExMy41OTQsNzYuNDU5IDExMy41MTQsNzYuNDM4IDExMy40NDIsNzYuMzk3IEw2Ny41MTgsNDkuODgyIEM2Ny4zNzQsNDkuNzk5IDY3LjI4NCw0OS42NDUgNjcuMjg1LDQ5LjQ3OCBDNjcuMjg1LDQ5LjMxMSA2Ny4zNzQsNDkuMTU3IDY3LjUxOSw0OS4wNzMgTDE0OS4zNTUsMi4wMDIgQzE0OS40OTksMS45MTkgMTQ5LjY3NywxLjkxOSAxNDkuODIxLDIuMDAyIEwxNTYuNTUsNS44ODcgQzE1Ni43NzQsNi4wMTcgMTU2Ljg1LDYuMzAyIDE1Ni43MjIsNi41MjYgQzE1Ni41OTIsNi43NDkgMTU2LjMwNyw2LjgyNiAxNTYuMDgzLDYuNjk2IEwxNDkuNTg3LDIuOTQ2IEw2OC42ODcsNDkuNDc5IEwxMTMuNjc1LDc1LjQ1MiBMMTE2LjUyMyw3My44MDggQzExNi43MTUsNzMuNjk3IDExNy4xNDMsNzMuMzk5IDExNi45NTgsNzMuMDM1IEMxMTQuNTQyLDY4LjI4NyAxMTQuMyw2My4yMjEgMTE2LjI1OCw1OC4zODUgQzExOS4wNjQsNTEuNDU4IDEyNS4xNDMsNDUuMTQzIDEzMy44NCw0MC4xMjIgQzE0Mi40OTcsMzUuMTI0IDE1My4zNTgsMzEuNjMzIDE2NS4yNDcsMzAuMDI4IEMxNzMuNDQ1LDI4LjkyMSAxODIuMDM3LDI5LjA1OCAxOTAuMDkxLDMwLjQyNSBDMTkwLjgzLDMwLjU1IDE5MS42NTIsMzAuNDMyIDE5Mi4xODYsMzAuMTI0IEwxOTQuNTY3LDI4Ljc1IEwxNjkuNDQyLDE0LjI0NCBDMTY5LjIxOSwxNC4xMTUgMTY5LjE0MiwxMy44MjkgMTY5LjI3MSwxMy42MDYgQzE2OS40LDEzLjM4MiAxNjkuNjg1LDEzLjMwNiAxNjkuOTA5LDEzLjQzNSBMMTk1LjczNCwyOC4zNDUgQzE5NS44NzksMjguNDI4IDE5NS45NjgsMjguNTgzIDE5NS45NjgsMjguNzUgQzE5NS45NjgsMjguOTE2IDE5NS44NzksMjkuMDcxIDE5NS43MzQsMjkuMTU0IEwxOTIuNjUzLDMwLjkzMyBDMTkxLjkzMiwzMS4zNSAxOTAuODksMzEuNTA4IDE4OS45MzUsMzEuMzQ2IEMxODEuOTcyLDI5Ljk5NSAxNzMuNDc4LDI5Ljg2IDE2NS4zNzIsMzAuOTU0IEMxNTMuNjAyLDMyLjU0MyAxNDIuODYsMzUuOTkzIDEzNC4zMDcsNDAuOTMxIEMxMjUuNzkzLDQ1Ljg0NyAxMTkuODUxLDUyLjAwNCAxMTcuMTI0LDU4LjczNiBDMTE1LjI3LDYzLjMxNCAxMTUuNTAxLDY4LjExMiAxMTcuNzksNzIuNjExIEMxMTguMTYsNzMuMzM2IDExNy44NDUsNzQuMTI0IDExNi45OSw3NC42MTcgTDExMy45MDksNzYuMzk3IEMxMTMuODM2LDc2LjQzOCAxMTMuNzU2LDc2LjQ1OSAxMTMuNjc1LDc2LjQ1OSIgaWQ9IkZpbGwtMjQiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUzLjMxNiwyMS4yNzkgQzE1MC45MDMsMjEuMjc5IDE0OC40OTUsMjAuNzUxIDE0Ni42NjQsMTkuNjkzIEMxNDQuODQ2LDE4LjY0NCAxNDMuODQ0LDE3LjIzMiAxNDMuODQ0LDE1LjcxOCBDMTQzLjg0NCwxNC4xOTEgMTQ0Ljg2LDEyLjc2MyAxNDYuNzA1LDExLjY5OCBMMTU2LjE5OCw2LjA5MSBDMTU2LjMwOSw2LjAyNSAxNTYuNDUyLDYuMDYyIDE1Ni41MTgsNi4xNzMgQzE1Ni41ODMsNi4yODQgMTU2LjU0Nyw2LjQyNyAxNTYuNDM2LDYuNDkzIEwxNDYuOTQsMTIuMTAyIEMxNDUuMjQ0LDEzLjA4MSAxNDQuMzEyLDE0LjM2NSAxNDQuMzEyLDE1LjcxOCBDMTQ0LjMxMiwxNy4wNTggMTQ1LjIzLDE4LjMyNiAxNDYuODk3LDE5LjI4OSBDMTUwLjQ0NiwyMS4zMzggMTU2LjI0LDIxLjMyNyAxNTkuODExLDE5LjI2NSBMMTY5LjU1OSwxMy42MzcgQzE2OS42NywxMy41NzMgMTY5LjgxMywxMy42MTEgMTY5Ljg3OCwxMy43MjMgQzE2OS45NDMsMTMuODM0IDE2OS45MDQsMTMuOTc3IDE2OS43OTMsMTQuMDQyIEwxNjAuMDQ1LDE5LjY3IEMxNTguMTg3LDIwLjc0MiAxNTUuNzQ5LDIxLjI3OSAxNTMuMzE2LDIxLjI3OSIgaWQ9IkZpbGwtMjUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3NS45OTIgTDY3Ljc2Miw0OS40ODQiIGlkPSJGaWxsLTI2IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMy42NzUsNzYuMzQyIEMxMTMuNjE1LDc2LjM0MiAxMTMuNTU1LDc2LjMyNyAxMTMuNSw3Ni4yOTUgTDY3LjU4Nyw0OS43ODcgQzY3LjQxOSw0OS42OSA2Ny4zNjIsNDkuNDc2IDY3LjQ1OSw0OS4zMDkgQzY3LjU1Niw0OS4xNDEgNjcuNzcsNDkuMDgzIDY3LjkzNyw0OS4xOCBMMTEzLjg1LDc1LjY4OCBDMTE0LjAxOCw3NS43ODUgMTE0LjA3NSw3NiAxMTMuOTc4LDc2LjE2NyBDMTEzLjkxNCw3Ni4yNzkgMTEzLjc5Niw3Ni4zNDIgMTEzLjY3NSw3Ni4zNDIiIGlkPSJGaWxsLTI3IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY3Ljc2Miw0OS40ODQgTDY3Ljc2MiwxMDMuNDg1IEM2Ny43NjIsMTA0LjU3NSA2OC41MzIsMTA1LjkwMyA2OS40ODIsMTA2LjQ1MiBMMTExLjk1NSwxMzAuOTczIEMxMTIuOTA1LDEzMS41MjIgMTEzLjY3NSwxMzEuMDgzIDExMy42NzUsMTI5Ljk5MyBMMTEzLjY3NSw3NS45OTIiIGlkPSJGaWxsLTI4IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMi43MjcsMTMxLjU2MSBDMTEyLjQzLDEzMS41NjEgMTEyLjEwNywxMzEuNDY2IDExMS43OCwxMzEuMjc2IEw2OS4zMDcsMTA2Ljc1NSBDNjguMjQ0LDEwNi4xNDIgNjcuNDEyLDEwNC43MDUgNjcuNDEyLDEwMy40ODUgTDY3LjQxMiw0OS40ODQgQzY3LjQxMiw0OS4yOSA2Ny41NjksNDkuMTM0IDY3Ljc2Miw0OS4xMzQgQzY3Ljk1Niw0OS4xMzQgNjguMTEzLDQ5LjI5IDY4LjExMyw0OS40ODQgTDY4LjExMywxMDMuNDg1IEM2OC4xMTMsMTA0LjQ0NSA2OC44MiwxMDUuNjY1IDY5LjY1NywxMDYuMTQ4IEwxMTIuMTMsMTMwLjY3IEMxMTIuNDc0LDEzMC44NjggMTEyLjc5MSwxMzAuOTEzIDExMywxMzAuNzkyIEMxMTMuMjA2LDEzMC42NzMgMTEzLjMyNSwxMzAuMzgxIDExMy4zMjUsMTI5Ljk5MyBMMTEzLjMyNSw3NS45OTIgQzExMy4zMjUsNzUuNzk4IDExMy40ODIsNzUuNjQxIDExMy42NzUsNzUuNjQxIEMxMTMuODY5LDc1LjY0MSAxMTQuMDI1LDc1Ljc5OCAxMTQuMDI1LDc1Ljk5MiBMMTE0LjAyNSwxMjkuOTkzIEMxMTQuMDI1LDEzMC42NDggMTEzLjc4NiwxMzEuMTQ3IDExMy4zNSwxMzEuMzk5IEMxMTMuMTYyLDEzMS41MDcgMTEyLjk1MiwxMzEuNTYxIDExMi43MjcsMTMxLjU2MSIgaWQ9IkZpbGwtMjkiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEyLjg2LDQwLjUxMiBDMTEyLjg2LDQwLjUxMiAxMTIuODYsNDAuNTEyIDExMi44NTksNDAuNTEyIEMxMTAuNTQxLDQwLjUxMiAxMDguMzYsMzkuOTkgMTA2LjcxNywzOS4wNDEgQzEwNS4wMTIsMzguMDU3IDEwNC4wNzQsMzYuNzI2IDEwNC4wNzQsMzUuMjkyIEMxMDQuMDc0LDMzLjg0NyAxMDUuMDI2LDMyLjUwMSAxMDYuNzU0LDMxLjUwNCBMMTE4Ljc5NSwyNC41NTEgQzEyMC40NjMsMjMuNTg5IDEyMi42NjksMjMuMDU4IDEyNS4wMDcsMjMuMDU4IEMxMjcuMzI1LDIzLjA1OCAxMjkuNTA2LDIzLjU4MSAxMzEuMTUsMjQuNTMgQzEzMi44NTQsMjUuNTE0IDEzMy43OTMsMjYuODQ1IDEzMy43OTMsMjguMjc4IEMxMzMuNzkzLDI5LjcyNCAxMzIuODQxLDMxLjA2OSAxMzEuMTEzLDMyLjA2NyBMMTE5LjA3MSwzOS4wMTkgQzExNy40MDMsMzkuOTgyIDExNS4xOTcsNDAuNTEyIDExMi44Niw0MC41MTIgTDExMi44Niw0MC41MTIgWiBNMTI1LjAwNywyMy43NTkgQzEyMi43OSwyMy43NTkgMTIwLjcwOSwyNC4yNTYgMTE5LjE0NiwyNS4xNTggTDEwNy4xMDQsMzIuMTEgQzEwNS42MDIsMzIuOTc4IDEwNC43NzQsMzQuMTA4IDEwNC43NzQsMzUuMjkyIEMxMDQuNzc0LDM2LjQ2NSAxMDUuNTg5LDM3LjU4MSAxMDcuMDY3LDM4LjQzNCBDMTA4LjYwNSwzOS4zMjMgMTEwLjY2MywzOS44MTIgMTEyLjg1OSwzOS44MTIgTDExMi44NiwzOS44MTIgQzExNS4wNzYsMzkuODEyIDExNy4xNTgsMzkuMzE1IDExOC43MjEsMzguNDEzIEwxMzAuNzYyLDMxLjQ2IEMxMzIuMjY0LDMwLjU5MyAxMzMuMDkyLDI5LjQ2MyAxMzMuMDkyLDI4LjI3OCBDMTMzLjA5MiwyNy4xMDYgMTMyLjI3OCwyNS45OSAxMzAuOCwyNS4xMzYgQzEyOS4yNjEsMjQuMjQ4IDEyNy4yMDQsMjMuNzU5IDEyNS4wMDcsMjMuNzU5IEwxMjUuMDA3LDIzLjc1OSBaIiBpZD0iRmlsbC0zMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjUuNjMsMTYuMjE5IEwxNTkuODk2LDE5LjUzIEMxNTYuNzI5LDIxLjM1OCAxNTEuNjEsMjEuMzY3IDE0OC40NjMsMTkuNTUgQzE0NS4zMTYsMTcuNzMzIDE0NS4zMzIsMTQuNzc4IDE0OC40OTksMTIuOTQ5IEwxNTQuMjMzLDkuNjM5IEwxNjUuNjMsMTYuMjE5IiBpZD0iRmlsbC0zMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTQuMjMzLDEwLjQ0OCBMMTY0LjIyOCwxNi4yMTkgTDE1OS41NDYsMTguOTIzIEMxNTguMTEyLDE5Ljc1IDE1Ni4xOTQsMjAuMjA2IDE1NC4xNDcsMjAuMjA2IEMxNTIuMTE4LDIwLjIwNiAxNTAuMjI0LDE5Ljc1NyAxNDguODE0LDE4Ljk0MyBDMTQ3LjUyNCwxOC4xOTkgMTQ2LjgxNCwxNy4yNDkgMTQ2LjgxNCwxNi4yNjkgQzE0Ni44MTQsMTUuMjc4IDE0Ny41MzcsMTQuMzE0IDE0OC44NSwxMy41NTYgTDE1NC4yMzMsMTAuNDQ4IE0xNTQuMjMzLDkuNjM5IEwxNDguNDk5LDEyLjk0OSBDMTQ1LjMzMiwxNC43NzggMTQ1LjMxNiwxNy43MzMgMTQ4LjQ2MywxOS41NSBDMTUwLjAzMSwyMC40NTUgMTUyLjA4NiwyMC45MDcgMTU0LjE0NywyMC45MDcgQzE1Ni4yMjQsMjAuOTA3IDE1OC4zMDYsMjAuNDQ3IDE1OS44OTYsMTkuNTMgTDE2NS42MywxNi4yMTkgTDE1NC4yMzMsOS42MzkiIGlkPSJGaWxsLTMyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NS40NDUsNzIuNjY3IEwxNDUuNDQ1LDcyLjY2NyBDMTQzLjY3Miw3Mi42NjcgMTQyLjIwNCw3MS44MTcgMTQxLjIwMiw3MC40MjIgQzE0MS4xMzUsNzAuMzMgMTQxLjE0NSw3MC4xNDcgMTQxLjIyNSw3MC4wNjYgQzE0MS4zMDUsNjkuOTg1IDE0MS40MzIsNjkuOTQ2IDE0MS41MjUsNzAuMDExIEMxNDIuMzA2LDcwLjU1OSAxNDMuMjMxLDcwLjgyMyAxNDQuMjc2LDcwLjgyMiBDMTQ1LjU5OCw3MC44MjIgMTQ3LjAzLDcwLjM3NiAxNDguNTMyLDY5LjUwOSBDMTUzLjg0Miw2Ni40NDMgMTU4LjE2Myw1OC45ODcgMTU4LjE2Myw1Mi44OTQgQzE1OC4xNjMsNTAuOTY3IDE1Ny43MjEsNDkuMzMyIDE1Ni44ODQsNDguMTY4IEMxNTYuODE4LDQ4LjA3NiAxNTYuODI4LDQ3Ljk0OCAxNTYuOTA4LDQ3Ljg2NyBDMTU2Ljk4OCw0Ny43ODYgMTU3LjExNCw0Ny43NzQgMTU3LjIwOCw0Ny44NCBDMTU4Ljg3OCw0OS4wMTIgMTU5Ljc5OCw1MS4yMiAxNTkuNzk4LDU0LjA1OSBDMTU5Ljc5OCw2MC4zMDEgMTU1LjM3Myw2OC4wNDYgMTQ5LjkzMyw3MS4xODYgQzE0OC4zNiw3Mi4wOTQgMTQ2Ljg1LDcyLjY2NyAxNDUuNDQ1LDcyLjY2NyBMMTQ1LjQ0NSw3Mi42NjcgWiBNMTQyLjQ3Niw3MSBDMTQzLjI5LDcxLjY1MSAxNDQuMjk2LDcyLjAwMiAxNDUuNDQ1LDcyLjAwMiBDMTQ2Ljc2Nyw3Mi4wMDIgMTQ4LjE5OCw3MS41NSAxNDkuNyw3MC42ODIgQzE1NS4wMSw2Ny42MTcgMTU5LjMzMSw2MC4xNTkgMTU5LjMzMSw1NC4wNjUgQzE1OS4zMzEsNTIuMDg1IDE1OC44NjgsNTAuNDM1IDE1OC4wMDYsNDkuMjcyIEMxNTguNDE3LDUwLjMwNyAxNTguNjMsNTEuNTMyIDE1OC42Myw1Mi44OTIgQzE1OC42Myw1OS4xMzQgMTU0LjIwNSw2Ni43NjcgMTQ4Ljc2NSw2OS45MDcgQzE0Ny4xOTIsNzAuODE2IDE0NS42ODEsNzEuMjgzIDE0NC4yNzYsNzEuMjgzIEMxNDMuNjM0LDcxLjI4MyAxNDMuMDMzLDcxLjE5MiAxNDIuNDc2LDcxIEwxNDIuNDc2LDcxIFoiIGlkPSJGaWxsLTMzIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0OC42NDgsNjkuNzA0IEMxNTQuMDMyLDY2LjU5NiAxNTguMzk2LDU5LjA2OCAxNTguMzk2LDUyLjg5MSBDMTU4LjM5Niw1MC44MzkgMTU3LjkxMyw0OS4xOTggMTU3LjA3NCw0OC4wMyBDMTU1LjI4OSw0Ni43NzggMTUyLjY5OSw0Ni44MzYgMTQ5LjgxNiw0OC41MDEgQzE0NC40MzMsNTEuNjA5IDE0MC4wNjgsNTkuMTM3IDE0MC4wNjgsNjUuMzE0IEMxNDAuMDY4LDY3LjM2NSAxNDAuNTUyLDY5LjAwNiAxNDEuMzkxLDcwLjE3NCBDMTQzLjE3Niw3MS40MjcgMTQ1Ljc2NSw3MS4zNjkgMTQ4LjY0OCw2OS43MDQiIGlkPSJGaWxsLTM0IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NC4yNzYsNzEuMjc2IEwxNDQuMjc2LDcxLjI3NiBDMTQzLjEzMyw3MS4yNzYgMTQyLjExOCw3MC45NjkgMTQxLjI1Nyw3MC4zNjUgQzE0MS4yMzYsNzAuMzUxIDE0MS4yMTcsNzAuMzMyIDE0MS4yMDIsNzAuMzExIEMxNDAuMzA3LDY5LjA2NyAxMzkuODM1LDY3LjMzOSAxMzkuODM1LDY1LjMxNCBDMTM5LjgzNSw1OS4wNzMgMTQ0LjI2LDUxLjQzOSAxNDkuNyw0OC4yOTggQzE1MS4yNzMsNDcuMzkgMTUyLjc4NCw0Ni45MjkgMTU0LjE4OSw0Ni45MjkgQzE1NS4zMzIsNDYuOTI5IDE1Ni4zNDcsNDcuMjM2IDE1Ny4yMDgsNDcuODM5IEMxNTcuMjI5LDQ3Ljg1NCAxNTcuMjQ4LDQ3Ljg3MyAxNTcuMjYzLDQ3Ljg5NCBDMTU4LjE1Nyw0OS4xMzggMTU4LjYzLDUwLjg2NSAxNTguNjMsNTIuODkxIEMxNTguNjMsNTkuMTMyIDE1NC4yMDUsNjYuNzY2IDE0OC43NjUsNjkuOTA3IEMxNDcuMTkyLDcwLjgxNSAxNDUuNjgxLDcxLjI3NiAxNDQuMjc2LDcxLjI3NiBMMTQ0LjI3Niw3MS4yNzYgWiBNMTQxLjU1OCw3MC4xMDQgQzE0Mi4zMzEsNzAuNjM3IDE0My4yNDUsNzEuMDA1IDE0NC4yNzYsNzEuMDA1IEMxNDUuNTk4LDcxLjAwNSAxNDcuMDMsNzAuNDY3IDE0OC41MzIsNjkuNiBDMTUzLjg0Miw2Ni41MzQgMTU4LjE2Myw1OS4wMzMgMTU4LjE2Myw1Mi45MzkgQzE1OC4xNjMsNTEuMDMxIDE1Ny43MjksNDkuMzg1IDE1Ni45MDcsNDguMjIzIEMxNTYuMTMzLDQ3LjY5MSAxNTUuMjE5LDQ3LjQwOSAxNTQuMTg5LDQ3LjQwOSBDMTUyLjg2Nyw0Ny40MDkgMTUxLjQzNSw0Ny44NDIgMTQ5LjkzMyw0OC43MDkgQzE0NC42MjMsNTEuNzc1IDE0MC4zMDIsNTkuMjczIDE0MC4zMDIsNjUuMzY2IEMxNDAuMzAyLDY3LjI3NiAxNDAuNzM2LDY4Ljk0MiAxNDEuNTU4LDcwLjEwNCBMMTQxLjU1OCw3MC4xMDQgWiIgaWQ9IkZpbGwtMzUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUwLjcyLDY1LjM2MSBMMTUwLjM1Nyw2NS4wNjYgQzE1MS4xNDcsNjQuMDkyIDE1MS44NjksNjMuMDQgMTUyLjUwNSw2MS45MzggQzE1My4zMTMsNjAuNTM5IDE1My45NzgsNTkuMDY3IDE1NC40ODIsNTcuNTYzIEwxNTQuOTI1LDU3LjcxMiBDMTU0LjQxMiw1OS4yNDUgMTUzLjczMyw2MC43NDUgMTUyLjkxLDYyLjE3MiBDMTUyLjI2Miw2My4yOTUgMTUxLjUyNSw2NC4zNjggMTUwLjcyLDY1LjM2MSIgaWQ9IkZpbGwtMzYiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE1LjkxNyw4NC41MTQgTDExNS41NTQsODQuMjIgQzExNi4zNDQsODMuMjQ1IDExNy4wNjYsODIuMTk0IDExNy43MDIsODEuMDkyIEMxMTguNTEsNzkuNjkyIDExOS4xNzUsNzguMjIgMTE5LjY3OCw3Ni43MTcgTDEyMC4xMjEsNzYuODY1IEMxMTkuNjA4LDc4LjM5OCAxMTguOTMsNzkuODk5IDExOC4xMDYsODEuMzI2IEMxMTcuNDU4LDgyLjQ0OCAxMTYuNzIyLDgzLjUyMSAxMTUuOTE3LDg0LjUxNCIgaWQ9IkZpbGwtMzciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE0LDEzMC40NzYgTDExNCwxMzAuMDA4IEwxMTQsNzYuMDUyIEwxMTQsNzUuNTg0IEwxMTQsNzYuMDUyIEwxMTQsMTMwLjAwOCBMMTE0LDEzMC40NzYiIGlkPSJGaWxsLTM4IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYyLjAwMDAwMCwgMC4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTkuODIyLDM3LjQ3NCBDMTkuODM5LDM3LjMzOSAxOS43NDcsMzcuMTk0IDE5LjU1NSwzNy4wODIgQzE5LjIyOCwzNi44OTQgMTguNzI5LDM2Ljg3MiAxOC40NDYsMzcuMDM3IEwxMi40MzQsNDAuNTA4IEMxMi4zMDMsNDAuNTg0IDEyLjI0LDQwLjY4NiAxMi4yNDMsNDAuNzkzIEMxMi4yNDUsNDAuOTI1IDEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQxLjM3MSBMMTIuMjQ1LDQxLjQxNCBMMTIuMjM4LDQxLjU0MiBDOC4xNDgsNDMuODg3IDUuNjQ3LDQ1LjMyMSA1LjY0Nyw0NS4zMjEgQzUuNjQ2LDQ1LjMyMSAzLjU3LDQ2LjM2NyAyLjg2LDUwLjUxMyBDMi44Niw1MC41MTMgMS45NDgsNTcuNDc0IDEuOTYyLDcwLjI1OCBDMS45NzcsODIuODI4IDIuNTY4LDg3LjMyOCAzLjEyOSw5MS42MDkgQzMuMzQ5LDkzLjI5MyA2LjEzLDkzLjczNCA2LjEzLDkzLjczNCBDNi40NjEsOTMuNzc0IDYuODI4LDkzLjcwNyA3LjIxLDkzLjQ4NiBMODIuNDgzLDQ5LjkzNSBDODQuMjkxLDQ4Ljg2NiA4NS4xNSw0Ni4yMTYgODUuNTM5LDQzLjY1MSBDODYuNzUyLDM1LjY2MSA4Ny4yMTQsMTAuNjczIDg1LjI2NCwzLjc3MyBDODUuMDY4LDMuMDggODQuNzU0LDIuNjkgODQuMzk2LDIuNDkxIEw4Mi4zMSwxLjcwMSBDODEuNTgzLDEuNzI5IDgwLjg5NCwyLjE2OCA4MC43NzYsMi4yMzYgQzgwLjYzNiwyLjMxNyA0MS44MDcsMjQuNTg1IDIwLjAzMiwzNy4wNzIgTDE5LjgyMiwzNy40NzQiIGlkPSJGaWxsLTEiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNODIuMzExLDEuNzAxIEw4NC4zOTYsMi40OTEgQzg0Ljc1NCwyLjY5IDg1LjA2OCwzLjA4IDg1LjI2NCwzLjc3MyBDODcuMjEzLDEwLjY3MyA4Ni43NTEsMzUuNjYgODUuNTM5LDQzLjY1MSBDODUuMTQ5LDQ2LjIxNiA4NC4yOSw0OC44NjYgODIuNDgzLDQ5LjkzNSBMNy4yMSw5My40ODYgQzYuODk3LDkzLjY2NyA2LjU5NSw5My43NDQgNi4zMTQsOTMuNzQ0IEw2LjEzMSw5My43MzMgQzYuMTMxLDkzLjczNCAzLjM0OSw5My4yOTMgMy4xMjgsOTEuNjA5IEMyLjU2OCw4Ny4zMjcgMS45NzcsODIuODI4IDEuOTYzLDcwLjI1OCBDMS45NDgsNTcuNDc0IDIuODYsNTAuNTEzIDIuODYsNTAuNTEzIEMzLjU3LDQ2LjM2NyA1LjY0Nyw0NS4zMjEgNS42NDcsNDUuMzIxIEM1LjY0Nyw0NS4zMjEgOC4xNDgsNDMuODg3IDEyLjIzOCw0MS41NDIgTDEyLjI0NSw0MS40MTQgTDEyLjI0NSw0MS4zNzEgQzEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQwLjkyNSAxMi4yNDMsNDAuNzkzIEMxMi4yNCw0MC42ODYgMTIuMzAyLDQwLjU4MyAxMi40MzQsNDAuNTA4IEwxOC40NDYsMzcuMDM2IEMxOC41NzQsMzYuOTYyIDE4Ljc0NiwzNi45MjYgMTguOTI3LDM2LjkyNiBDMTkuMTQ1LDM2LjkyNiAxOS4zNzYsMzYuOTc5IDE5LjU1NCwzNy4wODIgQzE5Ljc0NywzNy4xOTQgMTkuODM5LDM3LjM0IDE5LjgyMiwzNy40NzQgTDIwLjAzMywzNy4wNzIgQzQxLjgwNiwyNC41ODUgODAuNjM2LDIuMzE4IDgwLjc3NywyLjIzNiBDODAuODk0LDIuMTY4IDgxLjU4MywxLjcyOSA4Mi4zMTEsMS43MDEgTTgyLjMxMSwwLjcwNCBMODIuMjcyLDAuNzA1IEM4MS42NTQsMC43MjggODAuOTg5LDAuOTQ5IDgwLjI5OCwxLjM2MSBMODAuMjc3LDEuMzczIEM4MC4xMjksMS40NTggNTkuNzY4LDEzLjEzNSAxOS43NTgsMzYuMDc5IEMxOS41LDM1Ljk4MSAxOS4yMTQsMzUuOTI5IDE4LjkyNywzNS45MjkgQzE4LjU2MiwzNS45MjkgMTguMjIzLDM2LjAxMyAxNy45NDcsMzYuMTczIEwxMS45MzUsMzkuNjQ0IEMxMS40OTMsMzkuODk5IDExLjIzNiw0MC4zMzQgMTEuMjQ2LDQwLjgxIEwxMS4yNDcsNDAuOTYgTDUuMTY3LDQ0LjQ0NyBDNC43OTQsNDQuNjQ2IDIuNjI1LDQ1Ljk3OCAxLjg3Nyw1MC4zNDUgTDEuODcxLDUwLjM4NCBDMS44NjIsNTAuNDU0IDAuOTUxLDU3LjU1NyAwLjk2NSw3MC4yNTkgQzAuOTc5LDgyLjg3OSAxLjU2OCw4Ny4zNzUgMi4xMzcsOTEuNzI0IEwyLjEzOSw5MS43MzkgQzIuNDQ3LDk0LjA5NCA1LjYxNCw5NC42NjIgNS45NzUsOTQuNzE5IEw2LjAwOSw5NC43MjMgQzYuMTEsOTQuNzM2IDYuMjEzLDk0Ljc0MiA2LjMxNCw5NC43NDIgQzYuNzksOTQuNzQyIDcuMjYsOTQuNjEgNy43MSw5NC4zNSBMODIuOTgzLDUwLjc5OCBDODQuNzk0LDQ5LjcyNyA4NS45ODIsNDcuMzc1IDg2LjUyNSw0My44MDEgQzg3LjcxMSwzNS45ODcgODguMjU5LDEwLjcwNSA4Ni4yMjQsMy41MDIgQzg1Ljk3MSwyLjYwOSA4NS41MiwxLjk3NSA4NC44ODEsMS42MiBMODQuNzQ5LDEuNTU4IEw4Mi42NjQsMC43NjkgQzgyLjU1MSwwLjcyNSA4Mi40MzEsMC43MDQgODIuMzExLDAuNzA0IiBpZD0iRmlsbC0yIiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY2LjI2NywxMS41NjUgTDY3Ljc2MiwxMS45OTkgTDExLjQyMyw0NC4zMjUiIGlkPSJGaWxsLTMiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMjAyLDkwLjU0NSBDMTIuMDI5LDkwLjU0NSAxMS44NjIsOTAuNDU1IDExLjc2OSw5MC4yOTUgQzExLjYzMiw5MC4wNTcgMTEuNzEzLDg5Ljc1MiAxMS45NTIsODkuNjE0IEwzMC4zODksNzguOTY5IEMzMC42MjgsNzguODMxIDMwLjkzMyw3OC45MTMgMzEuMDcxLDc5LjE1MiBDMzEuMjA4LDc5LjM5IDMxLjEyNyw3OS42OTYgMzAuODg4LDc5LjgzMyBMMTIuNDUxLDkwLjQ3OCBMMTIuMjAyLDkwLjU0NSIgaWQ9IkZpbGwtNCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy43NjQsNDIuNjU0IEwxMy42NTYsNDIuNTkyIEwxMy43MDIsNDIuNDIxIEwxOC44MzcsMzkuNDU3IEwxOS4wMDcsMzkuNTAyIEwxOC45NjIsMzkuNjczIEwxMy44MjcsNDIuNjM3IEwxMy43NjQsNDIuNjU0IiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTguNTIsOTAuMzc1IEw4LjUyLDQ2LjQyMSBMOC41ODMsNDYuMzg1IEw3NS44NCw3LjU1NCBMNzUuODQsNTEuNTA4IEw3NS43NzgsNTEuNTQ0IEw4LjUyLDkwLjM3NSBMOC41Miw5MC4zNzUgWiBNOC43Nyw0Ni41NjQgTDguNzcsODkuOTQ0IEw3NS41OTEsNTEuMzY1IEw3NS41OTEsNy45ODUgTDguNzcsNDYuNTY0IEw4Ljc3LDQ2LjU2NCBaIiBpZD0iRmlsbC02IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTI0Ljk4Niw4My4xODIgQzI0Ljc1Niw4My4zMzEgMjQuMzc0LDgzLjU2NiAyNC4xMzcsODMuNzA1IEwxMi42MzIsOTAuNDA2IEMxMi4zOTUsOTAuNTQ1IDEyLjQyNiw5MC42NTggMTIuNyw5MC42NTggTDEzLjI2NSw5MC42NTggQzEzLjU0LDkwLjY1OCAxMy45NTgsOTAuNTQ1IDE0LjE5NSw5MC40MDYgTDI1LjcsODMuNzA1IEMyNS45MzcsODMuNTY2IDI2LjEyOCw4My40NTIgMjYuMTI1LDgzLjQ0OSBDMjYuMTIyLDgzLjQ0NyAyNi4xMTksODMuMjIgMjYuMTE5LDgyLjk0NiBDMjYuMTE5LDgyLjY3MiAyNS45MzEsODIuNTY5IDI1LjcwMSw4Mi43MTkgTDI0Ljk4Niw4My4xODIiIGlkPSJGaWxsLTciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuMjY2LDkwLjc4MiBMMTIuNyw5MC43ODIgQzEyLjUsOTAuNzgyIDEyLjM4NCw5MC43MjYgMTIuMzU0LDkwLjYxNiBDMTIuMzI0LDkwLjUwNiAxMi4zOTcsOTAuMzk5IDEyLjU2OSw5MC4yOTkgTDI0LjA3NCw4My41OTcgQzI0LjMxLDgzLjQ1OSAyNC42ODksODMuMjI2IDI0LjkxOCw4My4wNzggTDI1LjYzMyw4Mi42MTQgQzI1LjcyMyw4Mi41NTUgMjUuODEzLDgyLjUyNSAyNS44OTksODIuNTI1IEMyNi4wNzEsODIuNTI1IDI2LjI0NCw4Mi42NTUgMjYuMjQ0LDgyLjk0NiBDMjYuMjQ0LDgzLjE2IDI2LjI0NSw4My4zMDkgMjYuMjQ3LDgzLjM4MyBMMjYuMjUzLDgzLjM4NyBMMjYuMjQ5LDgzLjQ1NiBDMjYuMjQ2LDgzLjUzMSAyNi4yNDYsODMuNTMxIDI1Ljc2Myw4My44MTIgTDE0LjI1OCw5MC41MTQgQzE0LDkwLjY2NSAxMy41NjQsOTAuNzgyIDEzLjI2Niw5MC43ODIgTDEzLjI2Niw5MC43ODIgWiBNMTIuNjY2LDkwLjUzMiBMMTIuNyw5MC41MzMgTDEzLjI2Niw5MC41MzMgQzEzLjUxOCw5MC41MzMgMTMuOTE1LDkwLjQyNSAxNC4xMzIsOTAuMjk5IEwyNS42MzcsODMuNTk3IEMyNS44MDUsODMuNDk5IDI1LjkzMSw4My40MjQgMjUuOTk4LDgzLjM4MyBDMjUuOTk0LDgzLjI5OSAyNS45OTQsODMuMTY1IDI1Ljk5NCw4Mi45NDYgTDI1Ljg5OSw4Mi43NzUgTDI1Ljc2OCw4Mi44MjQgTDI1LjA1NCw4My4yODcgQzI0LjgyMiw4My40MzcgMjQuNDM4LDgzLjY3MyAyNC4yLDgzLjgxMiBMMTIuNjk1LDkwLjUxNCBMMTIuNjY2LDkwLjUzMiBMMTIuNjY2LDkwLjUzMiBaIiBpZD0iRmlsbC04IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEzLjI2Niw4OS44NzEgTDEyLjcsODkuODcxIEMxMi41LDg5Ljg3MSAxMi4zODQsODkuODE1IDEyLjM1NCw4OS43MDUgQzEyLjMyNCw4OS41OTUgMTIuMzk3LDg5LjQ4OCAxMi41NjksODkuMzg4IEwyNC4wNzQsODIuNjg2IEMyNC4zMzIsODIuNTM1IDI0Ljc2OCw4Mi40MTggMjUuMDY3LDgyLjQxOCBMMjUuNjMyLDgyLjQxOCBDMjUuODMyLDgyLjQxOCAyNS45NDgsODIuNDc0IDI1Ljk3OCw4Mi41ODQgQzI2LjAwOCw4Mi42OTQgMjUuOTM1LDgyLjgwMSAyNS43NjMsODIuOTAxIEwxNC4yNTgsODkuNjAzIEMxNCw4OS43NTQgMTMuNTY0LDg5Ljg3MSAxMy4yNjYsODkuODcxIEwxMy4yNjYsODkuODcxIFogTTEyLjY2Niw4OS42MjEgTDEyLjcsODkuNjIyIEwxMy4yNjYsODkuNjIyIEMxMy41MTgsODkuNjIyIDEzLjkxNSw4OS41MTUgMTQuMTMyLDg5LjM4OCBMMjUuNjM3LDgyLjY4NiBMMjUuNjY3LDgyLjY2OCBMMjUuNjMyLDgyLjY2NyBMMjUuMDY3LDgyLjY2NyBDMjQuODE1LDgyLjY2NyAyNC40MTgsODIuNzc1IDI0LjIsODIuOTAxIEwxMi42OTUsODkuNjAzIEwxMi42NjYsODkuNjIxIEwxMi42NjYsODkuNjIxIFoiIGlkPSJGaWxsLTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMzcsOTAuODAxIEwxMi4zNyw4OS41NTQgTDEyLjM3LDkwLjgwMSIgaWQ9IkZpbGwtMTAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4xMyw5My45MDEgQzUuMzc5LDkzLjgwOCA0LjgxNiw5My4xNjQgNC42OTEsOTIuNTI1IEMzLjg2LDg4LjI4NyAzLjU0LDgzLjc0MyAzLjUyNiw3MS4xNzMgQzMuNTExLDU4LjM4OSA0LjQyMyw1MS40MjggNC40MjMsNTEuNDI4IEM1LjEzNCw0Ny4yODIgNy4yMSw0Ni4yMzYgNy4yMSw0Ni4yMzYgQzcuMjEsNDYuMjM2IDgxLjY2NywzLjI1IDgyLjA2OSwzLjAxNyBDODIuMjkyLDIuODg4IDg0LjU1NiwxLjQzMyA4NS4yNjQsMy45NCBDODcuMjE0LDEwLjg0IDg2Ljc1MiwzNS44MjcgODUuNTM5LDQzLjgxOCBDODUuMTUsNDYuMzgzIDg0LjI5MSw0OS4wMzMgODIuNDgzLDUwLjEwMSBMNy4yMSw5My42NTMgQzYuODI4LDkzLjg3NCA2LjQ2MSw5My45NDEgNi4xMyw5My45MDEgQzYuMTMsOTMuOTAxIDMuMzQ5LDkzLjQ2IDMuMTI5LDkxLjc3NiBDMi41NjgsODcuNDk1IDEuOTc3LDgyLjk5NSAxLjk2Miw3MC40MjUgQzEuOTQ4LDU3LjY0MSAyLjg2LDUwLjY4IDIuODYsNTAuNjggQzMuNTcsNDYuNTM0IDUuNjQ3LDQ1LjQ4OSA1LjY0Nyw0NS40ODkgQzUuNjQ2LDQ1LjQ4OSA4LjA2NSw0NC4wOTIgMTIuMjQ1LDQxLjY3OSBMMTMuMTE2LDQxLjU2IEwxOS43MTUsMzcuNzMgTDE5Ljc2MSwzNy4yNjkgTDYuMTMsOTMuOTAxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjMxNyw5NC4xNjEgTDYuMTAyLDk0LjE0OCBMNi4xMDEsOTQuMTQ4IEw1Ljg1Nyw5NC4xMDEgQzUuMTM4LDkzLjk0NSAzLjA4NSw5My4zNjUgMi44ODEsOTEuODA5IEMyLjMxMyw4Ny40NjkgMS43MjcsODIuOTk2IDEuNzEzLDcwLjQyNSBDMS42OTksNTcuNzcxIDIuNjA0LDUwLjcxOCAyLjYxMyw1MC42NDggQzMuMzM4LDQ2LjQxNyA1LjQ0NSw0NS4zMSA1LjUzNSw0NS4yNjYgTDEyLjE2Myw0MS40MzkgTDEzLjAzMyw0MS4zMiBMMTkuNDc5LDM3LjU3OCBMMTkuNTEzLDM3LjI0NCBDMTkuNTI2LDM3LjEwNyAxOS42NDcsMzcuMDA4IDE5Ljc4NiwzNy4wMjEgQzE5LjkyMiwzNy4wMzQgMjAuMDIzLDM3LjE1NiAyMC4wMDksMzcuMjkzIEwxOS45NSwzNy44ODIgTDEzLjE5OCw0MS44MDEgTDEyLjMyOCw0MS45MTkgTDUuNzcyLDQ1LjcwNCBDNS43NDEsNDUuNzIgMy43ODIsNDYuNzcyIDMuMTA2LDUwLjcyMiBDMy4wOTksNTAuNzgyIDIuMTk4LDU3LjgwOCAyLjIxMiw3MC40MjQgQzIuMjI2LDgyLjk2MyAyLjgwOSw4Ny40MiAzLjM3Myw5MS43MjkgQzMuNDY0LDkyLjQyIDQuMDYyLDkyLjg4MyA0LjY4Miw5My4xODEgQzQuNTY2LDkyLjk4NCA0LjQ4Niw5Mi43NzYgNC40NDYsOTIuNTcyIEMzLjY2NSw4OC41ODggMy4yOTEsODQuMzcgMy4yNzYsNzEuMTczIEMzLjI2Miw1OC41MiA0LjE2Nyw1MS40NjYgNC4xNzYsNTEuMzk2IEM0LjkwMSw0Ny4xNjUgNy4wMDgsNDYuMDU5IDcuMDk4LDQ2LjAxNCBDNy4wOTQsNDYuMDE1IDgxLjU0MiwzLjAzNCA4MS45NDQsMi44MDIgTDgxLjk3MiwyLjc4NSBDODIuODc2LDIuMjQ3IDgzLjY5MiwyLjA5NyA4NC4zMzIsMi4zNTIgQzg0Ljg4NywyLjU3MyA4NS4yODEsMy4wODUgODUuNTA0LDMuODcyIEM4Ny41MTgsMTEgODYuOTY0LDM2LjA5MSA4NS43ODUsNDMuODU1IEM4NS4yNzgsNDcuMTk2IDg0LjIxLDQ5LjM3IDgyLjYxLDUwLjMxNyBMNy4zMzUsOTMuODY5IEM2Ljk5OSw5NC4wNjMgNi42NTgsOTQuMTYxIDYuMzE3LDk0LjE2MSBMNi4zMTcsOTQuMTYxIFogTTYuMTcsOTMuNjU0IEM2LjQ2Myw5My42OSA2Ljc3NCw5My42MTcgNy4wODUsOTMuNDM3IEw4Mi4zNTgsNDkuODg2IEM4NC4xODEsNDguODA4IDg0Ljk2LDQ1Ljk3MSA4NS4yOTIsNDMuNzggQzg2LjQ2NiwzNi4wNDkgODcuMDIzLDExLjA4NSA4NS4wMjQsNC4wMDggQzg0Ljg0NiwzLjM3NyA4NC41NTEsMi45NzYgODQuMTQ4LDIuODE2IEM4My42NjQsMi42MjMgODIuOTgyLDIuNzY0IDgyLjIyNywzLjIxMyBMODIuMTkzLDMuMjM0IEM4MS43OTEsMy40NjYgNy4zMzUsNDYuNDUyIDcuMzM1LDQ2LjQ1MiBDNy4zMDQsNDYuNDY5IDUuMzQ2LDQ3LjUyMSA0LjY2OSw1MS40NzEgQzQuNjYyLDUxLjUzIDMuNzYxLDU4LjU1NiAzLjc3NSw3MS4xNzMgQzMuNzksODQuMzI4IDQuMTYxLDg4LjUyNCA0LjkzNiw5Mi40NzYgQzUuMDI2LDkyLjkzNyA1LjQxMiw5My40NTkgNS45NzMsOTMuNjE1IEM2LjA4Nyw5My42NCA2LjE1OCw5My42NTIgNi4xNjksOTMuNjU0IEw2LjE3LDkzLjY1NCBMNi4xNyw5My42NTQgWiIgaWQ9IkZpbGwtMTIiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4zMTcsNjguOTgyIEM3LjgwNiw2OC43MDEgOC4yMDIsNjguOTI2IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNi44MjksNzEuMjk0IDYuNDMzLDcxLjA2OSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIiBpZD0iRmlsbC0xMyIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjkyLDcxLjEzMyBDNi42MzEsNzEuMTMzIDYuNDMzLDcwLjkwNSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIEM3LjQ2LDY4LjkgNy41OTUsNjguODYxIDcuNzE0LDY4Ljg2MSBDOC4wMDMsNjguODYxIDguMjAyLDY5LjA5IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNy4xNzQsNzEuMDk0IDcuMDM5LDcxLjEzMyA2LjkyLDcxLjEzMyBNNy43MTQsNjguNjc0IEM3LjU1Nyw2OC42NzQgNy4zOTIsNjguNzIzIDcuMjI0LDY4LjgyMSBDNi42NzYsNjkuMTM4IDYuMjQ2LDY5Ljg3OSA2LjI0Niw3MC41MDggQzYuMjQ2LDcwLjk5NCA2LjUxNyw3MS4zMiA2LjkyLDcxLjMyIEM3LjA3OCw3MS4zMiA3LjI0Myw3MS4yNzEgNy40MTEsNzEuMTc0IEM3Ljk1OSw3MC44NTcgOC4zODksNzAuMTE3IDguMzg5LDY5LjQ4NyBDOC4zODksNjkuMDAxIDguMTE3LDY4LjY3NCA3LjcxNCw2OC42NzQiIGlkPSJGaWxsLTE0IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYuOTIsNzAuOTQ3IEM2LjY0OSw3MC45NDcgNi42MjEsNzAuNjQgNi42MjEsNzAuNTA4IEM2LjYyMSw3MC4wMTcgNi45ODIsNjkuMzkyIDcuNDExLDY5LjE0NSBDNy41MjEsNjkuMDgyIDcuNjI1LDY5LjA0OSA3LjcxNCw2OS4wNDkgQzcuOTg2LDY5LjA0OSA4LjAxNSw2OS4zNTUgOC4wMTUsNjkuNDg3IEM4LjAxNSw2OS45NzggNy42NTIsNzAuNjAzIDcuMjI0LDcwLjg1MSBDNy4xMTUsNzAuOTE0IDcuMDEsNzAuOTQ3IDYuOTIsNzAuOTQ3IE03LjcxNCw2OC44NjEgQzcuNTk1LDY4Ljg2MSA3LjQ2LDY4LjkgNy4zMTcsNjguOTgyIEM2LjgyOSw2OS4yNjUgNi40MzMsNjkuOTQ4IDYuNDMzLDcwLjUwOCBDNi40MzMsNzAuOTA1IDYuNjMxLDcxLjEzMyA2LjkyLDcxLjEzMyBDNy4wMzksNzEuMTMzIDcuMTc0LDcxLjA5NCA3LjMxNyw3MS4wMTIgQzcuODA2LDcwLjczIDguMjAyLDcwLjA0NyA4LjIwMiw2OS40ODcgQzguMjAyLDY5LjA5IDguMDAzLDY4Ljg2MSA3LjcxNCw2OC44NjEiIGlkPSJGaWxsLTE1IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNDQ0LDg1LjM1IEM3LjcwOCw4NS4xOTggNy45MjEsODUuMzE5IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuOTI1IDcuNzA4LDg2LjI5MiA3LjQ0NCw4Ni40NDQgQzcuMTgxLDg2LjU5NyA2Ljk2Nyw4Ni40NzUgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IiBpZD0iRmlsbC0xNiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjIzLDg2LjUxIEM3LjA3NCw4Ni41MSA2Ljk2Nyw4Ni4zODcgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IEM3LjUyMSw4NS4zMDUgNy41OTQsODUuMjg0IDcuNjU4LDg1LjI4NCBDNy44MTQsODUuMjg0IDcuOTIxLDg1LjQwOCA3LjkyMSw4NS42MjIgQzcuOTIxLDg1LjkyNSA3LjcwOCw4Ni4yOTIgNy40NDQsODYuNDQ0IEM3LjM2Nyw4Ni40ODkgNy4yOTQsODYuNTEgNy4yMyw4Ni41MSBNNy42NTgsODUuMDk4IEM3LjU1OCw4NS4wOTggNy40NTUsODUuMTI3IDcuMzUxLDg1LjE4OCBDNy4wMzEsODUuMzczIDYuNzgxLDg1LjgwNiA2Ljc4MSw4Ni4xNzMgQzYuNzgxLDg2LjQ4MiA2Ljk2Niw4Ni42OTcgNy4yMyw4Ni42OTcgQzcuMzMsODYuNjk3IDcuNDMzLDg2LjY2NiA3LjUzOCw4Ni42MDcgQzcuODU4LDg2LjQyMiA4LjEwOCw4NS45ODkgOC4xMDgsODUuNjIyIEM4LjEwOCw4NS4zMTMgNy45MjMsODUuMDk4IDcuNjU4LDg1LjA5OCIgaWQ9IkZpbGwtMTciIGZpbGw9IiM4MDk3QTIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4yMyw4Ni4zMjIgTDcuMTU0LDg2LjE3MyBDNy4xNTQsODUuOTM4IDcuMzMzLDg1LjYyOSA3LjUzOCw4NS41MTIgTDcuNjU4LDg1LjQ3MSBMNy43MzQsODUuNjIyIEM3LjczNCw4NS44NTYgNy41NTUsODYuMTY0IDcuMzUxLDg2LjI4MiBMNy4yMyw4Ni4zMjIgTTcuNjU4LDg1LjI4NCBDNy41OTQsODUuMjg0IDcuNTIxLDg1LjMwNSA3LjQ0NCw4NS4zNSBDNy4xODEsODUuNTAyIDYuOTY3LDg1Ljg3MSA2Ljk2Nyw4Ni4xNzMgQzYuOTY3LDg2LjM4NyA3LjA3NCw4Ni41MSA3LjIzLDg2LjUxIEM3LjI5NCw4Ni41MSA3LjM2Nyw4Ni40ODkgNy40NDQsODYuNDQ0IEM3LjcwOCw4Ni4yOTIgNy45MjEsODUuOTI1IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuNDA4IDcuODE0LDg1LjI4NCA3LjY1OCw4NS4yODQiIGlkPSJGaWxsLTE4IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTc3LjI3OCw3Ljc2OSBMNzcuMjc4LDUxLjQzNiBMMTAuMjA4LDkwLjE2IEwxMC4yMDgsNDYuNDkzIEw3Ny4yNzgsNy43NjkiIGlkPSJGaWxsLTE5IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA4Myw5MC4zNzUgTDEwLjA4Myw0Ni40MjEgTDEwLjE0Niw0Ni4zODUgTDc3LjQwMyw3LjU1NCBMNzcuNDAzLDUxLjUwOCBMNzcuMzQxLDUxLjU0NCBMMTAuMDgzLDkwLjM3NSBMMTAuMDgzLDkwLjM3NSBaIE0xMC4zMzMsNDYuNTY0IEwxMC4zMzMsODkuOTQ0IEw3Ny4xNTQsNTEuMzY1IEw3Ny4xNTQsNy45ODUgTDEwLjMzMyw0Ni41NjQgTDEwLjMzMyw0Ni41NjQgWiIgaWQ9IkZpbGwtMjAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMjUuNzM3LDg4LjY0NyBMMTE4LjA5OCw5MS45ODEgTDExOC4wOTgsODQgTDEwNi42MzksODguNzEzIEwxMDYuNjM5LDk2Ljk4MiBMOTksMTAwLjMxNSBMMTEyLjM2OSwxMDMuOTYxIEwxMjUuNzM3LDg4LjY0NyIgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTIiIGZpbGw9IiM0NTVBNjQiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+")},t.exports=n},function(t,e,r){function n(t){this.kFilter=t,this.currentAccelMeasurement=new i,this.currentGyroMeasurement=new i,this.previousGyroMeasurement=new i,o.isIOS()?this.filterQ=new a.Quaternion(-1,0,0,1):this.filterQ=new a.Quaternion(1,0,0,1),this.previousFilterQ=new a.Quaternion,this.previousFilterQ.copy(this.filterQ),this.accelQ=new a.Quaternion,this.isOrientationInitialized=!1,this.estimatedGravity=new a.Vector3,this.measuredGravity=new a.Vector3,this.gyroIntegralQ=new a.Quaternion}var i=r(597),a=r(83),o=r(21);n.prototype.addAccelMeasurement=function(t,e){this.currentAccelMeasurement.set(t,e)},n.prototype.addGyroMeasurement=function(t,e){this.currentGyroMeasurement.set(t,e);var r=e-this.previousGyroMeasurement.timestampS;o.isTimestampDeltaValid(r)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},n.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var t=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,e=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,t);this.gyroIntegralQ.multiply(e),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(e);var r=new a.Quaternion;r.copy(this.filterQ),r.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(r),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var n=new a.Quaternion;n.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),n.inverse(),o.isDebug()&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",a.radToDeg*o.getQuaternionAngle(n),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var i=new a.Quaternion;i.copy(this.filterQ),i.multiply(n),this.filterQ.slerp(i,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},n.prototype.getOrientation=function(){return this.filterQ},n.prototype.accelToQuaternion_=function(t){var e=new a.Vector3;e.copy(t),e.normalize();var r=new a.Quaternion;return r.setFromUnitVectors(new a.Vector3(0,0,-1),e),r.inverse(),r},n.prototype.gyroToQuaternionDelta_=function(t,e){var r=new a.Quaternion,n=new a.Vector3;return n.copy(t),n.normalize(),r.setFromAxisAngle(n,t.length()*e),r},t.exports=n},function(t,e,r){function n(){this.deviceId="webvr-polyfill:fused",this.deviceName="VR Position Device (webvr-polyfill:fused)",this.accelerometer=new s.Vector3,this.gyroscope=new s.Vector3,this.start(),this.filter=new i(window.WebVRConfig.K_FILTER),this.posePredictor=new a(window.WebVRConfig.PREDICTION_TIME_S),this.touchPanner=new o,this.filterToWorldQ=new s.Quaternion,u.isIOS()?this.filterToWorldQ.setFromAxisAngle(new s.Vector3(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new s.Vector3(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new s.Quaternion,this.worldToScreenQ=new s.Quaternion,this.originalPoseAdjustQ=new s.Quaternion,this.originalPoseAdjustQ.setFromAxisAngle(new s.Vector3(0,0,1),-window.orientation*Math.PI/180),this.setScreenTransform_(),u.isLandscapeMode()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new s.Quaternion,this.isFirefoxAndroid=u.isFirefoxAndroid(),this.isIOS=u.isIOS(),this.orientationOut_=new Float32Array(4)}var i=r(594),a=r(596),o=r(598),s=r(83),u=r(21);n.prototype.getPosition=function(){return null},n.prototype.getOrientation=function(){var t=this.filter.getOrientation();this.predictedQ=this.posePredictor.getPrediction(t,this.gyroscope,this.previousTimestampS);var e=new s.Quaternion;return e.copy(this.filterToWorldQ),e.multiply(this.resetQ),window.WebVRConfig.TOUCH_PANNER_DISABLED||e.multiply(this.touchPanner.getOrientation()),e.multiply(this.predictedQ),e.multiply(this.worldToScreenQ),window.WebVRConfig.YAW_ONLY&&(e.x=0,e.z=0,e.normalize()),this.orientationOut_[0]=e.x,this.orientationOut_[1]=e.y,this.orientationOut_[2]=e.z,this.orientationOut_[3]=e.w,this.orientationOut_},n.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),u.isLandscapeMode()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ),window.WebVRConfig.TOUCH_PANNER_DISABLED||this.touchPanner.resetSensor()},n.prototype.onDeviceMotion_=function(t){this.updateDeviceMotion_(t)},n.prototype.updateDeviceMotion_=function(t){var e=t.accelerationIncludingGravity,r=t.rotationRate,n=t.timeStamp/1e3;this.isFirefoxAndroid&&(n/=1e3);var i=n-this.previousTimestampS;if(i<=u.MIN_TIMESTEP||i>u.MAX_TIMESTEP)return console.warn("Invalid timestamps detected. Time step between successive gyroscope sensor samples is very small or not monotonic"),void(this.previousTimestampS=n);this.accelerometer.set(-e.x,-e.y,-e.z),this.gyroscope.set(r.alpha,r.beta,r.gamma),(this.isIOS||this.isFirefoxAndroid)&&this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addAccelMeasurement(this.accelerometer,n),this.filter.addGyroMeasurement(this.gyroscope,n),this.previousTimestampS=n},n.prototype.onOrientationChange_=function(t){this.setScreenTransform_()},n.prototype.onMessage_=function(t){var e=t.data;if(e&&e.type){"devicemotion"===e.type.toLowerCase()&&this.updateDeviceMotion_(e.deviceMotionEvent)}},n.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new s.Vector3(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new s.Vector3(0,0,1),Math.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},n.prototype.start=function(){this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),u.isIOS()&&u.isInsideCrossDomainIFrame()&&window.addEventListener("message",this.onMessageCallback_),window.addEventListener("orientationchange",this.onOrientationChangeCallback_),window.addEventListener("devicemotion",this.onDeviceMotionCallback_)},n.prototype.stop=function(){window.removeEventListener("devicemotion",this.onDeviceMotionCallback_),window.removeEventListener("orientationchange",this.onOrientationChangeCallback_),window.removeEventListener("message",this.onMessageCallback_)},t.exports=n},function(t,e,r){function n(t){this.predictionTimeS=t,this.previousQ=new i.Quaternion,this.previousTimestampS=null,this.deltaQ=new i.Quaternion,this.outQ=new i.Quaternion}var i=r(83),a=r(21);n.prototype.getPrediction=function(t,e,r){if(!this.previousTimestampS)return this.previousQ.copy(t),this.previousTimestampS=r,t;var n=new i.Vector3;n.copy(e),n.normalize();var o=e.length();if(o<20*i.degToRad)return a.isDebug()&&console.log("Moving slowly, at %s deg/s: no prediction",(i.radToDeg*o).toFixed(1)),this.outQ.copy(t),this.previousQ.copy(t),this.outQ;var s=(this.previousTimestampS,o*this.predictionTimeS);return this.deltaQ.setFromAxisAngle(n,s),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(t),this.previousTimestampS=r,this.outQ},t.exports=n},function(t,e){function r(t,e){this.set(t,e)}r.prototype.set=function(t,e){this.sample=t,this.timestampS=e},r.prototype.copy=function(t){this.set(t.sample,t.timestampS)},t.exports=r},function(t,e,r){function n(){window.addEventListener("touchstart",this.onTouchStart_.bind(this)),window.addEventListener("touchmove",this.onTouchMove_.bind(this)),window.addEventListener("touchend",this.onTouchEnd_.bind(this)),this.isTouching=!1,this.rotateStart=new i.Vector2,this.rotateEnd=new i.Vector2,this.rotateDelta=new i.Vector2,this.theta=0,this.orientation=new i.Quaternion}var i=r(83),a=r(21);n.prototype.getOrientation=function(){return this.orientation.setFromEulerXYZ(0,0,this.theta),this.orientation},n.prototype.resetSensor=function(){this.theta=0},n.prototype.onTouchStart_=function(t){t.touches&&1==t.touches.length&&(this.rotateStart.set(t.touches[0].pageX,t.touches[0].pageY),this.isTouching=!0)},n.prototype.onTouchMove_=function(t){if(this.isTouching){this.rotateEnd.set(t.touches[0].pageX,t.touches[0].pageY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd),a.isIOS()&&(this.rotateDelta.x*=-1);var e=document.body;this.theta+=2*Math.PI*this.rotateDelta.x/e.clientWidth*.5}},n.prototype.onTouchEnd_=function(t){this.isTouching=!1},t.exports=n},function(t,e,r){function n(){try{this.selectedKey=localStorage.getItem(o)}catch(t){console.error("Failed to load viewer profile: %s",t)}this.selectedKey||(this.selectedKey=a),this.dialog=this.createDialog_(i.Viewers),this.root=null,this.onChangeCallbacks_=[]}var i=r(257),a=(r(21),"CardboardV1"),o="WEBVR_CARDBOARD_VIEWER";n.prototype.show=function(t){this.root=t,t.appendChild(this.dialog),this.dialog.querySelector("#"+this.selectedKey).checked=!0,this.dialog.style.display="block"},n.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},n.prototype.getCurrentViewer=function(){return i.Viewers[this.selectedKey]},n.prototype.getSelectedKey_=function(){var t=this.dialog.querySelector("input[name=field]:checked");return t?t.id:null},n.prototype.onChange=function(t){this.onChangeCallbacks_.push(t)},n.prototype.fireOnChange_=function(t){for(var e=0;e<this.onChangeCallbacks_.length;e++)this.onChangeCallbacks_[e](t)},n.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),!this.selectedKey||!i.Viewers[this.selectedKey])return void console.error("ViewerSelector.onSave_: this should never happen!");this.fireOnChange_(i.Viewers[this.selectedKey]);try{localStorage.setItem(o,this.selectedKey)}catch(t){console.error("Failed to save viewer profile: %s",t)}this.hide()},n.prototype.createDialog_=function(t){var e=document.createElement("div");e.classList.add("webvr-polyfill-viewer-selector"),e.style.display="none";var r=document.createElement("div"),n=r.style;n.position="fixed",n.left=0,n.top=0,n.width="100%",n.height="100%",n.background="rgba(0, 0, 0, 0.3)",r.addEventListener("click",this.hide.bind(this));var i=document.createElement("div"),n=i.style;n.boxSizing="border-box",n.position="fixed",n.top="24px",n.left="50%",n.marginLeft="-140px",n.width="280px",n.padding="24px",n.overflow="hidden",n.background="#fafafa",n.fontFamily="'Roboto', sans-serif",n.boxShadow="0px 5px 20px #666",i.appendChild(this.createH1_("Select your viewer"));for(var a in t)i.appendChild(this.createChoice_(a,t[a].label));return i.appendChild(this.createButton_("Save",this.onSave_.bind(this))),e.appendChild(r),e.appendChild(i),e},n.prototype.createH1_=function(t){var e=document.createElement("h1"),r=e.style;return r.color="black",r.fontSize="20px",r.fontWeight="bold",r.marginTop=0,r.marginBottom="24px",e.innerHTML=t,e},n.prototype.createChoice_=function(t,e){var r=document.createElement("div");r.style.marginTop="8px",r.style.color="black";var n=document.createElement("input");n.style.fontSize="30px",n.setAttribute("id",t),n.setAttribute("type","radio"),n.setAttribute("value",t),n.setAttribute("name","field");var i=document.createElement("label");return i.style.marginLeft="4px",i.setAttribute("for",t),i.innerHTML=e,r.appendChild(n),r.appendChild(i),r},n.prototype.createButton_=function(t,e){var r=document.createElement("button");r.innerHTML=t;var n=r.style;return n.float="right",n.textTransform="uppercase",n.color="#1094f7",n.fontSize="14px",n.letterSpacing=0,n.border=0,n.background="none",n.marginTop="16px",r.addEventListener("click",e),r},t.exports=n},function(t,e,r){function n(){function t(t,e,r){var n=document.createElement("source");n.src=r,n.type="video/"+e,t.appendChild(n)}var e=document.createElement("video");e.setAttribute("loop",""),t(e,"webm",a.base64("video/webm","GkXfo0AgQoaBAUL3gQFC8oEEQvOBCEKCQAR3ZWJtQoeBAkKFgQIYU4BnQI0VSalmQCgq17FAAw9CQE2AQAZ3aGFtbXlXQUAGd2hhbW15RIlACECPQAAAAAAAFlSua0AxrkAu14EBY8WBAZyBACK1nEADdW5khkAFVl9WUDglhohAA1ZQOIOBAeBABrCBCLqBCB9DtnVAIueBAKNAHIEAAIAwAQCdASoIAAgAAUAmJaQAA3AA/vz0AAA=")),t(e,"mp4",a.base64("video/mp4","AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAAG21kYXQAAAGzABAHAAABthADAowdbb9/AAAC6W1vb3YAAABsbXZoZAAAAAB8JbCAfCWwgAAAA+gAAAAAAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAIVdHJhawAAAFx0a2hkAAAAD3wlsIB8JbCAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAIAAAACAAAAAABsW1kaWEAAAAgbWRoZAAAAAB8JbCAfCWwgAAAA+gAAAAAVcQAAAAAAC1oZGxyAAAAAAAAAAB2aWRlAAAAAAAAAAAAAAAAVmlkZW9IYW5kbGVyAAAAAVxtaW5mAAAAFHZtaGQAAAABAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAAEcc3RibAAAALhzdHNkAAAAAAAAAAEAAACobXA0dgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAIAAgASAAAAEgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABj//wAAAFJlc2RzAAAAAANEAAEABDwgEQAAAAADDUAAAAAABS0AAAGwAQAAAbWJEwAAAQAAAAEgAMSNiB9FAEQBFGMAAAGyTGF2YzUyLjg3LjQGAQIAAAAYc3R0cwAAAAAAAAABAAAAAQAAAAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAEAAAABAAAAFHN0c3oAAAAAAAAAEwAAAAEAAAAUc3RjbwAAAAAAAAABAAAALAAAAGB1ZHRhAAAAWG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAK2lsc3QAAAAjqXRvbwAAABtkYXRhAAAAAQAAAABMYXZmNTIuNzguMw==")),this.request=function(){e.paused&&e.play()},this.release=function(){e.pause()}}function i(){var t=null;this.request=function(){t||(t=setInterval(function(){window.location=window.location,setTimeout(window.stop,0)},3e4))},this.release=function(){t&&(clearInterval(t),t=null)}}var a=r(21);t.exports=function(){var t=navigator.userAgent||navigator.vendor||window.opera;return t.match(/iPhone/i)||t.match(/iPod/i)?i:n}()},function(t,e,r){function n(){this.displays=[],this.devices=[],this.devicesPopulated=!1,this.nativeWebVRAvailable=this.isWebVRAvailable(),this.nativeLegacyWebVRAvailable=this.isDeprecatedWebVRAvailable(),this.nativeGetVRDisplaysFunc=this.nativeWebVRAvailable?navigator.getVRDisplays:null,this.nativeLegacyWebVRAvailable||(this.enablePolyfill(),window.WebVRConfig.ENABLE_DEPRECATED_API&&this.enableDeprecatedPolyfill()),i()}function i(){"VRDisplay"in window&&!("VRFrameData"in window)&&(window.VRFrameData=l,"depthNear"in window.VRDisplay.prototype||(window.VRDisplay.prototype.depthNear=.01),"depthFar"in window.VRDisplay.prototype||(window.VRDisplay.prototype.depthFar=1e4),window.VRDisplay.prototype.getFrameData=function(t){return a.frameDataFromPose(t,this.getPose(),this)})}var a=r(21),o=r(586),s=r(591),u=r(47).VRDisplay,l=r(47).VRFrameData,c=r(47).HMDVRDevice,h=r(47).PositionSensorVRDevice,f=r(258).VRDisplayHMDDevice,d=r(258).VRDisplayPositionSensorDevice,p=r(584).version;n.prototype.isWebVRAvailable=function(){return"getVRDisplays"in navigator},n.prototype.isDeprecatedWebVRAvailable=function(){return"getVRDevices"in navigator||"mozGetVRDevices"in navigator},n.prototype.connectDisplay=function(t){t.fireVRDisplayConnect_(),this.displays.push(t)},n.prototype.populateDevices=function(){if(!this.devicesPopulated){var t=null;this.isCardboardCompatible()&&(t=new o,this.connectDisplay(t),window.WebVRConfig.ENABLE_DEPRECATED_API&&(this.devices.push(new f(t)),this.devices.push(new d(t)))),this.isMobile()||window.WebVRConfig.MOUSE_KEYBOARD_CONTROLS_DISABLED||(t=new s,this.connectDisplay(t),window.WebVRConfig.ENABLE_DEPRECATED_API&&(this.devices.push(new f(t)),this.devices.push(new d(t)))),this.devicesPopulated=!0}},n.prototype.enablePolyfill=function(){if(navigator.getVRDisplays=this.getVRDisplays.bind(this),this.nativeWebVRAvailable&&window.VRFrameData){var t=new window.VRFrameData,e=window.VRDisplay.prototype.getFrameData;window.VRFrameData=l,window.VRDisplay.prototype.getFrameData=function(r){e.call(this,t),r.pose=t.pose,a.copyArray(t.leftProjectionMatrix,r.leftProjectionMatrix),a.copyArray(t.rightProjectionMatrix,r.rightProjectionMatrix),a.copyArray(t.leftViewMatrix,r.leftViewMatrix),a.copyArray(t.rightViewMatrix,r.rightViewMatrix)}}if(window.VRDisplay=u,navigator&&!navigator.vrEnabled){var r=this;Object.defineProperty(navigator,"vrEnabled",{get:function(){return r.isCardboardCompatible()&&(r.isFullScreenAvailable()||a.isIOS())}})}"VRFrameData"in window||(window.VRFrameData=l)},n.prototype.enableDeprecatedPolyfill=function(){navigator.getVRDevices=this.getVRDevices.bind(this),window.HMDVRDevice=c,window.PositionSensorVRDevice=h},n.prototype.getVRDisplays=function(){this.populateDevices();var t=this.displays;if(!this.nativeWebVRAvailable)return Promise.resolve(t);var e,r=this.nativeGetVRDisplaysFunc.call(navigator),n=new Promise(function(t){e=setTimeout(function(){console.warn("Native WebVR implementation detected, but `getVRDisplays()` failed to resolve. Falling back to polyfill."),t([])},window.WebVRConfig.GET_VR_DISPLAYS_TIMEOUT)});return a.race([r,n]).then(function(r){return clearTimeout(e),window.WebVRConfig.ALWAYS_APPEND_POLYFILL_DISPLAY?r.concat(t):r.length>0?r:t})},n.prototype.getVRDevices=function(){console.warn("getVRDevices is deprecated. Please update your code to use getVRDisplays instead.");var t=this;return new Promise(function(e,r){try{if(!t.devicesPopulated){if(t.nativeWebVRAvailable)return navigator.getVRDisplays(function(r){for(var n=0;n<r.length;++n)t.devices.push(new f(r[n])),t.devices.push(new d(r[n]));t.devicesPopulated=!0,e(t.devices)},r);if(t.nativeLegacyWebVRAvailable)return(navigator.getVRDDevices||navigator.mozGetVRDevices)(function(r){for(var n=0;n<r.length;++n)r[n]instanceof c&&t.devices.push(r[n]),r[n]instanceof h&&t.devices.push(r[n]);t.devicesPopulated=!0,e(t.devices)},r)}t.populateDevices(),e(t.devices)}catch(t){r(t)}})},n.prototype.isMobile=function(){return/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)},n.prototype.isCardboardCompatible=function(){return this.isMobile()||window.WebVRConfig.FORCE_ENABLE_VR},n.prototype.isFullScreenAvailable=function(){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||!1},n.version=p,t.exports.WebVRPolyfill=n},function(t,e,r){function n(t){return!!(t&&t.constructor&&t.call&&t.apply)}function i(t,e){return A(function(e,r){r(t(e.val))},[e])}function a(t,e){return A(function(e){t(e.val)},[e])}function o(t){return i(t,this)}function s(t){var e=this;return A(function(t,e,r){r(t.val(e.val))},[e,t])}function u(t){return t.depsMet=t.deps.every(function(t){return t.hasVal}),!t.depsMet}function l(t){if(!(!0!==t.depsMet&&u(t)||void 0!==t.end&&!0===t.end.val)){if(void 0!==N)return void L.push(t);N=t,t.depsChanged&&(t.fnArgs[t.fnArgs.length-1]=t.depsChanged);var e=t.fn.apply(t.fn,t.fnArgs);void 0!==e&&t(e),N=void 0,void 0!==t.depsChanged&&(t.depsChanged=[]),t.shouldUpdate=!1,!1===j&&f()}}function c(t){var e,r=t.listeners;if(!1===t.queued){for(t.queued=!0,e=0;e<r.length;++e)c(r[e]);R[++z]=t}}function h(t){var e,r,n,i=t.listeners;for(e=0;e<i.length;++e)n=i[e],n.end===t?T(n):(void 0!==n.depsChanged&&n.depsChanged.push(t),n.shouldUpdate=!0,c(n));for(;z>=0;--z)r=R[z],!0===r.shouldUpdate&&l(r),r.queued=!1}function f(){for(j=!0;L.length>0;){var t=L.shift();t.vals.length>0&&(t.val=t.vals.shift()),h(t)}j=!1}function d(t){return n(t)&&"hasVal"in t}function p(){return"stream("+this.val+")"}function m(t,e){if(void 0!==e&&null!==e&&n(e.then))return void e.then(t);t.val=e,t.hasVal=!0,void 0===N?(j=!0,h(t),L.length>0?f():j=!1):N===t?g(t,t.listeners):(t.vals.push(e),L.push(t))}function g(t,e){var r,n;for(r=0;r<e.length;++r)n=e[r],n.end!==t?(void 0!==n.depsChanged&&n.depsChanged.push(t),n.shouldUpdate=!0):T(n)}function v(){function t(e){return arguments.length>0?(m(t,e),t):t.val}return t.hasVal=!1,t.val=void 0,t.vals=[],t.listeners=[],t.queued=!1,t.end=void 0,t.map=o,t.ap=s,t.of=_,t.toString=p,t}function y(t,e){for(var r=0;r<t.length;++r)t[r].listeners.push(e)}function M(t,e){var r=v();return r.fn=e,r.deps=t,r.depsMet=!1,r.depsChanged=t.length>0?[]:void 0,r.shouldUpdate=!1,y(t,r),r}function w(t){return!1===t.depsMet&&(t.depsMet=!0,l(t)),t}function x(t,e){e[e.indexOf(t)]=e[e.length-1],e.length--}function b(t){for(var e=0;e<t.deps.length;++e)x(t,t.deps[e].listeners);t.deps.length=0}function T(t){void 0!==t.deps&&b(t),void 0!==t.end&&b(t.end)}function E(t,e){return b(e.end),t.listeners.push(e.end),e.end.deps.push(t),e}function S(){return!0}function _(t){var e=M([],S),r=v();return r.end=e,r.fnArgs=[],e.listeners.push(r),arguments.length>0&&r(t),r}function A(t,e){var r,n,i,a,o=M([],S);for(i=[],a=[],r=0;r<e.length;++r)void 0!==e[r]&&(i.push(e[r]),void 0!==e[r].end&&a.push(e[r].end));return n=M(i,t),n.depsChanged=[],n.fnArgs=n.deps.concat([n,n.depsChanged]),n.end=o,o.listeners.push(n),y(a,o),o.deps=a,l(n),n}function D(){}var N,I=r(604).curryN,L=[],C=I(3,function(t,e,r){var n=A(function(r,n){n(e=t(e,r.val))},[r]);return n.hasVal||n(e),n}),O=I(2,function(t,e){var r=w(A(function(t,e,r,n){n[0]?r(n[0]()):t.hasVal?r(t.val):e.hasVal&&r(e.val)},[t,e]));return E(A(function(){return!0},[t.end,e.end]),r),r}),R=[],z=-1,j=!1,P=I(2,function(t,e){return t=t(new D),A(function(e,r){var n=t["@@transducer/step"](void 0,e.val);return n&&!0===n["@@transducer/reduced"]?(r.end(!0),n["@@transducer/value"]):n},[e])});D.prototype["@@transducer/init"]=function(){},D.prototype["@@transducer/result"]=function(){},D.prototype["@@transducer/step"]=function(t,e){return e},t.exports={stream:_,combine:I(2,A),isStream:d,transduce:P,merge:O,scan:C,endsOn:E,map:I(2,i),on:I(2,a),curryN:I,immediate:w}},function(t,e){var r=r||{};r.OutWindow=function(){this._windowSize=0},r.OutWindow.prototype.create=function(t){this._buffer&&this._windowSize===t||(this._buffer=[]),this._windowSize=t,this._pos=0,this._streamPos=0},r.OutWindow.prototype.flush=function(){var t=this._pos-this._streamPos;if(0!==t){for(;t--;)this._stream.writeByte(this._buffer[this._streamPos++]);this._pos>=this._windowSize&&(this._pos=0),this._streamPos=this._pos}},r.OutWindow.prototype.releaseStream=function(){this.flush(),this._stream=null},r.OutWindow.prototype.setStream=function(t){this.releaseStream(),this._stream=t},r.OutWindow.prototype.init=function(t){t||(this._streamPos=0,this._pos=0)},r.OutWindow.prototype.copyBlock=function(t,e){var r=this._pos-t-1;for(r<0&&(r+=this._windowSize);e--;)r>=this._windowSize&&(r=0),this._buffer[this._pos++]=this._buffer[r++],this._pos>=this._windowSize&&this.flush()},r.OutWindow.prototype.putByte=function(t){this._buffer[this._pos++]=t,this._pos>=this._windowSize&&this.flush()},r.OutWindow.prototype.getByte=function(t){var e=this._pos-t-1;return e<0&&(e+=this._windowSize),this._buffer[e]},r.RangeDecoder=function(){},r.RangeDecoder.prototype.setStream=function(t){this._stream=t},r.RangeDecoder.prototype.releaseStream=function(){this._stream=null},r.RangeDecoder.prototype.init=function(){var t=5;for(this._code=0,this._range=-1;t--;)this._code=this._code<<8|this._stream.readByte()},r.RangeDecoder.prototype.decodeDirectBits=function(t){for(var e,r=0,n=t;n--;)this._range>>>=1,e=this._code-this._range>>>31,this._code-=this._range&e-1,r=r<<1|1-e,0==(4278190080&this._range)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8);return r},r.RangeDecoder.prototype.decodeBit=function(t,e){var r=t[e],n=(this._range>>>11)*r;return(2147483648^this._code)<(2147483648^n)?(this._range=n,t[e]+=2048-r>>>5,0==(4278190080&this._range)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),0):(this._range-=n,this._code-=n,t[e]-=r>>>5,0==(4278190080&this._range)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),1)},r.initBitModels=function(t,e){for(;e--;)t[e]=1024},r.BitTreeDecoder=function(t){this._models=[],this._numBitLevels=t},r.BitTreeDecoder.prototype.init=function(){r.initBitModels(this._models,1<<this._numBitLevels)},r.BitTreeDecoder.prototype.decode=function(t){for(var e=1,r=this._numBitLevels;r--;)e=e<<1|t.decodeBit(this._models,e);return e-(1<<this._numBitLevels)},r.BitTreeDecoder.prototype.reverseDecode=function(t){for(var e,r=1,n=0,i=0;i<this._numBitLevels;++i)e=t.decodeBit(this._models,r),r=r<<1|e,n|=e<<i;return n},r.reverseDecode2=function(t,e,r,n){for(var i,a=1,o=0,s=0;s<n;++s)i=r.decodeBit(t,e+a),a=a<<1|i,o|=i<<s;return o},r.LenDecoder=function(){this._choice=[],this._lowCoder=[],this._midCoder=[],this._highCoder=new r.BitTreeDecoder(8),this._numPosStates=0},r.LenDecoder.prototype.create=function(t){for(;this._numPosStates<t;++this._numPosStates)this._lowCoder[this._numPosStates]=new r.BitTreeDecoder(3),this._midCoder[this._numPosStates]=new r.BitTreeDecoder(3)},r.LenDecoder.prototype.init=function(){var t=this._numPosStates;for(r.initBitModels(this._choice,2);t--;)this._lowCoder[t].init(),this._midCoder[t].init();this._highCoder.init()},r.LenDecoder.prototype.decode=function(t,e){return 0===t.decodeBit(this._choice,0)?this._lowCoder[e].decode(t):0===t.decodeBit(this._choice,1)?8+this._midCoder[e].decode(t):16+this._highCoder.decode(t)},r.Decoder2=function(){this._decoders=[]},r.Decoder2.prototype.init=function(){r.initBitModels(this._decoders,768)},r.Decoder2.prototype.decodeNormal=function(t){var e=1;do{e=e<<1|t.decodeBit(this._decoders,e)}while(e<256);return 255&e},r.Decoder2.prototype.decodeWithMatchByte=function(t,e){var r,n,i=1;do{if(r=e>>7&1,e<<=1,n=t.decodeBit(this._decoders,(1+r<<8)+i),i=i<<1|n,r!==n){for(;i<256;)i=i<<1|t.decodeBit(this._decoders,i);break}}while(i<256);return 255&i},r.LiteralDecoder=function(){},r.LiteralDecoder.prototype.create=function(t,e){var n;if(!this._coders||this._numPrevBits!==e||this._numPosBits!==t)for(this._numPosBits=t,this._posMask=(1<<t)-1,this._numPrevBits=e,this._coders=[],n=1<<this._numPrevBits+this._numPosBits;n--;)this._coders[n]=new r.Decoder2},r.LiteralDecoder.prototype.init=function(){for(var t=1<<this._numPrevBits+this._numPosBits;t--;)this._coders[t].init()},r.LiteralDecoder.prototype.getDecoder=function(t,e){return this._coders[((t&this._posMask)<<this._numPrevBits)+((255&e)>>>8-this._numPrevBits)]},r.Decoder=function(){this._outWindow=new r.OutWindow,this._rangeDecoder=new r.RangeDecoder,this._isMatchDecoders=[],this._isRepDecoders=[],this._isRepG0Decoders=[],this._isRepG1Decoders=[],this._isRepG2Decoders=[],this._isRep0LongDecoders=[],this._posSlotDecoder=[],this._posDecoders=[],this._posAlignDecoder=new r.BitTreeDecoder(4),this._lenDecoder=new r.LenDecoder,this._repLenDecoder=new r.LenDecoder,this._literalDecoder=new r.LiteralDecoder,this._dictionarySize=-1,this._dictionarySizeCheck=-1,this._posSlotDecoder[0]=new r.BitTreeDecoder(6),this._posSlotDecoder[1]=new r.BitTreeDecoder(6),this._posSlotDecoder[2]=new r.BitTreeDecoder(6),this._posSlotDecoder[3]=new r.BitTreeDecoder(6)},r.Decoder.prototype.setDictionarySize=function(t){return!(t<0)&&(this._dictionarySize!==t&&(this._dictionarySize=t,this._dictionarySizeCheck=Math.max(this._dictionarySize,1),this._outWindow.create(Math.max(this._dictionarySizeCheck,4096))),!0)},r.Decoder.prototype.setLcLpPb=function(t,e,r){var n=1<<r;return!(t>8||e>4||r>4)&&(this._literalDecoder.create(e,t),this._lenDecoder.create(n),this._repLenDecoder.create(n),this._posStateMask=n-1,!0)},r.Decoder.prototype.init=function(){var t=4;for(this._outWindow.init(!1),r.initBitModels(this._isMatchDecoders,192),r.initBitModels(this._isRep0LongDecoders,192),r.initBitModels(this._isRepDecoders,12),r.initBitModels(this._isRepG0Decoders,12),r.initBitModels(this._isRepG1Decoders,12),r.initBitModels(this._isRepG2Decoders,12),r.initBitModels(this._posDecoders,114),this._literalDecoder.init();t--;)this._posSlotDecoder[t].init();this._lenDecoder.init(),this._repLenDecoder.init(),this._posAlignDecoder.init(),this._rangeDecoder.init()},r.Decoder.prototype.decode=function(t,e,n){var i,a,o,s,u,l,c=0,h=0,f=0,d=0,p=0,m=0,g=0;for(this._rangeDecoder.setStream(t),this._outWindow.setStream(e),this.init();n<0||m<n;)if(i=m&this._posStateMask,0===this._rangeDecoder.decodeBit(this._isMatchDecoders,(c<<4)+i))a=this._literalDecoder.getDecoder(m++,g),g=c>=7?a.decodeWithMatchByte(this._rangeDecoder,this._outWindow.getByte(h)):a.decodeNormal(this._rangeDecoder),this._outWindow.putByte(g),c=c<4?0:c-(c<10?3:6);else{if(1===this._rangeDecoder.decodeBit(this._isRepDecoders,c))o=0,0===this._rangeDecoder.decodeBit(this._isRepG0Decoders,c)?0===this._rangeDecoder.decodeBit(this._isRep0LongDecoders,(c<<4)+i)&&(c=c<7?9:11,o=1):(0===this._rangeDecoder.decodeBit(this._isRepG1Decoders,c)?s=f:(0===this._rangeDecoder.decodeBit(this._isRepG2Decoders,c)?s=d:(s=p,p=d),d=f),f=h,h=s),0===o&&(o=2+this._repLenDecoder.decode(this._rangeDecoder,i),c=c<7?8:11);else if(p=d,d=f,f=h,o=2+this._lenDecoder.decode(this._rangeDecoder,i),c=c<7?7:10,(u=this._posSlotDecoder[o<=5?o-2:3].decode(this._rangeDecoder))>=4){if(l=(u>>1)-1,h=(2|1&u)<<l,u<14)h+=r.reverseDecode2(this._posDecoders,h-u-1,this._rangeDecoder,l);else if(h+=this._rangeDecoder.decodeDirectBits(l-4)<<4,(h+=this._posAlignDecoder.reverseDecode(this._rangeDecoder))<0){if(-1===h)break;return!1}}else h=u;if(h>=m||h>=this._dictionarySizeCheck)return!1;this._outWindow.copyBlock(h,o),m+=o,g=this._outWindow.getByte(0)}return this._outWindow.flush(),this._outWindow.releaseStream(),this._rangeDecoder.releaseStream(),!0},r.Decoder.prototype.setDecoderProperties=function(t){var e,r,n,i,a;return!(t.size<5)&&(e=t.readByte(),r=e%9,e=~~(e/9),n=e%5,i=~~(e/5),!!this.setLcLpPb(r,n,i)&&(a=t.readByte(),a|=t.readByte()<<8,a|=t.readByte()<<16,a+=16777216*t.readByte(),this.setDictionarySize(a)))},r.decompress=function(t,e,n,i){var a=new r.Decoder;if(!a.setDecoderProperties(t))throw"Incorrect stream properties";if(!a.decode(e,n,i))throw"Error in data stream";return!0},r.decompressFile=function(t,e){var n,i=new r.Decoder;if(!i.setDecoderProperties(t))throw"Incorrect stream properties";if(n=t.readByte(),n|=t.readByte()<<8,n|=t.readByte()<<16,n+=16777216*t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),!i.decode(t,e,n))throw"Error in data stream";return!0},t.exports=r},function(t,e,r){(function(){"use strict";var e=function(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,r){return e.apply(this,arguments)};case 3:return function(t,r,n){return e.apply(this,arguments)};case 4:return function(t,r,n,i){return e.apply(this,arguments)};case 5:return function(t,r,n,i,a){return e.apply(this,arguments)};case 6:return function(t,r,n,i,a,o){return e.apply(this,arguments)};case 7:return function(t,r,n,i,a,o,s){return e.apply(this,arguments)};case 8:return function(t,r,n,i,a,o,s,u){return e.apply(this,arguments)};case 9:return function(t,r,n,i,a,o,s,u,l){return e.apply(this,arguments)};case 10:return function(t,r,n,i,a,o,s,u,l,c){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}},r=function(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]},n=function(t){return function e(n){return 0===arguments.length||r(n)?e:t.apply(this,arguments)}},i=function t(n,i,a){return function(){for(var o=[],s=0,u=n,l=0;l<i.length||s<arguments.length;){var c;l<i.length&&(!r(i[l])||s>=arguments.length)?c=i[l]:(c=arguments[s],s+=1),o[l]=c,r(c)||(u-=1),l+=1}return u<=0?a.apply(this,o):e(u,t(n,o,a))}},a=function(t){return function e(i,a){switch(arguments.length){case 0:return e;case 1:return r(i)?e:n(function(e){return t(i,e)});default:return r(i)&&r(a)?e:r(i)?n(function(e){return t(e,a)}):r(a)?n(function(e){return t(i,e)}):t(i,a)}}}(function(t,r){return 1===t?n(r):e(t,i(t,[],r))}),o={curryN:a};t.exports=o}).call(this)},function(t,e,r){(function(e){!function(){function t(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var r=Object.prototype.toString.call(t);if("[object Window]"==r)return"object";if("[object Array]"==r||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==r||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function r(t,e){var r=t.split("."),n=re;r[0]in n||!n.execScript||n.execScript("var "+r[0]);for(var i;r.length&&(i=r.shift());)r.length||void 0===e?n=n[i]?n[i]:n[i]={}:n[i]=e}function n(t,e){this.v=0|t,this.j=0|e}function i(t){if(-128<=t&&128>t){var e=ne[t];if(e)return e}return e=new n(0|t,0>t?-1:0),-128<=t&&128>t&&(ne[t]=e),e}function a(t){return isNaN(t)||!isFinite(t)?t=u():t<=-ae?t=h():t+1>=ae?($t||($t=o(-1,2147483647)),t=$t):t=0>t?v(a(-t)):new n(t%ie|0,t/ie|0),t}function o(t,e){return new n(t,e)}function s(t,e){if(0==t.length)throw Error("number format error: empty string");var r=e||10;if(2>r||36<r)throw Error("radix out of range: "+r);if("-"==t.charAt(0))return v(s(t.substring(1),r));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character: '+t);for(var n=a(Math.pow(r,8)),i=u(),o=0;o<t.length;o+=8){var l=Math.min(8,t.length-o),c=parseInt(t.substring(o,o+l),r);8>l?(l=a(Math.pow(r,l)),i=M(i,l).add(a(c))):(i=M(i,n),i=i.add(a(c)))}return i}function u(){return Zt||(Zt=i(0)),Zt}function l(){return Kt||(Kt=i(1)),Kt}function c(){return Jt||(Jt=i(-1)),Jt}function h(){return te||(te=o(0,-2147483648)),te}function f(){return ee||(ee=i(16777216)),ee}function d(t){return t.j*ie+(0<=t.v?t.v:ie+t.v)}function p(t){return 0==t.j&&0==t.v}function m(t,e){return t.j==e.j&&t.v==e.v}function g(t,e){if(m(t,e))return 0;var r=0>t.j,n=0>e.j;return r&&!n?-1:!r&&n?1:0>y(t,e).j?-1:1}function v(t){return m(t,h())?h():o(~t.v,~t.j).add(l())}function y(t,e){return t.add(v(e))}function M(t,e){if(p(t)||p(e))return u();if(m(t,h()))return 1==(1&e.v)?h():u();if(m(e,h()))return 1==(1&t.v)?h():u();if(0>t.j)return 0>e.j?M(v(t),v(e)):v(M(v(t),e));if(0>e.j)return v(M(t,v(e)));var r=f();if((r=0>g(t,r))&&(r=f(),r=0>g(e,r)),r)return a(d(t)*d(e));var n,i,s,l,r=t.j>>>16,c=65535&t.j,y=t.v>>>16,w=65535&t.v,x=e.j>>>16,b=65535&e.j,T=e.v>>>16,E=65535&e.v;return l=0+w*E,s=0+(l>>>16),s+=y*E,i=0+(s>>>16),s=(65535&s)+w*T,i+=s>>>16,s&=65535,i+=c*E,n=0+(i>>>16),i=(65535&i)+y*T,n+=i>>>16,i&=65535,i+=w*b,n+=i>>>16,i&=65535,n=n+(r*E+c*T+y*b+w*x)&65535,o(s<<16|65535&l,n<<16|i)}function w(t,e){if(p(e))throw Error("division by zero");if(p(t))return u();if(m(t,h())){if(m(e,l())||m(e,c()))return h();if(m(e,h()))return l();var r;if(0==(r=1))r=t;else{var n=t.j;r=32>r?o(t.v>>>r|n<<32-r,n>>r):o(n>>r-32,0<=n?0:-1)}return r=x(w(r,e),1),m(r,u())?0>e.j?l():c():(n=y(t,M(e,r)),r.add(w(n,e)))}if(m(e,h()))return u();if(0>t.j)return 0>e.j?w(v(t),v(e)):v(w(v(t),e));if(0>e.j)return v(w(t,v(e)));for(var i=u(),n=t;0<=g(n,e);){r=Math.max(1,Math.floor(d(n)/d(e)));for(var s=Math.ceil(Math.log(r)/Math.LN2),s=48>=s?1:Math.pow(2,s-48),f=a(r),b=M(f,e);0>b.j||0<g(b,n);)r-=s,f=a(r),b=M(f,e);p(f)&&(f=l()),i=i.add(f),n=y(n,b)}return i}function x(t,e){if(0==(e&=63))return t;var r=t.v;return 32>e?o(r<<e,t.j<<e|r>>>32-e):o(0,r<<e-32)}function b(t,e){if(0==(e&=63))return t;var r=t.j;return 32>e?o(t.v>>>e|r<<32-e,r>>>e):32==e?o(r,0):o(r>>>e-32,0)}function T(t,e){if(3<t.length){if(e)return!0;var r=t.charAt(1);return"~"===t.charAt(0)&&(":"===r||"$"===r||"#"===r)}return!1}function E(t){var e=Math.floor(t/44);return t=String.fromCharCode(t%44+48),0===e?"^"+t:"^"+String.fromCharCode(e+48)+t}function S(){this.a=this.s=0,this.g={}}function _(){this.s=0,this.a=[]}function A(){return Math.round(15*Math.random()).toString(16)}function D(){var t=(8|3&Math.round(14*Math.random())).toString(16);return A()+A()+A()+A()+A()+A()+A()+A()+"-"+A()+A()+A()+A()+"-4"+A()+A()+A()+"-"+t+A()+A()+A()+"-"+A()+A()+A()+A()+A()+A()+A()+A()+A()+A()+A()+A()}function N(t,e){if(null==t)return null==e;if(t===e)return!0;if("object"==typeof t){if(se(t)){if(se(e)&&t.length===e.length){for(var r=0;r<t.length;r++)if(!N(t[r],e[r]))return!1;return!0}return!1}if(t.C)return t.C(e);if(null!=e&&"object"==typeof e){if(e.C)return e.C(t);var n,r=0,i=oe(e).length;for(n in t)if(t.hasOwnProperty(n)&&(r++,!e.hasOwnProperty(n)||!N(t[n],e[n])))return!1;return r===i}}return!1}function I(t,e){return t^e+2654435769+(t<<6)+(t>>2)}function L(t){var e=0;if(null!=t.forEach)t.forEach(function(t,r){e=(e+(O(r)^O(t)))%4503599627370496});else for(var r=oe(t),n=0;n<r.length;n++)var i=r[n],a=t[i],e=(e+(O(i)^O(a)))%4503599627370496;return e}function C(t){var e=0;if(se(t))for(var r=0;r<t.length;r++)e=I(e,O(t[r]));else t.forEach&&t.forEach(function(t){e=I(e,O(t))});return e}function O(t){if(null==t)return 0;switch(typeof t){case"number":return t;case"boolean":return!0===t?1:0;case"string":var e=le[t];if(null==e){for(var r=e=0;r<t.length;++r)e=31*e+t.charCodeAt(r),e%=4294967296;ce++,256<=ce&&(le={},ce=1),le[t]=e}return t=e;case"function":return(e=t.transit$hashCode$)?e:(e=ue,void 0!==Object.defineProperty?Object.defineProperty(t,"transit$hashCode$",{value:e,enumerable:!1}):t.transit$hashCode$=e,ue++,e);default:return t instanceof Date?t.valueOf():se(t)?C(t):t.D?t.D():L(t)}}function R(t,e){this.tag=t,this.rep=e,this.a=-1}function z(t,e){return new R(t,e)}function j(t){return"number"==typeof t?t:t instanceof n?t:(t=s(t,10),0<g(t,fe)||0>g(t,de)?t:d(t))}function P(t){return z("n",t)}function U(t){return z("f",t)}function B(t){this.w=t,this.a=-1}function V(t){return new B(t)}function F(t){this.w=t,this.a=-1}function k(t){return new F(t)}function G(t,e,r){var n="";r=r||e+1;for(var a=8*(7-e),s=x(i(255),a);e<r;e++,a-=8,s=b(s,8)){var u=b(o(t.v&s.v,t.j&s.j),a).toString(16);1==u.length&&(u="0"+u),n+=u}return n}function Y(t,e){this.g=t,this.o=e,this.a=-1}function H(t){t=t.replace(/-/g,"");for(var e=null,r=null,n=r=0,i=24,a=0,a=r=0,i=24;8>a;a+=2,i-=8)r|=parseInt(t.substring(a,a+2),16)<<i;for(n=0,a=8,i=24;16>a;a+=2,i-=8)n|=parseInt(t.substring(a,a+2),16)<<i;for(e=o(n,r),r=0,a=16,i=24;24>a;a+=2,i-=8)r|=parseInt(t.substring(a,a+2),16)<<i;for(n=0,i=a=24;32>a;a+=2,i-=8)n|=parseInt(t.substring(a,a+2),16)<<i;return r=o(n,r),new Y(e,r)}function Q(t){return t="number"==typeof t?t:parseInt(t,10),new Date(t)}function W(t,r){var n;if(r&&!1===r.O||void 0===e)if("undefined"!=typeof Uint8Array){if("undefined"!=typeof atob)n=atob(t);else{if(n=String(t).replace(/=+$/,""),1==n.length%4)throw Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,a,o=0,s=0,u="";a=n.charAt(s++);~a&&(i=o%4?64*i+a:a,o++%4)?u+=String.fromCharCode(255&i>>(-2*o&6)):0)a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a);n=u}for(o=n.length,i=new Uint8Array(o),a=0;a<o;a++)i[a]=n.charCodeAt(a);n=i}else n=z("b",t);else n=new e(t,"base64");return n}function X(t){return z("r",t)}function q(t,e){this.a=t,this.type=e||0,this.s=0}function Z(t,e){this.map=t,this.type=e||0,this.keys=it(this.map),this.s=0,this.g=null,this.a=0}function K(t,e){if(t instanceof nt&&ot(e)){if(t.size!==e.size)return!1;for(var r in t.map)for(var n=t.map[r],i=0;i<n.length;i+=2)if(!N(n[i+1],e.get(n[i])))return!1;return!0}if(t instanceof et&&ot(e)){if(t.size!==e.size)return!1;for(r=t.l,i=0;i<r.length;i+=2)if(!N(r[i+1],e.get(r[i])))return!1;return!0}if(null!=e&&"object"==typeof e&&(i=oe(e),r=i.length,t.size===r)){for(n=0;n<r;n++){var a=i[n];if(!t.has(a)||!N(e[a],t.get(a)))return!1}return!0}return!1}function J(e){return null==e?"null":"array"==t(e)?"["+e.toString()+"]":"string"==typeof e?'"'+e+'"':e.toString()}function $(t){var e=0,r="TransitMap {";return t.forEach(function(n,i){r+=J(i)+" => "+J(n),e<t.size-1&&(r+=", "),e++}),r+"}"}function tt(t){var e=0,r="TransitSet {";return t.forEach(function(n){r+=J(n),e<t.size-1&&(r+=", "),e++}),r+"}"}function et(t){this.l=t,this.h=null,this.a=-1,this.size=t.length/2,this.g=0}function rt(t){if(t.h)throw Error("Invalid operation, already converted");return!(8>t.size)&&(32<++t.g&&(t.h=at(t.l,!1,!0),t.l=[],!0))}function nt(t,e,r){this.map=e||{},this.a=t||[],this.size=r||0,this.g=-1}function it(t){return null!=t.a?t.a:oe(t.map)}function at(t,e,r){if(t=t||[],e=!1!==e||e,(!0!==r||!r)&&64>=t.length){if(e){var n=t;for(t=[],e=0;e<n.length;e+=2){var i=!1;for(r=0;r<t.length;r+=2)if(N(t[r],n[e])){t[r+1]=n[e+1],i=!0;break}i||(t.push(n[e]),t.push(n[e+1]))}}return new et(t)}var n={},i=[],a=0;for(e=0;e<t.length;e+=2){r=O(t[e]);var o=n[r];if(null==o)i.push(r),n[r]=[t[e],t[e+1]],a++;else{var s=!0;for(r=0;r<o.length;r+=2)if(N(o[r],t[e])){o[r+1]=t[e+1],s=!1;break}s&&(o.push(t[e]),o.push(t[e+1]),a++)}}return new nt(i,n,a)}function ot(t){return t instanceof et||t instanceof nt}function st(t){this.map=t,this.size=t.size}function ut(t){t=t||[];for(var e={},r=[],n=0,i=0;i<t.length;i++){var a=O(t[i]),o=e[a];if(null==o)r.push(a),e[a]=[t[i],t[i]],n++;else{for(var a=!0,s=0;s<o.length;s+=2)if(N(o[s],t[i])){a=!1;break}a&&(o.push(t[i]),o.push(t[i]),n++)}}return new st(new nt(r,e,n))}function lt(t){return z("'",t)}function ct(t){return z("list",t)}function ht(t){return z("link",t)}function ft(t){if(null==t)return"null";if(t===String)return"string";if(t===Boolean)return"boolean";if(t===Number)return"number";if(t===Array)return"array";if(t===Object)return"map";var e=t[me];return null==e&&(void 0!==Object.defineProperty?(e=++pe,Object.defineProperty(t,me,{value:e,enumerable:!1})):t[me]=e=++pe),e}function dt(t,e){for(var r=t.toString(),n=r.length;n<e;n++)r="0"+r;return r}function pt(){}function mt(){}function gt(){}function vt(){}function yt(){}function Mt(){}function wt(){}function xt(){}function bt(){}function Tt(){}function Et(){}function St(){}function _t(){}function At(){}function Dt(){}function Nt(){}function It(){}function Lt(){}function Ct(){this.A={},this.set(null,new pt),this.set(String,new mt),this.set(Number,new gt),this.set(n,new vt),this.set(Boolean,new yt),this.set(Array,new Mt),this.set(Object,new wt),this.set(Date,new bt),this.set(Y,new Tt),this.set(B,new Et),this.set(F,new St),this.set(R,new _t),this.set(st,new At),this.set(et,new Dt),this.set(nt,new Nt),void 0!==e&&this.set(e,new It),"undefined"!=typeof Uint8Array&&this.set(Uint8Array,new Lt)}function Ot(t){this.K=t}function Rt(t){this.o=t||{},this.A={};for(var e in this.G.A)this.A[e]=this.G.A[e];for(e in this.o.handlers){t:{switch(e){case"_":case"s":case"?":case"i":case"d":case"b":case"'":case"array":case"map":t=!0;break t}t=!1}if(t)throw Error('Cannot override handler for ground type "'+e+'"');this.A[e]=this.o.handlers[e]}this.J=null!=this.o.preferStrings?this.o.preferStrings:this.G.J,this.O=null!=this.o.preferBuffers?this.o.preferBuffers:this.G.O,this.M=this.o.defaultHandler||this.G.M,this.g=this.o.mapBuilder,this.F=this.o.arrayBuilder}function zt(t,e,r,n,i){if(i){var a=[];for(i=0;i<e.length;i++)a.push(t.a(e[i],r,n,!1));return a}if(a=r&&r.s,2===e.length&&"string"==typeof e[0]&&(i=t.a(e[0],r,!1,!1))&&i instanceof Ot)return e=e[1],a=t.A[i.K],null!=a?a=a(t.a(e,r,n,!0),t):z(i.K,t.a(e,r,n,!1));if(r&&a!=r.s&&(r.s=a),t.F){if(32>=e.length&&t.F.fromArray){for(a=[],i=0;i<e.length;i++)a.push(t.a(e[i],r,n,!1));return t.F.fromArray(a,e)}for(a=t.F.init(e),i=0;i<e.length;i++)a=t.F.add(a,t.a(e[i],r,n,!1),e);return t.F.finalize(a,e)}for(a=[],i=0;i<e.length;i++)a.push(t.a(e[i],r,n,!1));return a}function jt(t,e){if("~"===e.charAt(0)){var r=e.charAt(1);if("~"===r||"^"===r||"`"===r)return e.substring(1);if("#"===r)return new Ot(e.substring(2));var n=t.A[r];return null==n?t.M(r,e.substring(2)):n(e.substring(2),t)}return e}function Pt(t){this.a=new Rt(t)}function Ut(t,e){this.o=t,this.g=e||{},this.a=this.g.cache?this.g.cache:new _}function Bt(t){if(this.a=t||{},this.J=null==this.a.preferStrings||this.a.preferStrings,this.S=this.a.objectBuilder||null,this.A=new Ct,t=this.a.handlers){if(se(t)||!t.forEach)throw Error('transit writer "handlers" option must be a map');var e=this;t.forEach(function(t,r){if(void 0===r)throw Error("Cannot create handler for JavaScript undefined");e.A.set(r,t)})}this.H=this.a.handlerForForeign,this.L=this.a.unpack||function(t){return t instanceof et&&null===t.h&&t.l},this.I=this.a&&this.a.verbose||!1}function Vt(t,e){var r=t.A.get(null==e?null:e.constructor);return null!=r?r:(r=e&&e.transitTag)?t.A.get(r):null}function Ft(t,e,r,n,i){return t=t+e+r,i?i.write(t,n):t}function kt(t,e,r){var n=[];if(se(e))for(var i=0;i<e.length;i++)n.push(Wt(t,e[i],!1,r));else e.forEach(function(e){n.push(Wt(t,e,!1,r))});return n}function Gt(t,e){if("string"!=typeof e){var r=Vt(t,e);return r&&1===r.tag(e).length}return!0}function Yt(t,e){var r=t.L(e),n=!0;if(r){for(var i=0;i<r.length&&(n=Gt(t,r[i]));i+=2);return n}if(e.keys&&(r=e.keys(),i=null,r.next)){for(i=r.next();!i.done&&(n=Gt(t,i.value));)i=r.next();return n}if(e.forEach)return e.forEach(function(e,r){n=n&&Gt(t,r)}),n;throw Error("Cannot walk keys of object type "+(null==e?null:e.constructor).name)}function Ht(t){if(t.constructor.transit$isObject)return!0;var e=t.constructor.toString(),e=e.substr(9),e=e.substr(0,e.indexOf("(")),e="Object"==e;return void 0!==Object.defineProperty?Object.defineProperty(t.constructor,"transit$isObject",{value:e,enumerable:!1}):t.constructor.transit$isObject=e,e}function Qt(t,e,r){if(e.constructor===Object||null!=e.forEach||t.H&&Ht(e)){if(t.I){if(null!=e.forEach){if(Yt(t,e)){var n={};return e.forEach(function(e,i){n[Wt(t,i,!0,!1)]=Wt(t,e,!1,r)}),n}var i=t.L(e),a=[],o=Ft("~#","cmap","",!0,r);if(i)for(var s=0;s<i.length;s+=2)a.push(Wt(t,i[s],!0,!1)),a.push(Wt(t,i[s+1],!1,r));else e.forEach(function(e,n){a.push(Wt(t,n,!0,!1)),a.push(Wt(t,e,!1,r))});return n={},n[o]=a,n}for(n={},i=oe(e),s=0;s<i.length;s++)n[Wt(t,i[s],!0,!1)]=Wt(t,e[i[s]],!1,r);return n}if(null!=e.forEach){if(Yt(t,e)){if(i=t.L(e),n=["^ "],i)for(s=0;s<i.length;s+=2)n.push(Wt(t,i[s],!0,r)),n.push(Wt(t,i[s+1],!1,r));else e.forEach(function(e,i){n.push(Wt(t,i,!0,r)),n.push(Wt(t,e,!1,r))});return n}if(i=t.L(e),a=[],o=Ft("~#","cmap","",!0,r),i)for(s=0;s<i.length;s+=2)a.push(Wt(t,i[s],!0,r)),a.push(Wt(t,i[s+1],!1,r));else e.forEach(function(e,n){a.push(Wt(t,n,!0,r)),a.push(Wt(t,e,!1,r))});return[o,a]}for(n=["^ "],i=oe(e),s=0;s<i.length;s++)n.push(Wt(t,i[s],!0,r)),n.push(Wt(t,e[i[s]],!1,r));return n}if(null!=t.S)return t.S(e,function(e){return Wt(t,e,!0,r)},function(e){return Wt(t,e,!1,r)});throw s=(null==e?null:e.constructor).name,i=Error("Cannot write "+s),i.data={N:e,type:s},i}function Wt(t,e,r,i){var a=Vt(t,e)||(t.H?t.H(e,t.A):null),o=a?a.tag(e):null,s=a?a.rep(e):null;if(null==a||null==o)throw i=(null==e?null:e.constructor).name,t=Error("Cannot write "+i),t.data={N:e,type:i},t;switch(o){case"_":return r?Ft("~","_","",r,i):null;case"s":return 0<s.length?(t=s.charAt(0),t="~"===t||"^"===t||"`"===t?"~"+s:s):t=s,Ft("","",t,r,i);case"?":return r?Ft("~","?",s.toString()[0],r,i):s;case"i":return 1/0===s?Ft("~","z","INF",r,i):-1/0===s?Ft("~","z","-INF",r,i):isNaN(s)?Ft("~","z","NaN",r,i):r||"string"==typeof s||s instanceof n?Ft("~","i",s.toString(),r,i):s;case"d":return r?Ft(s.T,"d",s,r,i):s;case"b":return Ft("~","b",s,r,i);case"'":return t.I?(e={},r=Ft("~#","'","",!0,i),e[r]=Wt(t,s,!1,i),i=e):i=[Ft("~#","'","",!0,i),Wt(t,s,!1,i)],i;case"array":return kt(t,s,i);case"map":return Qt(t,s,i);default:t:{if(1===o.length){if("string"==typeof s){i=Ft("~",o,s,r,i);break t}if(r||t.J){if((t=t.I&&a.R())?(o=t.tag(e),s=t.B(e,t)):s=a.B(e,a),null!==s){i=Ft("~",o,s,r,i);break t}throw i=Error('Tag "'+o+'" cannot be encoded as string'),i.data={tag:o,rep:s,N:e},i}}e=o,r=s,t.I?(s={},s[Ft("~#",e,"",!0,i)]=Wt(t,r,!1,i),i=s):i=[Ft("~#",e,"",!0,i),Wt(t,r,!1,i)]}return i}}function Xt(t,e){var r=Vt(t,e)||(t.H?t.H(e,t.A):null);if(null!=r)return 1===r.tag(e).length?lt(e):e;var r=(null==e?null:e.constructor).name,n=Error("Cannot write "+r);throw n.data={N:e,type:r},n}function qt(t,e){this.a=t,this.o=e||{},!1===this.o.cache?this.g=null:this.g=this.o.cache?this.o.cache:new S}var Zt,Kt,Jt,$t,te,ee,re=this,ne={},ie=4294967296,ae=ie*ie/2;n.prototype.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(p(this))return"0";if(0>this.j){if(m(this,h())){var e=a(t),r=w(this,e),e=y(M(r,e),this);return r.toString(t)+e.v.toString(t)}return"-"+v(this).toString(t)}for(var r=a(Math.pow(t,6)),e=this,n="";;){var i=w(e,r),o=y(e,M(i,r)).v.toString(t),e=i;if(p(e))return o+n;for(;6>o.length;)o="0"+o;n=""+o+n}},n.prototype.add=function(t){var e,r=this.j>>>16,n=65535&this.j,i=this.v>>>16,a=t.j>>>16,s=65535&t.j,u=t.v>>>16;return e=(65535&this.v)+(65535&t.v)+0,t=0+(e>>>16),t+=i+u,i=0+(t>>>16),i+=n+s,n=0+(i>>>16),n=n+(r+a)&65535,o((65535&t)<<16|65535&e,n<<16|65535&i)},S.prototype.write=function(t,e){if(T(t,e)){1936===this.s&&this.clear();var r=this.g[t];return null==r?(this.g[t]=[E(this.s),this.a],this.s++,t):r[1]!=this.a?(r[1]=this.a,r[0]=E(this.s),this.s++,t):r[0]}return t},S.prototype.clear=function(){this.s=0,this.a++},_.prototype.write=function(t){return 1936==this.s&&(this.s=0),this.a[this.s]=t,this.s++,t},_.prototype.P=function(t){return this.a[2===t.length?t.charCodeAt(1)-48:44*(t.charCodeAt(1)-48)+(t.charCodeAt(2)-48)]},_.prototype.clear=function(){this.s=0};var oe=void 0!==Object.keys?function(t){return Object.keys(t)}:function(t){var e,r=[],n=0;for(e in t)r[n++]=e;return r},se=void 0!==Array.isArray?function(t){return Array.isArray(t)}:function(e){return"array"===t(e)},ue=1,le={},ce=0,he="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";R.prototype.toString=function(){return"[TaggedValue: "+this.tag+", "+this.rep+"]"},R.prototype.g=function(t){return N(this,t)},R.prototype.equiv=R.prototype.g,R.prototype.C=function(t){return t instanceof R&&(this.tag===t.tag&&N(this.rep,t.rep))},R.prototype.D=function(){return-1===this.a&&(this.a=I(O(this.tag),O(this.rep))),this.a};var fe=s("9007199254740991"),de=s("-9007199254740991");n.prototype.a=function(t){return N(this,t)},n.prototype.equiv=n.prototype.a,n.prototype.C=function(t){return t instanceof n&&m(this,t)},n.prototype.D=function(){return this.v},B.prototype.toString=function(){return":"+this.w},B.prototype.namespace=function(){var t=this.w.indexOf("/");return-1!=t?this.w.substring(0,t):null},B.prototype.name=function(){var t=this.w.indexOf("/");return-1!=t?this.w.substring(t+1,this.w.length):this.w},B.prototype.g=function(t){return N(this,t)},B.prototype.equiv=B.prototype.g,B.prototype.C=function(t){return t instanceof B&&this.w==t.w},B.prototype.D=function(){return-1===this.a&&(this.a=O(this.w)),this.a},F.prototype.namespace=function(){var t=this.w.indexOf("/");return-1!=t?this.w.substring(0,t):null},F.prototype.name=function(){var t=this.w.indexOf("/");return-1!=t?this.w.substring(t+1,this.w.length):this.w},F.prototype.toString=function(){return this.w},F.prototype.g=function(t){return N(this,t)},F.prototype.equiv=F.prototype.g,F.prototype.C=function(t){return t instanceof F&&this.w==t.w},F.prototype.D=function(){return-1===this.a&&(this.a=O(this.w)),this.a},Y.prototype.toString=function(){var t,e=this.g,r=this.o;return t=G(e,0,4)+"-",t+=G(e,4,6)+"-",t+=G(e,6,8)+"-",t+=G(r,0,2)+"-",t+=G(r,2,8)},Y.prototype.F=function(t){return N(this,t)},Y.prototype.equiv=Y.prototype.F,Y.prototype.C=function(t){return t instanceof Y&&m(this.g,t.g)&&m(this.o,t.o)},Y.prototype.D=function(){return-1===this.a&&(this.a=O(this.toString())),this.a},Date.prototype.C=function(t){return t instanceof Date&&this.valueOf()===t.valueOf()},Date.prototype.D=function(){return this.valueOf()},q.prototype.next=function(){if(this.s<this.a.length){var t=null;return t=0===this.type?this.a[this.s]:1===this.type?this.a[this.s+1]:[this.a[this.s],this.a[this.s+1]],t={value:t,done:!1},this.s+=2,t}return{value:null,done:!0}},q.prototype.next=q.prototype.next,q.prototype[he]=function(){return this},Z.prototype.next=function(){if(this.s<this.map.size){null!=this.g&&this.a<this.g.length||(this.g=this.map.map[this.keys[this.s]],this.a=0);var t=null;return t=0===this.type?this.g[this.a]:1===this.type?this.g[this.a+1]:[this.g[this.a],this.g[this.a+1]],t={value:t,done:!1},this.s++,this.a+=2,t}return{value:null,done:!0}},Z.prototype.next=Z.prototype.next,Z.prototype[he]=function(){return this},et.prototype.toString=function(){return $(this)},et.prototype.inspect=function(){return this.toString()},et.prototype.clear=function(){this.a=-1,this.h?this.h.clear():this.l=[],this.size=0},et.prototype.clear=et.prototype.clear,et.prototype.keys=function(){return this.h?this.h.keys():new q(this.l,0)},et.prototype.keys=et.prototype.keys,et.prototype.o=function(){if(this.h)return this.h.o();for(var t=[],e=0,r=0;r<this.l.length;e++,r+=2)t[e]=this.l[r];return t},et.prototype.keySet=et.prototype.o,et.prototype.entries=function(){return this.h?this.h.entries():new q(this.l,2)},et.prototype.entries=et.prototype.entries,et.prototype.values=function(){return this.h?this.h.values():new q(this.l,1)},et.prototype.values=et.prototype.values,et.prototype.forEach=function(t){if(this.h)this.h.forEach(t);else for(var e=0;e<this.l.length;e+=2)t(this.l[e+1],this.l[e])},et.prototype.forEach=et.prototype.forEach,et.prototype.get=function(t,e){if(this.h)return this.h.get(t);if(rt(this))return this.get(t);for(var r=0;r<this.l.length;r+=2)if(N(this.l[r],t))return this.l[r+1];return e},et.prototype.get=et.prototype.get,et.prototype.has=function(t){if(this.h)return this.h.has(t);if(rt(this))return this.has(t);for(var e=0;e<this.l.length;e+=2)if(N(this.l[e],t))return!0;return!1},et.prototype.has=et.prototype.has,et.prototype.set=function(t,e){if(this.a=-1,this.h)this.h.set(t,e),this.size=this.h.size;else{for(var r=0;r<this.l.length;r+=2)if(N(this.l[r],t))return void(this.l[r+1]=e);this.l.push(t),this.l.push(e),this.size++,32<this.size&&(this.h=at(this.l,!1,!0),this.l=null)}},et.prototype.set=et.prototype.set,et.prototype.delete=function(t){if(this.a=-1,this.h)return t=this.h.delete(t),this.size=this.h.size,t;for(var e=0;e<this.l.length;e+=2)if(N(this.l[e],t))return t=this.l[e+1],this.l.splice(e,2),this.size--,t},et.prototype.clone=function(){var t=at();return this.forEach(function(e,r){t.set(r,e)}),t},et.prototype.clone=et.prototype.clone,et.prototype[he]=function(){return this.entries()},et.prototype.D=function(){return this.h?this.h.D():(-1===this.a&&(this.a=L(this)),this.a)},et.prototype.C=function(t){return this.h?K(this.h,t):K(this,t)},nt.prototype.toString=function(){return $(this)},nt.prototype.inspect=function(){return this.toString()},nt.prototype.clear=function(){this.g=-1,this.map={},this.a=[],this.size=0},nt.prototype.clear=nt.prototype.clear,nt.prototype.delete=function(t){this.g=-1,this.a=null;for(var e=O(t),r=this.map[e],n=0;n<r.length;n+=2)if(N(t,r[n]))return t=r[n+1],r.splice(n,2),0===r.length&&delete this.map[e],this.size--,t},nt.prototype.entries=function(){return new Z(this,2)},nt.prototype.entries=nt.prototype.entries,nt.prototype.forEach=function(t){for(var e=it(this),r=0;r<e.length;r++)for(var n=this.map[e[r]],i=0;i<n.length;i+=2)t(n[i+1],n[i],this)},nt.prototype.forEach=nt.prototype.forEach,nt.prototype.get=function(t,e){var r=O(t),r=this.map[r];if(null==r)return e;for(var n=0;n<r.length;n+=2)if(N(t,r[n]))return r[n+1]},nt.prototype.get=nt.prototype.get,nt.prototype.has=function(t){var e=O(t),e=this.map[e];if(null!=e)for(var r=0;r<e.length;r+=2)if(N(t,e[r]))return!0;return!1},nt.prototype.has=nt.prototype.has,nt.prototype.keys=function(){return new Z(this,0)},nt.prototype.keys=nt.prototype.keys,nt.prototype.o=function(){for(var t=it(this),e=[],r=0;r<t.length;r++)for(var n=this.map[t[r]],i=0;i<n.length;i+=2)e.push(n[i]);return e},nt.prototype.keySet=nt.prototype.o,nt.prototype.set=function(t,e){this.g=-1;var r=O(t),n=this.map[r];if(null==n)this.a&&this.a.push(r),this.map[r]=[t,e],this.size++;else{for(var r=!0,i=0;i<n.length;i+=2)if(N(e,n[i])){r=!1,n[i]=e;break}r&&(n.push(t),n.push(e),this.size++)}},nt.prototype.set=nt.prototype.set,nt.prototype.values=function(){return new Z(this,1)},nt.prototype.values=nt.prototype.values,nt.prototype.clone=function(){var t=at();return this.forEach(function(e,r){t.set(r,e)}),t},nt.prototype.clone=nt.prototype.clone,nt.prototype[he]=function(){return this.entries()},nt.prototype.D=function(){return-1===this.g&&(this.g=L(this)),this.g},nt.prototype.C=function(t){return K(this,t)},st.prototype.toString=function(){return tt(this)},st.prototype.inspect=function(){return this.toString()},st.prototype.add=function(t){this.map.set(t,t),this.size=this.map.size},st.prototype.add=st.prototype.add,st.prototype.clear=function(){this.map=new nt,this.size=0},st.prototype.clear=st.prototype.clear,st.prototype.delete=function(t){return t=this.map.delete(t),this.size=this.map.size,t},st.prototype.g=function(){return this.map.entries()},st.prototype.entries=st.prototype.g,st.prototype.forEach=function(t){var e=this;this.map.forEach(function(r,n){t(n,e)})},st.prototype.forEach=st.prototype.forEach,st.prototype.has=function(t){return this.map.has(t)},st.prototype.has=st.prototype.has,st.prototype.keys=function(){return this.map.keys()},st.prototype.keys=st.prototype.keys,st.prototype.o=function(){return this.map.o()},st.prototype.keySet=st.prototype.o,st.prototype.a=function(){return this.map.values()},st.prototype.values=st.prototype.a,st.prototype.clone=function(){var t=ut();return this.forEach(function(e){t.add(e)}),t},st.prototype.clone=st.prototype.clone,st.prototype[he]=function(){return this.a()},st.prototype.C=function(t){return t instanceof st&&(this.size===t.size?N(this.map,t.map):void 0)},st.prototype.D=function(){return O(this.map)};var pe=0,me="transit$guid$"+D();pt.prototype.tag=function(){return"_"},pt.prototype.rep=function(){return null},pt.prototype.B=function(){return"null"},mt.prototype.tag=function(){return"s"},mt.prototype.rep=function(t){return t},mt.prototype.B=function(t){return t},gt.prototype.tag=function(){return"i"},gt.prototype.rep=function(t){return t},gt.prototype.B=function(t){return t.toString()},vt.prototype.tag=function(){return"i"},vt.prototype.rep=function(t){return t.toString()},vt.prototype.B=function(t){return t.toString()},yt.prototype.tag=function(){return"?"},yt.prototype.rep=function(t){return t},yt.prototype.B=function(t){return t.toString()},Mt.prototype.tag=function(){return"array"},Mt.prototype.rep=function(t){return t},Mt.prototype.B=function(){return null},wt.prototype.tag=function(){return"map"},wt.prototype.rep=function(t){return t},wt.prototype.B=function(){return null},xt.prototype.tag=function(){return"t"},xt.prototype.rep=function(t){return t.getUTCFullYear()+"-"+dt(t.getUTCMonth()+1,2)+"-"+dt(t.getUTCDate(),2)+"T"+dt(t.getUTCHours(),2)+":"+dt(t.getUTCMinutes(),2)+":"+dt(t.getUTCSeconds(),2)+"."+dt(t.getUTCMilliseconds(),3)+"Z"},xt.prototype.B=function(t,e){return e.rep(t)},bt.prototype.tag=function(){return"m"},bt.prototype.rep=function(t){return t.valueOf()},bt.prototype.B=function(t){return t.valueOf().toString()},bt.prototype.R=function(){return new xt},Tt.prototype.tag=function(){return"u"},Tt.prototype.rep=function(t){return t.toString()},Tt.prototype.B=function(t){return t.toString()},Et.prototype.tag=function(){return":"},Et.prototype.rep=function(t){return t.w},Et.prototype.B=function(t,e){return e.rep(t)},St.prototype.tag=function(){return"$"},St.prototype.rep=function(t){return t.w},St.prototype.B=function(t,e){return e.rep(t)},_t.prototype.tag=function(t){return t.tag},_t.prototype.rep=function(t){return t.rep},_t.prototype.B=function(){return null},At.prototype.tag=function(){return"set"},At.prototype.rep=function(t){var e=[];return t.forEach(function(t){e.push(t)}),z("array",e)},At.prototype.B=function(){return null},Dt.prototype.tag=function(){return"map"},Dt.prototype.rep=function(t){return t},Dt.prototype.B=function(){return null},Nt.prototype.tag=function(){return"map"},Nt.prototype.rep=function(t){return t},Nt.prototype.B=function(){return null},It.prototype.tag=function(){return"b"},It.prototype.rep=function(t){return t.toString("base64")},It.prototype.B=function(){return null},Lt.prototype.tag=function(){return"b"},Lt.prototype.rep=function(t){for(var e=0,r=t.length,n="",i=null;e<r;)i=t.subarray(e,Math.min(e+32768,r)),n+=String.fromCharCode.apply(null,i),e+=32768;var a;if("undefined"!=typeof btoa)a=btoa(n);else{for(t=String(n),r=0,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="";t.charAt(0|r)||(n="=",r%1);i+=n.charAt(63&a>>8-r%1*8)){if(255<(e=t.charCodeAt(r+=.75)))throw Error("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");a=a<<8|e}a=i}return a},Lt.prototype.B=function(){return null},Ct.prototype.get=function(t){var e=null,e="string"==typeof t?this.A[t]:this.A[ft(t)];return null!=e?e:this.A.default},Ct.prototype.get=Ct.prototype.get,Ct.prototype.set=function(t,e){var r;if(r="string"==typeof t)t:{switch(t){case"null":case"string":case"boolean":case"number":case"array":case"map":r=!1;break t}r=!0}r?this.A[t]=e:this.A[ft(t)]=e},Rt.prototype.G={A:{_:function(){return null},"?":function(t){return"t"===t},b:function(t,e){return W(t,e)},i:function(t){return j(t)},n:function(t){return P(t)},d:function(t){return parseFloat(t)},f:function(t){return U(t)},c:function(t){return t},":":function(t){return V(t)},$:function(t){return k(t)},r:function(t){return X(t)},z:function(t){t:switch(t){case"-INF":t=-1/0;break t;case"INF":t=1/0;break t;case"NaN":t=NaN;break t;default:throw Error("Invalid special double value "+t)}return t},"'":function(t){return t},m:function(t){return Q(t)},t:function(t){return new Date(t)},u:function(t){return H(t)},set:function(t){return ut(t)},list:function(t){return ct(t)},link:function(t){return ht(t)},cmap:function(t){return at(t,!1)}},M:function(t,e){return z(t,e)},J:!0,O:!0},Rt.prototype.a=function(t,e,r,n){if(null==t)return null;switch(typeof t){case"string":return T(t,r)?(t=jt(this,t),e&&e.write(t,r),e=t):e="^"===t.charAt(0)&&" "!==t.charAt(1)?e.P(t,r):jt(this,t),e;case"object":if(se(t))if("^ "===t[0])if(this.g)if(17>t.length&&this.g.fromArray){for(n=[],r=1;r<t.length;r+=2)n.push(this.a(t[r],e,!0,!1)),n.push(this.a(t[r+1],e,!1,!1));e=this.g.fromArray(n,t)}else{for(n=this.g.init(t),r=1;r<t.length;r+=2)n=this.g.add(n,this.a(t[r],e,!0,!1),this.a(t[r+1],e,!1,!1),t);e=this.g.finalize(n,t)}else{for(n=[],r=1;r<t.length;r+=2)n.push(this.a(t[r],e,!0,!1)),n.push(this.a(t[r+1],e,!1,!1));e=at(n,!1)}else e=zt(this,t,e,r,n);else{r=oe(t);var i=r[0];if((n=1==r.length?this.a(i,e,!1,!1):null)&&n instanceof Ot)t=t[i],r=this.A[n.K],e=null!=r?r(this.a(t,e,!1,!0),this):z(n.K,this.a(t,e,!1,!1));else if(this.g)if(16>r.length&&this.g.fromArray){var a=[];for(n=0;n<r.length;n++)i=r[n],a.push(this.a(i,e,!0,!1)),a.push(this.a(t[i],e,!1,!1));e=this.g.fromArray(a,t)}else{for(a=this.g.init(t),n=0;n<r.length;n++)i=r[n],a=this.g.add(a,this.a(i,e,!0,!1),this.a(t[i],e,!1,!1),t);e=this.g.finalize(a,t)}else{for(a=[],n=0;n<r.length;n++)i=r[n],a.push(this.a(i,e,!0,!1)),a.push(this.a(t[i],e,!1,!1));e=at(a,!1)}}return e}return t},Rt.prototype.decode=Rt.prototype.a,Ut.prototype.P=function(t){var e=this.a;return t=this.o.a.a(JSON.parse(t),e),this.a.clear(),t},Ut.prototype.read=Ut.prototype.P,qt.prototype.G=function(){return this.a},qt.prototype.marshaller=qt.prototype.G,qt.prototype.write=function(t,e){var r=null,n=e||{},r=n.asMapKey||!1,i=!this.a.I&&this.g;return!1===n.marshalTop?r=Wt(this.a,t,r,i):(n=this.a,r=JSON.stringify(Wt(n,Xt(n,t),r,i))),null!=this.g&&this.g.clear(),r},qt.prototype.write=qt.prototype.write,qt.prototype.F=function(t,e){this.a.A.set(t,e)},qt.prototype.register=qt.prototype.F;var ge=at;r("transit.reader",function(t,e){if("json"===t||"json-verbose"===t||null==t){return new Ut(new Pt(e),e)}throw Error("Cannot create reader of type "+t)}),r("transit.writer",function(t,e){if("json"===t||"json-verbose"===t||null==t){"json-verbose"===t&&(null==e&&(e={}),e.verbose=!0);var r=new Bt(e);return new qt(r,e)}throw r=Error('Type must be "json"'),r.data={type:t},r}),r("transit.makeBuilder",function(t){function e(){}return e.prototype.init=t.init,e.prototype.add=t.add,e.prototype.finalize=t.finalize,e.prototype.fromArray=t.fromArray,new e}),r("transit.makeWriteHandler",function(t){function e(){}return e.prototype.tag=t.tag,e.prototype.rep=t.rep,e.prototype.B=t.stringRep,e.prototype.R=t.getVerboseHandler,new e}),r("transit.date",Q),r("transit.integer",j),r("transit.isInteger",function(t){return t instanceof n||"number"==typeof t&&!isNaN(t)&&1/0!==t&&parseFloat(t)===parseInt(t,10)}),r("transit.uuid",function(t){return H(t)}),r("transit.isUUID",function(t){return t instanceof Y}),r("transit.bigInt",P),r("transit.isBigInt",function(t){return t instanceof R&&"n"===t.tag}),r("transit.bigDec",U),r("transit.isBigDec",function(t){return t instanceof R&&"f"===t.tag}),r("transit.keyword",V),r("transit.isKeyword",function(t){return t instanceof B}),r("transit.symbol",k),r("transit.isSymbol",function(t){return t instanceof F}),r("transit.binary",W),r("transit.isBinary",function(t){return void 0!==e&&t instanceof e||("undefined"!=typeof Uint8Array&&t instanceof Uint8Array||t instanceof R&&"b"===t.tag)}),r("transit.uri",X),r("transit.isURI",function(t){return t instanceof R&&"r"===t.tag}),r("transit.map",at),r("transit.isMap",ot),r("transit.set",ut),r("transit.isSet",function(t){return t instanceof st}),r("transit.list",ct),r("transit.isList",function(t){return t instanceof R&&"list"===t.tag}),r("transit.quoted",lt),r("transit.isQuoted",function(t){return t instanceof R&&"'"===t.tag}),r("transit.tagged",z),r("transit.isTaggedValue",function(t){return t instanceof R}),r("transit.link",ht),r("transit.isLink",function(t){return t instanceof R&&"link"===t.tag}),r("transit.hash",O),r("transit.hashMapLike",L),r("transit.hashArrayLike",C),r("transit.equals",N),r("transit.extendToEQ",function(t,e){return t.D=e.hashCode,t.C=e.equals,t}),r("transit.mapToObject",function(t){var e={};return t.forEach(function(t,r){if("string"!=typeof r)throw Error("Cannot convert map with non-string keys");e[r]=t}),e}),r("transit.objectToMap",function(t){var e,r=ge();for(e in t)t.hasOwnProperty(e)&&r.set(e,t[e]);return r}),r("transit.decoder",function(t){return new Rt(t)}),r("transit.UUIDfromString",H),r("transit.randomUUID",D),r("transit.stringableKeys",Yt),r("transit.readCache",function(){return new _}),r("transit.writeCache",function(){return new S})}(),t.exports=transit}).call(e,r(213).Buffer)},function(t,e){},function(t,e,r){t.exports=r(259)}])});